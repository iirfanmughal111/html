var XASC=window.XASC||{};
!function(g,k,h,l){XF.Inserter=XF.extend(XF.Inserter,{__backup:{_scApplyAppend:"__scApplyAppend"},_scApplyAppend:function(a,b,c){if(0>".js-yourItemsList .js-yourPagesList .js-yourSeriesList .js-browseItemsList .js-browsePagesList .js-browseSeriesList".split(" ").indexOf(a))this.__scApplyAppend(a,b,c);else{var e=b.find(".scItemList-item--placeholder"),d=c.children();e.length?(d.addClass("scItemList-item--placeholder--temp"),this.__scApplyAppend(a,b,c),setTimeout(function(){d.removeClass("scItemList-item--placeholder--temp");e.remove();
XF.layoutChange()},10)):this.__scApplyAppend(a,b,c)}}});XASC.editorButton={init:function(){XASC.editorButton.initializeDialog();XF.EditorHelpers.dialogs.showcase=new XASC.EditorDialogShowcase("showcase");g.FE.COMMANDS.xfCustom_showcase&&(g.FE.COMMANDS.xfCustom_showcase.callback=XASC.editorButton.callback)},initializeDialog:function(){XASC.EditorDialogShowcase=XF.extend(XF.EditorDialog,{cache:!1,$container:null,_init:function(a){a=a.$container;a.on("change",".js-itemsPicker",XF.proxy(this,"pick"));
this.$container=a;g("#xa_sc_editor_dialog_form").submit(XF.proxy(this,"submit"))},_afterShow:function(a){this.tabCounts={yourItems:0,yourPages:0,yourSeries:0,browseItems:0,browsePages:0,browseSeries:0}},pick:function(a){var b=this.$container.find(a.currentTarget);a=b.is(":checked");b=b.parent();a?this.checked(b):this.unchecked(b)},checked:function(a,b){a.addClass("is-selected");b=a.closest("ul > li.is-active");var c=this.$container.find(b.data("tab"));b=c.attr("id");c.hasClass("has-selected")||c.addClass("has-selected");
var e=this.$container.find(".js-embedValue"),d=JSON.parse(e.val()),f=a.data("type");a=a.data("id");a=f+"-"+a;d.hasOwnProperty(a)||(d[a]=1,a=c.find(".js-tabCounter"),this.tabCounts[b]+=1,a.text(this.tabCounts[b]),e.val(JSON.stringify(d)))},unchecked:function(a,b){a.removeClass("is-selected");b=a.closest("ul > li.is-active");b=this.$container.find(b.data("tab"));var c=b.attr("id"),e=this.$container.find(".js-embedValue"),d=JSON.parse(e.val()),f=a.data("type");a=a.data("id");a=f+"-"+a;d.hasOwnProperty(a)&&
(delete d[a],a=b.find(".js-tabCounter"),--this.tabCounts[c],this.tabCounts[c]?a.text(this.tabCounts[c]):(a.text(0),b.removeClass("has-selected")),e.val(JSON.stringify(d)))},submit:function(a){a.preventDefault();a=this.ed;var b=this.overlay,c=this.$container.find(".js-embedValue");c=JSON.parse(c.val());var e="",d;for(d in c)if(c.hasOwnProperty(d)){var f=d.split("-");e+=XF.htmlspecialchars("[SHOWCASE="+f[0]+", "+parseInt(f[1])+"][/SHOWCASE]");e+="<p><br></p>"}a.selection.restore();a.html.insert(e);
b.hide()}})},callback:function(){XF.EditorHelpers.loadDialog(this,"showcase")}};g(h).on("editor:first-start",XASC.editorButton.init)}(jQuery,window,document);