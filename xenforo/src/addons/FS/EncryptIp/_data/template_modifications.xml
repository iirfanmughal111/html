<?xml version="1.0" encoding="utf-8"?>
<template_modifications>
  <modification type="admin" template="ban_ip" modification_key="pass_ban_ip_in_decrypted_form" description="pass_ban_ip_in_decrypted_form" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:form action="{{ link('banning/ips/add', null, {'ip': $ip.ip}) }}" ajax="true" data-redirect="off" class="block">]]></find>
    <replace><![CDATA[<xf:set var="$decIp" value="{{ $xf.app.em.getRepository('XF:Ip')->getDecrytedIp($ip.ip) }}" />
<xf:form action="{{ link('banning/ips/add', null, {'ip': $decIp}) }}" ajax="true" data-redirect="off" class="block">]]></replace>
  </modification>
  <modification type="admin" template="discourage_ip" modification_key="pass_discoureged_ip_in_decrypted_form" description="pass_discoureged_ip_in_decrypted_form" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:form action="{{ link('banning/discouraged-ips/add', null, {'ip': $ip}) }}" ajax="true" data-redirect="off" class="block">]]></find>
    <replace><![CDATA[<xf:set var="$decIp" value="{{ $xf.app.em.getRepository('XF:Ip')->getDecrytedIp($ip) }}" />
<xf:form action="{{ link('banning/discouraged-ips/add', null, {'ip': $decIp}) }}" ajax="true" data-redirect="off" class="block">]]></replace>
  </modification>
  <modification type="public" template="member_ip_list" modification_key="remove_ip_filter_from_fromEntrires" description="remove_ip_filter_from_fromEntrires" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[/<xf:foreach loop="\$ips" value="\$ip">.*?<\/xf:foreach>/is]]></find>
    <replace><![CDATA[<xf:include template="member_user_ip_list_replace"/>]]></replace>
  </modification>
  <modification type="public" template="member_shared_ips_list" modification_key="remove_ip_filter_from_fromList" description="remove_ip_filter_from_fromList" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<li><a href="{{ link('misc/ip-info', '', {'ip': $ip.ip|ip}) }}" target="_blank">{$ip.ip|ip}</a></li>]]></find>
    <replace><![CDATA[<li><a href="{{ link('misc/ip-info', '', {'ip': $ip.ip}) }}" target="_blank">{$ip.ip}</a></li>]]></replace>
  </modification>
  <modification type="admin" template="user_ip_list" modification_key="fs_encrypt_ip_showUserIp" description="fs_encrypt_ip_showUserIp" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[/<xf:foreach loop="\$ips" value="\$ip">.*?<\/xf:foreach>/is]]></find>
    <replace><![CDATA[<xf:include template="user_ip_list_replace"/>]]></replace>
  </modification>
</template_modifications>
