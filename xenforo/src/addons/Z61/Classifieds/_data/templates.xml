<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="option_template_z61ClassifiedsListingDeleteThreadAction" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:formrow
	label="{$option.title}"
	hint="{$hintHtml}"
	html="{$listedHtml}">

	<xf:radio name="{$inputName}[action]" value="{$option.option_value.action}">
		<xf:option value="">{{ phrase('z61_classifieds_no_change') }}</xf:option>
		<xf:option value="delete">{{ phrase('delete_thread') }}</xf:option>
		<xf:option value="close">{{ phrase('close_thread') }}</xf:option>
	</xf:radio>
	<div class="formRow-explain">{$explainHtml}</div>

	<div class="u-inputSpacer">
		<xf:checkbox>
			<xf:option name="{$inputName}[update_title]" selected="{$option.option_value.update_title}"
				label="{{ phrase('z61_classifieds_update_thread_title_on_listing_deletion:') }}">

				<xf:textbox name="{$inputName}[title_template]" value="{$option.option_value.title_template}" />
			</xf:option>

			<xf:option name="{$inputName}[add_post]" selected="{$option.option_value.add_post}"
				label="{{ phrase('z61_classifieds_automatically_post_in_listing_thread_on_listing_deletion') }}"
				hint="{{ phrase('z61_classifieds_if_selected_post_made_automatically_explaining_listing_unavailable') }}" />
		</xf:checkbox>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="widget_def_options_classifieds_near_listings" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
	label="{{ phrase('display_style') }}">

	<xf:option value="simple"
		label="{{ phrase('simple') }}"
		hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="full"
		label="{{ phrase('full') }}"
		hint="{{ phrase('z61_classifieds_full_size_view_displaying_as_standard_classifieds_list') }}" />
</xf:radiorow>

<xf:numberboxrow name="options[distance]" value="{$options.distance}" min="1"
	label="{{ phrase('z61_classifieds_distance') }}" />
<xf:selectrow  name="options[distance_unit]" value="{$options.distance_unit}" label="{{ phrase('z61_classifieds_distance_unit') }}">
				<xf:option value="km" selected="{{$filters.address.distance_unit == 'km'}}">KM</xf:option>
				<xf:option value="mi" selected="{{$filters.address.distance_unit == 'mi'}}">MI</xf:option>
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_classifieds_new_listings" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
	label="{{ phrase('display_style') }}">

	<xf:option value="simple"
		label="{{ phrase('simple') }}"
		hint="{{ phrase('widget_display_simple_explain') }}" />
	<xf:option value="full"
		label="{{ phrase('full') }}"
		hint="{{ phrase('z61_classifieds_full_size_view_displaying_as_standard_classifieds_list') }}" />
</xf:radiorow>

<xf:selectrow name="options[category_ids][]" value="{{ $options.category_ids ?: 0 }}" multiple="multiple" size="7"
	label="{{ phrase('z61_classifieds_category_limit') }}">

	<xf:option value="0">{{ phrase('all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }}{$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>]]></template>
  <template type="admin" title="widget_def_options_classifieds_user_feedback" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />]]></template>
  <template type="admin" title="z61_classifieds" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds') }}</xf:title>

<xf:macro template="section_nav_macros" name="section_nav" arg-section="classifieds" />]]></template>
  <template type="admin" title="z61_classifieds_category_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:macro template="category_tree_macros" name="category_delete_form"
		  arg-linkPrefix="classifieds/categories"
		  arg-category="{$category}" />]]></template>
  <template type="admin" title="z61_classifieds_category_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$category.isInsert()">
	<xf:title>{{ phrase('add_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('edit_category:') }} {$category.title}</xf:title>
</xf:if>

<xf:pageaction if="$category.category_id">
	<xf:button href="{{ link('classifieds/categories/delete', $category) }}"
		icon="delete"
		data-xf-click="overlay" />
</xf:pageaction>

<xf:form action="{{ link('classifieds/categories/save', $category) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$category.title}"
				label="{{ phrase('title') }}" />

			<xf:textarearow name="description" value="{$category.description}" rows="2" autosize="true"
				label="{{ phrase('description') }}"
				hint="{{ phrase('you_may_use_html') }}" />

			<xf:macro template="category_tree_macros" name="parent_category_select_row"
				arg-category="{$category}"
				arg-categoryTree="{$categoryTree}" />

			<xf:macro template="display_order_macros" name="row"
					  arg-value="{$category.display_order}" />

			<xf:selectrow name="layout_type" value="{$category.layout_type}" id="js-classifiedsLayoutType"  label="{{ phrase('option.z61ClassifiedsListLayout') }}">
					<xf:option value="list_view" selected="{{ $category.layout_type == 'list_view' }}">{{ phrase('z61_classifieds_list_view_layout') }}</xf:option>
					<xf:option value="grid_view" selected="{{ $category.layout_type == 'grid_view' }}">{{ phrase('z61_classifieds_grid_view_layout') }}</xf:option>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="allow_paid" selected="{$category.allow_paid}"
						   label="{{ phrase('z61_classifieds_enable_prices') }}"
						   hint="{{ phrase('z61_classifieds_enable_listing_prices_explain') }}" />

				<xf:option name="location_enable" selected="{$category.location_enable}"
						   label="{{ phrase('z61_classifieds_allow_location') }}"
						   hint="{{ phrase('z61_classifieds_allow_location_explain') }}" />

				<xf:option name="moderate_listings" selected="$category.moderate_listings"
						   label="{{ phrase('z61_classifieds_moderate_new_listings_posted_in_this_category') }}"
						   hint="{{ phrase('z61_classifieds_if_enabled_moderator_manually_approve_listings_posted_in_category') }}" />

				<xf:option name="exclude_expired" selected="$category.exclude_expired"
						   label="{{ phrase('z61_classifieds_exclude_expired_listings_in_listing_count') }}"
						   hint="{{ phrase('z61_classifieds_exclude_expired_listings_in_listing_count_explain') }}" />

				<xf:option name="contact_conversation" selected="{$category.contact_conversation}"
						   label="{{ phrase('z61_classifieds_contact_listing_owner_by_conversation') }}"
						   hint="{{ phrase('z61_classifieds_contact_listing_owner_by_conversation_explain') }}" />

				<xf:option name="contact_email" selected="{$category.contact_email}"
						   label="{{ phrase('z61_classifieds_contact_listing_owner_by_email') }}"
						   hint="{{ phrase('z61_classifieds_contact_listing_owner_by_email_explain') }}" />

				<xf:option name="contact_custom" selected="{$category.contact_custom}"
						   label="{{ phrase('z61_classifieds_contact_listing_custom_field') }}"
						   hint="{{ phrase('z61_classifieds_contact_listing_custom_field_explain') }}" />

				<xf:option name="require_listing_image" selected="{$category.require_listing_image}"
						   label="{{ phrase('z61_classifieds_require_listing_image') }}"
						   hint="{{ phrase('z61_classifieds_require_listing_image_explain') }}" />
				<xf:option name="require_sold_user" selected="{$category.require_sold_user}"
						   label="{{ phrase('z61_classifieds_require_sold_user') }}"
						   hint="{{ phrase('z61_classifieds_require_sold_user_explain') }}" />
				<xf:option name="replace_forum_action_button" selected="{$category.replace_forum_action_button}"
						   label="{{ phrase('z61_classifieds_replace_forum_action_button') }}"
						   hint="{{ phrase('z61_classifieds_replace_forum_action_button_explain') }}" />
			</xf:checkboxrow>
			
			<xf:selectrow name="node_id" value="{$category.node_id}" id="js-classifiedsThreadNodeList"
				label="{{ phrase('z61_classifieds_automatically_create_thread_in_forum') }}">

				<xf:foreach loop="$nodes" key="$nodeId" value="$node">
					<xf:option value="{$node.value}" disabled="{{ $node.disabled }}" >{{ $node.label }}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:formrow label="{{ phrase('z61_classifieds_automatically_created_thread_prefix') }}" rowtype="input">
				<xf:js src="xf/prefix_menu.js" min="1" />
				<xf:macro template="public:prefix_macros" name="select"
					arg-type="thread"
					arg-prefixes="{$threadPrefixes}"
					arg-selected="{$category.thread_prefix_id}"
					arg-name="thread_prefix_id"
					arg-href="{{ link('forums/prefixes') }}"
					arg-listenTo="#js-classifiedsThreadNodeList" />
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="paid_feature_enable" selected="{$category.paid_feature_enable}"
					label="{{ phrase('z61_classifieds_enable_paid_features') }}" hint="{{ phrase('z61_classifieds_enable_paid_features_explain') }}">
					<xf:numberbox name="paid_feature_days" value="{$category.paid_feature_days}" label="TEST'"  />
				</xf:option>
			</xf:checkboxrow>

			<xf:formrow label="{{ phrase('z61_classifieds_feature_price') }}" explain="{{ phrase('z61_classifieds_feature_price_explain') }}">
				<div class="inputGroup">
					<xf:textbox name="price" value="{{ $category.price ?: '' }}" placeholder="{{ phrase('price') }}" style="width: 120px" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="currency" value="{$category.currency|to_upper}" style="width: 110px">
						<xf:foreach loop="$xf.app.em.getRepository('Z61\Classifieds:Listing').getAvailableCurrencies()" value="$currency">
							<xf:option value="{$currency.code}">{$currency.code}</xf:option>
						</xf:foreach>
					</xf:select>
				</div>
			</xf:formrow>

			<xf:checkboxrow name="payment_profile_ids" value="{$category.payment_profile_ids}"
							label="{{ phrase('payment_profile') }}">

				<xf:foreach loop="$profiles" key="$profileId" value="$profile">
					<xf:option value="{$profileId}" label="{{ $profile.Provider.title !== $profile.title ? $profile.Provider.title . ' - ' . $profile.title : $profile.Provider.title }}" />
				</xf:foreach>
			</xf:checkboxrow>

			<xf:if is="$listingTypes is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="listing_type_ids" value="{$category.listing_type_ids}"
								label="{{ phrase('z61_classifieds_allowed_types') }}"
								explain="{{ phrase('z61_classifieds_allowed_types_explain') }}">
					<xf:foreach loop="$listingTypes" key="$listingTypeId" value="$listingType">
						<xf:option value="{$listingTypeId}" label="{{ $listingType.title }}" checked="{{ in_array($listingType.listing_type_id, $category.listing_type_ids) }}" />
					</xf:foreach>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('z61_classifieds_allowed_types') }}">
					{{ phrase('none')|parens }} <a href="{{ link('classifieds/listing-types') }}" target="_blank">{{ phrase('z61_classifieds_add_type') }}</a>
				</xf:formrow>
			</xf:if>


			<xf:if is="$conditions is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="condition_ids" value="{$category.condition_ids}"
								label="{{ phrase('z61_classifieds_allowed_conditions') }}"
								explain="{{ phrase('z61_classifieds_allowed_conditions_explain')}}">
					<xf:foreach loop="$conditions" key="$conditionId" value="$condition">
						<xf:option value="{$conditionId}" label="{{ $condition.title }}" checked="{{ in_array($condition.condition_id, $category.condition_ids) }}" />
					</xf:foreach>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('z61_classifieds_allowed_listing_conditions') }}">
					{{ phrase('none')|parens }} <a href="{{ link('classifieds/conditions') }}" target="_blank">{{ phrase('z61_classifieds_add_condition') }}</a>
				</xf:formrow>
			</xf:if>

			<xf:if is="$packages is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="package_ids" value="{$category.package_ids}"
								label="{{ phrase('z61_classifieds_available_packages') }}"
								explain="{{ phrase('z61_classifieds_available_packages_explain') }}">
					<xf:foreach loop="$packages" key="$packageId" value="$package">
						<xf:option value="{$packageId}" label="{{ $package.title }}" checked="{{ in_array($package.package_id, $category.package_ids) }}" />
					</xf:foreach>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('z61_classifieds_available_packages') }}">
					{{ phrase('none')|parens }} <a href="{{ link('classifieds/packages') }}" target="_blank">{{ phrase('z61_classifieds_add_package') }}</a>
				</xf:formrow>
			</xf:if>
			<hr class="formRowSep" />
			<xf:formrow label="{{ phrase('z61_classifieds_quick_info_phrases') }}" explain="{{ phrase('z61_classifieds_quick_info_phrases_explain') }}">
						<div>{{ phrase('z61_classifieds_listing_type_phrase:') }}</div>
						<xf:textbox name="phrase_listing_type" value="{$category.phrase_listing_type}" required="required" />
						<div>{{ phrase('z61_classifieds_listing_condition_phrase:') }}</div>
						<xf:textbox name="phrase_listing_condition" value="{$category.phrase_listing_condition}" required="required" />
						<div>{{ phrase('z61_classifieds_listing_price_phrase:') }}</div>
						<xf:textbox name="phrase_listing_price" value="{$category.phrase_listing_price}" required="required" />

			</xf:formrow>

			<xf:if is="$availableFields is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_fields" value="{$category.field_cache}" listclass="field listColumns"
					label="{{ phrase('available_fields') }}">

					<xf:options source="$availableFields" />
					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".field.listColumns">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_fields') }}">
					{{ phrase('none')|parens }} <a href="{{ link('classifieds/fields') }}" target="_blank">{{ phrase('add_field') }}</a>
				</xf:formrow>
			</xf:if>

			<xf:if is="$availablePrefixes is not empty">
				<hr class="formRowSep" />

				<xf:checkboxrow name="available_prefixes" value="{$category.prefix_cache}" listclass="prefix listColumns"
					label="{{ phrase('available_prefixes') }}">

					<xf:options source="$availablePrefixes" />
					<xf:hint>
						<xf:checkbox standalone="true">
							<xf:option check-all=".prefix.listColumns">{{ phrase('select_all') }}</xf:option>
						</xf:checkbox>
					</xf:hint>
				</xf:checkboxrow>
			<xf:else />
				<hr class="formRowSep" />

				<xf:formrow label="{{ phrase('available_prefixes') }}">
					{{ phrase('none')|parens }} <a href="{{ link('classifieds/prefixes') }}" target="_blank">{{ phrase('add_prefix') }}</a>
				</xf:formrow>
			</xf:if>
			<hr class="formRowSep" />

			<xf:editorrow name="listing_template" value="{$category.listing_template}" rows="2" autosize="true"
							label="{{ phrase('z61_classifieds_listing_template') }}"
							hint="{{ phrase('z61_classifieds_listing_template_help') }}" />
			
			<xf:submitrow sticky="true" icon="save" />
		</div>
	</div>
</xf:form>]]></template>
  <template type="admin" title="z61_classifieds_category_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classified_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="page_action"
	arg-linkPrefix="classifieds/categories" />

<xf:macro template="category_tree_macros" name="category_list"
	arg-categoryTree="{$categoryTree}"
	arg-filterKey="classifieds-categories"
	arg-linkPrefix="classifieds/categories"
/>]]></template>
  <template type="admin" title="z61_classifieds_category_permission_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('classifieds/categories/permissions', $record) }}">{{ phrase('permissions:') }} {$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="classifieds/categories/permissions"
	arg-saveParams="{$saveParams}" />]]></template>
  <template type="admin" title="z61_classifieds_category_permission_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="classifieds/categories/permissions" />]]></template>
  <template type="admin" title="z61_classifieds_category_sort" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('sort_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="sortable_form"
	arg-categoryTree="{$categoryTree}"
	arg-linkPrefix="classifieds/categories" />]]></template>
  <template type="admin" title="z61_classifieds_condition_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('classifieds/conditions/delete', $condition) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('z61_classifieds_confirm_you_want_to_remove_this_listing_condition:') }}
				<strong><a href="{{ link('classifieds/conditions/edit', $condition) }}">{$condition.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="z61_classifieds_condition_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$condition.isInsert()">
	<xf:title>{{ phrase('z61_classifieds_add_listing_condition') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('z61_classifieds_edit_listing_condition:') }} {$condition.title}</xf:title>
</xf:if>

<xf:pageaction if="$condition.isUpdate()">
	<xf:button href="{{ link('classifieds/conditions/delete', $condition) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('classifieds/conditions/save', $condition) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{{ $condition.isUpdate() ? $condition.title : ''}}"
				label="{{ phrase('title') }}" />

			<xf:macro template="display_order_macros" name="row"
				arg-value="{$condition.display_order}" />
			<xf:checkboxrow>
				<xf:option label="{{ phrase('enabled')}}" selected="{$condition.active}" name="active" />
			</xf:checkboxrow>
			<xf:submitrow icon="save" sticky="true" />
		</div>
	</div>
</xf:form>]]></template>
  <template type="admin" title="z61_classifieds_condition_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_listing_conditions') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('classifieds/conditions/add') }}" icon="add">{{ phrase('z61_classifieds_add_listing_condition') }}</xf:button>
</xf:pageaction>

<xf:if is="$conditions is not empty">
	<xf:form action="{{ link(('classifieds/conditions/toggle')) }}"
		ajax="true" class="block">

		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="conditions" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$conditions" value="$condition">
						<xf:datarow label="{$condition.title}" 
										href="{{ link('classifieds/conditions/edit', $condition) }}"
										delete="{{ link('classifieds/conditions/delete', $condition) }}"
										hash="{$condition.condition_id}">
								<xf:cell class="dataList-cell--min dataList-cell--hint">{$condition.display_order}</xf:cell>
								<xf:toggle name="active[{$condition.condition_id}]" selected="$condition.active"
									   class="dataList-cell--separated" submit="true"
									   tooltip="{{ phrase('enable_disable_x', {'title': '[' . $condition.title . ']'}) }}" />
							</xf:datarow>

					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter">{{ display_totals($conditions) }}</span>
				<xf:if is="$exportView">
					<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
					<span class="block-footer-controls"><xf:button type="submit" icon="export" /></span>
				</xf:if>
			</div>
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="z61_classifieds_listing_field_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="z61_classifieds_listing_field_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}" />
	</xf:set>
	<xf:set var="$displayOptions">
		<xf:selectrow name="category_ids[]" value="{$categoryIds}" multiple="multiple" size="7"
			label="{{ phrase('z61_classifieds_applicable_categories') }}">

			<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:selectrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="z61_classifieds_listing_field_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_listing_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_prefix_delete" />]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_prefix_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="z61_classifieds_listing_prefix_edit_macros" name="category_ids"
			arg-categoryIds="{$prefix.category_ids}"
			arg-categoryTree="{$categoryTree}" />
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_edit_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="category_ids" arg-categoryIds="!" arg-categoryTree="!" arg-withRow="1">
	<xf:set var="$inner">
		<ul class="inputList">
			<li><xf:select name="category_ids[]" size="7" multiple="multiple" value="{$categoryIds}" id="js-applicableCategories">
				<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:select></li>
			<xf:checkbox>
				<xf:option id="js-selectAllCategories">{{ phrase('select_all') }}</xf:option>
			</xf:checkbox>
		</ul>
	</xf:set>

	<xf:if is="$withRow">
		<xf:formrow rowtype="input"
			label="{{ phrase('z61_classifieds_applicable_categories') }}">

			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>

	<xf:js>
		$(function()
		{
			$('#js-selectAllCategories').click(function(e)
			{
				$('#js-applicableCategories').find('option:enabled:not([value=""])').prop('selected', this.checked);
			});
		});
	</xf:js>
</xf:macro>]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_group_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_prefix_group_delete" />]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_group_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_prefix_group_edit" />]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_listing_prefixes') }}</xf:title>

<xf:include template="base_prefix_list" />]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_quickset_chooser" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_prefix_quickset_chooser">
	<xf:set var="$prefixType" value="classifieds_listing" />
</xf:include>]]></template>
  <template type="admin" title="z61_classifieds_listing_prefix_quickset_editor" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:include template="base_prefix_quickset_editor">
	<xf:set var="$extraOptions">
		<xf:checkboxrow name="apply_category_ids"
			label="{{ phrase('z61_classifieds_applicable_categories') }}">

			<xf:option label="{{ phrase('classifieds_apply_category_options') }}">
				<xf:dependent>
					<xf:macro template="z61_classifieds_listing_prefix_edit_macros" name="category_ids"
						arg-categoryIds="{$prefix.category_ids}"
						arg-categoryTree="{$categoryTree}"
						arg-withRow="{{ false }}" />
				</xf:dependent>
			</xf:option>
		</xf:checkboxrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="z61_classifieds_listing_type_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('classifieds/listing-types/delete', $listingType) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('z61_classifieds_confirm_you_want_to_remove_this_listing_type:') }}
				<strong><a href="{{ link('classifieds/listing-types/edit', $listingType) }}">{$listingType.title}</a></strong>
			</xf:inforow>
			<xf:selectrow name="new_listing_type_id" 
						  label="{{ phrase('z61_classifieds_reassign_listings') }}"
						  explain="{{ phrase('z61_classifieds_listings_of_x_type_will_be_reassigned_to_the_selected_type', {'title': $listingType.title})}}">
				<xf:foreach loop="$listingTypes" value="$type">
					<xf:option value="{$type.listing_type_id}">{{ $type.title }}</xf:option>
				</xf:foreach>
			</xf:selectrow>
		</div>
		<xf:submitrow icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="z61_classifieds_listing_type_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$listingType.isInsert()">
	<xf:title>{{ phrase('z61_classifieds_add_listing_type') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('z61_classifieds_edit_listing_type:') }} {$listingType.title}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('classifieds/listing-types') }}">{{ phrase('z61_classifieds_listing_types') }}</xf:breadcrumb>

<xf:pageaction if="$listingType.isUpdate()">
	<xf:button href="{{ link('classifieds/listing-types/delete', $listingType) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('classifieds/listing-types/save', $listingType) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{{ $listingType.isInsert() ? '' : $listingType.title}}"
				label="{{ phrase('title') }}" />

			<xf:macro template="display_order_macros" name="row"
				arg-value="{$listingType.display_order}" />

			<xf:textboxrow name="css_class" value="{$listingType.css_class}"
						   label="{{ phrase('display_styling') }}"
						   explain="{{ phrase('z61_classifieds_css_class_explain') }}" />

			<xf:submitrow icon="save" sticky="true" />
		</div>
	</div>
</xf:form>]]></template>
  <template type="admin" title="z61_classifieds_listing_type_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_listing_types') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('classifieds/listing-types/add') }}" icon="add">{{ phrase('z61_classifieds_add_listing_type') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-outer">
		<xf:macro template="filter_macros" name="quick_filter" arg-key="connected-accounts" arg-class="block-outer-opposite" />
	</div>
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$listingTypes is not empty">
				<div class="block-body">
					<xf:datalist>
						<xf:foreach loop="$listingTypes" value="$listingType">
							<xf:datarow label="{$listingType.title}" 
										href="{{ link('classifieds/listing-types/edit', $listingType) }}"
										delete="{{ link('classifieds/listing-types/delete', $listingType) }}"
										hash="{$listingType.listing_type_id}">
								<xf:cell class="dataList-cell--min dataList-cell--hint">{$listingType.display_order}</xf:cell>
							</xf:datarow>
						</xf:foreach>
					</xf:datalist>
				</div>
			<xf:else />
				<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="admin" title="z61_classifieds_package_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:breadcrumb href="{{ link('classifieds/packages') }}">{{ phrase('z61_classifieds_packages') }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('classifieds/packages', $package) }}">{{ $package.title }}</xf:breadcrumb>

<xf:form action="{{ link('classifieds/packages/delete', $package) }}" class="block" ajax="true">

    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">
                {{ phrase('z61_classifieds_confirm_you_want_to_remove_this_package:') }}
                <strong><a href="{{ link('classifieds/packages/edit', $package) }}">{$package.title}</a></strong>
            </xf:inforow>
        </div>
        <xf:submitrow icon="delete" />
    </div>
</xf:form>]]></template>
  <template type="admin" title="z61_classifieds_package_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$package.isInsert()">
    <xf:title>{{ phrase('z61_classifieds_add_package') }}</xf:title>
    <xf:else />
    <xf:title>{{ phrase('z61_classifieds_edit_package:') }} {$package.title}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('classifieds/packages') }}">{{ phrase('z61_classifieds_packages') }}</xf:breadcrumb>

<xf:pageaction if="$package.isUpdate()">
    <xf:button href="{{ link('classifieds/packages/delete', $package) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('classifieds/packages/save', $package) }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="title" value="{{ $package.isUpdate() ? $package.title : ''}}"
                           label="{{ phrase('title') }}" />

            <xf:macro template="display_order_macros" name="row"
                      arg-value="{$package.display_order}" />

            <xf:formrow rowtype="input"
                        label="{{ phrase('cost') }}">

                <div class="inputGroup">
                    <xf:textbox name="cost_amount" value="{{ $package.cost_amount ?: 10 }}" style="width: 120px" />
                    <span class="inputGroup-splitter"></span>
                    <xf:macro template="public:currency_macros" name="currency_list"
                              arg-value="{{ $package.cost_currency ?: 'USD' }}"
                              arg-class="input--autoSize" />
                </div>

                <div class="formRow-explain">{{ phrase('cost_currency_explain') }}</div>
            </xf:formrow>

            <xf:radiorow name="length_type" label="{{ phrase('length') }}">
                <xf:option value="permanent" selected="$package.length_unit == ''">{{ phrase('permanent') }}</xf:option>
                <xf:option value="timed" selected="$package.length_unit != ''" label="{{ phrase('for_length:') }}">
                    <xf:dependent>
                        <div class="inputGroup">
                            <xf:numberbox name="length_amount" value="{{ $package.length_amount ?: 1 }}" min="1" max="255" />
                            <span class="inputGroup-splitter"></span>
                            <xf:select name="length_unit" value="{{ ($package.length_unit == 'permanent' OR !$package.length_amount) ? 'months' : $package.length_unit }}" class="input--inline">
                                <xf:option value="day">{{ phrase('days') }}</xf:option>
                                <xf:option value="month">{{ phrase('months') }}</xf:option>
                                <xf:option value="year">{{ phrase('years') }}</xf:option>
                            </xf:select>
                        </div>
                    </xf:dependent>
                </xf:option>
            </xf:radiorow>

            <xf:checkboxrow name="payment_profile_ids" value="{$package.payment_profile_ids}"
                            label="{{ phrase('payment_profile') }}">

                <xf:foreach loop="$profiles" key="$profileId" value="$profile">
                    <xf:option value="{$profileId}" label="{{ $profile.Provider.title !== $profile.title ? $profile.Provider.title . ' - ' . $profile.title : $profile.Provider.title }}" />
                </xf:foreach>
            </xf:checkboxrow>

            <xf:checkboxrow>
                <xf:option label="{{ phrase('enabled')}}" selected="{$package.active}" name="active" />
            </xf:checkboxrow>

            <xf:submitrow icon="save" sticky="true" />
        </div>
    </div>
</xf:form>]]></template>
  <template type="admin" title="z61_classifieds_package_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_packages') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('classifieds/packages/add') }}" icon="add">{{ phrase('z61_classifieds_add_package') }}</xf:button>
</xf:pageaction>

<xf:if is="$packages is not empty">
	<xf:form action="{{ link(('classifieds/packages/toggle')) }}"
		ajax="true" class="block">

		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="packages" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$packages" value="$package">
						<xf:datarow label="{$package.title}"
								hint="{$package.cost_phrase}"
								href="{{ link('classifieds/packages/edit', $package) }}"
								delete="{{ link('classifieds/packages/delete', $package) }}"
								hash="{$package.package_id}">
							<xf:cell class="dataList-cell--min dataList-cell--hint">{$package.display_order}</xf:cell>
							<xf:toggle name="active[{$package.package_id}]" selected="$package.active"
								   class="dataList-cell--separated" submit="true"
								   tooltip="{{ phrase('enable_disable_x', {'title': '[' . $package.title . ']'}) }}" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter">{{ display_totals($packages) }}</span>
				<xf:if is="$exportView">
					<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
					<span class="block-footer-controls"><xf:button type="submit" icon="export" /></span>
				</xf:if>
			</div>
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="z61_classifieds_permission_category_list" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="classifieds/categories/permissions" />]]></template>
  <template type="admin" title="z61_classifieds_permission_category_overview" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_listing_category_permissions') }}</xf:title>

<xf:if is="$categoryTree.countChildren()">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="classifieds-categories" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
						<xf:set var="$category" value="{$treeEntry.record}" />
						<xf:datarow rowclass="{{ {$customPermissions.{$category.category_id}} ? 'dataList-row--custom' : '' }}">
							<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$category.category_id}">
								<a href="{{ link('permissions/classifieds-categories', $category) }}">
									<div class="u-depth{$treeEntry.depth}">
										<div class="dataList-mainRow">{$category.title}</div>
									</div>
								</a>
							</xf:cell>
							<xf:action href="{{ link('classifieds/categories/edit', $category) }}">{{ phrase('edit') }}</xf:action>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="z61_classifieds_tools_rebuild" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="Classifieds: {{ phrase('z61_classifieds_rebuild_user_listing_count') }}"
	arg-job="Z61\Classifieds:UserListingCount" />
<!--[XF:after_z61_classifieds_listing_count]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="Classifieds: {{ phrase('z61_classifieds_rebuild_listing_categories') }}"
	arg-job="Z61\Classifieds:Category" />
<!--[XF:after_z61_classifieds_categories]-->]]></template>
  <template type="admin" title="z61_classifieds_user_edit_feedback" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<hr class="formRowSep" />
<xf:formrow label="{{ phrase('z61_classifieds_feedback_score') }}">
    <dl class="pairs pairs--plainLabel">
        <dt>{{ phrase('total') }}</dt>
        <dd>
            <xf:numberbox name="classifieds_feedback_total" value="{$user.ClassifiedsFeedbackInfo.total}"/>
            <span class="formRow-hint">{{ phrase('z61_classifieds_feedback_total_explain') }}</span>
        </dd>
    </dl>
    <dl class="pairs pairs--plainLabel">
        <dt>{{ phrase('z61_classifieds_positive') }}</dt>
        <dd>
            <xf:numberbox name="classifieds_feedback_positive" value="{$user.ClassifiedsFeedbackInfo.positive}" min="0"/>
            <span class="formRow-hint">{{ phrase('z61_classifieds_feedback_positive_explain') }}</span>
        </dd>
    </dl>
    <dl class="pairs pairs--plainLabel">
        <dt>{{ phrase('z61_classifieds_negative') }}</dt>
        <dd>
            <xf:numberbox name="classifieds_feedback_negative" value="{$user.ClassifiedsFeedbackInfo.negative}" min="0"/>
            <span class="formRow-hint">{{ phrase('z61_classifieds_feedback_negative_explain') }}</span>
        </dd>
    </dl>
</xf:formrow>]]></template>
  <template type="email" title="classifieds_listing_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="go_listing_bar" arg-listing="!" arg-watchType="!">
	<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
	<tr>
		<td>
			<a href="{{ link('canonical:classifieds', $listing) }}" class="button">{{ phrase('classifieds_view_this_listing') }}</a>
		</td>
		<td align="{{ $xf.isRtl ? 'left' : 'right' }}">
			<xf:if is="$watchType == 'listing'">
				<a href="{{ link('canonical:watched/classifieds-listings') }}" class="buttonFake">{{ phrase('classifieds_watched_listings') }}</a>
			<xf:elseif is="$watchType == 'category'" />
				<a href="{{ link('canonical:watched/classifieds-categories') }}" class="buttonFake">{{ phrase('watched_categories') }}</a>
			</xf:if>
		</td>
	</tr>
	</table>
</xf:macro>

<xf:macro name="watched_category_footer" arg-listing="!" arg-category="!">
	{{ phrase('classifieds_watched_category_email_html_footer', {
		'category': $category.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'listing_category', 'id': $category.category_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>

<xf:macro name="watched_listing_footer" arg-listing="!">
	{{ phrase('classifieds_watched_listing_email_html_footer', {
		'listing':  $listing.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'classifieds_listing', 'id': $listing.resource_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>]]></template>
  <template type="email" title="classifieds_watched_category_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<mail:subject>
	{{ phrase('z61_classifieds_listing_x_new_watched_category', {
		'listing': prefix('classifieds_listing', $listing, 'escaped') . $listing.title
	}) }}
</mail:subject>

{{ phrase('z61_classifieds_watched_category_listing_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($listing.User, $listing.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:classifieds', $listing) }}">{{ prefix('classifieds_listing', $listing, 'escaped') }}{$listing.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $listing.content, 'classifieds_listing', $listing) }}</div>
</xf:if>

<xf:macro template="z61_classifieds_listing_macros" name="go_listing_bar" arg-listing="{$listing}" arg-watchType="category" />

<xf:macro template="z61_classifieds_listing_macros" name="watched_category_footer" arg-category="{$category}" arg-listing="{$listing}" />]]></template>
  <template type="email" title="classifieds_watched_classifieds_listing_update" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<mail:subject>
	{{ phrase('z61_classifieds_listing_x_updated', {
		'listing': prefix('classifieds_listing', $listing, 'escaped') . $listing.title
	}) }}
</mail:subject>

{{ phrase('z61_classifieds_watched_listing_update_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($listing.User, $listing.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:classifieds', $listing) }}">{{ prefix('classifieds_listing', $listing, 'escaped') }}{$listing.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $update.message, 'classifieds_listing', $update) }}</div>
</xf:if>

<xf:macro template="z61_classifieds_listing_macros" name="go_listing_bar" arg-listing="{$listing}" arg-watchType="classifieds_listing" />

<xf:macro template="z61_classifieds_listing_macros" name="watched_listing_footer" arg-listing="{$listing}" />]]></template>
  <template type="email" title="z61_classifieds_listing_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="go_listing_bar" arg-listing="!" arg-watchType="!">
	<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
	<tr>
		<td>
			<a href="{{ link('canonical:classifieds', $listing) }}" class="button">{{ phrase('z61_classifieds_view_this_listing') }}</a>
		</td>
		<td align="{{ $xf.isRtl ? 'left' : 'right' }}">
			<xf:if is="$watchType == 'listing'">
				<a href="{{ link('canonical:watched/classifieds-listings') }}" class="buttonFake">{{ phrase('z61_classifieds_watched_listings') }}</a>
			<xf:elseif is="$watchType == 'category'" />
				<a href="{{ link('canonical:watched/classifieds-categories') }}" class="buttonFake">{{ phrase('watched_categories') }}</a>
			</xf:if>
		</td>
	</tr>
	</table>
</xf:macro>

<xf:macro name="watched_category_footer" arg-listing="!" arg-category="!">
	{{ phrase('z61_classifieds_watched_category_email_html_footer', {
		'category': $category.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'classifieds_category', 'id': $category.category_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>

<xf:macro name="watched_listing_footer" arg-listing="!">
	{{ phrase('z61_classifieds_watched_listing_email_html_footer', {
		'listing':  $listing.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'classifieds_listing', 'id': $listing.listing_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>]]></template>
  <template type="email" title="z61_classifieds_watched_category_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<mail:subject>
	{{ phrase('z61_classifieds_listing_x_new_watched_category', {
		'listing': prefix('classifieds_listing', $listing, 'escaped') . $listing.title
	}) }}
</mail:subject>

{{ phrase('z61_classifieds_watched_category_listing_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($listing.User, $listing.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:classifieds', $listing) }}">{{ prefix('classifieds_listing', $listing, 'escaped') }}{$listing.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $listing.content, 'classifieds_listing', $listing) }}</div>
</xf:if>

<xf:macro template="z61_classifieds_listing_macros" name="go_listing_bar" arg-listing="{$listing}" arg-watchType="category" />

<xf:macro template="z61_classifieds_listing_macros" name="watched_category_footer" arg-category="{$category}" arg-listing="{$listing}" />]]></template>
  <template type="email" title="z61_classifieds_watched_classifieds_listing_update" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<mail:subject>
	{{ phrase('z61_classifieds_listing_x_updated', {
		'listing': prefix('classifieds_listing', $listing, 'escaped') . $listing.title
	}) }}
</mail:subject>

{{ phrase('z61_classifieds_watched_listing_update_email_html', {
	'receiver': $receiver.username,
	'author': username_link_email($listing.User, $listing.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:classifieds', $listing) }}">{{ prefix('classifieds_listing', $listing, 'escaped') }}{$listing.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $update.message, 'classifieds_listing', $update) }}</div>
</xf:if>

<xf:macro template="z61_classifieds_listing_macros" name="go_listing_bar" arg-listing="{$listing}" arg-watchType="classifieds_listing" />

<xf:macro template="z61_classifieds_listing_macros" name="watched_listing_footer" arg-listing="{$listing}" />]]></template>
  <template type="public" title="alert_classifieds_listing_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_your_listing_x_was_deleted', {
	'title': prefix('classifieds_listing', $extra.prefix_id) . $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_classifieds_listing_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_your_listing_x_was_edited', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('classifieds_listing', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_classifieds_listing_feature_end" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_one_listing_feature_expired_renew_now', {'link': link('classifieds/featured')}) }}]]></template>
  <template type="public" title="alert_classifieds_listing_feedback_given" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:set var="$feedbackLink">{{ link('members/feedback', $alert.Receiver) }}</xf:set>
{{ phrase('z61_classifieds_x_has_left_feedback_on_listing_y', {
	'title': '<a href="' . link('classifieds', {'listing_id': $alert.content_id}) .'" class="fauxBlockLink-blockLink">'. $extra.title . '</a>',
	'fromUser': username_link($alert.User, false, {'defaultname': $alert.username}),
	'feedbackLink': $feedbackLink
}) }}]]></template>
  <template type="public" title="alert_classifieds_listing_insert" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_x_created_listing_y', {
'name': username_link($user, false, {'defaultname': $alert.username}),
'title': '<a href="' . link('classifieds', $content) . '" class="fauxBlockLink-blockLink">' . prefix('classifieds_listing', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_classifieds_listing_marked_sold" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:set var="$feedbackLink">{{ link('classifieds/give-feedback', {'listing_id': $alert.content_id} ) }}</xf:set>
{{ phrase('z61_classifieds_you_have_been_listed_as_acquirer_of_item_x_being_sold_by_user_x', {
	'title': '<a href="' . link('classifieds', $extra) .'" class="fauxBlockLink-blockLink">' . prefix('classifieds_listing', $extra.prefix_id) . $extra.title . '</a>',
	'user': username_link($alert.User, false, {'defaultname': $alert.username}),
	'feedbackLink': $feedbackLink
}) }}]]></template>
  <template type="public" title="alert_classifieds_listing_mention" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_x_mentioned_you_in_listing_y', {
'name': username_link($user, false, {'defaultname': $alert.username}),
'title': '<a href="' . link('classifieds', $content) . '" class="fauxBlockLink-blockLink">' . prefix('classifieds_listing', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_classifieds_listing_move" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_your_listing_x_was_moved', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('classifieds_listing', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_classifieds_listing_reaction" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_x_reacted_to_your_listing_y_with_z', {
'name': username_link($user, false, {'defaultname': $alert.username}),
'reaction': alert_reaction($extra.reaction_id)|preescaped,
'title': '<a href="' . link('classifieds', $content) . '" class="fauxBlockLink-blockLink">' . prefix('classifieds_listing', $content) . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_classifieds_listing_reassign_from" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_your_listing_x_was_reassigned_to_y', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('classifieds_listing', $extra.prefix_id) . $extra.title . '</a>',
	'to': $extra.to
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_classifieds_listing_reassign_to" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ phrase('z61_classifieds_listing_x_was_reassigned_to_you', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . prefix('classifieds', $extra.prefix_id) . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="approval_item_classifieds_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:formrow label="{{ phrase('classifieds_listing') }}">
	<a href="{{ link('classifieds', $content) }}">{$content.title}</a>
</xf:formrow>

<xf:formrow label="{{ phrase('category') }}">
	<a href="{{ link('classifieds/categories', $content.Category) }}">{$content.Category.title}</a>
</xf:formrow>

<xf:formrow label="{{ phrase('author') }}">
	<xf:username user="$content.User" defaultname="{$content.username}" rich="true" />
</xf:formrow>

<xf:formrow label="{{ phrase('post_date') }}">
	<xf:date time="$content.listing_date" />
</xf:formrow>

<xf:macro template="approval_queue_macros" name="spam_log" arg-spamDetails="{$spamDetails}" />

<xf:formrow label="{{ phrase('content') }}">
	{{ bb_code($content.content, 'classifieds_listing', $content) }}
</xf:formrow>

<xf:macro template="approval_queue_macros" name="action_row"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}" />]]></template>
  <template type="public" title="bookmark_item_classifieds_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[{{ snippet($content.content, max_length($bookmark, 'message'), {'stripQuote': true}) }}]]></template>
  <template type="public" title="inline_mod_classifieds_listing_apply_prefix" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('apply_prefix') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('z61_classifieds_you_sure_you_want_to_apply_prefix_to_x_listings', {'total': $total}) }}</xf:inforow>

			<xf:macro template="prefix_macros" name="row"
				arg-type="classifieds_listing"
				arg-prefixes="{$prefixes}"
				arg-selected="{$selectedPrefix}"
				arg-explain="{{ ($categoryCount > 1) ? phrase('z61_classifieds_apply_listing_prefix_to_multiple_categories') : '' }}" />
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$listings" value="$listing">
		<xf:hiddenval name="ids[]">{$listing.listing_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">classifieds_listing</xf:hiddenval>
	<xf:hiddenval name="action">apply_prefix</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="inline_mod_classifieds_listing_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_delete_listings') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('z61_classifieds_you_sure_you_want_to_delete_x_listings', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:macro template="helper_action" name="author_alert" />
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$listings" value="$listing">
		<xf:hiddenval name="ids[]">{$listing.listing_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">classifieds_listing</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="inline_mod_classifieds_listing_move" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:js src="xf/prefix_menu.js" min="1" />

<xf:title>{{ phrase('z61_classifieds_move_listings') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">{{ phrase('z61_classifieds_you_sure_you_want_to_move_x_listings', {'total': $total}) }}</xf:inforow>
			<xf:selectrow name="target_category_id" value="{$first.category_id}" class="js-categoryList"
				label="{{ phrase('z61_classifieds_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="apply_prefix"
					label="{{ phrase('z61_classifieds_apply_prefix_to_selected_listings') }}">

					<xf:dependent>
						<xf:macro template="prefix_macros" name="select"
							arg-type="classifieds_listing"
							arg-prefixes="{$prefixes}"
							arg-href="{{ link('classifieds/prefixes') }}"
							arg-listenTo="< .js-prefixListenContainer | .js-categoryList" />
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('z61_classifieds_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
		</div>
		<xf:submitrow icon="move" />
	</div>

	<xf:foreach loop="$listings" value="$listing">
		<xf:hiddenval name="ids[]">{$listing.listing_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">classifieds_listing</xf:hiddenval>
	<xf:hiddenval name="action">move</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="inline_mod_classifieds_listing_reassign" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_reassign_listings') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:inforow rowtype="confirm">{{ phrase('z61_classifieds_you_sure_you_want_to_reassign_x_listings', {'total': $total}) }}</xf:inforow>

			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('z61_classifieds_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('z61_classifieds_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$listings" value="$listing">
		<xf:hiddenval name="ids[]">{$listing.listing_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">classifieds_listing</xf:hiddenval>
	<xf:hiddenval name="action">reassign</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="news_feed_item_classifieds_listing_expired" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<div class="contentRow-title">
	{{ phrase('z61_classifieds_x_expired_listing_y_in_category_z', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('classifieds', $content) . '">' . prefix('classifieds_listing', $content) . $content.title . '</a>',
		'category': '<a href="' . link('classifieds/categories', $content.Category) . '">' . $content.Category.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.content, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('classifieds', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_classifieds_listing_insert" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<div class="contentRow-title">
	{{ phrase('z61_classifieds_x_created_listing_y_in_category_z', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('classifieds', $content) . '">' . prefix('classifieds_listing', $content) . $content.title . '</a>',
		'category': '<a href="' . link('classifieds/categories', $content.Category) . '">' . $content.Category.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.content, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('classifieds', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_classifieds_listing_reaction" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro template="reaction_item_classifieds_listing" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-listing="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_classifieds_listing_sold" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[z61_classifieds_x_sold_listing_y_in_category_z
<div class="contentRow-title">
	{{ phrase('z61_classifieds_x_sold_listing_y_in_category_z', {
		'username': username_link($user, false, {'defaultname': $newsFeed.username}),
		'title': '<a href="' . link('classifieds', $content) . '">' . prefix('classifieds_listing', $content) . $content.title . '</a>',
		'category': '<a href="' . link('classifieds/categories', $content.Category) . '">' . $content.Category.title . '</a>'
	}) }}
</div>

<div class="contentRow-snippet">{{ snippet($content.content, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
<xf:if is="{$content.attach_count}">
	<xf:macro template="news_feed_attached_images" name="attached_images"
		arg-attachments="{$content.Attachments}" arg-link="{{ link('classifieds', $content) }}" />
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="reaction_item_classifieds_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-listing="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$listing.user_id == $xf.visitor.user_id">
			{{ phrase('z61_classifieds_x_reacted_to_your_listing_y', {
				'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'reaction': alert_reaction($reactionId, 'medium')|preescaped,
				'title': '<a href="' . link('classifieds', $listing) . '">' . prefix('classifieds_listing', $listing) . $listing.title . '</a>'
			}) }}
		<xf:else />
			{{ phrase('z61_classifieds_x_reacted_to_ys_listing_z', {
				'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'posterParams': 'href="' . link('classifieds', $listing) . '"',
				'poster': username_link($listing, false, {'defaultname': $fallbackName}),
				'reaction': alert_reaction($reactionId, 'medium')|preescaped,
				'title': '<a href="' . link('classifieds', $listing) . '">' . prefix('classifieds_listing', $listing) . $listing.title . '</a>'
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($listing.content, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-post="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="report_content_classifieds_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.listing.content, 'classifieds_listing', $content) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('z61_classifieds_listing') }}</dt>
			<dd><a href="{{ link('classifieds', $content) }}">{$content.title}</a></dd>
		</dl>
	</div>
	<div>
		<dl class="pairs pairs--inline">
			<dt>{{ phrase('category') }}</dt>
			<dd><a href="{{ link('classifieds/categories', $report.content_info.category) }}">{$content.Category.title}</a></dd>
		</dl>
	</div>
</div>]]></template>
  <template type="public" title="search_form_classifieds_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_search_listings') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:if is="$prefixesGrouped is not empty">
	<xf:selectrow name="c[prefixes][]" size="7" multiple="true" value="{$input.c.prefixes|default([0])}"
		label="{{ phrase('prefixes') }}">

		<xf:option value="">{{ phrase('(any)') }}</xf:option>
		<xf:foreach loop="$prefixGroups" key="$groupId" value="$prefixGroup" if="{{ count($prefixesGrouped.{$groupId}) > 0 }}">
			<xf:optgroup label="{{ prefix_group('classifieds_listing', $groupId) }}">
				<xf:foreach loop="{$prefixesGrouped.{$groupId}}" key="$prefixId" value="$prefix">
					<xf:option value="{$prefixId}">{{ prefix_title('classifieds_listing', $prefixId) }}</xf:option>
				</xf:foreach>
			</xf:optgroup>
		</xf:foreach>
	</xf:selectrow>
</xf:if>

<xf:formrow rowtype="input" label="{{ phrase('z61_classifieds_search_in_categories') }}">

	<ul class="inputList">
		<li><xf:select name="c[categories][]" size="7" multiple="multiple" value="{$input.c.categories|default([0])}">
			<xf:option value="">{{ phrase('all_categories') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:select></li>
		<li><xf:checkbox standalone="true">
			<xf:option name="c[child_categories]" selected="{{ (!$input.c || $input.c.child_categories) }}" label="{{ phrase('z61_classifieds_search_child_categories_as_well') }}" />
		</xf:checkbox></li>
	</ul>
</xf:formrow>

<xf:macro template="search_form_macros" name="order"
	arg-isRelevanceSupported="{$isRelevanceSupported}"
	arg-input="{$input}" />]]></template>
  <template type="public" title="search_result_classifieds_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<li class="block-row block-row--separated {{ $listing.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $listing.User.username ?: $listing.username }}">
	<div class="contentRow {{ !$listing.isVisible() ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
				<xf:if is="$listing.cover_image_id">
					{{ z61_classifieds_listing_thumbnail($listing) }}
				<xf:else />
					<xf:avatar user="$listing.User" size="s" defaultname="{$listing.username}" />
				</xf:if>
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('classifieds', $listing) }}">{{ prefix('classifieds_listing', $listing) }}{{ highlight($listing.title, $options.term) }}</a>
			</h3>

			<div class="contentRow-snippet">{{ snippet($listing.content, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'classifieds_listing' && $listing.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$listing.listing_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<li><xf:username user="{$listing.User}" defaultname="{$listing.username}" /></li>
					<li>{{ phrase('z61_classifieds_listing') }}</li>
					<li><xf:date time="{$listing.listing_date}" /></li>
					<li>{{ phrase('category:') }} <a href="{{ link('classifieds/categories', $listing.Category) }}">{$listing.Category.title}</a></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="z61_classifieds.less" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[// ############################ CLASSIFIEDS LIST ######################

.structItem-cell.structItem-cell--listingMeta
{
	width: 210px;
}

.structItem-metaItem--rating
{
	font-size: @xf-fontSizeSmall;
}

@media (max-width: @xf-responsiveWide)
{
	.structItem-cell.structItem-cell--listingMeta
	{
		width: 190px;
		font-size: @xf-fontSizeSmaller;
	}
}

@media (max-width: @xf-responsiveMedium)
{
	.structItem-cell.structItem-cell--listingMeta
	{
		display: block;
		width: auto;
		float: left;
		padding-top: 0;
		padding-left: 0;
		padding-right: 0;
		color: @xf-textColorMuted;

		.pairs
		{
			display: inline;

			&:before,
			&:after
			{
				display: none;
			}

			> dt,
			> dd
			{
				display: inline;
				float: none;
				margin: 0;
			}
		}

		.structItem-metaItem
		{
			display: inline;
		}

		.ratingStarsRow
		{
			display: inline;

			.ratingStarsRow-text
			{
				display: none;
			}
		}

		.structItem-metaItem--lastUpdate > dt
		{
			display: none;
		}

		.structItem-metaItem + .structItem-metaItem:before
		{
			display: inline;
			content: "\20\00B7\20";
			color: @xf-textColorMuted;
		}
	}
}

// #################################### CLASSIFIEDS LISTING BODY / VIEW ########################

.listingBody
{
	display: flex;
}

.listingBody-main
{
	flex: 1;
	min-width: 0;
	padding: @xf-blockPaddingV @xf-blockPaddingH;
}

.listingBody-sidebar
{
	flex: 0 0 auto;
	width: 250px;
	.xf-contentAltBase();
	border-left: @xf-borderSize solid @xf-borderColor;
	padding: @xf-blockPaddingV @xf-blockPaddingH;
	font-size: @xf-fontSizeSmall;

	> :first-child
	{
		margin-top: 0;
	}

	> :last-child
	{
		margin-bottom: 0;
	}
}

.listingBody-fields
{
	&.listingBody-fields--before
	{
		margin-bottom: @xf-paddingLarge;
		padding-bottom: @xf-paddingMedium;
		border-bottom: @xf-borderSize solid @xf-borderColorLight;
	}

	&.listingBody-fields--after
	{
		margin-top: @xf-paddingLarge;
		padding-top: @xf-paddingMedium;
		border-top: @xf-borderSize solid @xf-borderColorLight;
	}
}

.listingBody-attachments
{
	margin: .5em 0;
}

.listingBody .actionBar-set
{
	margin-top: @xf-messagePadding;
	font-size: @xf-fontSizeSmall;
}

.listingSidebarGroup
{
	margin-bottom: @xf-elementSpacer;

	&.listingSidebarGroup--buttons
	{
		> .button
		{
			display: block;
			margin: 5px 0;

			&:first-child
			{
				margin-top: 0;
			}

			&:last-child
			{
				margin-bottom: 0;
			}
		}
	}
}

.listingSidebarGroup-title
{
	margin: 0;
	padding: 0;

	font-size: @xf-fontSizeLarge;
	font-weight: @xf-fontWeightNormal;
	color: @xf-textColorFeature;
	padding-bottom: @xf-paddingMedium;

	.m-hiddenLinks();
}

.listingSidebarList
{
	.m-listPlain();

	> li
	{
		padding: @xf-paddingSmall 0;

		&:first-child
		{
			padding-top: 0;
		}

		&:last-child
		{
			padding-bottom: 0;
		}
	}
}

@media (max-width: @xf-responsiveWide)
{
	.listingBody
	{
		display: block;
	}

	.listingBody-sidebar
	{
		width: auto;
		border-left: none;
		border-top: @xf-borderSize solid @xf-borderColor;
	}

	.listingSidebarGroup
	{
		max-width: 600px;
		margin-left: auto;
		margin-right: auto;
	}
}


.structItem-cell.structItem-cell--icon.structItem-cell--iconExpanded.structItem-cell--iconListingCoverImage
{
	width: 110px;
}

.structItem-cell--iconListingCoverImage .structItem-iconContainer .avatar
{
	width: 96px;
	height: 96px;
	font-size: 57.6px;
	border-radius:0;
}]]></template>
  <template type="public" title="z61_classifieds_add_listing_chooser" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_add_listing_to...') }}</xf:title>

<xf:macro name="category_list" arg-children="{$categoryTree}" arg-extras="{$categoryExtras}" />

<xf:macro name="category_list" arg-children="!" arg-extras="!"  arg-depth="0">
	<xf:foreach loop="$children" key="$id" value="$child">
		<xf:macro name="category_list_entry"
			arg-category="{$child.record}" arg-extras="{$extras.{$id}}"
			arg-children="{$child.children}" arg-childExtras="{$extras}"
			arg-depth="{$depth}" />
	</xf:foreach>
</xf:macro>

<xf:macro name="category_list_entry" arg-category="!" arg-extras="!" arg-children="!" arg-childExtras="!" arg-depth="0">
	<xf:if is="$depth == 0">
		<xf:if is="$category.canAddListing()">
			<xf:macro name="category_list_entry_forum_level_0"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}" />
		<xf:else />
			<xf:macro name="category_list_entry_no_posting_level_0"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}" />
		</xf:if>
	<xf:else />
		<xf:if is="$category.canAddListing()">
			<xf:macro name="category_list_entry_forum"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}" />
		<xf:else />
			<xf:macro name="category_list_entry_no_posting"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}" />
		</xf:if>
	</xf:if>
</xf:macro>

<xf:macro name="category_list_entry_category_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<h2 class="block-header">
				{$category.title}
				<xf:if is="$category.description">
					<span class="block-desc">
						{$category.description|strip_tags}
					</span>
				</xf:if>
			</h2>
			<div class="block-body">
				<xf:macro name="category_list"
					arg-children="{$children}" arg-extras="{$childExtras}" arg-depth="{{ $depth + 1 }}" />
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_forum_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<xf:macro name="category_list_entry_forum"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}" />
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_no_posting_level_0"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block block--treeEntryChooser">
		<div class="block-container">
			<xf:macro name="category_list_entry_no_posting"
				arg-category="{$category}"
				arg-extras="{$extras}"
				arg-children="{$children}"
				arg-childExtras="{$childExtras}"
				arg-depth="{$depth}" />
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list_entry_forum"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }}">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					<a href="{{ link('classifieds/categories/add', $category) }}" class="fauxBlockLink-blockLink">
						{$category.title}
					</a>
				</h2>
				<xf:if is="$category.description">
					<div class="contentRow-minor contentRow-minor--singleLine">
						{$category.description|strip_tags}
					</div>
				</xf:if>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('z61_classifieds_listings') }}</dt>
					<dd>{$extras.listing_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}" arg-extras="{$childExtras}" arg-depth="{{ $depth + 1 }}" />
</xf:macro>

<xf:macro name="category_list_entry_no_posting"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block-row block-row--separated">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }} is-disabled">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					{$category.title}
				</h2>
                <div class="contentRow-minor contentRow-minor--singleLine">
                    {{ phrase('no_permission_to_post') }}
                </div>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('classifieds_listings') }}</dt>
					<dd>{{ $extras.listing_count|number_short }}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}" />
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_author_view" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title page="{$page}">{{ phrase('z61_classifieds_listings_by_x', {'name': $user.username}) }}</xf:title>

<xf:pageaction if="$user.user_id == $xf.visitor.user_id AND $xf.visitor.canAddClassified()">
    <xf:button href="{{ link('classifieds/add-listing-chooser') }}" class="button--cta" icon="write" overlay="true">{{ phrase('z61_classifieds_add_listing...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:if is="$listings is not empty">
	<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="classifieds_listing" data-href="{{ link('inline-mod') }}">
		<div class="block-outer"><xf:trim>

			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
				link="classifieds/authors" data="{$user}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineMod">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>

		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer">
					<xf:foreach loop="$listings" value="$listing">
						<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
							arg-listing="{$listing}" />
					</xf:foreach>
				</div>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="classifieds/authors" data="{$user}"
				wrapperclass="block-outer-main" />

			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
<xf:else />
	<div class="blockMessage">
		<xf:if is="$user.user_id == $xf.visitor.user_id">
			{{ phrase('z61_classifieds_you_have_not_posted_any_listings_yet') }}
		<xf:else />
			{{ phrase('z61_classifieds_x_has_not_posted_any_listings_yet', {'name': $user.username}) }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_category_add_listing" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_add_listing') }}</xf:title>

<xf:breadcrumb source="$category.getBreadcrumbs()" />

<xf:js src="https://maps.googleapis.com/maps/api/js?key={$xf.options.z61ClassifiedsGoogleApi}&libraries=places"></xf:js>
<xf:js src="z61/classifieds/geocomplete.js"></xf:js>
<xf:js>
	$("#location").geocomplete();  
</xf:js>

<xf:form action="{{ link('classifieds/categories/add', $category) }}" ajax="true" class="block"
	data-xf-init="attachment-manager"
	draft="{{ link('classifieds/categories/draft', $category) }}"
	data-preview-url="{{ link('classifieds/categories/listing-preview', $category) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:macro template="z61_classifieds_listing_edit_macros" name="title"
			    arg-category="{$category}"
				arg-listing="{$listing}"
				arg-prefixes="{$prefixes}" />

			<div>
				<xf:editorrow name="message"
				  value="{{ $category.draft_listing.message ?: $category.listing_template }}"
				  attachments="{{ $attachmentData ? $attachmentData.attachments : [] }}"
				  rowtype="fullWidth noLabel mergePrev"
				  label="{{ phrase('message') }}" />

				<xf:formrow>
					<xf:if is="$attachmentData">
						<xf:macro template="helper_attach_upload" name="upload_block"
						  arg-attachmentData="{$attachmentData}"
						  arg-forceHash="{$category.draft_listing.attachment_hash}" />
					</xf:if>
				</xf:formrow>
			</div>
			<xf:if is="{$category.location_enable}">
				<xf:textboxrow name="listing_location"
				   id="location"
				   maxlength="{{ max_length($listing, 'listing_location' )}}"
				   label="{{ phrase('z61_classifieds_location') }}"
				   placeholder="{{ phrase('z61_classifieds_enter_a_location...') }}"
				   value="{$listing.listing_location}"/>
			</xf:if>
			<xf:macro template="z61_classifieds_listing_edit_macros" name="tags"
					  arg-listing="{$listing}"
					  arg-category="{$category}" />

			<xf:if is="$category.allow_paid">
				<xf:formrow rowtype="input" label="{{ phrase('price') }}">
					<xf:macro template="z61_classifieds_listing_edit_macros" name="purchase_inputs"
							  arg-listing="{$listing}" />
				</xf:formrow>
			</xf:if>

			<xf:if contentcheck="true">
				<h2 class="block-formSectionHeader"><span class="block-formSectionHeader-aligner">{{ phrase('z61_classifieds_additional_information') }}</span></h2>
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
							  arg-type="classifiedsListings"
							  arg-set="{$listing.custom_fields}"
							  arg-group="{{ ['above', 'below', 'extra'] }}"
							  arg-editMode="{{ $listing.getFieldEditMode() }}"
							  arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>
			</xf:if>

			<h2 class="block-formSectionHeader"><span class="block-formSectionHeader-aligner">{{ phrase('z61_classifieds_listing_options') }}</span></h2>

			<xf:macro template="z61_classifieds_listing_edit_macros" name="type"
				arg-listing="{$listing}"
				arg-category="{$category}"
				arg-listingTypes="{$listingTypes}" />

			<xf:if is="$conditions is not empty">
				<xf:macro template="z61_classifieds_listing_edit_macros" name="condition"
				    arg-category="{$category}"
					arg-listing="{$listing}"
					arg-conditions="{$conditions}" />
			</xf:if>

			<xf:if is="$packages is not empty">
				<xf:macro template="z61_classifieds_listing_edit_macros" name="package"
						  arg-category="{$category}"
						  arg-listing="{$listing}"
						  arg-packages="{$packages}" />
			</xf:if>
		</div>

		<xf:macro template="z61_classifieds_listing_edit_macros" name="contact_info"
		  arg-listing="{$listing}"
		  arg-category="{$category}" />

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_category_list_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="simple_category_list"
	arg-selected="0"
	arg-pathToSelected="{{ [] }}"
	arg-children="!"
	arg-extras="!"
	arg-isActive="{{ false }}"
>
	<ol class="categoryList toggleTarget{{ $isActive ? ' is-active' : '' }}">
		<xf:foreach loop="$children" key="$id" value="$child">
			<xf:macro name="simple_category_list_item"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-category="{$child.record}"
				arg-extras="{$extras.{$id}}"
				arg-children="{$child}"
				arg-childExtras="{$extras}"
			/>
		</xf:foreach>
	</ol>
</xf:macro>

<xf:macro name="simple_category_list_item"
	arg-selected="!"
	arg-pathToSelected="{{ [] }}"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
>
	<xf:set var="$isSelected" value="{{ $category.category_id == $selected }}" />
	<xf:set var="$hasPathToSelected" value="{$pathToSelected.{$category.category_id}}" />
	<xf:set var="$isActive" value="{{ $isSelected OR $hasPathToSelected AND $children is not empty }}" />

	<li class="categoryList-item">
		<div class="categoryList-itemRow">
			<xf:if is="$children is not empty">
				<a class="categoryList-toggler{{ $isActive ? ' is-active' : '' }}"
					data-xf-click="toggle" data-target="< :up :next"
					role="button" tabindex="0" aria-label="{{ phrase('toggle_expanded') }}"
				></a>
			<xf:else />
				<span class="categoryList-togglerSpacer"></span>
			</xf:if>
			<a href="{{ link('classifieds/categories', $category) }}" class="categoryList-link{{ $isSelected ? ' is-selected' : '' }}">
				{$category.title}
			</a>
			<span class="categoryList-label">
				<span class="label label--subtle label--smallest">{$extras.listing_count|number_short}</span>
			</span>
		</div>
		<xf:if is="$children is not empty">
			<xf:macro name="simple_category_list"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-children="{$children}"
				arg-extras="{$childExtras}"
				arg-isActive="{$isActive}"
			/>
		</xf:if>
	</li>
</xf:macro>

<xf:macro name="simple_list_block" arg-categoryTree="!" arg-categoryExtras="!" arg-selected="{{ 0 }}">
	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('categories') }}</h3>
			<div class="block-body">
				<xf:if is="$categoryTree.count()">
					<xf:macro name="simple_category_list"
						arg-children="{$categoryTree}"
						arg-extras="{$categoryExtras}"
						arg-isActive="{{ true }}"
						arg-selected="{$selected}"
						arg-pathToSelected="{{ $selected ? $categoryTree.getPathTo($selected) : [] }}" />
				<xf:else />
					<div class="block-row">{{ phrase('n_a') }}</div>
				</xf:if>

				<hr class="block-separator" />
				<xf:if is="{$xf.visitor.canViewAwaitingPayments()}">
					<a href="{{ link('classifieds/awaiting-payment') }}" class="blockLink">{{ phrase('z61_classifieds_awaiting_payment') }}</a>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="category"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-chooseName=""
	arg-bonusInfo="">
	
	<div class="node node--depth2 node--listingCategory node--listingCategory{$category.category_id}">
		<div class="node-body">
			<div class="node-main js-nodeMain">
				<xf:if is="$chooseName">
					<xf:checkbox standalone="true">
						<xf:option labelclass="u-pullRight" class="js-chooseItem" name="{$chooseName}[]" value="{$category.category_id}" />
					</xf:checkbox>
				</xf:if>

				<xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />
				<h3 class="node-title">
					<a href="{{ link('classifieds/categories', $category) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$category.title}</a>
				</h3>
				<xf:if is="$descriptionDisplay != 'none' && $category.description">
					<div class="node-description {{ $descriptionDisplay == 'tooltip' ? 'node-description--tooltip js-nodeDescTooltip' : '' }}">{$category.description|raw}</div>
				</xf:if>

				<div class="node-meta">
					<div class="node-statsMeta">
						<dl class="pairs pairs--inline">
							<dt>{{ phrase('z61_classifieds_listings') }}</dt>
							<dd>{$extras.listing_count|number}</dd>
						</dl>
					</div>
				</div>

				<xf:if is="$bonusInfo is not empty">
					<div class="node-bonus">{$bonusInfo}</div>
				</xf:if>
			</div>

			<div class="node-stats node-stats--single">
				<dl class="pairs pairs--rows">
					<dt>{{ phrase('z61_classifieds_listings') }}</dt>
					<dd>{$extras.listing_count|number}</dd>
				</dl>
			</div>

			<div class="node-extra">
				<xf:if is="{$extras.last_listing_id}">
					<div class="node-extra-row"><a href="{{ link('classifieds', {'listing_id': $extras.last_listing_id}) }}" class="node-extra-title" title="{$extras.last_listing_title}">{$extras.last_listing_title}</a></div>
					<div class="node-extra-row">
						<xf:date time="{$extras.last_listing_date}" class="node-extra-date" />
					</div>
				<xf:else />
					<span class="node-extra-placeholder">{{ phrase('none') }}</span>
				</xf:if>
			</div>
		</div>
	</div>
	
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_category_prefixes" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro template="prefix_macros" name="select"
	arg-name="na"
	arg-prefixes="{$prefixes}"
	arg-type="classifieds_listing" />]]></template>
  <template type="public" title="z61_classifieds_category_view" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title page="{$page}">{$category.title}</xf:title>
<xf:description>{$category.description|raw}</xf:description>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:classifieds/categories', $category, {'page': $page}) }}" />

<xf:breadcrumb source="$category.getBreadcrumbs(false)" />

<xf:macro template="z61_classifieds_listing_page_macros" name="listing_page_options"
	arg-category="{$category}" />

<xf:pageaction>
	<xf:if is="$category.canAddListing()">
		<xf:button href="{{ link('classifieds/categories/add', $category) }}" class="button--cta" icon="write">{{ phrase('z61_classifieds_add_listing') }}</xf:button>
	</xf:if>
</xf:pageaction>

<xf:if is="$pendingApproval">
	<div class="blockMessage blockMessage--important">{{ phrase('content_submitted_displayed_pending_approval') }}</div>
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="classifieds_listing" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="classifieds/categories" data="{$category}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
						<xf:if is="$category.canWatch()">
							<xf:button href="{{ link('classifieds/categories/watch', $category) }}" class="button--link"
								data-xf-click="switch-overlay"
								data-sk-watch="{{ phrase('watch') }}"
								data-sk-unwatch="{{ phrase('unwatch') }}">
								<xf:if is="{$category.Watch.{$xf.visitor.user_id}}">{{ phrase('unwatch') }}<xf:else />{{ phrase('watch') }}</xf:if>
							</xf:button>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="z61_classifieds_overview_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="classifieds/categories"
			arg-category="{$category}"
			arg-creatorFilter="{$creatorFilter}"
		    arg-conditionFilter="{$conditionFilter}"
			arg-listingTypeFilter="{$listingTypeFilter}"/>

		<div class="block-body">
			<xf:if is="$category.layout_type == 'list_view'">
				<xf:if is="$featuredListings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$featuredListings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</xf:if>
				<xf:if is="$listings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
					<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('z61_classifieds_there_no_listings_matching_your_filters') }}</div>
					<xf:else />
					<div class="block-row">{{ phrase('z61_classifieds_no_listings_have_been_created_yet') }}</div>
				</xf:if>
				<xf:elseif is="$category.layout_type == 'grid_view'" />
				<xf:if is="$featuredListings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$featuredListings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_grid"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</xf:if>
				<xf:if is="$listings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_grid"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
					<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('z61_classifieds_there_no_listings_matching_your_filters') }}</div>
					<xf:else />
					<div class="block-row">{{ phrase('z61_classifieds_no_listings_have_been_created_yet') }}</div>
				</xf:if>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="classifieds/categories" data="{$category}" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
	<xf:macro template="z61_classifieds_category_list_macros" name="simple_list_block"
		arg-categoryTree="{$categoryTree}"
		arg-categoryExtras="{$categoryExtras}"
		arg-selected="{$category.category_id}" />
</xf:sidenav>

<xf:widgetpos id="classifieds_category_sidenav" position="sidenav" context-category="{$category}" />]]></template>
  <template type="public" title="z61_classifieds_category_watch" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('unwatch_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('watch_category') }}</xf:title>
</xf:if>

<xf:breadcrumb source="{$category.getBreadcrumbs()}" />

<xf:form action="{{ link('classifieds/categories/watch', $category) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('you_sure_you_want_to_unwatch_this_category') }}
				</xf:inforow>
				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="classifieds_listing"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="classifieds_listing">{{ phrase('z61_classifieds_new_listings_only') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>

				<xf:checkboxrow>
					<xf:option name="include_children" selected="true">{{ phrase('include_notifications_for_content_in_sub_categories') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_feature_listings" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_your_featured_listings') }}</xf:title>


<xf:js src="xf/payment.js" min="1" />]]></template>
  <template type="public" title="z61_classifieds_feature_purchase" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('thanks_for_your_purchase') }}</xf:title>

<xf:wrap template="z61_classifieds_listing_wrapper" />

<div class="blockMessage">{{ phrase('z61_classifieds_thank_you_for_purchasing_this_upgrade') }}</div>]]></template>
  <template type="public" title="z61_classifieds_feedback.less" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[i.classifieds-feedback-positive {
  color: @xf-z61ClassifiedsFeedbackPositive;
}
i.classifieds-feedback-negative {
  color: @xf-z61ClassifiedsFeedbackNegative;
}
i.classifieds-feedback-neutral {
  color: @xf-z61ClassifiedsFeedbackNeutral;
}]]></template>
  <template type="public" title="z61_classifieds_feedback_delete_confirm" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{$confirmUrl}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('z61_classifieds_please_confirm_that_you_want_to_delete_following_feedback:') }}
				<xf:if is="$editUrl">
					<strong><a href="{$editUrl}">{$contentTitle}</a></strong>
				<xf:else />
					<strong>{$contentTitle}</strong>
				</xf:if>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_feedback_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>
	{{ phrase('z61_classifieds_edit_feedback_for:') }} {{ $user.username }}
</xf:title>
<xf:breadcrumb href="{{ link('members', $user) }}">{$user.username}</xf:breadcrumb>

<xf:form action="{{ link('members/feedback/save', $user, {'feedback_id': $feedback.feedback_id} ) }}" class="block" ajax="true">

	<div class="block-container">
		<div class="block-body">
				<xf:radiorow label="{{ phrase('rating') }}" name="rating"
							 explain="{{ phrase('z61_classifieds_how_would_you_rate_experience') }}" value="{$feedback.rating}">
					<xf:option value="positive" label="{{ phrase('z61_classifieds_positive') }}" />
					<xf:option value="neutral" label="{{ phrase('z61_classifieds_neutral') }}" />
					<xf:option value="negative" label="{{ phrase('z61_classifieds_negative') }}" />
				</xf:radiorow>
				<xf:editorrow name="message"
				  value="{$feedback.feedback}"
				  rowtype="fullWidth noLabel mergePrev"
				  label="{{ phrase('z61_classifieds_feedback') }}"
				/>
		</div>
		<xf:submitrow icon="save" />
	</div>
	<xf:redirect url="{{ link('members', $user) }}#feedback"/>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_feedback_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="feedback" arg-feedback="!">
    <xf:css src="message.less" />
    <xf:js src="xf/comment.js" min="1" />

    <article class="message message--simple js-inlineModContainer"
             data-author="{{ $feedback.FromUser.username ?: $feedback.FromUser.username }}"
             data-content="classifieds-feedback-{$feedback.feedback_id}"
             id="js-feedback-{$feedback.feedback_id}">
        <span class="u-anchorTarget" id="classifieds-feedback-{$feedback.feedback_id}"></span>
        <div class="message-inner">
            <div class="message-cell message-cell--user">
                <xf:macro template="message_macros"
                          name="user_info_simple" arg-user="{$feedback.FromUser}"
                          arg-fallbackName="{$feedback.from_username}" />
            </div>
            <div class="message-cell message-cell--main">
                <div class="message-main js-quickEditTarget">
                    <div class="message-content js-messageContent">
                        <header class="message-attribution message-attribution--plain">
                            <ul class="listInline listInline--bullet">
                                <li>
                                    <xf:macro template="z61_classifieds_feedback_macros" name="feedback_icon_simple" arg-feedback="{$feedback}" />
                                </li>
                                <li class="message-attribution-user">
                                    <a href="{{ link('classifieds', $feedback.Listing) }}">{{ $feedback.Listing.title}}</a>
                                </li>
                                <li><a href="{{ link('members/feedback/view', $feedback.ToUser, {'feedback_id': $feedback.feedback_id}) }}" class="u-concealed" rel="nofollow"><xf:date time="$feedback.feedback_date" /></a></li>
                            </ul>
                        </header>

                        <article class="message-body">
                            {{ bb_code($feedback.feedback, 'post', $feedback) }}

                            <xf:if is="$feedback.last_edit_date">
                                <div class="message-lastEdit pull-right">
                                    <xf:if is="$feedback.from_user_id == $feedback.last_edit_user_id">
                                        {{ phrase('last_edited:') }} <xf:date time="{$feedback.last_edit_date}" />
                                        <xf:else />
                                        {{ phrase('last_edited_by_moderator:') }} <xf:date time="{$feedback.last_edit_date}" />
                                    </xf:if>
                                </div>
                            </xf:if>
                        </article>
                    </div>

                    <footer class="message-footer">
                        <div class="message-actionBar actionBar">
                            <xf:if contentcheck="true">
                                <div class="actionBar-set actionBar-set--internal">
                                    <xf:contentcheck>
                                        <xf:if is="$feedback.canEdit()">
                                            <a href="{{ link('members/feedback/edit', $feedback.ToUser, {'feedback_id': $feedback.feedback_id}) }}"
                                               class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
                                               data-xf-click="overlay">{{ phrase('edit') }}</a>
                                        </xf:if>
                                        <xf:if is="$feedback.canDelete()">
                                            <a href="{{ link('members/feedback/delete', $feedback.ToUser, {'feedback_id': $feedback.feedback_id}) }}"
                                               class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
                                               data-xf-click="overlay">{{ phrase('delete') }}</a>
                                        </xf:if>
                                    </xf:contentcheck>
                                </div>
                            </xf:if>

                        </div>
                    </footer>
                </div>
            </div>
        </div>
    </article>
</xf:macro>

<xf:macro name="feedback_icon_simple" arg-feedback="!">
    <xf:css src="z61_classifieds_feedback.less" />
    <xf:if is="$feedback.rating == 'positive'">
        <xf:fa class="classifieds-feedback-positive"
               title="{{ phrase('z61_classifieds_x_rated_their_transaction_with_y_positively', {'toUser': $feedback.ToUser.username, 'fromUser': $feedback.FromUser.username}) }}"
               icon="{{ property('z61ClassifiedsFeedbackPositiveIcon') }}" />
        <xf:elseif is="$feedback.rating == 'negative'" />
        <xf:fa class="classifieds-feedback-negative"
               icon="{{ property('z61ClassifiedsFeedbackNegativeIcon') }}"
               title="{{ phrase('z61_classifieds_x_rated_their_transaction_with_y_negatively', {'toUser': $feedback.ToUser.username, 'fromUser': $feedback.FromUser.username}) }}" />
        <xf:else />
        <xf:fa class="classifieds-feedback-neutral"
               icon="{{ property('z61ClassifiedsFeedbackNeutralIcon') }}"
               title="{{ phrase('z61_classifieds_x_rated_their_transaction_with_y_neutrally', {'toUser': $feedback.ToUser.username, 'fromUser': $feedback.FromUser.username}) }}" />
    </xf:if>
</xf:macro>

<xf:macro name="attribution" arg-feedback="!" arg-showTargetUser="{{ false }}">
    <xf:if is="$showTargetUser AND $feedback.from_user_id != $feedback.to_user_id">
        <xf:username user="$feedback.FromUser" rich="true" defaultname="{$feedback.from_username}" aria-hidden="true" />
       <i class="fa {{ $xf.isRtl ? 'fa-caret-left' : 'fa-caret-right' }} u-muted" aria-hidden="true"></i>
        <a href="{{ link('classifieds', $feedback.Listing) }}" title="{$feedback.Listing.title}">{{ snippet($feedback.Listing.title, 20) }}</a>
        <xf:else />
        <xf:username user="$feedback.FromUser" rich="true" defaultname="{$feedback.from_username}" />
    </xf:if>
    <span class="pull-right">
    <xf:macro name="feedback_icon_simple" arg-feedback="{$feedback}" />
    </span>
</xf:macro>

<xf:macro name="simple"
          arg-feedback="!"
          arg-limitHeight="{{ false }}">

    <div class="contentRow">
        <div class="contentRow-figure">
            <xf:avatar user="$feedback.FromUser" size="xxs" defaultname="{$feedback.from_username}" />
        </div>
        <div class="contentRow-main contentRow-main--close">
            <div class="contentRow-lesser">
                <xf:macro name="attribution"
                          arg-feedback="{$feedback}"
                          arg-showTargetUser="{{ true }}" />
            </div>

            <xf:if is="$limitHeight">
                <div class="contentRow-faderContainer">
                    <div class="contentRow-faderContent">
                        {{ snippet(structured_text($feedback.feedback), 150) }}
                    </div>
                    <div class="contentRow-fader"></div>
                </div>
                <xf:else />
                {{ snippet(structured_text($feedback.feedback), 150) }}
            </xf:if>

            <div class="contentRow-minor">
                <a href="{{ link('members/feedback/view', $feedback.ToUser, {'feedback_id': $feedback.feedback_id} ) }}" rel="nofollow" class="u-concealed"><xf:date time="{$feedback.feedback_date}" /></a>
                <a href="{{ link('members/feedback/view', $feedback.ToUser, {'feedback_id': $feedback.feedback_id} ) }}" rel="nofollow" class="contentRow-extra" data-xf-click="overlay" data-xf-init="tooltip" title="{{ phrase('interact')|for_attr }}">&#8226;&#8226;&#8226;</a>
            </div>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_feedback_view" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_transaction_feedback:')}} {$feedback.Listing.title}</xf:title>
<xf:breadcrumb href="{{ link('members', {$feedback.ToUser}) }}">{{ {$feedback.ToUser.username} }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('members/feedback', {$feedback.ToUser}) }}">{{ phrase('z61_classifieds_feedback') }}</xf:breadcrumb>
<xf:form action="#" ajax="true" class="block">
	<div class="block-container">
		<div class="block-header">
			<xf:inforow>
				{{ phrase('z61_classifieds_feedback_on_listing_x_y', {
					'fromUser': username_link($feedback.FromUser, false, {'defaultname': $feedback.from_username}),
					'toUser': username_link($feedback.ToUser, false, {'defaultname': $feedback.to_username})
				}) }}
            </xf:inforow>
        </div>
        <div class="block-body">
			<xf:macro template="z61_classifieds_feedback_macros" name="feedback" arg-feedback="{$feedback}" />
		</div>
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_filters" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:form action="{{ link($category ? 'classifieds/categories/filters' : 'classifieds/filters', $category) }}">
	<!--[XF:above_prefixes]-->
	<xf:if is="$prefixesGrouped is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('prefix:') }}
			<div class="u-inputSpacer">
				<xf:macro template="prefix_macros" name="select"
					arg-prefixes="{$prefixesGrouped}"
					arg-type="classifieds_listing"
					arg-selected="{{ $filters.prefix_id ?: 0 }}"
					arg-name="prefix_id"
					arg-noneLabel="{{ phrase('(any)') }}"
				/>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_created_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('created_by:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="creator" value="{{ $creatorFilter ? $creatorFilter.username : '' }}" ac="single" />
		</div>
	</div>

	<xf:if is="$listingTypes is not empty">
		<div class="menu-row menu-row--separated">
			{{ phrase('type:') }}
			<div class="u-inputSpacer">
				<xf:select name="listing_type_id" value="{{ $listingTypeFilter ?: $listingTypes.first().title }}">
					<xf:option value="-1" label="{{ phrase('(any)') }}" />
					<xf:foreach loop="$listingTypes" value="$listingType">
						<xf:option value="{$listingType.listing_type_id}" 
								   selected="{{ $listingTypeFilter.listing_type_id == $listingType.listing_type_id}}">{$listingType.title}</xf:option>
					</xf:foreach>
				</xf:select>
			</div>
		</div>
	</xf:if>

	<xf:if is="$conditions is not empty">
	<div class="menu-row menu-row--separated">
		{{ phrase('z61_classifieds_condition:') }}
		<div class="u-inputSpacer">
			<xf:select name="condition_id" value="{{ $conditionFilter ?: $conditions.first().title }}">
				<xf:option value="-1" label="{{ phrase('(any)') }}" />
				<xf:foreach loop="$conditions" value="$condition">
					<xf:option value="{$condition.condition_id}"
							   selected="{{$conditionFilter.condition_id == $condition.condition_id}}">{$condition.title}</xf:option>
				</xf:foreach>
			</xf:select>
		</div>
	</div>
	</xf:if>
	<!--[Z61/Classifieds:above_location_filter] -->
	<xf:if is="$xf.options.z61ClassifiedsGoogleApi">
		<div class="menu-row menu-row--separated">
			{{ phrase('z61_classifieds_address:') }}
			<div class="u-inputSpacer">
				<xf:textbox name="address" value="{{ $filters.address.formatted ?: '' }}" />
			</div>
			<hr class="formRowSep" />
			{{ phrase('z61_classifieds_within:') }}
			<div class="inputGroup u-inputSpacer">
				<div class="inputGroup inputGroup--numbers">
					<xf:numberbox name="distance" class="input input--numberNarrow js-pageJumpPage" value="{{ $filters.address.distance is not empty ? $distance : 5 }}" min="5" step="5" />
				</div>
				<span class="inputGroup-splitter"></span>
				<select name="distance_unit" class="input">
					<option value="km" selected="{{$filters.address.distance_unit == 'km'}}">km</option>
					<option value="mi" selected="{{$filters.address.distance_unit == 'mi'}}">mi</option>
				</select>
			</div>
		</div>
	</xf:if>
	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: $xf.options.z61ClassifiedsListDefaultOrder }}">
				<xf:option value="last_update">{{ phrase('last_updated') }}</xf:option>
				<xf:option value="expiration_date">{{ phrase('z61_classifieds_expiration_date') }}</xf:option>
				<xf:option value="listing_date">{{ phrase('z61_classifieds_submission_date') }}</xf:option>
				<xf:option value="title">{{ phrase('title') }}</xf:option>
				<xf:option value="price">{{ phrase('price') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_forum_view_page_action" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:button href="{{ link('classifieds/add', null, {'node_id': $forum.node_id} ) }}" class="button--cta" icon="write" overlay="true">
		{{ phrase('z61_classifieds_add_listing') }}
</xf:button>]]></template>
  <template type="public" title="z61_classifieds_give_feedback" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_give_feedback_for_transaction') }}: {$listing.title}</xf:title>

<xf:form action="{{ link('classifieds/give-feedback', $listing) }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">
                <xf:set var="$rateUser">
                    <xf:if is="$xf.visitor.user_id == $listing.user_id">
                        <xf:username user="{$listing.SoldUser}" />
                    <xf:else />
                        <xf:username user="{$listing.User}" />
                    </xf:if>
                </xf:set>
                {{ phrase('z61_classifieds_you_are_rating_user_x', {'user': $rateUser}) }}
            </xf:inforow>
            <xf:radiorow label="{{ phrase('z61_classifieds_your_role') }}" name="role"
                         explain="{{ phrase('z61_classifieds_what_was_your_role_in_transaction') }}">
                <xf:option value="buyer" label="{{ phrase('z61_classifieds_buyer') }}" />
                <xf:option value="seller" label="{{ phrase('z61_classifieds_seller') }}" />
                <xf:option value="trader" label="{{ phrase('z61_classifieds_trader') }}" />
            </xf:radiorow>

            <xf:radiorow label="{{ phrase('rating') }}" name="rating"
                         explain="{{ phrase('z61_classifieds_how_would_you_rate_experience') }}">
                <xf:option value="positive" label="{{ phrase('z61_classifieds_positive') }}" />
                <xf:option value="neutral" label="{{ phrase('z61_classifieds_neutral') }}" />
                <xf:option value="negative" label="{{ phrase('z61_classifieds_negative') }}" />
            </xf:radiorow>

            <xf:textarearow label="{{ phrase('z61_classifieds_additional_information') }}" name="feedback" autosize="true" />
        </div>

        <xf:submitrow submit="{{ phrase('z61_classifieds_submit_feedback') }}" />
    </div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_approve" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_approve_listing') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:form action="{{ link('classifieds/approve', $listing) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_approve_the_following:') }}
				<strong><a href="{{ link('classifieds', $listing) }}">{$listing.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_clear_sold" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_clear_sold_status') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:form action="{{ link('classifieds/clear-sold', $listing) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow>
				<div class="blockMessage blockMessage--important"><strong>{{ phrase('note:') }}</strong> {{ phrase('z61_classifieds_this_will_fully_wipe_sold_status_from_listing_including_who_is_marked_as_sold') }}</div>
			</xf:inforow>
		</div>
	</div>
	<xf:submitrow icon="empty" sticky="true" submit="{{ phrase('z61_classifieds_clear_sold_status')}}" />
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_contact" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_contact_listing_owner_x', {'user': $user.username}) }}</xf:title>
<xf:breadcrumb href="{{ link('classifieds', $listing) }}">{$listing.title}</xf:breadcrumb>
<div class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$conversation">
				<xf:formrow label="{{ phrase('conversation') }}">
					<xf:if is="$xf.visitor.canStartConversationWith($user)">
						<xf:button href="{{ link('conversations/add', null, {'to': $user.username, 'title': $conversationTitle}) }}" class="button--cta">
							{{ phrase('start_conversation') }}
						</xf:button>
					<xf:else />
						<span class="button is-disabled">{{ phrase('z61_classifieds_you_may_not_start_a_conversation_with_this_user') }}</span>
					</xf:if>
				</xf:formrow>
			</xf:if>
			<xf:if is="$email && $listing.contact_email is not empty">
				<xf:formrow label="{{ phrase('email') }}">
					{{ $listing.contact_email }}
				</xf:formrow>
			</xf:if>
			<xf:if is="$custom && $listing.contact_custom is not empty">
				<xf:formrow label="{{ phrase('z61_classifieds_custom_contact_details')}}">
					{{ $listing.contact_custom }}
				</xf:formrow>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="z61_classifieds_listing_cover_image" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_set_cover_image') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:form action="{{ link('classifieds/set-cover-image', $listing) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:css src="attachments.less" />
			<ul class="attachmentList scSetCoverImage-attachments">
				<xf:foreach loop="$listing.Attachments" value="$attachment">
					<xf:if is="$attachment.has_thumbnail">
						<li class="attachment">
							<div class="attachment-icon attachment-icon--img">
								<a class="avatar NoOverlay" style="border-radius:0;"><img width="48" height="48" border="0" src="{$attachment.thumbnail_url}" alt="{$attachment.filename}" /></a>
							</div>
							<div class="attachment-details">
								<span class="attachment-select"><input type="radio" name="attachment_id" value="{$attachment.attachment_id}" {{ $listing.cover_image_id == $attachment.attachment_id ? "checked" : "" }} /></span>
							</div>
						</li>
					</xf:if>
				</xf:foreach>
			</ul>	
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_delete" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_delete_listing') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:form action="{{ link('classifieds/delete', $listing) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$listing.canDelete('hard')}" />

			<xf:if is="$listing.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_edit" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_edit_listing') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />
<script src="https://maps.googleapis.com/maps/api/js?key={$xf.options.z61ClassifiedsGoogleApi}&libraries=places"></script>
<xf:js src="z61/classifieds/geocomplete.js"></xf:js>
<xf:js>
	$("#location").geocomplete();  
</xf:js>
<xf:form action="{{ link('classifieds/edit', $listing) }}" upload="true" ajax="true" class="block"
		 data-xf-init="attachment-manager"
		 data-preview-url="{{ link('classifieds/preview', $listing) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:macro template="z61_classifieds_listing_edit_macros" name="title"
			    arg-category="{$category}"
				arg-listing="{$listing}"
				arg-prefixes="{$prefixes}" />

			<xf:macro template="z61_classifieds_listing_edit_macros" name="content"
					  arg-listing="{$listing}"
					  arg-category="{$category}"
					  arg-attachmentData="{$attachmentData}" />

			<xf:if is="{$category.location_enable}">
				<xf:textboxrow id="location" name="listing_location"
							   maxlength="{{ max_length($listing, 'listing_location' )}}"
							   label="{{ phrase('z61_classifieds_location') }}"
							   placeholder="{{ phrase('z61_classifieds_enter_a_location...') }}"
							   value="{$listing.listing_location}"/>
			</xf:if>

			<xf:macro template="z61_classifieds_listing_edit_macros" name="tags"
					  arg-listing="{$listing}"
					  arg-category="{$category}" />
			
			<xf:if is="$category.allow_paid">
				<xf:formrow rowtype="input" label="{{ phrase('price') }}">
					<xf:macro template="z61_classifieds_listing_edit_macros" name="purchase_inputs"
							arg-listing="{$listing}" />
				</xf:formrow>
			</xf:if>

			<xf:if contentcheck="true">
				<h2 class="block-formSectionHeader"><span class="block-formSectionHeader-aligner">{{ phrase('z61_classifieds_additional_information') }}</span></h2>
				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
							  arg-type="classifiedsListings"
							  arg-set="{$listing.custom_fields}"
							  arg-group="{{ ['above', 'below', 'extra'] }}"
							  arg-editMode="{{ $listing.getFieldEditMode() }}"
							  arg-onlyInclude="{$category.field_cache}" />
				</xf:contentcheck>
			</xf:if>

			<h2 class="block-formSectionHeader"><span class="block-formSectionHeader-aligner">{{ phrase('z61_classifieds_listing_options') }}</span></h2>
			<xf:macro template="z61_classifieds_listing_edit_macros" name="type"
					  arg-category="{$category}"
					  arg-listing="{$listing}"
					  arg-listingTypes="{$listingTypes}" />

			<xf:if is="$conditions is not empty">
				<xf:macro template="z61_classifieds_listing_edit_macros" name="condition"
						  arg-category="{$category}"
						  arg-listing="{$listing}"
						  arg-conditions="{$conditions}" />
			</xf:if>

			<xf:macro template="z61_classifieds_listing_edit_macros" name="contact_info"
					  arg-listing="{$listing}"
					  arg-category="{$category}" />
			
			<xf:if is="$listing.canSendModeratorActionAlert()">
				<hr class="formRowSep" />

				<xf:formrow>
					<xf:macro template="helper_action" name="author_alert" arg-row="{{ false }}" />
				</xf:formrow>
			</xf:if>
		</div>

		<xf:submitrow icon="save" sticky="true">
			<xf:html>
				<xf:button class="u-jsOnly" data-xf-click="preview-click" icon="preview" />
			</xf:html>
		</xf:submitrow>
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_edit_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="purchase_inputs" arg-listing="!">
	<div class="inputGroup">
		<xf:textbox name="price" value="{{ !empty($listing.price) ? $listing.price : $category.draft_listing.price }}" placeholder="{{ phrase('price') }}" style="width: 120px" />
		<span class="inputGroup-splitter"></span>
		<xf:select name="currency" value="{$listing.currency|to_upper}" style="width: 110px">
			<xf:foreach loop="$xf.app.em.getRepository('Z61\Classifieds:Listing').getAvailableCurrencies($listing)" value="$currency">
				<xf:option value="{$currency.code}">{$currency.code}</xf:option>
			</xf:foreach>
		</xf:select>
	</div>
</xf:macro>

<xf:macro name="title" arg-listing="!" arg-category="!" arg-prefixes="!">
	<xf:prefixinputrow
		label="{{ phrase('title') }}"
		prefixes="{$prefixes}"
		type="classifieds_listing"
		prefix-value="{$listing.prefix_id}"
		textbox-value="{{ strlen($listing.title) > 0 ? $listing.title : $category.draft_listing.title }}"
		textbox-class="input--title"
		maxlength="{{ max_length($listing, 'title') }}"
		placeholder="{{ phrase('title...') }}"
		rowtype="fullWidth noLabel" />
</xf:macro>

<xf:macro name="type" arg-listing="!" arg-category="!" arg-listingTypes="!">
	<xf:formrow label="{{ phrase('z61_classifieds_type') }}">
		<xf:if is="$listingTypes">
			<xf:radio name="listing_type_id" value="{{$listing.listing_type_id > 0 ? $listing.listing_type_id : $category.draft_listing.listing_type_id }}">
				<xf:foreach loop="$listingTypes" value="$type">
					<xf:if is="$listing.isInsert()">
						<xf:option value="{$type.listing_type_id}" selected="{{ count($listingTypes) == 1}}">{$type.title}</xf:option>
					<xf:else/>
						<xf:option value="{$type.listing_type_id}" selected="{{ $listing.listing_type_id == $type.listing_type_id}}">{$type.title}</xf:option>
					</xf:if>
				</xf:foreach>
			</xf:radio>
		<xf:else />
			{{ $listingTypes.title }}
			<xf:hiddenval name="listing_type_id">{$listingTypes.listing_type_id}</xf:hiddenval>
		</xf:if>
	</xf:formrow>
</xf:macro>

<xf:macro name="expiration" arg-listing="!" arg-category="!">
	<xf:formrow	label="{{ phrase('expires') }}">
		<xf:if is="{$listing.isInsert()}">
			<xf:if is="$category.expiration_date is not empty">
				<xf:date time="$category.expiration_date" />
			<xf:else />
				{{ phrase('z61_classifieds_x_days', {'days': $category.expiration_days}) }}
			</xf:if>
			<xf:else />
			<xf:date time="{$listing.expiration_date}" />
		</xf:if>
	</xf:formrow>
</xf:macro>

<xf:macro name="content" arg-listing="!" arg-category="!" arg-attachmentData="{{ [] }}">
	<xf:editorrow name="message"
	  value="{$listing.content}"
	  attachments="{{ $attachmentData.attachments }}"
	  rowtype="fullWidth noLabel mergePrev"
	  label="{{ phrase('message') }}"
	/>

	<xf:formrow>
		<xf:if is="$attachmentData">
			<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
		</xf:if>
		<xf:button class="button--link u-jsOnly" data-xf-click="preview-click" icon="preview" />
	</xf:formrow>
</xf:macro>

<xf:macro name="tags" arg-listing="!" arg-category="!">
	<xf:if is="$category.canEditTags()">
		<hr class="formRowSep" />
		<xf:tokeninputrow name="tags" value="{{ $listing.tags ? $listing.tags|join(', ') : $category.draft_listing.tags }}"
		  href="{{ link('misc/tag-auto-complete') }}"
		  min-length="{$xf.options.tagLength.min}"
		  max-length="{$xf.options.tagLength.max}"
		  max-tokens="{$xf.options.maxContentTags}"
		  label="{{ phrase('tags') }}">
			<xf:explain>
				{{ phrase('multiple_tags_may_be_separated_by_commas') }}
			</xf:explain>
		</xf:tokeninputrow>
	</xf:if>
</xf:macro>

<xf:macro name="contact_info" arg-listing="!" arg-category="!">
	<xf:if contentcheck="true">
		<h2 class="block-formSectionHeader"><span class="block-formSectionHeader-aligner">{{ phrase('z61_classifieds_contact_options') }}</span></h2>

		<hr class="formRowSep" />
		<xf:contentcheck>
			<xf:if is="{$category.contact_conversation} || {$category.contact_email}">
				<xf:checkboxrow>
					<xf:if is="$category.contact_conversation">
						<xf:option name="contact_conversation_enable" checked="{$listing.contact_conversation_enable}"
								   label="{{ phrase('z61_classifieds_allow_users_to_contact_by_conversation')}}"
						/>
					</xf:if>
					<xf:if is="$category.contact_email">
						<xf:option name="contact_email_enable" checked="{$listing.contact_email_enable}"
								   label="{{ phrase('z61_classifieds_allow_users_to_contact_by_email') }}">
							<xf:textbox name="contact_email" value="{{ strlen($listing.contact_email) > 0 ?: $listing.contact_email }}" maxlength="150" />
						</xf:option>
					</xf:if>
				</xf:checkboxrow>
			</xf:if>
			<xf:if is="$category.contact_custom">
				<xf:textboxrow name="contact_custom" value="{{ $listing.contact_custom}}"
							   label="{{ phrase('z61_classifieds_custom_contact_details') }}"
							   explain="{{ phrase('z61_classifieds_custom_contact_details_explain') }}" maxlength="150"
				/>
			</xf:if>
		</xf:contentcheck>
	</xf:if>
</xf:macro>

<xf:macro name="condition" arg-listing="!" arg-category="!" arg-conditions="!">
	<xf:formrow label="{{ phrase('z61_classifieds_condition') }}">
		<xf:radio name="condition_id" value="{{ $listing.condition_id > 0 ? $listing.condition_id :  $category.draft_listing.condition_id }}">
			<xf:foreach loop="$conditions" value="$condition">
				<xf:if is="$listing.isInsert()">
					<xf:option value="{$condition.condition_id}" selected="{{ count($conditions) == 1 }}">{{ $condition.title }}</xf:option>
				<xf:else/>
					<xf:option value="{$condition.condition_id}" selected="{{ $listing.condition_id == $condition.condition_id }}">{{ $condition.title }}</xf:option>
				</xf:if>
			</xf:foreach>
		</xf:radio>
	</xf:formrow>
</xf:macro>

<xf:macro name="package" arg-listing="!" arg-category="!" arg-packages="!">
	<xf:formrow label="{{ phrase('z61_classifieds_package') }}">
		<xf:radio name="package_id" value="{{$listing.package_id > 0 ? $listing.package_id : $category.draft_listing.package_id }}">
			<xf:foreach loop="$packages" value="$package">
				<xf:if is="$listing.isInsert()">
					<xf:option value="{$package.package_id}" hint="{$package.cost_phrase}"
							   selected="{{ count($packages) == 1 }}">{{ $package.title }}</xf:option>
				<xf:else/>
					<xf:option value="{$package.package_id}" hint="{$package.cost_phrase}"
							   selected="{{ $listing.package_id == $package.package_id }}">{{ $package.title }}</xf:option>
				</xf:if>
			</xf:foreach>
		</xf:radio>
	</xf:formrow>
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_listing_extra" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ prefix('classifieds_listing', $listing, 'escaped') }}{$listing.title} - {{ phrase('z61_classifieds_extra_info') }}</xf:title>

<xf:wrap template="z61_classifieds_listing_wrapper">
    <xf:set var="$pageSelected" value="extra" />
</xf:wrap>

<div class="block">
    <xf:if contentcheck="true">
        <div class="block-outer">
            <div class="block-outer-opposite">
                <xf:contentcheck>
                    <xf:macro template="z61_classifieds_listing_wrapper_macros" name="action_buttons" arg-listing="{$listing}" />
                </xf:contentcheck>
            </div>
        </div>
    </xf:if>

    <div class="block-container">
        <div class="block-body block-row">
            <xf:macro template="custom_fields_macros" name="custom_fields_view"
                      arg-type="classifiedsListings"
                      arg-group="extra"
                      arg-onlyInclude="{$category.field_cache}"
                      arg-set="{$listing.custom_fields}" />
        </div>
    </div>
</div>]]></template>
  <template type="public" title="z61_classifieds_listing_feature" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_confirm_feature:') }} {$listing.title}</xf:title>

<xf:js src="xf/payment.js" min="1" />

<xf:form action="{{ link('classifieds/feature', $listing) }}" ajax="true" data-xf-init="payment-provider-container" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">
                {{ phrase('z61_classifieds_please_confirm_you_wish_to_feature_item_for_displayed_fee:') }}
                <strong><a href="{{ link('classifieds', $listing) }}">{$listing.title}</a></strong>
            </xf:inforow>

            <xf:formrow label="{{ phrase('cost') }}">
                {$listing.Category.cost_phrase}
            </xf:formrow>

            <xf:macro template="z61_classifieds_purchase_macros" name="payment_profiles"
                      arg-listing="{$listing}" arg-profiles="{$profiles}" />
        </div>

        <xf:submitrow rowtype="" icon="purchase" class="js-payButton"
                      submit="{{ phrase('z61_classifieds_buy_for_x', {'price': $listing.Category.price|currency($listing.Category.currency)}) }}" />
    </div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_grid_view.less" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[.structItem-metaItem--rating
{
	font-size: @xf-fontSizeSmall;
}

@listing-grid-gap: 10px;
@listing-grid-width: 330px;
@listing-grid-thumb: 108px;

@media (min-width: @xf-responsiveMedium)
{
	@supports(display: grid)
	{
		.block[data-type="classifieds_listing"] .structItemContainer
		{
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(@listing-grid-width, 1fr));
			grid-gap: @listing-grid-gap;
			padding: @listing-grid-gap;
			background-color: @xf-contentAltBg;
		}

		.structItem.structItem--listing{
			display: grid;
		}
		
		.structItem--listing
		{
		    background-color: @xf-contentBg;
		    border-radius: 3px;
		    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
		    border-width: 0px;
		    display: grid;
		    grid-template-columns: @listing-grid-thumb 1fr;
		    grid-template-areas: 'icon text' 'stats stats';

			.structItem-cell--icon.structItem-cell--iconExpanded
			{
				width: auto;
				grid-area: icon;
			}

			.structItem-cell--main 
			{
				grid-area: text;
			}

			.structItem-cell--listingMeta
			{
				grid-area: stats;
				width: auto;
				display: flex;
				flex-wrap: wrap;
				align-items: center;
				justify-content: space-between;
			}

			.structItem-cell--iconExpanded .structItem-iconContainer .avatar 
			{
				width: 100%;
				height: auto;
				font-size: 56px;
			}

			.structItem-secondaryIcon
			{
				display: none;
			}

			.ratingStarsRow--justified
			{
				border-bottom: 1px solid @xf-borderColorFaint;
				margin-bottom: 4px;
				padding-bottom: 4px;
			}
		}
	}
}

@media (max-width: @xf-responsiveMedium)
{
	.structItem-cell.structItem-cell--listingMeta
	{
		display: block;
		width: auto;
		float: left;
		padding-top: 0;
		padding-left: 0;
		padding-right: 0;
		color: @xf-textColorMuted;

		.pairs
		{
			display: inline;

			&:before,
			&:after
			{
				display: none;
			}

			> dt,
			> dd
			{
				display: inline;
				float: none;
				margin: 0;
			}
		}

		.structItem-metaItem
		{
			display: inline;
		}

		.structItem-metaItem + .structItem-metaItem:before
		{
			display: inline;
			content: "\20\00B7\20";
			color: @xf-textColorMuted;
		}
	}
}]]></template>
  <template type="public" title="z61_classifieds_listing_list_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="listing"
	arg-listing="!"
	arg-category="{{ null }}"
	arg-showWatched="{{ true }}"
	arg-allowInlineMod="{{ true }}"
	arg-chooseName=""
	arg-extraInfo="">

	<xf:css src="structured_list.less" />
	<xf:css src="z61_classifieds.less" />

	<div class="structItem structItem--listing {{ $listing.prefix_id ? 'is-prefix' . $listing.prefix_id : '' }} {{ $listing.isIgnored() ? 'is-ignored' : '' }}{{ $listing.listing_state == 'moderated' ? 'is-moderated' : '' }}{{ $listing.listing_state == 'deleted' ? 'is-deleted' : '' }} js-inlineModContainer js-listingListItem-{$listing.listing_id}" data-author="{{ $listing.User.username ?: $listing.username }}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded structItem-cell--iconListingCoverImage">
			<div class="structItem-iconContainer">
				{{ z61_classifieds_listing_thumbnail($listing) }}
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
				<xf:contentcheck>
					<xf:if is="$listing.Featured">
						<li>
							<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('z61_classifieds_featured')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('z61_classifieds_featured') }}</span>
						</li>
					</xf:if>
					<xf:if is="!$listing.listing_open">
						<li>
							<i class="structItem-status structItem-status--locked" aria-hidden="true" title="{{ phrase('locked')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('locked') }}</span>
						</li>
					</xf:if>
					<xf:if is="$listing.listing_state == 'moderated'">
						<li>
							<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
						</li>
					</xf:if>
					<xf:if is="$listing.listing_state == 'deleted'">
						<li>
							<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('deleted') }}</span>
						</li>
					</xf:if>
					<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
						<xf:if is="{$listing.Watch.{$xf.visitor.user_id}}">
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('z61_classifieds_listing_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('z61_classifieds_listing_watched') }}</span>
							</li>
						<xf:elseif is="!$category AND {$listing.Category.Watch.{$xf.visitor.user_id}}" />
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('z61_classifieds_category_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('z61_classifieds_category_watched') }}</span>
							</li>
						</xf:if>
					</xf:if>
					<li>
						<a href="{{ $category is not empty ?
							 link('classifieds/categories', $category, {'listing_type_id': $listing.Type.listing_type_id}) :
							 link('classifieds', null, {'listing_type_id': $listing.Type.listing_type_id}) }}">
						<span class="label label--smallest {{ $listing.Type.css_class}}">
							{{ $listing.Type.title }}
						</span>
						</a>
					</li>

					<xf:if is="$listing.expired">
						<li>
							<span class="label label--orange label--smallest">{{ phrase('z61_classifieds_expired') }}</span>
						</li>
					</xf:if>

					<xf:if is="$listing.listing_status == 'sold'">
						<li>
							<span class="label label--yellow label--smallest">
								{{ phrase('z61_classifieds_sold') }}
							</span>
						</li>
					</xf:if>
				</xf:contentcheck>
				</ul>
			</xf:if>
			
			<div class="structItem-title">
				<xf:if is="$listing.prefix_id">
					<xf:if is="$category">
						<a href="{{ link('classifieds/categories', $category, {'prefix_id': $listing.prefix_id}) }}" class="labelLink" rel="nofollow">{{ prefix('classifieds_listing', $listing, 'html', '') }}</a>
					<xf:else />
						{{ prefix('classifieds_listing', $listing, 'html', '') }}
					</xf:if>
				</xf:if>
				<a href="{{ link('classifieds', $listing) }}" class="" data-tp-primary="on">{$listing.title}</a>
				<xf:if is="$listing.canShowPrice()">
					<span class="label label--primary label--smallest">
						<xf:if is="$listing.price > 0">
							{$listing.price|currency($listing.currency)}
							<xf:else/>
							{{ phrase('z61_classifieds_free') }}
						</xf:if>
					</span>
				</xf:if>
				<xf:if is="$listing.listing_status == 'awaiting_payment'">
						<span class="label label--red label--smallest">
							 {{ phrase('z61_classifieds_awaiting_payment') }}
					</span>
				</xf:if>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
					<xf:contentcheck>
						<xf:if is="{$extraInfo}">
							<li>{$extraInfo}</li>
						</xf:if>
						<xf:if is="$chooseName">
							<li><xf:checkbox standalone="true">
								<xf:option name="{$chooseName}[]" value="{$listing.listing_id}" class="js-chooseItem" />
							</xf:checkbox></li>
						<xf:elseif is="$allowInlineMod AND $listing.canUseInlineModeration()" />
							<li><xf:checkbox standalone="true"><xf:option value="{$listing.listing_id}"
								class="js-inlineModToggle"
								data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>
				<xf:if is="$listing.listing_state == 'deleted'">
					<xf:if is="{$extraInfo}"><span class="structItem-extraInfo">{$extraInfo}</span></xf:if>

					<xf:macro template="deletion_macros" name="notice" arg-log="{$listing.DeletionLog}" />
				<xf:else />
					<ul class="structItem-parts">
						<li><xf:username user="$listing.User" defaultname="{$listing.username}" /></li>
						<li class="structItem-startDate"><a href="{{ link('classifieds', $listing) }}" rel="nofollow"><xf:date time="{$listing.listing_date}" /></a></li>
						<xf:if is="!$category OR $category.hasChildren()">
							<li><a href="{{ link('classifieds/categories', $listing.Category) }}">{$listing.Category.title}</a></li>
						</xf:if>
					</ul>
				</xf:if>
			</div>
			
			<xf:if is="$listing.listing_state != 'deleted'">
				<div class="structItem-listingDescription">{{ snippet($listing.content, 150, {'stripBbCode': true}) }}</div>
			</xf:if>
		</div>
		<div class="structItem-cell structItem-cell--listingMeta">
			<xf:if is="$listing.expiration_date">
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--expiration">
					<dt>{{ phrase('expires') }}</dt>
					<dd><xf:date time="{{ $listing.expiration_date }}" /></dd>
				</dl>
			</xf:if>
			<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--type">
				<dt>{{ phrase('z61_classifieds_type') }}</dt>
				<dd>{{ $listing.Type.title }}</dd>
			</dl>
			<xf:if is="$listing.condition_id">
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--condition">
					<dt>{{ phrase('z61_classifieds_condition') }}</dt>
					<dd>{{ $listing.Condition.title }}</dd>
				</dl>
			</xf:if>
			<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--views">
				<dt>{{ phrase('views') }}</dt>
				<dd>{{ $listing.view_count|number }}</dd>
			</dl>
		</div>
	</div>
</xf:macro>
	
<xf:macro name="listing_simple" arg-listing="!" arg-withMeta="{{ true }}">
	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="$listing.User" size="xxs" />
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('classifieds', $listing) }}">{{ prefix('classifieds_listing', $listing) }}{$listing.title}</a>
			<div class="contentRow-lesser">{{ snippet($listing.content, 50, {'stripBbCode': true}) }}</div>
			<xf:if is="$withMeta">
				<div class="contentRow-minor contentRow-minor--smaller">
					<ul class="listInline listInline--bullet">
						<li>{{ $listing.User.username ?: $listing.username }}</li>
						<li>{{ phrase('created:') }} <xf:date time="{$listing.listing_date}" /></li>
					</ul>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="listing_grid"
		  arg-listing="!"
		  arg-category="{{ null }}"
		  arg-showWatched="{{ true }}"
		  arg-allowInlineMod="{{ true }}"
		  arg-chooseName=""
		  arg-extraInfo="">

	<xf:css src="structured_list.less" />
	<xf:css src="z61_classifieds.less" />
	<xf:css src="z61_classifieds_listing_grid_view.less" />

	<div class="structItem structItem--listing {{ $listing.prefix_id ? 'is-prefix' . $listing.prefix_id : '' }} {{ $listing.isIgnored() ? 'is-ignored' : '' }}{{ ($listing.isUnread() AND !$forceRead) ? ' is-unread' : '' }}{{ $listing.listing_state == 'moderated' ? 'is-moderated' : '' }}{{ $listing.listing_state == 'deleted' ? 'is-deleted' : '' }} js-inlineModContainer js-listingListItem-{$listing.listing_id}" data-author="{{ $listing.User.username ?: $listing.username }}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded structItem-cell--iconListingCoverImage">
			<div class="structItem-iconContainer">
				<xf:if is="$listing.cover_image_id">
					{{ z61_classifieds_listing_thumbnail($listing) }}
					<xf:else />
					<xf:avatar user="$listing.User" size="m" defaultname="{{ $listing.username ?: phrase('deleted_member') }}" />
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
					<xf:contentcheck>
						<xf:if is="$listing.Featured">
							<li>
								<i class="structItem-status structItem-status--attention" aria-hidden="true" title="{{ phrase('xa_ams_featured')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xa_ams_featured') }}</span>
							</li>
						</xf:if>
						<xf:if is="$listing.listing_state == 'moderated'">
							<li>
								<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
							</li>
						</xf:if>
						<xf:if is="$listing.listing_state == 'deleted'">
							<li>
								<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('deleted') }}</span>
							</li>
						</xf:if>
						<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
							<xf:if is="{$listing.Watch.{$xf.visitor.user_id}}">
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('z61_classifieds_listing_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('z61_classifieds_listing_watched') }}</span>
								</li>
								<xf:elseif is="!$category AND {$listing.Category.Watch.{$xf.visitor.user_id}}" />
								<li>
									<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('z61_classifieds_category_watched')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('z61_classifieds_category_watched') }}</span>
								</li>
							</xf:if>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<div class="structItem-title">
				<xf:if is="$listing.prefix_id">
					<xf:if is="$category">
						<a href="{{ link('classifieds/categories', $category, {'prefix_id': $listing.prefix_id}) }}" class="labelLink" rel="nofollow">{{ prefix('classifieds_listing', $listing, 'html', '') }}</a>
						<xf:else />
						{{ prefix('classifieds_listing', $listing, 'html', '') }}
					</xf:if>
				</xf:if>
				<a href="{{ link('classifieds', $listing) }}" class="" data-tp-primary="on">{$listing.title}</a>
				<xf:if is="$listing.canShowPrice()">
					<span class="label label--primary label--smallest">
						<xf:if is="$listing.price > 0">
							{$listing.price|currency($listing.currency)}
							<xf:else/>
							{{ phrase('z61_classifieds_free') }}
						</xf:if>
					</span>
				</xf:if>
				<xf:if is="$listing.listing_status == 'awaiting_payment'">
						<span class="label label--red label--smallest">
							 {{ phrase('z61_classifieds_awaiting_payment') }}
					</span>
				</xf:if>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
						<xf:contentcheck>
							<xf:if is="{$extraInfo}">
								<li>{$extraInfo}</li>
							</xf:if>
							<xf:if is="$chooseName">
								<li><xf:checkbox standalone="true">
									<xf:option name="{$chooseName}[]" value="{$listing.listing_id}" class="js-chooseItem" />
								</xf:checkbox></li>
								<xf:elseif is="$allowInlineMod AND $listing.canUseInlineModeration()" />
								<li><xf:checkbox standalone="true"><xf:option value="{$listing.listing_id}"
																			  class="js-inlineModToggle"
																			  data-xf-init="tooltip" title="{{ phrase('select_for_moderation')|for_attr }}" /></xf:checkbox></li>
							</xf:if>
						</xf:contentcheck>
					</ul>
				</xf:if>
				<xf:if is="$listing.listing_state == 'deleted'">
					<xf:if is="{$extraInfo}"><span class="structItem-extraInfo">{$extraInfo}</span></xf:if>

					<xf:macro template="deletion_macros" name="notice" arg-log="{$listing.DeletionLog}" />
					<xf:else />
					<ul class="structItem-parts">
						<li><xf:username user="$listing.User" defaultname="{$listing.username}" /></li>
						<li class="structItem-startDate"><a href="{{ link('classifieds', $listing) }}" rel="nofollow"><xf:date time="{$listing.listing_date}" /></a></li>
						<xf:if is="!$category OR $category.hasChildren()">
							<li><a href="{{ link('classifieds/categories', $listing.Category) }}">{$listing.Category.title}</a></li>
						</xf:if>
					</ul>
				</xf:if>
			</div>

			<xf:if is="$listing.listing_state != 'deleted'">
				<div class="structItem-listingDescription">{{ snippet($listing.content, 150, {'stripBbCode': true}) }}</div>
			</xf:if>
		</div>
		<div class="structItem-cell structItem-cell--listingMeta">
			<xf:if is="$listing.expiration_date">
				<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--expiration">
					<dt>{{ phrase('expires') }}</dt>
					<dd><xf:date time="{{ $listing.expiration_date }}" /></dd>
				</dl>
			</xf:if>
			<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--type">
				<dt>{{ phrase('z61_classifieds_type') }}</dt>
				<dd>{{ $listing.Type.title }}</dd>
			</dl>
			<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--condition">
				<dt>{{ phrase('z61_classifieds_condition') }}</dt>
				<dd>{{ $listing.Condition.title }}</dd>
			</dl>
			<dl class="pairs pairs--justified structItem-minor structItem-metaItem structItem-metaItem--views">
				<dt>{{ phrase('views') }}</dt>
				<dd>{{ $listing.view_count|number }}</dd>
			</dl>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_listing_mark_read" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_mark_listings_read') }}</xf:title>

<xf:form action="{{ link('classifieds/mark-read', null, {'date': $date}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('z61_classifieds_you_sure_you_want_to_mark_all_listings_read') }}</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('z61_classifieds_mark_listings_read') }}" rowtype="simple" icon="markRead" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_mark_sold" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_mark_listing_sold') }}</xf:title>

<xf:form action="{{ link('classifieds/mark-sold', $listing) }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">{{ phrase('z61_classifieds_you_sure_you_want_to_mark_x_listing_y_as_sold', {'listing': $listing.title,'link': link('classifieds', $listing)} ) }}</xf:inforow>
        <xf:textboxrow name="username" ac="single" autocomplete="off"
                    label="{{ phrase('z61_classifieds_purchasing_user') }}"
                    maxlength="{{ max_length($xf.visitor, 'username') }}"
					value="{{ $listing.sold_username ?: ''}}"
                    placeholder="{{ phrase('name...') }}" />
        <xf:submitrow submit="{{ phrase('z61_classifieds_mark_listing_sold') }}" rowtype="simple" icon="markRead" />
        </div>
    </div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_move" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_move_listing') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:form action="{{ link('classifieds/move', $listing) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body js-prefixListenContainer">
			<xf:prefixinputrow
				label="{{ phrase('title') }}"
				prefixes="{$prefixes}"
				type="classifieds_listing"
				prefix-value="{$listing.prefix_id}"
				textbox-value="{$listing.title}"
				href="{{ link('classifieds/prefixes') }}"
				listen-to="< .js-prefixListenContainer | .js-categoryList"
				autofocus="autofocus"
				maxlength="{{ max_length($listing, 'title') }}" />

			<xf:selectrow name="target_category_id" value="{$listing.category_id}" class="js-categoryList"
				label="{{ phrase('z61_classifieds_destination_category') }}">

				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('z61_classifieds_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:if is="$listing.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_page_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="listing_page_options" arg-category="!" arg-listing="{{ null }}">
	<xf:page option="listingCategory" value="{$category}" />

	<xf:page option="searchConstraints" value="{{ {
		phrase('z61_classifieds_listings'): {'search_type': 'listing'},
		phrase('z61_classifieds_this_category'): {'search_type': 'listing', 'c': {'categories': [$category.category_id] }}
	} }}" />
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_listing_pay" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_confirm_purchase:') }} {$listing.title}</xf:title>

<xf:js src="xf/payment.js" min="1" />

<xf:form action="{{ link('purchase', $listing, {'listing_id': $listing.listing_id}) }}" ajax="true" data-xf-init="payment-provider-container" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('z61_classifieds_please_confirm_you_wish_to_list_item_for_displayed_fee') }}:
				<strong>{$listing.title}</strong>
			</xf:inforow>

			<xf:formrow label="{{ phrase('z61_classifieds_type') }}">
				{{ $listing.Type.title }}
			</xf:formrow>

			<xf:formrow label="{{ phrase('z61_classifieds_condition') }}">
				{{ $listing.Condition.title }}
			</xf:formrow>

			<xf:formrow label="{{ phrase('cost') }}">
				{$listing.Package.cost_phrase}
			</xf:formrow>

			<xf:macro template="z61_classifieds_purchase_macros" name="payment_profiles"
					  arg-listing="{$listing}" arg-profiles="{$profiles}" />
		</div>

		<xf:submitrow rowtype="" icon="purchase" class="js-payButton"
			submit="{{ phrase('z61_classifieds_buy_for_x', {'price': $listing.Package.cost_amount|currency($listing.Package.cost_currency)}) }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_reassign" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_reassign_listing') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:form action="{{ link('classifieds/reassign', $listing) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" ac="single" maxlength="{{ max_length($xf.visitor, 'username') }}"
				label="{{ phrase('z61_classifieds_new_owner') }}" />

			<xf:checkboxrow>
				<xf:option name="alert" selected="{{ true }}"
					label="{{ phrase('z61_classifieds_notify_current_and_new_owners_of_this_action') }} {{ phrase('reason:') }}">

					<xf:textbox name="alert_reason" placeholder="{{ phrase('optional') }}" maxlength="250" />
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_tags" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('edit_tags') }}</xf:title>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:macro template="tag_macros" name="edit_form"
	arg-action="{{ link('classifieds/tags', $listing) }}"
	arg-uneditableTags="{$uneditableTags}"
	arg-editableTags="{$editableTags}" />]]></template>
  <template type="public" title="z61_classifieds_listing_view" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ prefix('classifieds_listing', $listing, 'escaped') }}{$listing.title}</xf:title>

<xf:set var="$descSnippet" value="{{ snippet($listing.content, 250, {'stripBbCode': true}) }}" />
<xf:js src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" />

<xf:js>
$('.owl-carousel').owlCarousel({
    center: false,
    items:{{ $listing.attach_count }},
    loop:false,
	autoplayTimeout: 4000,
	autoplay:true,
	autoplayHoverPause:true,
    margin:10
});
</xf:js>

<xf:css src="z61_classifieds_slider.less"  />
<xf:css src="z61_classifieds_listing_view.less" />

<xf:macro template="metadata_macros" name="metadata"
	arg-description="{$descSnippet}"
	arg-shareUrl="{{ link('canonical:classifieds', $listing) }}"
	arg-canonicalUrl="{{ link('canonical:classifieds', $listing) }}" />

<xf:page option="ldJsonHtml">
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "CreativeWork",
		"@id": "{{ link('canonical:classifieds', $listing)|escape('json') }}",
		"headline": "{$listing.title|escape('json')}",
		"description": "{$descSnippet|escape('json')}",
		"dateCreated": "{{ date($listing.listing_date, 'c')|escape('json') }}",
		<xf:if is="$listing.last_edit_date > 0">
		"dateModified": "{{ date($listing.last_edit_date, 'c')|escape('json') }}",
		</xf:if>
		<xf:if is="$listing.hasViewableDiscussion()">
			"discussionUrl": "{{ link('canonical:threads', $listing.Discussion)|escape('json') }}",
		</xf:if>
		"author": {
			"@type": "Person",
			"name": "{{ ($listing.User ? $listing.User.username : $listing.username)|escape('json') }}"
		}
	}
	</script>
</xf:page>

<xf:wrap template="z61_classifieds_listing_wrapper">
	<xf:set var="$pageSelected" value="overview" />
</xf:wrap>

<xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ $listing.canViewAttachments() }}" />

<div class="block block--classifieds">
	<div class="block-container">
<div class="classifieds-wrapper">
		<div class="classifieds-left">
			<div class="classifiedsCoverImage">
				<div class="classifiedsCoverImage-container">
					<div class="classifiedsCoverImage-container-image">
						<img src="{{ link('classifieds/cover-image', $listing) }}" />
					</div>
				</div>
			</div>

			<div class="classifieds-featuredImage--icons">
				<div class="lbContainer js-classifiedsDetails"
					 data-xf-init="lightbox"
					 data-lb-id="listing-{$listing.listing_id}"
					 data-lb-caption-desc="{{ $listing.User ? $listing.User.username : $listing.username }} &middot; {{ date_time($listing.listing_date) }}">

					<div class="js-lbContainer thumbnailCount{$listing.attach_count|raw}">
						<xf:if is="$listing.attach_count">
							<xf:if contentcheck="true">
								<xf:css src="attachments.less" />
								<div class="attachmentList-slider owl-carousel">
									<xf:contentcheck>
										<xf:foreach loop="$listing.Attachments" value="$attachment" if="!$listing.isAttachmentEmbedded($attachment)">
											<ul class="listPlain">
												<xf:macro template="attachment_macros" name="attachment_list_item"
														  arg-attachment="{$attachment}"
														  arg-canView="{{ $listing.canViewAttachments() }}" />
											</ul>
										</xf:foreach>
									</xf:contentcheck>
								</div>
							</xf:if>
						</xf:if>
					</div>
				</div>
			</div>
		</div>
		<div class="classifieds-right">
			<dl class="pairs pairs--justified">
				<dt>{{ $category.type_phrase }}</dt>
				<dd>{{ $listing.Type.title }}</dd>
			</dl>
			<xf:if is="$listing.condition_id">
				<dl class="pairs pairs--justified">
					<dt>{{ $category.condition_phrase }}</dt>
					<dd>{{ $listing.Condition.title }}</dd>
				</dl>
			</xf:if>
			<xf:if is="$listing.canShowPrice()">
				<dl class="pairs pairs--justified">
					<dt>{{ $category.price_phrase }}</dt>
					<dd>
						<xf:if is="$listing.price > 0">
							{$listing.price|currency($listing.currency)}
							<xf:else/>
							{{ phrase('z61_classifieds_free') }}
						</xf:if>
					</dd>
				</dl>
			</xf:if>
			<xf:if is="{$listing.expiration_date}">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('expires') }}</dt>
					<dd><xf:date time="{{ $listing.expiration_date }}" /></dd>
				</dl>
			</xf:if>
			<xf:if is="{{$listing.sold_user_id > 0 && $listing.listing_status == 'sold' && $listing.canViewPurchaseInfo()}}">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('z61_classifieds_purchased_by')}}</dt>
					<dd><xf:username user="{$listing.SoldUser}" /></dd>
				</dl>
			</xf:if>
		</div>
	</div>
</div>
</div>

<xf:if contentcheck="true">
	<div class="block">
		<div class="block-outer">
			<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:macro template="z61_classifieds_listing_wrapper_macros" name="action_buttons" arg-listing="{$listing}" />
				</xf:contentcheck>
			</div>
		</div>
	</div>
</xf:if>

<div class="block">
	<div class="block-container">
		<div class="block-body js-listingBody">

			<div class="listingBody">
				<article class="listingBody-main">
					<xf:macro template="custom_fields_macros" name="custom_fields_view"
							  arg-type="classifiedsListings"
							  arg-group="above"
							  arg-onlyInclude="{$category.field_cache}"
							  arg-set="{$listing.custom_fields}"
							  arg-wrapperClass="listingBody-fields listingBody-fields--before" />

					{{ bb_code($listing.content, 'classifieds_listing', $listing) }}

					<xf:macro template="custom_fields_macros" name="custom_fields_view"
							  arg-type="classifiedsListings"
							  arg-group="below"
							  arg-onlyInclude="{$category.field_cache}"
							  arg-set="{$listing.custom_fields}"
							  arg-wrapperClass="listingBody-fields listingBody-fields--after" />

					<xf:if contentcheck="true">
						<div class="actionBar">
							<xf:contentcheck>
								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--external">
										<xf:contentcheck>
											<!--[XF:listing_tools_menu:top]-->
											<xf:react content="{$listing}" link="classifieds/react" list="< .listingBody | .js-reactionsList" />
										</xf:contentcheck>
									</div>
								</xf:if>

								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--internal">
										<xf:contentcheck>
											<xf:if is="$listing.canReport()">
												<a href="{{ link('classifieds/report', $listing) }}"
												   class="actionBar-action actionBar-action--report" data-xf-click="overlay">{{ phrase('report') }}</a>
											</xf:if>

											<xf:set var="$hasActionBarMenu" value="{{ false }}" />
											<xf:if is="$listing.canEdit()">
												<a href="{{ link('classifieds/edit', $listing) }}"
												   class="actionBar-action actionBar-action--edit actionBar-action--menuItem">{{ phrase('edit') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>
											<xf:if is="$listing.canDelete('soft')">
												<a href="{{ link('classifieds/delete', $listing) }}"
												   class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
												   data-xf-click="overlay">{{ phrase('delete') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>
											<xf:if is="$xf.visitor.canViewIps() && $listing.ip_id">
												<a href="{{ link('classifieds/ip', $listing) }}"
												   class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
												   data-xf-click="overlay">{{ phrase('ip') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>
											<xf:if is="$listing.canWarn()">
												<a href="{{ link('classifieds/warn', $listing) }}"
												   class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
												<xf:elseif is="$listing.warning_id && $xf.visitor.canViewWarnings()" />
												<a href="{{ link('warnings', {'warning_id': $listing.warning_id}) }}"
												   class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
												   data-xf-click="overlay">{{ phrase('view_warning') }}</a>
												<xf:set var="$hasActionBarMenu" value="{{ true }}" />
											</xf:if>
											<!--[XF:listing_tools_menu:bottom]-->
											<xf:if is="$hasActionBarMenu">
												<a class="actionBar-action actionBar-action--menuTrigger"
												   data-xf-click="menu"
												   title="{{ phrase('more_options') }}"
												   role="button"
												   tabindex="0"
												   aria-expanded="false"
												   aria-haspopup="true">&#8226;&#8226;&#8226;</a>

												<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
													<div class="menu-content">
														<h4 class="menu-header">{{ phrase('more_options') }}</h4>
														<div class="js-menuBuilderTarget"></div>
													</div>
												</div>
											</xf:if>
										</xf:contentcheck>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>

					<div class="reactionsBar js-reactionsList {{ $listing.reactions ? 'is-active' : '' }}">
						<xf:reactions content="{$listing}" link="classifieds/reactions" />
					</div>

					<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
				</article>
			</div>
		</div>
	</div>
</div>

<xf:if is="{{ $listing.listing_location }} && {{ $xf.options.z61ClassifiedsGoogleApi }}">
	<div class="block">
		<div class="block-container">
			<div class="block-minorHeader">{{ phrase('z61_classifieds_location') }}</div>

			<div class="block-body ">
				<div class="block-row block-row--separated">
					<iframe
							width="100%" height="400px" frameborder="0" style="border: 0"
							src="https://www.google.com/maps/embed/v1/place?key={$xf.options.z61ClassifiedsGoogleApi}&q={{ $listing.listing_location|censor }}">
					</iframe>
				</div>
			</div>
		</div>
	</div>
</xf:if>

<xf:sidebar>
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('information') }}</h3>
			<div class="block-body block-row">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('author') }}</dt>
					<dd><xf:username user="{$listing.User}" defaultname="{$listing.username}" /></dd>
				</dl>
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('created') }}</dt>
					<dd><xf:date time="{{ $listing.listing_date }}" /></dd>
				</dl>
				<xf:if is="$listing.last_edit_date">
					<dl class="pairs pairs--justified">
						<xf:if is="$listing.user_id == $listing.last_edit_user_id">
							<dt>{{ phrase('last_edited') }}</dt>
							<dd><xf:date time="{$listing.last_edit_date}" /></dd>
							<xf:else />
							<dt>{{ phrase('last_edited_by_moderator') }}</dt>
							<dd><xf:date time="{$listing.last_edit_date}" /></dd>
						</xf:if>
					</dl>
				</xf:if>
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('views') }}</dt>
					<dd>{{ $listing.view_count }}</dd>
				</dl>
			</div>
		</div>
	</div>
</xf:sidebar>

<xf:sidebar>
	<xf:if contentcheck="true">
		<div class="listingSidebarGroup listingSidebarGroup--buttons">
			<xf:contentcheck>
				<xf:if is="$listing.hasViewableDiscussion()">
					<xf:button href="{{ link('threads', $listing.Discussion) }}" class="button--fullWidth">{{ phrase('z61_classifieds_join_discussion') }}</xf:button>
				</xf:if>
			</xf:contentcheck>
		</div>
	</xf:if>
</xf:sidebar>

<xf:sidebar>
	<xf:if is="$authorOthers is not empty">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">
					<a href="{{ link('classifieds/authors', $listing.User) }}">{{ phrase('z61_classifieds_more_listings_by_x', {'name': $listing.User.username}) }}</a>
				</h3>
				<div class="block-body block-row">
					<ul class="listingSidebarList">
						<xf:foreach loop="$authorOthers" value="$authorOther">
							<li>
								<xf:macro template="z61_classifieds_listing_list_macros" name="listing_simple"
										  arg-listing="{$authorOther}"
										  arg-withMeta="{{ false }}" />
							</li>
						</xf:foreach>
					</ul>
				</div>
			</div>
		</div>
	</xf:if>
</xf:sidebar>

<xf:sidebar key="shareSidebar">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<h3 class="block-minorHeader">{{ phrase('z61_classifieds_share_this_listing') }}</h3>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="buttons" arg-iconic="{{ true }}" />
							</xf:contentcheck>
						</div>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="share_clipboard_input"
										  arg-label="{{ phrase('z61_classifieds_copy_url_bb_code') }}"
										  arg-text="[URL=&quot;{{ link('canonical:classifieds', $listing) }}&quot;]{$listing.title}[/URL]" />
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</xf:sidebar>

<xf:widgetpos id="classifieds_listing_view_sidebar" context-listing="{$listing}" position="sidebar" />]]></template>
  <template type="public" title="z61_classifieds_listing_view.less" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[.block--classifieds
{
	.classifieds-wrapper
	{
		display: flex;
		flex-wrap: wrap;
		align-items: start;
		padding: @xf-paddingMedium @xf-paddingLarge;
		@media (max-width: (@xf-responsiveWide + @xf-sidebarWidth))
		{
			display: block;
		}
		.classifieds-left
		{
			flex: 0 0 400px;
			overflow: hidden;
			text-align: center;
			.classifieds-featuredImage
			{
				margin-bottom: @xf-paddingMedium;
			}
			.attachment
			{
				padding: 5px !important;
				width: auto;
				display: block;
				.attachment-icon
				{
					height: auto;
					line-height: 1;
				}
				.attachment-name, .attachment-details { display: none; }
			}
		}
		.classifieds-right
		{
			flex: 1 1 auto;
			background-color: @xf-contentAltBg;
			padding: @xf-paddingLargest;
			margin-left: @xf-elementSpacer;
			@media (max-width: (@xf-responsiveWide + @xf-sidebarWidth))
			{
				margin-top: @xf-elementSpacer;
				margin-left: 0;
			}
			dl
			{
				border-bottom: 1px solid @xf-borderColorLight;
				padding: @xf-paddingMedium 0;
				&:first-child { padding-top: 0; }
				&:last-child { border-bottom-width: 0; padding-bottom: 0; }
			}
		}
	}
}

.classifiedsCoverImage-container
{
	img
	{
		max-width: 250px;
		max-height: 250px;
	}
}]]></template>
  <template type="public" title="z61_classifieds_listing_watch" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('z61_classifieds_unwatch_listing') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('z61_classifieds_watch_listing') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$listing.getBreadcrumbs()" />

<xf:form action="{{ link('classifieds/watch', $listing) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('z61_classifieds_you_sure_you_want_to_unwatch_this_listing') }}
				</xf:inforow>

				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="email_subscribe"
					value="{{ $xf.visitor.Option.interaction_watch_state == 'watch_email' ? 1 : 0}}"
					rowtype="noColon"
					label="{{ phrase('z61_classifieds_watch_this_listing...') }}">

					<xf:option value="1">{{ phrase('and_receive_email_notifications') }}</xf:option>
					<xf:option value="0">{{ phrase('without_receiving_email_notifications') }}</xf:option>
				</xf:radiorow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_listing_wrapper" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:h1 hidden="true" />

<xf:breadcrumb source="$listing.Category.getBreadcrumbs()" />
<xf:css src="z61_classifieds.less" />

<xf:macro template="z61_classifieds_listing_page_macros" name="listing_page_options"
	arg-category="{$listing.Category}"
	arg-listing="{$listing}" />

<xf:macro template="z61_classifieds_listing_wrapper_macros" name="header"
	arg-listing="{$listing}"/>

<xf:macro template="z61_classifieds_listing_wrapper_macros" name="tabs"
	arg-listing="{$listing}"
	arg-selected="{$pageSelected}" />

<xf:macro template="z61_classifieds_listing_wrapper_macros" name="status"
	arg-listing="{$listing}" />

{$innerContent|raw}]]></template>
  <template type="public" title="z61_classifieds_listing_wrapper_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="header"
	arg-listing="!"
	arg-titleHtml="{{ null }}"
	arg-showMeta="{{ true }}"
	arg-metaHtml="{{ null }}">

	<xf:page option="headerHtml">
		<div class="contentRow contentRow--hideFigureNarrow">
			<span class="contentRow-figure">
				<xf:avatar user="{$listing.User}" size="s" />
			</span>
			<div class="contentRow-main">
				<div class="p-title">
					<h1 class="p-title-value">
						<xf:if is="$titleHtml !== null">
							{$titleHtml|raw}
						<xf:else />
							{{ prefix('classifieds_listing', $listing) }}{$listing.title}
						</xf:if>
						<xf:if is="$listing.listing_status == 'sold'">
							<span class="label label--yellow">
								{{ phrase('z61_classifieds_sold') }}
							</span>
						</xf:if>

					</h1>
					<xf:if contentcheck="true">
						<div class="p-title-pageAction">
							<xf:contentcheck>
								<xf:comment>
                                    <xf:if is="$listing.isPurchasable() && $listing.Category.paid_feature_enable">
                                        <xf:button href="{{ link('classifieds/feature', $listing) }}" class="button--cta button button--icon" icon="purchase" overlay="true">
                                            {{ phrase('z61_classifieds_feature_your_listing...') }}
                                        </xf:button>
                                    </xf:if>
								</xf:comment>
								<xf:if is="$listing.isAwaitingPayment()">
									<xf:button href="{{ link('classifieds/pay', $listing) }}" class="button--cta button button--icon" icon="purchase" overlay="true">
										{{ phrase('z61_classifieds_pay...') }}
									</xf:button>
								</xf:if>
								<xf:if is="$xf.visitor.user_id != $listing.user_id && $listing.canContactOwner()">
									<xf:button href="{{ link('classifieds/contact', $listing) }}" class="button--cta button button--icon button--icon--write" overlay="true">
										{{ phrase('z61_classifieds_contact_user...')}}
									</xf:button>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>
				</div>
				<xf:if is="$showMeta">
					<div class="p-description">
						<xf:if is="$metaHtml !== null">
							{$metaHtml|raw}
						<xf:else />
							<ul class="listInline listInline--bullet">
								<li>
									<i class="fa fa-user" aria-hidden="true" title="{{ phrase('author')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('author') }}</span>

									<xf:username user="{$listing.User}" defaultname="{$listing.username}" class="u-concealed" />
								</li>
								<li>
									<i class="fa fa-clock-o" aria-hidden="true" title="{{ phrase('z61_classifieds_creation_date')|for_attr }}"></i>
									<span class="u-srOnly">{{ phrase('z61_classifieds_creation_date') }}</span>

									<a href="{{ link('classifieds', $listing) }}" class="u-concealed"><xf:date time="{$listing.listing_date}" /></a>
								</li>
								<xf:if is="$xf.options.enableTagging AND ($listing.canEditTags() OR $listing.tags)">
									<li>
										<i class="fa fa-tags" aria-hidden="true" title="{{ phrase('tags')|for_attr }}"></i>
										<span class="u-srOnly">{{ phrase('tags') }}</span>

										<xf:if is="$listing.tags">
											<xf:foreach loop="$listing.tags" value="$tag">
												<a href="{{ link('tags', $tag) }}" class="tagItem" dir="auto">{$tag.tag}</a>
											</xf:foreach>
										<xf:else />
											{{ phrase('none') }}
										</xf:if>
										<xf:if is="$listing.canEditTags()">
											<a href="{{ link('classifieds/tags', $listing) }}" class="u-concealed" data-xf-click="overlay"
												data-xf-init="tooltip" title="{{ phrase('edit_tags')|for_attr }}">
												<i class="fa fa-pencil" aria-hidden="true"></i>
												<span class="u-srOnly">{{ phrase('edit') }}</span>
											</a>
										</xf:if>
									</li>
								</xf:if>
								<xf:if is="$listing.Featured">
									<li><span class="label label--accent">{{ phrase('z61_classifieds_featured') }}</span></li>
								</xf:if>
							</ul>
						</xf:if>
					</div>
				</xf:if>
			</div>
		</div>
	</xf:page>
</xf:macro>

<xf:macro name="status" arg-listing="!">
	<xf:if contentcheck="true">
		<dl class="blockStatus blockStatus--standalone">
			<dt>{{ phrase('status') }}</dt>
			<xf:contentcheck>
				<xf:if is="$listing.listing_state == 'deleted'">
					<dd class="blockStatus-message blockStatus-message--deleted">
						<xf:macro template="deletion_macros" name="notice" arg-log="{$listing.DeletionLog}" />
					</dd>
				<xf:elseif is="$listing.listing_state == 'moderated'" />
					<dd class="blockStatus-message blockStatus-message--moderated">
						{{ phrase('awaiting_approval_before_being_displayed_publicly') }}
					</dd>
				</xf:if>
				<xf:if is="!$listing.listing_open">
					<dd class="blockStatus-message blockStatus-message--locked">
						{{ phrase('z61_classifieds_listing_closed') }}
					</dd>
				</xf:if>
			</xf:contentcheck>
		</dl>
	</xf:if>
</xf:macro>

<xf:macro name="tabs" arg-listing="!" arg-selected="!">
	<xf:if contentcheck="true">
		<div class="tabs tabs--standalone">
			<div class="hScroller" data-xf-init="h-scroller">
				<span class="hScroller-scroll">
					<a class="tabs-tab {{ $selected == 'overview' ? 'is-active' : '' }}" href="{{ link('classifieds', $listing) }}">{{ phrase('overview') }}</a>
					<xf:contentcheck>
						<xf:if is="$listing.hasExtraInfoTab()">
							<a class="tabs-tab {{ $selected == 'extra' ? 'is-active' : '' }}" href="{{ link('classifieds/extra', $listing) }}">{{ phrase('z61_classifieds_extra_info') }}</a>
						</xf:if>
						<xf:if is="$listing.hasViewableDiscussion()">
							<a class="tabs-tab {{ $selected == 'discussion' ? 'is-active' : '' }}" href="{{ link('threads', $listing.Discussion) }}">{{ phrase('z61_classifieds_discussion') }}</a>
						</xf:if>
						<xf:if is="$listing.User.ClassifiedsFeedbackInfo">
							<a class="tabs-tab" href="{{ link('members/feedback', $listing.User) }}">{{ phrase('z61_classifieds_user_feedback') }}</a>
						</xf:if>
					</xf:contentcheck>
				</span>
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="action_buttons" arg-listing="!">
	<xf:if is="$listing.canGiveFeedback()">
		<xf:button href="{{ link('classifieds/give-feedback', $listing) }}" overlay="true">{{ phrase('z61_classifieds_submit_feedback') }}</xf:button>
	</xf:if>

	<xf:if is="$listing.canMarkSoldOwnListing()">
		<xf:button href="{{ link('classifieds/mark-sold', $listing) }}" overlay="true">{{ phrase('z61_classifieds_mark_sold') }}</xf:button>
	</xf:if>

	<xf:if contentcheck="true">
		<div class="buttonGroup">
		<xf:contentcheck>
			<xf:if is="$listing.canUndelete() AND $listing.listing_state == 'deleted'">
				<xf:button href="{{ link('classifieds/undelete', $listing) }}" class="button--link" overlay="true">
					{{ phrase('undelete') }}
				</xf:button>
			</xf:if>
			<xf:if is="$listing.canApproveUnapprove() AND $listing.listing_state == 'moderated'">
				<xf:button href="{{ link('classifieds/approve', $listing) }}" class="button--link" overlay="true">
					{{ phrase('approve') }}
				</xf:button>
			</xf:if>
			<xf:if is="$listing.canWatch()">
				<xf:button href="{{ link('classifieds/watch', $listing) }}" class="button--link"
					data-xf-click="switch-overlay"
					data-sk-watch="{{ phrase('watch') }}"
					data-sk-unwatch="{{ phrase('unwatch') }}">

					<xf:if is="{$listing.Watch.{$xf.visitor.user_id}}">
						{{ phrase('unwatch') }}
					<xf:else />
						{{ phrase('watch') }}
					</xf:if>
				</xf:button>
			</xf:if>
			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="bookmark_macros" name="button"
							  arg-content="{$listing}"
							  arg-confirmUrl="{{ link('classifieds/bookmark', $listing) }}" />
				</xf:contentcheck>
			</xf:if>
			<xf:if contentcheck="true">
				<div class="buttonGroup-buttonWrapper">
					<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}">&#8226;&#8226;&#8226;</xf:button>
					<div class="menu" data-menu="menu" aria-hidden="true">
						<div class="menu-content">
							<h4 class="menu-header">{{ phrase('more_options') }}</h4>
							<xf:contentcheck>
								<!--[Z61/Classifieds:listing_tools_menu:top]-->
								<xf:if is="$listing.canSetCoverImage()">
									<a href="{{ link('classifieds/set-cover-image', $listing) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('z61_classifieds_set_cover_image') }}</a>
								</xf:if>
								<xf:if is="$listing.canEdit()">
									<a href="{{ link('classifieds/edit', $listing) }}" class="menu-linkRow">{{ phrase('z61_classifieds_edit_listing') }}</a>
								</xf:if>
								<xf:if is="$listing.canClose()">
									<a href="{{ link('classifieds/close', $listing) }}" class="menu-linkRow">{{ phrase('z61_classifieds_close_listing') }}</a>
								</xf:if>
								<xf:if is="$listing.canOpenListing()">
									<a href="{{ link('classifieds/open', $listing) }}" class="menu-linkRow">{{ phrase('z61_classifieds_open_listing') }}</a>
								</xf:if>
								<xf:comment>
									<!--<xf:if is="$listing.canFeatureUnfeature()">-->
									<!--<a href="{{ link('classifieds/feature', $listing) }}"-->
									<!--class="menu-linkRow"-->
									<!--data-xf-click="overlay"-->
									<!--data-menu-closer="true">-->
									<!--{{ $listing.Featured ? phrase('z61_classifieds_unfeature_listing') : phrase('z61_classifieds_feature_listing') }}-->
									<!--</a>-->
									<!--</xf:if>-->
								</xf:comment>
								<xf:if is="$listing.canMove()">
									<a href="{{ link('classifieds/move', $listing) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('z61_classifieds_move_listing') }}</a>
								</xf:if>
								<xf:if is="$listing.canReassign()">
									<a href="{{ link('classifieds/reassign', $listing) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('z61_classifieds_reassign_listing') }}</a>
								</xf:if>
								<xf:if is="$listing.canClearSold()">
									<a href="{{ link('classifieds/clear-sold', $listing) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('z61_classifieds_clear_sold_status') }}</a>
								</xf:if>
							<xf:if is="$listing.canDelete('soft')">
									<a href="{{ link('classifieds/delete', $listing) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('z61_classifieds_delete_listing') }}</a>
								</xf:if>
									<!--[Z61/Classifieds:listing_tools_menu:before_footer]-->
								<xf:if is="$listing.canUseInlineModeration()">
									<div class="menu-footer"
										data-xf-init="inline-mod"
										data-type="classifieds_listing"
										data-href="{{ link('inline-mod') }}"
										data-toggle=".js-classifiedsListingInlineModToggle">
										<xf:checkbox>
											<xf:option class="js-classifiedsListingInlineModToggle" value="{$listing.listing_id}">{{ phrase('select_for_moderation') }}</xf:option>
										</xf:checkbox>
									</div>
									<xf:js src="xf/inline_mod.js" min="1" />
								</xf:if>
								<!--[Z61/Classifieds:listing_tools_menu:bottom]-->
							</xf:contentcheck>
						</div>
					</div>
				</div>
			</xf:if>
		</xf:contentcheck>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_member_feedback" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_user_feedback:') }} {$user.username}</xf:title>
<xf:breadcrumb href="{{ link('members', $user) }}">{$user.username}</xf:breadcrumb>
<div class="block block--messages">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$feedback is not empty">
				<xf:foreach loop="$feedback" value="$feedback">
					<xf:macro template="z61_classifieds_feedback_macros"
							  name="feedback"
							  arg-feedback="{$feedback}" />
				</xf:foreach>
				<xf:else />
				<div class="block-row js-replyNoMessages">{{ phrase('z61_classifieds_x_has_not_received_any_feedback_yet', {'name': $user.username}) }}</div>
			</xf:if>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="z61_classifieds_member_macros_feedback" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$xf.options.z61ClassifiedsListingCurrencies ">
		<dl class="pairs pairs--rows pairs--rows--centered fauxBlockLink">
			<dt title="{{ phrase('z61_classifieds_feedback')|for_attr }}">{{ phrase('z61_classifieds_feedback') }}</dt>
			<dd>
				<a href="{{ link('members/feedback', $user) }}" data-xf-click="overlay" class="fauxBlockLink-linkRow u-concealed">
					{$user.ClassifiedsFeedbackInfo.total|number}
				</a>
			</dd>
		</dl>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_member_view_tab" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$xf.visitor.canViewClassifiedsFeedback()">
	<a href="{{ link('members/feedback', $user) }}"
	   class="tabs-tab" id="feedback" role="tab">
		{{ phrase('z61_classifieds_feedback') }}
		<xf:if is="{{ $user.ClassifiedsFeedbackInfo }}">
		 {{ $user.ClassifiedsFeedbackInfo.total|parens}}	
		</xf:if>
	</a>
</xf:if>

<xf:if is="$xf.visitor.canViewClassifieds()">
	<a href="{{ link('classifieds/authors', $user) }}"
	   class="tabs-tab" id="listings" role="tab">
		{{ phrase('z61_classifieds_listings') }}
	</a>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_member_view_tab_content" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$xf.visitor.canViewClassifiedsFeedback()">
	<li data-href="{{ link('members/feedback', $user) }}" role="tabpanel" aria-labelledby="feedback">
		<div class="blockMessage">{{ phrase('loading...') }}</div>
	</li>
</xf:if>

<xf:if is="$xf.visitor.canViewClassifieds()">
	<li data-href="{{ link('classifieds/authors', $user) }}" role="tabpanel" aria-labelledby="listings">
		<div class="blockMessage">{{ phrase('loading...') }}</div>
	</li>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_message_macros_feedback" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$extras.z61ClassifiedsFeedbackBasic && $user.ClassifiedsFeedbackInfo">
	<dl class="pairs pairs--justified">
		<dt>{{ phrase('z61_classifieds_feedback_score') }}</dt>
		<dd><a href="{{ link('members/feedback', $user) }}" data-xf-click="overlay">{$user.ClassifiedsFeedbackInfo.total}</a></dd>
	</dl>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_overview" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title page="{$page}">{{ phrase('z61_classifieds') }}</xf:title>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:classifieds', null, {'page': $page}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('z61_classifieds_listings'): {'search_type': 'classifieds_listing'}
} }}" />

<xf:pageaction if="$xf.visitor.canAddClassified() && $categoryTree is not empty">
	<xf:button href="{{ link('classifieds/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('z61_classifieds_add_listing...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="classifieds_listing" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="classifieds" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
				<xf:contentcheck>
					<xf:if is="$canInlineMod">
						<xf:macro template="inline_mod_macros" name="button" />
					</xf:if>
				</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="z61_classifieds_overview_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="classifieds"
			arg-creatorFilter="{$creatorFilter}"
			arg-conditionFilter="{$conditionFilter}"
			arg-listingTypeFilter="{$listingTypeFilter}"
			arg-addressFilter="{$addressFilter}"/>

		<div class="block-body">
			<xf:if is="$xf.options.z61ClassifiedsListLayout == 'list_view'">
				<xf:if is="$featuredListings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$featuredListings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</xf:if>
				<xf:if is="$listings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
					<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('z61_classifieds_there_no_listings_matching_your_filters') }}</div>
					<xf:else />
					<div class="block-row">{{ phrase('z61_classifieds_no_listings_have_been_created_yet') }}</div>
				</xf:if>
			<xf:elseif is="$xf.options.z61ClassifiedsListLayout == 'grid_view'" />
				<xf:if is="$featuredListings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$featuredListings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_grid"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</xf:if>
				<xf:if is="$listings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_grid"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
					<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('z61_classifieds_there_no_listings_matching_your_filters') }}</div>
					<xf:else />
					<div class="block-row">{{ phrase('z61_classifieds_no_listings_have_been_created_yet') }}</div>
				</xf:if>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="classifieds" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
	<xf:macro template="z61_classifieds_category_list_macros" name="simple_list_block"
		arg-categoryTree="{$categoryTree}"
		arg-categoryExtras="{$categoryExtras}" />
</xf:sidenav>

<xf:widgetpos id="classifieds_overview_sidenav" position="sidenav" />]]></template>
  <template type="public" title="z61_classifieds_overview_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="featured_carousel" arg-featuredListings="!" arg-viewAllLink="!">
	<xf:if is="$featuredListings is not empty">
		<xf:css src="carousel.less" />
		<xf:css src="lightslider.less" />

		<xf:js prod="xf/carousel-compiled.js" dev="vendor/lightslider/lightslider.min.js, xf/carousel.js" />

		<div class="carousel carousel--withFooter">
			<ul class="carousel-body carousel-body--show2" data-xf-init="carousel">
				<xf:foreach loop="$featuredListings" value="$listing">
					<li>
						<div class="carousel-item">
							<div class="contentRow">
								<div class="contentRow-figure">
										<xf:avatar user="$listing.User" size="m" notooltip="true" />
								</div>
								<div class="contentRow-main">
									<h4 class="contentRow-title"><a href="{{ link('classifieds', $listing) }}">{{ prefix('classifieds_listing', $listing) }}{$listing.title}</a></h4>
									<div class="contentRow-minor contentRow-minor--smaller">
										<ul class="listInline listInline--bullet">
											<li>{{ $listing.User.username ?: $listing.username }}</li>
											<li>{{ phrase('updated:') }} <xf:date time="{$listing.last_edit_date}" /></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</li>
				</xf:foreach>
			</ul>
			<div class="carousel-footer">
				<a href="{$viewAllLink}">{{ phrase('classifieds_view_all_featured_listings') }}</a>
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="list_filter_bar" arg-filters="!" arg-baseLinkPath="!" arg-category="{{ null }}" arg-creatorFilter="{{ null }}" arg-conditionFilter="{{ null }}" arg-listingTypeFilter="{{ null }}">
	<xf:set var="$sortOrders" value="{{ {
		'last_update': phrase('z61_classifieds_last_updated'),
		'expiration_date': phrase('z61_classifieds_expiration_date'),
		'title': phrase('title'),
		'price': phrase('price')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.prefix_id">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('prefix_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('prefix:') }}</span>
								{{ prefix_title('classifieds_listing', $filters.prefix_id) }}</a></li>
						</xf:if>
						<xf:if is="$filters.condition_id">
						<li><a href="{{ link($baseLinkPath, $category, $filters|replace('condition_id', null)) }}"
							   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
							<span class="filterBar-filterToggle-label">{{ phrase('z61_classifieds_condition:') }}</span>
							{{ $conditionFilter.title }}</a></li>
					</xf:if>
						
					<xf:if is="$xf.options.z61ClassifiedsGoogleApi && $filters.address AND $addressFilter">
						<li><a href="{{ link($baseLinkPath, $category, $filters|replace('address', null)) }}"
							   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
							<span class="filterBar-filterToggle-label">{{ phrase('z61_classifieds_within:') }}</span>
							{{ phrase('z61_classifieds_x_y_of_z', 
								{'distance': $address.distance,
								 'unit': {$address.distance_unit|to_upper()},
								 'address': $address.formatted
								})
							}}</a></li>
					</xf:if>

					<xf:if is="$filters.listing_type_id">
						<li><a href="{{ link($baseLinkPath, $category, $filters|replace('listing_type_id', null)) }}"
							   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
							<span class="filterBar-filterToggle-label">{{ phrase('type:') }}</span>
							{{ $listingTypeFilter.title }}</a></li>
					</xf:if>

						<xf:if is="$filters.creator_id AND $creatorFilter">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('creator_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('author:') }}</span>
								{$creatorFilter.username}</a></li>
						</xf:if>
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<i class="fa {{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" aria-hidden="true"></i>
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $category, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_purchase_macros" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:macro name="payment_profiles" arg-listing="!" arg-profiles="!">
	<xf:if is="{{ count($listing.Package.payment_profile_ids) > 1 }}">
		<xf:selectrow label="{{ phrase('z61_classifieds_pay_using') }}" name="payment_profile_id">
			<xf:option>{{ phrase('(choose_payment_method)') }}</xf:option>
			<xf:foreach loop="$listing.Package.payment_profile_ids" value="$profileId">
				<xf:if is="in_array($profileId, $listing.Category.payment_profile_ids)">
					<xf:option value="{$profileId}">{$profiles.{$profileId}}</xf:option>
				</xf:if>
			</xf:foreach>
		</xf:selectrow>
	<xf:else />
		<xf:hiddenval name="payment_profile_id">{$listing.Package.payment_profile_ids|first}</xf:hiddenval>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_slider.less" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[/**
 * Owl Carousel v2.3.4
 * Copyright 2013-2018 David Deutsch
 * Licensed under: SEE LICENSE IN https://github.com/OwlCarousel2/OwlCarousel2/blob/master/LICENSE
 */
.owl-carousel,.owl-carousel .owl-item{-webkit-tap-highlight-color:transparent;position:relative}.owl-carousel{display:none;width:100%;z-index:1}.owl-carousel .owl-stage{position:relative;-ms-touch-action:pan-Y;touch-action:manipulation;-moz-backface-visibility:hidden}.owl-carousel .owl-stage:after{content:".";display:block;clear:both;visibility:hidden;line-height:0;height:0}.owl-carousel .owl-stage-outer{position:relative;overflow:hidden;-webkit-transform:translate3d(0,0,0)}.owl-carousel .owl-item,.owl-carousel .owl-wrapper{-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0)}.owl-carousel .owl-item{min-height:1px;float:left;-webkit-backface-visibility:hidden;-webkit-touch-callout:none}.owl-carousel .owl-item img{display:block;width:100%}.owl-carousel .owl-dots.disabled,.owl-carousel .owl-nav.disabled{display:none}.no-js .owl-carousel,.owl-carousel.owl-loaded{display:block}.owl-carousel .owl-dot,.owl-carousel .owl-nav .owl-next,.owl-carousel .owl-nav .owl-prev{cursor:pointer;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.owl-carousel .owl-nav button.owl-next,.owl-carousel .owl-nav button.owl-prev,.owl-carousel button.owl-dot{background:0 0;color:inherit;border:none;padding:0!important;font:inherit}.owl-carousel.owl-loading{opacity:0;display:block}.owl-carousel.owl-hidden{opacity:0}.owl-carousel.owl-refresh .owl-item{visibility:hidden}.owl-carousel.owl-drag .owl-item{-ms-touch-action:pan-y;touch-action:pan-y;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.owl-carousel.owl-grab{cursor:move;cursor:grab}.owl-carousel.owl-rtl{direction:rtl}.owl-carousel.owl-rtl .owl-item{float:right}.owl-carousel .animated{animation-duration:1s;animation-fill-mode:both}.owl-carousel .owl-animated-in{z-index:0}.owl-carousel .owl-animated-out{z-index:1}.owl-carousel .fadeOut{animation-name:fadeOut}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.owl-height{transition:height .5s ease-in-out}.owl-carousel .owl-item .owl-lazy{opacity:0;transition:opacity .4s ease}.owl-carousel .owl-item .owl-lazy:not([src]),.owl-carousel .owl-item .owl-lazy[src^=""]{max-height:0}.owl-carousel .owl-item img.owl-lazy{transform-style:preserve-3d}.owl-carousel .owl-video-wrapper{position:relative;height:100%;background:#000}.owl-carousel .owl-video-play-icon{position:absolute;height:80px;width:80px;left:50%;top:50%;margin-left:-40px;margin-top:-40px;background:url(owl.video.play.png) no-repeat;cursor:pointer;z-index:1;-webkit-backface-visibility:hidden;transition:transform .1s ease}.owl-carousel .owl-video-play-icon:hover{-ms-transform:scale(1.3,1.3);transform:scale(1.3,1.3)}.owl-carousel .owl-video-playing .owl-video-play-icon,.owl-carousel .owl-video-playing .owl-video-tn{display:none}.owl-carousel .owl-video-tn{opacity:0;height:100%;background-position:center center;background-repeat:no-repeat;background-size:contain;transition:opacity .4s ease}.owl-carousel .owl-video-frame{position:relative;z-index:1;height:100%;width:100%}

.owl-theme .owl-nav {
  margin-top: 10px;
  text-align: center;
  -webkit-tap-highlight-color: transparent; }
.owl-theme .owl-nav [class*='owl-'] {
  color: #FFF;
  font-size: 14px;
  margin: 5px;
  padding: 4px 7px;
  background: #D6D6D6;
  display: inline-block;
  cursor: pointer;
  border-radius: 3px; }
.owl-theme .owl-nav [class*='owl-']:hover {
  background: #869791;
  color: #FFF;
  text-decoration: none; }
.owl-theme .owl-nav .disabled {
  opacity: 0.5;
  cursor: default; }

.owl-theme .owl-nav.disabled + .owl-dots {
  margin-top: 10px; }

.owl-theme .owl-dots {
  text-align: center;
  -webkit-tap-highlight-color: transparent; }
.owl-theme .owl-dots .owl-dot {
  display: inline-block;
  zoom: 1;
  *display: inline; }
.owl-theme .owl-dots .owl-dot span {
  width: 10px;
  height: 10px;
  margin: 5px 7px;
  background: #D6D6D6;
  display: block;
  -webkit-backface-visibility: visible;
  transition: opacity 200ms ease;
  border-radius: 30px; }
.owl-theme .owl-dots .owl-dot.active span, .owl-theme .owl-dots .owl-dot:hover span {
  background: #869791; }]]></template>
  <template type="public" title="z61_classifieds_thread_insert" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$z61ClassifiedsListing">
	<xf:set var="$originalH1"><xf:h1 /></xf:set>
	<xf:set var="$originalDescription"><xf:description /></xf:set>

	<xf:h1 hidden="true" />
	<xf:description></xf:description>

	<xf:macro template="z61_classifieds_listing_wrapper_macros" name="header"
		arg-listing="{$z61ClassifiedsListing}"
		arg-titleHtml="{$originalH1}"
		arg-metaHtml="{$originalDescription}" />

	<xf:macro template="z61_classifieds_listing_wrapper_macros" name="tabs"
		arg-listing="{$z61ClassifiedsListing}"
		arg-selected="discussion" />
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_watched_listing_categories" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('watched_categories') }}</xf:title>

<xf:css src="node_list.less" />

<xf:if is="$watchedCategories is not empty">
    <xf:form action="{{ link('watched/classifieds-categories/update') }}" ajax="true" class="block" autocomplete="off">
        <div class="block-container">
            <div class="block-body">
                <xf:foreach loop="$categoryTree.getFlattened()" key="$id" value="$treeEntry">
                    <xf:set var="$category" value="{$treeEntry.record}" />
                    <xf:set var="$categoryWatch" value="{$watchedCategories.{$category.category_id}}" />
                    <xf:if is="$categoryWatch">
                        <xf:set var="$bonusInfo">
                            <ul class="listInline listInline--bullet">
                                <xf:if is="$categoryWatch.notify_on == 'classifieds_listing'"><li>{{ phrase('z61_classifieds_new_listings') }}</li></xf:if>
                                <xf:if is="$categoryWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
                                <xf:if is="$categoryWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
                                <xf:if is="$categoryWatch.include_children"><li>{{ phrase('sub_categories') }}</li></xf:if>
                            </ul>
                        </xf:set>
                        <xf:macro template="z61_classifieds_category_list_macros" name="category"
                                  arg-category="{$category}"
                                  arg-extras="{$categoryExtras.{$category.category_id}}"
                                  arg-children="{$categoryTree.{$id}.children}"
                                  arg-childExtras="{$categoryExtras}"
                                  arg-chooseName="ids"
                                  arg-bonusInfo="{$bonusInfo}" />
                    </xf:if>
                </xf:foreach>
            </div>
            <div class="block-footer block-footer--split">
                <span class="block-footer-counter"></span>
                <span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
                <span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
                        <!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="include_children:on">{{ phrase('enable_sub_category_notifications') }}</xf:option>
						<xf:option value="include_children:off">{{ phrase('disable_sub_category_notifications') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
                        <!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
            </div>
        </div>
    </xf:form>
    <xf:else />
    <div class="blockMessage">{{ phrase('you_not_watching_any_categories') }}</div>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_watched_listings" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title page="{$page}">{{ phrase('z61_classifieds_watched_listings') }}</xf:title>

<xf:if is="$listings is not empty">
	<xf:form action="{{ link('watched/classifieds/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-outer">
			<xf:pagenav
					page="{$page}" perpage="{$perPage}" total="{$total}"
					link="watched/classifieds"
					wrapperclass="block-outer-main" />

			<div class="block-outer-opposite">
				<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('z61_classifieds_manage_watched_listings') }}</xf:button>
				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('z61_classifieds_manage_watched_listings') }}</h3>
						<!--[XF:manage_menu:top]-->
						<a href="{{ link('watched/classifieds/manage', null, {'state': 'email_subscribe:off'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('disable_email_notification') }}</a>
						<a href="{{ link('watched/classifieds/manage', null, {'state': 'delete'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('z61_classifieds_stop_watching_listings') }}</a>
						<!--[XF:manage_menu:bottom]-->
					</div>
				</div>
			</div>
		</div>

		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer">
					<xf:foreach loop="$listings" value="$listing">
						<xf:set var="$extra" value="{{ {$listing.Watch.{$xf.visitor.user_id}.email_subscribe} ? phrase('email') : '' }}" />
						<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
								  arg-listing="{$listing}"
								  arg-chooseName="ids"
								  arg-extraInfo="{$extra}" />
					</xf:foreach>
				</div>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="email_subscribe:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="email_subscribe:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav link="watched/classifieds" page="{$page}" perpage="{$perPage}" total="{$total}" />
		</div>
	</xf:form>
	<xf:else />
	<div class="blockMessage">
		<xf:if is="$page > 1">
			{{ phrase('z61_classifieds_there_no_listings_to_display') }}
			<xf:else />
			{{ phrase('z61_classifieds_you_not_watching_any_listings') }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_watched_listings_manage" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title>{{ phrase('z61_classifieds_manage_watched_listings') }}</xf:title>

<xf:form action="{{ link('watched/classifieds/manage', null, {'state': $state}) }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-row">
            <xf:inforow rowtype="confirm">
                <xf:if is="$state == 'delete'">
                    {{ phrase('z61_classifieds_you_sure_you_want_to_stop_watching_all_listings') }}
                    <xf:else />
                    {{ phrase('z61_classifieds_you_sure_you_want_to_update_notification_settings_for_all_listings') }}
                </xf:if>
            </xf:inforow>
        </div>
        <xf:submitrow submit="{{ phrase('confirm') }}" icon="notificationsOff" rowtype="simple" />
    </div>
</xf:form>]]></template>
  <template type="public" title="z61_classifieds_whats_new_listings" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:title page="{$page}">{{ phrase('z61_classifieds_new_listings') }}</xf:title>

<xf:wrap template="whats_new_wrapper">
	<xf:set var="$pageSelected">new_classifieds</xf:set>
</xf:wrap>

<xf:pageaction if="$xf.visitor.canAddClassified()">
	<xf:button href="{{ link('classifieds/add-listing-chooser') }}" class="button--cta" icon="write" overlay="true">{{ phrase('z61_classifieds_add_listing...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="classifieds_listing" data-href="{{ link('inline-mod') }}">
	<xf:if is="$findNew.result_count">
		<div class="block-outer">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/resources" data="{$findNew}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
					</div>
				</div>
			</xf:if>
		</div>
	</xf:if>

	<div class="block-container">
		<xf:if is="$xf.visitor.user_id">
			<div class="block-filterBar">
				<div class="filterBar">
					<xf:if contentcheck="true">
						<ul class="filterBar-filters">
						<xf:contentcheck>
							<!--[XF:filters:top]-->
							<xf:if is="$findNew.filters.watched">
								<li><a href="{{ link('whats-new/resources', $findNew, {'remove': 'watched'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only') }}</span>
									{{ phrase('filter_watched') }}</a></li>
							</xf:if>
							<!--[XF:filters:bottom]-->
						</xf:contentcheck>
						</ul>
					</xf:if>

					<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
					<xf:macro name="filter_menu" arg-findNew="{$findNew}" arg-submitRoute="{{ link('whats-new/resources') }}" />
				</div>
			</div>
		</xf:if>

		<xf:if is="$findNew.result_count">
			<div class="structItemContainer">
				<xf:foreach loop="$listings" value="$listing">
					<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
						arg-listing="{$listing}" />
				</xf:foreach>
			</div>
		<xf:else />
			<div class="block-row">{{ phrase('no_results_found') }}</div>
		</xf:if>
	</div>

	<xf:if is="$findNew.result_count">
		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/classifieds" data="{$findNew}"
				wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</xf:if>
</div>

<xf:macro name="filter_menu" arg-findNew="!" arg-submitRoute="!">
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
			<xf:form action="{{ link($submitRoute) }}">
				<div class="menu-row">
					<xf:checkbox>
						<xf:option name="watched" selected="{$findNew.filters.watched}">{{ phrase('watched_content') }}</xf:option>
						<!--[XF:filter_menu:filters_extra]-->
					</xf:checkbox>
				</div>
				<!--[XF:filter_menu:below_filters]-->

				<xf:macro template="filter_macros" name="find_new_filter_footer" />
			</xf:form>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="z61_classifieds_widget_nearby_listings" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$listings is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<xf:if is="$style == 'full'">
				<h3 class="block-header">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('z61_classifieds_nearby_listings') }}</a>
				</h3>
				<div class="block-body">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
								arg-allowInlineMod="{{ false }}"
								arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</div>
				<xf:if is="$hasMore">
					<div class="block-footer">
						<span class="block-footer-controls">
							<xf:button href="{$link}" rel="nofollow">{{ phrase('view_more...') }}</xf:button>
						</span>
					</div>
				</xf:if>
			<xf:else />
				<h3 class="block-minorHeader">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('z61_classifieds_nearby_listings') }}</a>
				</h3>
				<ul class="block-body">
					<xf:foreach loop="$listings" value="$listing">
						<li class="block-row">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_simple"
								arg-listing="{$listing}" />
						</li>
					</xf:foreach>
				</ul>
			</xf:if>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_widget_new_listings" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$listings is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<xf:if is="$style == 'full'">
				<h3 class="block-header">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('z61_classifieds_latest_listings') }}</a>
				</h3>
				<div class="block-body">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
								arg-allowInlineMod="{{ false }}"
								arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</div>
				<xf:if is="$hasMore">
					<div class="block-footer">
						<span class="block-footer-controls">
							<xf:button href="{$link}" rel="nofollow">{{ phrase('view_more...') }}</xf:button>
						</span>
					</div>
				</xf:if>
			<xf:else />
				<h3 class="block-minorHeader">
					<a href="{$link}" rel="nofollow">{{ $title ?: phrase('z61_classifieds_latest_listings') }}</a>
				</h3>
				<ul class="block-body">
					<xf:foreach loop="$listings" value="$listing">
						<li class="block-row">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_simple"
								arg-listing="{$listing}" />
						</li>
					</xf:foreach>
				</ul>
			</xf:if>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="z61_classifieds_widget_user_feedback" version_id="1001230" version_string="1.0.12 Beta"><![CDATA[<xf:if is="$feedbackItems is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">
				<a href="{{ link('members/feedback', $user) }}" rel="nofollow">{$title}: <xf:username user="{$user}" /></a>
			</h3>
			<div class="block-body">
				<xf:foreach loop="$feedbackItems" value="$feedback">
						<div class="block-row">
							<xf:macro template="z61_classifieds_feedback_macros" name="simple"
								arg-feedback="{$feedback}"
								arg-limitHeight="{{ true }}" />
						</div>
				</xf:foreach>
			</div>
			<div class="block-footer">
					<span class="block-footer-controls">
						<xf:button href="{{ link('members/feedback', $user) }}" rel="nofollow">{{ phrase('view_more...') }}</xf:button>
					</span>
			</div>
		</div>
	</div>
</xf:if>]]></template>
</templates>
