<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="svStandardLib_template_view_modifications" version_id="1040100" version_string="1.4.1"><![CDATA[<xf:title>{$template.title} - {{ count($activeMods)|number }}/{{ count($mods)|number }} - {{ phrase('template_modifications') }}</xf:title>

<xf:page option="breadcrumbPath" value="styles" />

<xf:breadcrumb href="{{ link('styles/templates', $style, {'type': $template.type}) }}">{$style.title} - {{ phrase('templates') }}</xf:breadcrumb>
<xf:breadcrumb href="{{ link('templates/edit', $template, {'type': $template.type, 'style_id': $style.style_id}) }}">{$template.title}</xf:breadcrumb>

<xf:css src="public:diff.less" />
<xf:macro template="public:prism_macros" name="setup" />

<xf:form action="{{ link('templates/view-modifications', $template, {'type': $template.type, 'style_id': $style.style_id, 'tab': $tab}) }}"
		 class="block"
		 ajax="{$_xfWithData}" >
	<div class="block-container">
		<div class="block-body">
			<xf:checkboxrow rowtype="fullWidth noLabel" name="active_mod_ids[]">
				<xf:foreach loop="$mods" value="$mod">
					<xf:option value="{$mod.modification_id}"
							   checked="{{ $activeMods.{$mod.modification_id} ? 'checked' : '' }}">
						<xf:label><xf:trim>
							{{ $mod.addon_id ? $mod.addon_id . ' - ' : '' }}{{ $mod.modification_key }} - {{ $mod.description }} (<a href='{{ link('template-modifications/edit', $mod) }}'>{{ phrase('edit') }}</a>)
						</xf:trim></xf:label>
						<xf:hint>{$status.{$mod->modification_id}}</xf:hint>
					</xf:option>
				</xf:foreach>
			</xf:checkboxrow>
		</div>
		
		<xf:hiddenval name="reload">1</xf:hiddenval>
		<xf:submitrow rowtype="simple" submit="{{ phrase('svStandardLib_reload') }}" />
	</div>
</xf:form>

<div class="block">
	<div class="block-container">
		<h2 class="block-tabHeader tabs hScroller" data-xf-init="h-scroller" role="tablist">
			<span class="hScroller-scroll">
				<!--[XF:SV/StandardLib:tabs:start]-->
				<a class="tabs-tab {{ $tab === 'diffs' ? 'is-active' : '' }}" role="tab" tabindex="0"
				   href="{{ link('templates/view-modifications', $template, {'type': $template.type, 'style_id': $style.style_id, 'tab': 'diffs', 'active_mod_ids': $activeModIds}) }}"
				   aria-controls="template-contents">{{ phrase('svStandardLib_template_contents') }}</a>
				
				<a class="tabs-tab {{ $tab === 'compiled' ? 'is-active' : '' }}" role="tab" tabindex="0"
				   href="{{ link('templates/view-modifications', $template, {'type': $template.type, 'style_id': $style.style_id, 'tab': 'compiled', 'active_mod_ids': $activeModIds}) }}"
				   aria-controls="compiled-template-code">{{ phrase('svStandardLib_compiled_template_code') }}</a>
				<!--[XF:SV/StandardLib:tabs:end]-->
			</span>
		</h2>
		
		<ul class="tabPanes">
			<!--[XF:SV/StandardLib:tab_panes:start]-->
			<li class="{{ $tab === 'diffs' ? 'is-active' : '' }}" role="tabpanel" aria-labelledby="template-contents">
				<div class="block-body block-row block-body--contained">
					<ol class="diffList diffList--code">
						<xf:foreach loop="$diffs" value="$diff">
							<xf:set var="$diffHtml">{{ $diff.1|join('<br />') }}</xf:set>
							<li class="diffList-line diffList-line--{$diff.0}">{{ trim($diffHtml) !== '' ? $diffHtml : '&nbsp;' }}</li>
						</xf:foreach>
					</ol>
				</div>
			</li>

			<li class="{{ $tab === 'compiled' ? 'is-active' : '' }}" role="tabpanel" aria-labelledby="compiled-template-code">
				<div class="block-body block-row block-body--contained"><pre class="bbCodeCode" dir="ltr" data-xf-init="code-block" data-lang="php"><code>{$compiledTemplate}</code></pre></div>
				
				<xf:if contentcheck="true">
					<h3 class="block-minorHeader">{{ phrase('svStandardLib_compiler_errors:') }}</h3>
					<ol class="block-body block-body--contained">
						<xf:contentcheck><xf:trim>
							<xf:foreach loop="$compilerErrors" value="$compilerError">
								<li class="block-row block-row--separated">{$compilerError}</li>
							</xf:foreach>
						</xf:trim></xf:contentcheck>
					</ol>
				</xf:if>
			</li>
			<!--[XF:SV/StandardLib:tab_panes:end]-->
		</ul>
	</div>
</div>]]></template>
  <template type="public" title="svStandardLib_delete_state" version_id="1140000" version_string="1.14.0"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:breadcrumb href="{$editLink}">{$title}</xf:breadcrumb>

<xf:form action="{$deleteLink}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="{$entity.{$stateKey}} == 'deleted'">
				<xf:radiorow name="hard_delete" value="0"
							 label="{{ phrase('deletion_type') }}">

					<xf:option value="0"
							   label="{{ phrase('do_nothing') }}" />

					<xf:if is="$canHardDelete">
						<xf:option value="1"
								   label="{{ phrase('permanently_delete') }}"
								   hint="{{ phrase('selecting_this_option_will_permanently_and_irreversibly_delete_item') }}" />
					</xf:if>

					<xf:option value="2"
							   label="{{ phrase('undelete') }}" />
				</xf:radiorow>
			<xf:else />
				<xf:macro name="public:helper_action::delete_type" 
						  arg-canHardDelete="{$canHardDelete}" />
			</xf:if>
			
			<xf:if is="$includeAuthorAlert">
				<xf:macro name="public:helper_action::author_alert" />
			</xf:if>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="public" title="svStandardLib_helper_macros" version_id="1070200" version_string="1.7.2"><![CDATA[<xf:macro name="date_time_input_row"
		  arg-name="date_time"
		  arg-label=""
		  arg-explain=""
		  arg-hint=""
		  arg-timestamp="{{ $xf.time }}"
		  arg-dateTimeArr="{{ [] }}"
		  arg-readOnly="{{ false }}"
		  arg-showSeconds="{{ true }}"
		  arg-xfInit=""
		  arg-allInputAttrsHtml=""
		  arg-ymdInputAttrsHtml=""
		  arg-hhInputAttrsHtml=""
		  arg-mmInputAttrsHtml=""
		  arg-ssInputAttrsHtml=""
		  arg-tzInputAttrsHtml="">
	<xf:formrow label="{$label}" explain="{$explain}" hint="{$hint}" rowtype="input">
		<xf:macro name="date_time_input"
				  arg-name="{$name}"
				  arg-timestamp="{$timestamp}"
				  arg-dateTimeArr="{$dateTimeArr}"
				  arg-readOnly="{$readOnly}"
				  arg-showSeconds="{$showSeconds}"
				  arg-xfInit="{$xfInit}"
				  arg-allInputAttrsHtml="{$allInputAttrsHtml}"
				  arg-ymdInputAttrsHtml="{$ymdInputAttrsHtml}"
				  arg-hhInputAttrsHtml="{$hhInputAttrsHtml}"
				  arg-mmInputAttrsHtml="{$mmInputAttrsHtml}"
				  arg-ssInputAttrsHtml="{$ssInputAttrsHtml}"
				  arg-tzInputAttrsHtml="{$tzInputAttrsHtml}" />
	</xf:formrow>
</xf:macro>

<xf:macro name="date_time_input"
		  arg-name="date_time"
		  arg-timestamp="{{ $xf.time }}"
		  arg-dateTimeArr="{{ [] }}"
		  arg-readOnly="{{ false }}"
		  arg-showSeconds="{{ true }}"
		  arg-xfInit=""
		  arg-allInputAttrsHtml=""
		  arg-ymdInputAttrsHtml=""
		  arg-hhInputAttrsHtml=""
		  arg-mmInputAttrsHtml=""
		  arg-ssInputAttrsHtml=""
		  arg-tzInputAttrsHtml="">
	<xf:css src="svStandardLib_helper_macros_date_time_input.less" />

	<xf:set var="$selectedYMD" value="{{ $dateTimeArr.ymd ?: ($timestamp ? date($timestamp, 'picker') : '') }}" />
	<xf:set var="$selectedHour" value="{{ $dateTimeArr.hh ?: ($timestamp ? time($timestamp, 'H') : 0) }}" />
	<xf:set var="$selectedMinute" value="{{ $dateTimeArr.mm ?: ($timestamp ? time($timestamp, 'i') : 0) }}" />
	<xf:set var="$selectedSecond" value="{{ $dateTimeArr.ss ?: ($timestamp ? time($timestamp, 's') : 0) }}" />
	<xf:set var="$selectedTz" value="{{ $dateTimeArr.tz ?: $xf.visitor.timezone }}" />

	<div class="inputGroup-container inputGroup-containerSvStandardLibDateTime">
		<div class="inputGroup">
			<xf:macro name="date_time_wrapper" 
					  arg-name="{$name}[ymd]"
					  arg-weekStart="{{ $xf.language.week_start }}"
					  arg-readOnly="{{ $readOnly }}"
					  arg-attrsHtml="{{ ' value="' . $selectedYMD . '" ' . $allInputAttrsHtml . $ymdInputAttrsHtml }}"
					  />

			<span class="inputGroup-text">
				{{ phrase('svStandardLib_at:') }}
			</span>

			<select class="input input--inline input--autoSize" name="{$name}[hh]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }} {{ $hhInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ range(0, 23, 1) }}" value="$hour">
					<xf:set var="$readableHour" value="{{ $hour|pad('0', 2) }}" />
					<option value="{$hour}" {{ $readableHour === $selectedHour ? 'selected="selected"' : '' }}>{$readableHour}</option>
				</xf:foreach>
			</select>

			<span class="inputGroup-text">:</span>

			<select class="input input--inline input--autoSize" name="{$name}[mm]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }} {{ $mmInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ range(0, 59, 1) }}" value="$minute">
					<xf:set var="$readableMinute" value="{{ $minute|pad('0', 2) }}" />
					<option value="{$minute}" {{ $readableMinute === $selectedMinute ? 'selected="selected"' : '' }}>{$readableMinute}</option>
				</xf:foreach>
			</select>

			<xf:if is="$showSeconds">
			<span class="inputGroup-text">:</span>

			<select class="input input--inline input--autoSize" name="{$name}[ss]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }}  {{ $ssInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ range(0, 59, 1) }}" value="$second">
					<xf:set var="$readableSecond" value="{{ $second|pad('0', 2) }}" />
					<option value="{$second}" {{ $readableSecond === $selectedSecond ? 'selected="selected"' : '' }}>{$readableSecond}</option>
				</xf:foreach>
			</select>
			</xf:if>
		</div>

		<div class="inputGroup">
			<select class="input" name="{$name}[tz]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }} {{ $tzInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ $xf.app.data('XF:TimeZone').getTimeZoneOptions() }}" key="$value" value="$readableTz">
					<option value="{$value}"{{ $value === $selectedTz ? 'selected="selected"' : '' }}>{$readableTz}</option>
				</xf:foreach>
			</select>
		</div>
	</div>
</xf:macro>

<xf:macro name="date_time_wrapper"
		  arg-name="!"
		  arg-weekStart="!"
		  arg-readOnly="{{ false }}"
		  arg-class=""
		  arg-xfInit=""
		  arg-attrsHtml=""
		  >
	<xf:if is="$xf.versionId >= 2020000">
		<xf:js prod="xf/date_input-compiled.js" dev="vendor/pikaday/pikaday.js, xf/date_input.js" />
		<xf:css src="core_pikaday.less" />
	</xf:if>

	<div class="inputGroup inputGroup--date inputGroup--joined inputDate">
		<input type="text" class="input input--date {$class}" autocomplete="off" data-xf-init="date-input {$xfInit}"
			data-week-start="{$weekStart}"
			{{ $readOnly ? 'readonly' : '' }}
			name="{$name}"
			{$attrsHtml|raw} />
		<span class="inputGroup-text inputDate-icon js-dateTrigger"></span>
	</div>
</xf:macro>

<xf:macro name="relative_timestamp_prerequisites">
	<xf:js src="sv/vendor/moment/moment.js" addon="SV/StandardLib" min="1" />
	<xf:js src="sv/lib/relative_timestamp.js" addon="SV/StandardLib" min="1" />
</xf:macro>

<xf:macro name="relative_timestamp"
		  arg-class=""
		  arg-timeStr="!"
		  arg-otherTimestamp="!"
		  arg-triggerEvent="{{ null }}"
		  arg-triggerEventOnSelector="{{ null }}"
		  arg-maximumDateParts="{{ 0 }}"
		  arg-countUp="{{ false }}"><xf:trim>
	<xf:macro name="relative_timestamp_prerequisites" />
	
	<span {{ $class is not empty ? 'class="' . $class|for_attr . '" ' : ''}}data-xf-init="sv-standard-lib--relative-timestamp"
		  data-count-up="{{ $countUp ? 'true' : 'false' }}"
		  data-timestamp="{$otherTimestamp}"
		  data-date-format="{$xf.language.date_format}"
		  data-time-format="{$xf.language.time_format}"
		  data-maximum-date-parts="{$maximumDateParts}"
		  {{ $triggerEvent is not empty ? 'data-trigger-event="' . $triggerEvent|for_attr . '" ' . ($triggerEventOnSelector is not empty ? ' data-trigger-event-on-selector="' . $triggerEventOnSelector|for_attr . '" ' : '') : '' }}><xf:trim>
		{$timeStr}
	</xf:trim></span>
</xf:trim></xf:macro>]]></template>
  <template type="public" title="svStandardLib_helper_macros_date_time_input.less" version_id="1030070" version_string="1.3.0"><![CDATA[.inputGroup-container.inputGroup-containerSvStandardLibDateTime
{
	> .inputGroup:last-child
	{
		width: 26.5rem;
	}
}

.inputGroup-containerSvStandardLibDateTime + .inputGroup-containerSvStandardLibDateTime
{
	margin-top: @xf-paddingMedium;
}

@media (max-width: @xf-formResponsive)
{
	.inputGroup-container.inputGroup-containerSvStandardLibDateTime
	{
		> .inputGroup:last-child
		{
			width: 25.7rem;
		}
	}
}]]></template>
  <template type="public" title="svStandardLib_macros" version_id="1120000" version_string="1.12.0"><![CDATA[<xf:macro name="render_prefix_filter"
		  arg-filters="!"
		  arg-prefixId="!"
		  ><xf:trim>
	
	<xf:if is="!is_scalar($prefixId)">
		<xf:set var="$prefixId" value="{{ $prefixId.prefix_id is not empty ? $prefixId.prefix_id : 0 }}" />
	</xf:if>
	
	<xf:set var="$filterRoute" value="{{ $__globals.filterRoute !== null ? $__globals.filterRoute : 'forums' }}" />
	<xf:set var="$filterContainer" value="{{ ($filterRoute === 'forums' && $__globals.filterContainer !== null) ? $__globals.filterContainer : null }}" />

	<xf:set var="$removeFilter" value="{{ $prefixId === $filters.prefix_id }}" />
	<xf:set var="$filters" value="{{ $removeFilter 
									? $filters|replace('prefix_id', null) 
									: $filters|replace('prefix_id', $prefixId) 
								}}" />
	<xf:if contentcheck="true">
		<a href="{{ link($filterRoute, $filterContainer, $filters) }}" class="labelLink" rel="nofollow" data-xf-init="tooltip" title="{{
			($removeFilter
			? phrase('svStandardLib_remove_from_filters')
			: phrase('svStandardLib_add_to_filters')
			)|for_attr }}"  rel="nofollow">
			<xf:contentcheck><xf:trim>{{ prefix('thread', $prefixId) }}</xf:trim></xf:contentcheck>
		</a>
	</xf:if>
</xf:trim></xf:macro>

<xf:macro name="render_forum_filter"
		  arg-filters="!"
		  arg-nodeId="!"
		  arg-forum="!"
		  arg-removeFilter="!"
		  arg-noFilterValue=""
		  ><xf:trim>
	
	<xf:set var="$filterRoute" value="{{ $__globals.filterRoute !== null ? $__globals.filterRoute : 'forums' }}" />
	<xf:set var="$filterContainer" value="{{ ($filterRoute === 'forums' && $__globals.filterContainer !== null) ? $__globals.filterContainer : $forum }}" />
	
	<xf:set var="$removeFilter" value="{{ in_array($nodeId, $filters.nodes ?: [], true) }}" />
	<xf:set var="$filters.nodes" value="{{ $removeFilter 
											   ? ($filters.nodes|replaceValue($nodeId, null) ?: $noFilterValue)
											   : $filters.nodes|addValue($nodeId) 
											   }}" />	
	<a href="{{ link($filterRoute, $filterContainer, $filters) }}" class="labelLink" rel="nofollow" data-xf-init="tooltip" title="{{
		($removeFilter
			? phrase('svStandardLib_remove_from_filters')
			: phrase('svStandardLib_add_to_filters')
		)|for_attr }}"  rel="nofollow">
		{$forum.title}
	</a>
</xf:trim></xf:macro>

<xf:macro name="dynamic_quick_filter" arg-key="" arg-ajax="" arg-class="" arg-page="" arg-filter="{{ [] }}">
    <xf:js src="xf/filter.js" min="1" />
	<xf:js src="sv/vendor/domurl/url.js" addon="SV/StandardLib" min="1" />
	<xf:js src="sv/lib/xf/filter.js" addon="SV/StandardLib" min="1" />
	<script class="js-extraPhrases" type="application/json">
		{
			"no_items_matched_your_filter": "{{ phrase('no_items_matched_your_filter')|escape('js') }}"
		}
	</script>
	<xf:css src="sv_quick_filter.less" />
	
    <div class="{$class} quickFilter u-jsOnly"
         data-xf-init="sv-dynamic-filter"
         data-key="{$key}"
         data-ajax="{$ajax}"
         data-search-target=".userList"
         data-search-row=".userList-row"
         data-search-row-group=".contentRow"
		 data-search-limit=".username"
         data-no-results-format="<div class=&quot;blockMessage js-filterNoResults&quot;>%s</div>">
		<div class="inputGroup inputGroup--inline inputGroup--joined">
			<input type="text" class="input js-filterInput" value="{$filter.text}" placeholder="{{ phrase('filter...')|for_attr }}" data-xf-key="{{ phrase('shortcut.filter')|for_attr }}" />
			<span class="inputGroup-text">
				<xf:checkbox standalone="true">
					<xf:option class="js-filterPrefix" label="{{ phrase('prefix') }}" checked="{$filter.prefix}" />
				</xf:checkbox>
			</span>
			<i class="inputGroup-text js-filterClear is-disabled" aria-hidden="true"></i>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="sv_quick_filter.less" version_id="1110200" version_string="1.11.2"><![CDATA[.sv-quick-filter
{
	.userList
	{
		.block,
		.blockMessage
		{
			&.is-hidden
			{
				display: none;
			}
		}
	}

	.userList-row
	{
		&.is-disabled
		{
			.contentRow-figure,
			.contentRow-header,
			.contentRow-lesser
			{
				opacity: 0.5;
			}

			.contentRow-header
			{
				text-decoration: line-through;
			}

			.contentRow-extra
			{
				// this is needed to move this above the semi-transparent layer that's created above
				position: relative;
				z-index: 2;
			}
		}

		&.is-hidden
		{
			display: none;
		}

		.contentRow-lesser
		{
			&.no-description
			{
				visibility: hidden;
			}
		}

		.is-match
		{
			text-decoration: underline;
			color: red;
		}
	}
}]]></template>
</templates>
