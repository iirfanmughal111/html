<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="tlg_category_delete" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('group-categories/delete', $category) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">
                {{ phrase('tlg_please_confirm_want_to_delete_category_and_groups:') }}
                <strong><a href="{{ link('group-categories/edit', $category) }}">{$category.category_title}</a></strong>
            </xf:inforow>

            <xf:if is="$category.hasChildren()">
                <xf:radiorow name="child_nodes_action">
                    <xf:option value="move" selected="true">{{ phrase('tlg_attach_this_categories_children_to_its_parent') }}</xf:option>
                    <xf:option value="delete">{{ phrase('tlg_delete_this_categories_children') }}</xf:option>
                </xf:radiorow>
            </xf:if>
        </div>

        <xf:submitrow rowtype="{{ !$category.hasChildren() ? 'simple' : '' }}" icon="delete" />
    </div>
    <xf:redirect />
</xf:form>]]></template>
  <template type="admin" title="tlg_category_edit" version_id="3020500" version_string="3.2.5"><![CDATA[<xf:title>{{ $category.exists() ? phrase('tlg_edit_category') : phrase('tlg_add_new_category') }}</xf:title>

<xf:form action="{{ link('group-categories/save', $category) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
            <xf:textboxrow name="category_title" value="{$category.category_title}"
                           label="{{ phrase('title') }}" maxlength="{{ max_length($category, 'category_title') }}" />
            <xf:textarearow name="description" value="{$category.description}" autosize="true"
                            maxlength="{{ max_length($category, 'description') }}"
                            label="{{ phrase('description') }}"
                            hint="{{ phrase('you_may_use_html') }}" />
            <hr class="formRowSep" />

            <xf:selectrow name="parent_category_id" value="{$category.parent_category_id}"
                          label="{{ phrase('tlg_parent_category') }}">

                <xf:option value="0">{{ phrase('(none)') }}</xf:option>

                <xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
                    <xf:option value="{$treeEntry.record.category_id}">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.category_title}</xf:option>
                </xf:foreach>
            </xf:selectrow>

            <xf:macro template="display_order_macros" name="row"
                      arg-name="display_order"
                      arg-value="{$category.display_order}"
                      arg-explain="{{ phrase('position_of_this_item_relative_to_other_nodes_with_same_parent') }}" />

            <hr class="formRowSep" />
            <xf:radiorow name="default_privacy" label="{{ phrase('tlg_default_privacy') }}"
                         value="{$category.default_privacy}">
                <xf:option value="public" label="{{ phrase('tlg_privacy_public') }}"
                           hint="{{ phrase('tlg_privacy_public_explain') }}" />
                <xf:option value="closed" label="{{ phrase('tlg_privacy_closed') }}"
                           hint="{{ phrase('tlg_privacy_closed_explain') }}" />
                <xf:option value="secret" label="{{ phrase('tlg_privacy_secret') }}"
                           hint="{{ phrase('tlg_privacy_secret_explain') }}" />

                <xf:comment>tl_groups:extra_privacy_row</xf:comment>
            </xf:radiorow>
            <xf:checkboxrow label="">
                <xf:option name="always_moderate" selected="{$category.always_moderate}">{{ phrase('tlg_always_moderation_new_groups') }}</xf:option>
            </xf:checkboxrow>
            <xf:numberboxrow name="min_tags" label="{{ phrase('tlg_minimum_required_tags') }}"
                             explain="{{ phrase('tlg_minimum_required_tags_explain') }}"
                             value="{$category.min_tags}" min="0" />

            <xf:checkboxrow label="{{ phrase('tlg_disabled_navigation_tabs') }}"
                            listclass="listColumns" name="disabled_navigation_tabs[]"
                            value="{$category.disabled_navigation_tabs}"
                            explain="{{ phrase('tlg_disabled_navigation_tabs_explain') }}">
                <xf:options source="$navigationTabs"/>
            </xf:checkboxrow>

            <xf:radiorow label="{{ phrase('tlg_default_group_tab') }}"
                         name="default_tab" value="{$category.default_tab}"
                         listclass="listColumns"
                         explain="{{ phrase('tlg_default_group_tab_explain') }}">
                <xf:option value="">{{ phrase('tlg_inherit_from_options') }}</xf:option>
                <xf:options source="$navigationTabs"/>
            </xf:radiorow>

            <xf:macro name="user_group_field" arg-label="{{ phrase('tlg_allow_viewable_user_groups') }}"
                      arg-explain="{{ phrase('tlg_allow_viewable_user_groups_explain') }}"
                      arg-name="allow_view_user_group_ids"
                      arg-userGroups="{$userGroups}"
                      arg-value="{$selViewUserGroups}" />

            <xf:macro name="user_group_field" arg-label="{{ phrase('tlg_allow_create_groups') }}"
                      arg-explain="{{ phrase('tlg_allow_create_groups_explain') }}"
                      arg-name="allow_create_user_group_ids"
                      arg-userGroups="{$userGroups}"
                      arg-value="{$selCreateUserGroups}" />

            <xf:comment>tl_groups.category_add_extra</xf:comment>
		</div>

        <xf:submitrow icon="save" />
	</div>
</xf:form>

<xf:macro name="user_group_field" arg-name="!" arg-userGroups="!" arg-label="!" arg-explain="{{ null }}"
    arg-value="!">
    <xf:radiorow name="{$name}_type" label="{$label}" explain="{$explain}">
        <xf:option value="1" selected="{{ $value === -1 ? true : false }}">{{ phrase('all') }}</xf:option>
        <xf:option value="0" label="{{ phrase('tlg_users_belong_to_user_groups') }}"
                   selected="{{ $value !== -1 ? true : false }}">
            <xf:checkbox name="{$name}[]" value="{$value}" listclass="listColumns">
                <xf:options source="$userGroups" />
            </xf:checkbox>
        </xf:option>
    </xf:radiorow>
</xf:macro>]]></template>
  <template type="admin" title="tlg_category_list" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_categories') }}</xf:title>

<xf:pageaction>
    <div class="buttonGroup">
        <xf:button href="{{ link('group-categories/add') }}" icon="add" overlay="true">{{ phrase('tlg_add_new_category') }}</xf:button>
        <xf:button href="{{ link('group-categories/sort') }}" icon="sort" overlay="true">{{ phrase('sort') }}</xf:button>
    </div>
</xf:pageaction>

<xf:if is="$nodeTree.countChildren()">
    <div class="block">
        <div class="block-outer">
            <xf:macro template="filter_macros" name="quick_filter" arg-key="nodes" arg-class="block-outer-opposite" />
        </div>
        <div class="block-container">
            <div class="block-body">
                <xf:datalist>
                    <xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
                        <xf:set var="$node" value="{$treeEntry.record}" />
                        <xf:datarow>
                            <xf:cell class="dataList-cell--link dataList-cell--main" hash="{$node.category_id}">
                                <a href="{{ link('group-categories/edit', $node) }}">
                                    <div class="u-depth{$treeEntry.depth}">
                                        <div class="dataList-mainRow">
                                            {$node.category_title}
                                        </div>
                                    </div>
                                </a>
                            </xf:cell>
                            <xf:popup class="dataList-cell--action u-hideMedium"
                                      label="{{ phrase('add...') }}">

                                <div class="menu" data-menu="menu" aria-hidden="true">
                                    <div class="menu-content">
                                        <h3 class="menu-header">{{ phrase('add...') }}</h3>
                                        <a href="{{ link('group-categories/add', null, {'parent_category_id': $node.parent_category_id}) }}"
                                           class="menu-linkRow" data-xf-click="overlay">{{ phrase('sibling') }}</a>
                                        <a href="{{ link('group-categories/add', null, {'parent_category_id': $node.category_id}) }}"
                                           class="menu-linkRow" data-xf-click="overlay">{{ phrase('child') }}</a>
                                    </div>
                                </div>
                            </xf:popup>
                            <xf:delete href="{{ link('group-categories/delete', $node) }}" />
                        </xf:datarow>
                    </xf:foreach>
                </xf:datalist>
            </div>
            <div class="block-footer">
                <span class="block-footer-counter">{{ display_totals($nodeTree.getFlattened(0)) }}</span>
            </div>
        </div>
    </div>
<xf:else />
    <div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="tlg_category_sort" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_sort_categories') }}</xf:title>

<xf:macro template="public:nestable_macros" name="setup" />

<xf:form action="{{ link('group-categories/sort') }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <div class="nestable-container" data-xf-init="nestable">
                <xf:macro name="node_list" arg-children="{$nodeTree}" />
                <xf:hiddenval name="categories" value="" />
            </div>
        </div>
        <xf:submitrow icon="save" rowtype="simple" />
    </div>
</xf:form>

<xf:macro name="node_list" arg-children="!">
    <ol class="nestable-list">
        <xf:foreach loop="$children" key="$id" value="$child">
            <xf:macro name="node_list_entry" arg-node="{$child}" arg-children="{$child.children}" />
        </xf:foreach>
    </ol>
</xf:macro>

<xf:macro name="node_list_entry" arg-node="!" arg-children="!">
    <li class="nestable-item" data-id="{$node.id}">
        <div class="nestable-handle" aria-label="{{ phrase('drag_handle')|for_attr }}"><xf:fa icon="fa-bars" /></div>
        <div class="nestable-content">{$node.record.title}</div>
        <xf:if is="$node.children is not empty">
            <xf:macro name="node_list" arg-children="{$node.children}" />
        </xf:if>
    </li>
</xf:macro>]]></template>
  <template type="admin" title="tlg_field_delete" version_id="2000400" version_string="2.0.4"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="tlg_field_edit" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:include template="base_custom_field_edit">
    <xf:set var="$extraOptions">
        <xf:macro template="base_custom_field_macros" name="common_options"
                  arg-field="{$field}" />
    </xf:set>
    <xf:set var="$displayOptions">
        <xf:selectrow name="category_ids[]" value="{$categoryIds}" multiple="multiple" size="7"
                      label="{{ phrase('tlg_applicable_categories') }}">

            <xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
            <xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
                <xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
            </xf:foreach>
        </xf:selectrow>
    </xf:set>
</xf:include>]]></template>
  <template type="admin" title="tlg_field_list" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_custom_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="tlg_group_batch_update" version_id="3030200" version_string="3.3.2"><![CDATA[<xf:title>{{ phrase('tlg_batch_update_groups') }}</xf:title>

<xf:if is="$success">
    <div class="blockMessage blockMessage--success blockMessage--iconic">{{ phrase('batch_update_was_completed_successfully') }}</div>
</xf:if>

<xf:form action="{{ link($linkPrefix . '/batch-update/confirm') }}" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="criteria[name]" value="{$criteria.name}" type="search"
                           label="{{ phrase('title') }}" />
            <xf:tokeninputrow name="criteria[tags]" value="{$criteria.tags}"
                              href="{{ link_type('public', 'misc/tag-auto-complete') }}"
                              label="{{ phrase('tags') }}" />

            <div class="formRowSep"></div>

            <xf:checkboxrow name="criteria[privacy]" value="{$criteria.privacy}"
                            label="{{ phrase('tlg_privacy') }}">
                <xf:option value="public">{{ phrase('tlg_privacy_public') }}</xf:option>
                <xf:option value="closed">{{ phrase('tlg_privacy_closed') }}</xf:option>
                <xf:option value="secret">{{ phrase('tlg_privacy_secret') }}</xf:option>
            </xf:checkboxrow>

            <div class="formRowSep"></div>

            <xf:formrow label="{{ phrase('category') }}">

                <ul class="inputList">
                    <li><xf:radio name="criteria[category_id][search_type]"
                                  value="{{ (is_array($criteria.category_id) ? $criteria.category_id.search_type : '') ?: 'include' }}"
                                  listclass="inputChoices--inline">
                        <xf:option value="include">{{ phrase('include_selected') }}</xf:option>
                        <xf:option value="exclude">{{ phrase('exclude_selected') }}</xf:option>
                    </xf:radio></li>

                    <li><xf:select name="criteria[category_id]"
                                   value="{{ is_array($criteria.category_id) ? $criteria.category_id|numeric_keys_only : $criteria.category_id }}"
                                   multiple="true" size="8">
                        <xf:option value="0" label="{{ phrase('(any)') }}" />
                        <xf:foreach loop="$categories" value="$category">
                            <xf:option value="{$category.value}" disabled="{$category.disabled}">{$category.label}</xf:option>
                        </xf:foreach>
                    </xf:select></li>
                </ul>
            </xf:formrow>

            <div class="formRowSep"></div>

            <xf:textboxrow name="criteria[owner_username]" value="{$criteria.owner_username}" type="search"
                           label="{{ phrase('created_by') }}" />

            <div class="formRowSep"></div>

            <xf:formrow rowtype="input"
                        label="{{ phrase('created_between') }}">
                <div class="inputGroup">
                    <xf:dateinput name="criteria[created_date][start]" value="{$criteria.created_date.start}" size="15" />
                    <span class="inputGroup-text">-</span>
                    <xf:dateinput name="criteria[created_date][end]" value="{$criteria.created_date.end}" size="15" />
                </div>
            </xf:formrow>

            <xf:formrow rowtype="input"
                        label="{{ phrase('tlg_member_count_between') }}"
                        explain="{{ phrase('use_negative_one_specify_no_max') }}">
                <div class="inputGroup">
                    <xf:numberbox name="criteria[member_count][start]" value="{$criteria.member_count.start}" size="5" min="0" />
                    <span class="inputGroup-text">-</span>
                    <xf:numberbox name="criteria[member_count][end]" value="{$criteria.member_count.end}" size="5" min="-1" />
                </div>
            </xf:formrow>

            <xf:formrow rowtype="input"
                        label="{{ phrase('tlg_event_count_between') }}"
                        explain="{{ phrase('use_negative_one_specify_no_max') }}">
                <div class="inputGroup">
                    <xf:numberbox name="criteria[event_count][start]" value="{$criteria.event_count.start}" size="5" min="0" />
                    <span class="inputGroup-text">-</span>
                    <xf:numberbox name="criteria[event_count][end]" value="{$criteria.event_count.end}" size="5" min="-1" />
                </div>
            </xf:formrow>

            <xf:checkboxrow name="criteria[group_state]" value="{$criteria.group_state}"
                            label="{{ phrase('state') }}">
                <xf:option value="visible">{{ phrase('visible') }}</xf:option>
                <xf:option value="deleted">{{ phrase('deleted') }}</xf:option>
                <xf:option value="moderated">{{ phrase('moderated') }}</xf:option>
            </xf:checkboxrow>

            <xf:if contentcheck="true">
                <hr class="formRowSep" />
                <xf:contentcheck>
                    <xf:foreach loop="$xf.app.em.getRepository('Truonglv\Groups:Field').getDisplayGroups()" key="$fieldGroup" value="$phrase">
                        <xf:set var="$customFields" value="{$xf.app.getCustomFields('tl_groups', $fieldGroup)}" />
                        <xf:if contentcheck="true">
                            <xf:contentcheck>
                                <xf:foreach loop="$customFields" key="$fieldId" value="$fieldDefinition">
                                    <xf:set var="$choices" value="{$fieldDefinition.field_choices}" />
                                    <xf:set var="$fieldName" value="criteria[group_field]{{ ($choices && $fieldDefinition.type_group != 'multiple') ? '[exact]' : '' }}[{$fieldId}]" />
                                    <xf:formrow rowtype="input"
                                                label="{$fieldDefinition.title}">
                                        <xf:if is="!{$choices}">
                                            <xf:textbox name="{$fieldName}" value="{$criteria.group_field.{$fieldId}}" />
                                            <xf:else />
                                            <xf:checkbox name="{$fieldName}" value="{{ $fieldDefinition.type_group != 'multiple' ? $criteria.group_field.exact.{$fieldId} : $criteria.group_field.{$fieldId} }}" listclass="listColumns">
                                                <xf:foreach loop="$choices" key="$val" value="$choice">
                                                    <xf:option value="{{ $fieldDefinition.type_group == 'multiple' ? 's:' . strlen($val) . ':"' . $val . '"' : $val }}" label="{$choice}" />
                                                </xf:foreach>
                                            </xf:checkbox>
                                        </xf:if>
                                    </xf:formrow>
                                </xf:foreach>
                            </xf:contentcheck>
                        </xf:if>
                    </xf:foreach>
                </xf:contentcheck>
            </xf:if>
        </div>
        <xf:submitrow icon="search" sticky="true" />
    </div>
</xf:form>]]></template>
  <template type="admin" title="tlg_group_batch_update_confirm" version_id="3030200" version_string="3.3.2"><![CDATA[<xf:title>{{ phrase('tlg_batch_update_groups') }}</xf:title>

<xf:form action="{{ link($linkPrefix . '/batch-update/action') }}" class="block">
    <div class="block-container">
        <h2 class="block-header">{{ phrase('tlg_update_groups') }}</h2>
        <div class="block-body">
            <xf:formrow label="{{ phrase('tlg_matched_groups') }}">
                {$total|number}
                <xf:if is="!$groupIds">
                    <span role="presentation" aria-hidden="true">&middot;</span>
                    <a href="{{ link($linkPrefix . '/list', null, {'criteria': $criteria, 'all': true}) }}">{{ phrase('view_or_filter_matches') }}</a>
                </xf:if>
            </xf:formrow>

            <hr class="formRowSep" />

            <xf:selectrow name="actions[category_id]"
                          label="{{ phrase('tlg_move_to_category') }}">

                <xf:option value="0"></xf:option>
                <xf:foreach loop="$categories" value="$category">
                    <xf:option value="{$category.value}" label="{$category.label}" disabled="{$category.disabled}" />
                </xf:foreach>
            </xf:selectrow>

            <xf:selectrow name="actions[privacy]" label="{{ phrase('tlg_change_group_privacy') }}">
                <xf:option value="public">{{ phrase('tlg_privacy_public') }}</xf:option>
                <xf:option value="closed">{{ phrase('tlg_privacy_closed') }}</xf:option>
                <xf:option value="secret">{{ phrase('tlg_privacy_secret') }}</xf:option>
            </xf:selectrow>

            <hr class="formRowSep" />

            <xf:checkboxrow>
                <xf:option name="actions[approve]" value="1">{{ phrase('tlg_approve_groups') }}</xf:option>
                <xf:option name="actions[unapprove]" value="1">{{ phrase('tlg_unapprove_groups') }}</xf:option>
                <xf:option name="actions[soft_delete]" value="1">{{ phrase('tlg_soft_delete_groups') }}</xf:option>
            </xf:checkboxrow>

        </div>
        <xf:submitrow submit="{{ phrase('tlg_update_groups') }}" icon="save" />
    </div>

    <xf:if is="$groupIds">
        <xf:hiddenval name="thread_ids">{$groupIds|json}</xf:hiddenval>
    <xf:else />
        <xf:hiddenval name="criteria">{$criteria|json}</xf:hiddenval>
    </xf:if>
</xf:form>

<xf:form action="{{ link($linkPrefix . '/batch-update/action') }}" class="block">
    <div class="block-container">
        <h2 class="block-header">{{ phrase('tlg_delete_groups') }}</h2>
        <div class="block-body">
            <xf:checkboxrow>
                <xf:option name="actions[delete]">
                    {{ phrase('tlg_confirm_deletion_of_x_groups', {'total': $total|number}) }}
                </xf:option>
            </xf:checkboxrow>
        </div>
        <xf:submitrow name="confirm_delete" icon="delete" />
    </div>

    <xf:if is="$groupIds">
        <xf:hiddenval name="group_ids">{$groupIds|json}</xf:hiddenval>
    <xf:else />
        <xf:hiddenval name="criteria">{$criteria|json}</xf:hiddenval>
    </xf:if>
</xf:form>]]></template>
  <template type="admin" title="tlg_group_list" version_id="3030200" version_string="3.3.2"><![CDATA[<xf:title>{{ phrase('tlg_groups') }}</xf:title>

<xf:form action="{{ link($linkPrefix . '/list') }}" method="GET" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:selectrow name="privacy" value="{{ $pageNavParams.privacy ?: '' }}" label="{{ phrase('tlg_privacy') }}">
                <xf:option value="">{{ phrase('any') }}</xf:option>
                <xf:option value="public">{{ phrase('tlg_privacy_public') }}</xf:option>
                <xf:option value="closed">{{ phrase('tlg_privacy_closed') }}</xf:option>
                <xf:option value="secret">{{ phrase('tlg_privacy_secret') }}</xf:option>
            </xf:selectrow>

            <xf:selectrow name="group_state" value="{{ $pageNavParams.group_state ?: '' }}"
                          label="{{ phrase('state') }}">
                <xf:option value="">{{ phrase('any') }}</xf:option>
                <xf:option value="visible">{{ phrase('visible') }}</xf:option>
                <xf:option value="moderated">{{ phrase('moderated') }}</xf:option>
                <xf:option value="deleted">{{ phrase('deleted') }}</xf:option>
            </xf:selectrow>
        </div>

        <xf:submitrow icon="search" />
    </div>
</xf:form>

<xf:if is="$total > 0">
    <div class="block">
        <div class="block-container">
            <div class="block-body">
                <xf:datalist>
                    <xf:foreach loop="$groups" value="$group">
                        <xf:datarow>
                            <xf:main label="{$group.name}" hint="{$group.privacy}"
                                     explain="{$controller.getEntityExplain($group)}"
                                     href="{{ link_type('public', 'groups', $group) }}" />
                            <xf:delete href="{{ link($linkPrefix . '/delete', $group) }}" />
                        </xf:datarow>
                    </xf:foreach>
                </xf:datalist>
            </div>

            <div class="block-footer">
                <span class="block-footer-counter">{{ display_totals($total) }}</span>
            </div>
        </div>

        <div class="block-outer block-outer--after">
            <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                        link="{{ $linkPrefix . '/list' }}" params="{$pageNavParams}" />
        </div>
    </div>
<xf:else />
    <div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>
]]></template>
  <template type="admin" title="tlg_group_list_criteria" version_id="3030200" version_string="3.3.2"><![CDATA[<xf:title>{{ phrase('tlg_groups') }}</xf:title>

<xf:if is="$groups is not empty">
    <xf:form action="{{ link($linkPrefix . '/batch-update/confirm') }}" class="block">
        <div class="block-container">
            <div class="block-body">
                <xf:datalist data-xf-init="responsive-data-list">
                    <xf:datarow rowtype="header">
                        <xf:if is="$showingAll">
                            <xf:cell class="dataList-cell--min">
                                <xf:checkbox standalone="true"><xf:option check-all=".dataList >" data-xf-init="tooltip" title="{{ phrase('select_all') }}" /></xf:checkbox>
                            </xf:cell>
                        </xf:if>
                        <xf:cell colspan="1">{{ phrase('tlg_group_name') }}</xf:cell>
                        <xf:cell class="dataList-cell--min">{{ phrase('category') }}</xf:cell>
                        <xf:cell class="dataList-cell--min">{{ phrase('tlg_owner') }}</xf:cell>
                        <xf:cell class="dataList-cell--min">{{ phrase('tlg_member_count') }}</xf:cell>
                        <xf:cell class="dataList-cell--min">{{ phrase('last_activity') }}</xf:cell>
                    </xf:datarow>
                    <xf:foreach loop="$groups" value="$group">
                        <xf:datarow>
                            <xf:if is="$showingAll">
                                <xf:toggle name="group_ids[]" value="{$group.group_id}" selected="true" />
                            </xf:if>
                            <xf:main href="{{ link_type('public', 'groups', $group) }}" label="{$group.name}" />
                            <xf:cell class="dataList-cell--min">
                                {$group.Category.title}
                            </xf:cell>
                            <xf:cell class="dataList-cell--min">
                                {$group.owner_username}
                            </xf:cell>
                            <xf:cell class="dataList-cell--min">
                                {$group.member_count|number}
                            </xf:cell>
                            <xf:cell class="dataList-cell--min">
                                <xf:date time="{$group.last_activity}" />
                            </xf:cell>
                        </xf:datarow>
                    </xf:foreach>
                    <xf:if is="$filter AND $total > $perPage">
                        <xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
                            <xf:cell colspan="3">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
                        </xf:datarow>
                    </xf:if>
                </xf:datalist>
            </div>
            <div class="block-footer block-footer--split">
                <span class="block-footer-counter">{{ display_totals($groups, $total) }}</span>
                <span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all=".dataList" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
                <xf:if is="$showAll">
					<span class="block-footer-controls">
						<a href="{{ link($linkPrefix . '/list', null, {'criteria': $criteria, 'all': true}) }}">{{ phrase('show_all_matches') }}</a>
					</span>
                <xf:elseif is="$showingAll" />
                    <span class="block-footer-controls"><xf:button type="submit">{{ phrase('batch_update') }}</xf:button></span>
                </xf:if>
            </div>
        </div>

        <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                    link="{{ $linkPrefix . '/list' }}"
                    params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
                    wrapperclass="js-filterHide block-outer block-outer--after" />
    </xf:form>
<xf:else />
    <div class="blockMessage">{{ phrase('no_records_matched') }}</div>
</xf:if>]]></template>
  <template type="admin" title="tlg_group_node_macros" version_id="3030200" version_string="3.3.2"><![CDATA[<xf:macro name="node_list_tabs" arg-selected="!">
    <h2 class="tabs--standalone tabs--standalone--closer tabs hScroller"
        data-xf-init="tabs h-scroller" style="max-width:360px" role="tablist">
        <span class="hScroller-scroll">
            <a class="tabs-tab{{ $selected == '' ? ' is-active' : '' }}" role="tab" tabindex="0"
               href="{{ link('nodes') }}">{{ phrase('tlg_system_nodes') }}</a>
            <a class="tabs-tab{{ $selected == 'group_nodes' ? ' is-active' : '' }}" role="tab" tabindex="0"
               href="{{ link('nodes', null, {'tab': 'group_nodes'}) }}">{{ phrase('tlg_group_nodes') }}</a>
        </span>
    </h2>
</xf:macro>]]></template>
  <template type="admin" title="tlg_helper_criteria_macros" version_id="3000100" version_string="3.0.1"><![CDATA[<xf:macro name="user_criteria" arg-criteria="!" arg-data="!">
    <xf:checkboxrow label="{{ phrase('tlg_criteria_group_options') }}">
        <xf:option name="user_criteria[tlg_has_group][rule]"
                   value="tlg_has_group" label="{{ phrase('tlg_joined_any_groups') }}"
                   selected="{$criteria.tlg_has_group}"/>
        <xf:option name="user_criteria[tlg_has_manage_group][rule]"
                   value="tlg_has_manage_group" label="{{ phrase('tlg_manage_any_groups') }}"
                   selected="{$criteria.tlg_has_manage_group}"/>
        <xf:option name="user_criteria[tlg_member_of_groups][rule]"
                   value="tlg_member_of_groups"
                   selected="{$criteria.tlg_member_of_groups}"
                   label="{{ phrase('tlg_member_of_specific_groups') }}">
            <xf:textbox name="user_criteria[tlg_member_of_groups][data][ids]"
                        dir="ltr" value="{$criteria.tlg_member_of_groups.ids}" />
            <xf:afterhint>{{ phrase('tlg_member_of_specific_groups_explain') }}</xf:afterhint>
        </xf:option>
    </xf:checkboxrow>
</xf:macro>]]></template>
  <template type="admin" title="tlg_import_config_xenforo" version_id="2010400" version_string="2.1.4"><![CDATA[<h3 class="block-formSectionHeader">{{ phrase('source_database_configuration') }}</h3>
<xf:if is="!$baseConfig.db.host">
    <xf:textboxrow name="config[db][host]" value="localhost"
                   label="{{ phrase('mysql_server') }}"
                   placeholder="$config['db']['host']" />
    <xf:textboxrow name="config[db][port]" value="3306"
                   label="{{ phrase('mysql_port') }}"
                   placeholder="$config['db']['port']" />
    <xf:textboxrow name="config[db][username]"
                   label="{{ phrase('mysql_user_name') }}"
                   placeholder="$config['db']['username']" />
    <xf:textboxrow name="config[db][password]" autocomplete="off"
                   label="{{ phrase('mysql_password') }}"
                   placeholder="$config['db']['password']" />
    <xf:textboxrow name="config[db][dbname]"
                   label="{{ phrase('mysql_database_name') }}"
                   placeholder="$config['db']['dbname']" />
    <xf:else />
    <xf:formrow label="{{ phrase('mysql_server') }}">{$fullConfig.db.host}:{$fullConfig.db.dbname}</xf:formrow>
</xf:if>

<xf:if is="!$baseConfig.data_dir">
    <hr class="formRowSep" />

    <xf:textboxrow name="config[data_dir]" value="{$baseConfig.suggestion_data_dir}"
                   label="{{ phrase('data_directory') }}"
                   placeholder="$config['externalDataPath']" />
    <xf:else />
    <xf:formrow label="{{ phrase('data_directory') }}">{$fullConfig.data_dir}</xf:formrow>
</xf:if>
<xf:if is="!$baseConfig.internal_data_dir">
    <xf:textboxrow name="config[internal_data_dir]" value="{$baseConfig.suggestion_internal_data_dir}"
                   label="{{ phrase('internal_data_directory') }}"
                   placeholder="$config['internalDataPath']" />
    <xf:else />
    <xf:formrow label="{{ phrase('internal_data_directory') }}">{$fullConfig.internal_data_dir}</xf:formrow>
</xf:if>
<xf:if is="!$baseConfig.old_version_id">
    <xf:radiorow name="config[old_version_id]" value="2.9.1a"
                 label="{{ phrase('tlg_your_current_addon_version_in_xf1') }}">
        <xf:option value="2.5.5">2.5.5</xf:option>
        <xf:option value="2.9.1a">2.9.1a</xf:option>
    </xf:radiorow>
<xf:else />
    <xf:formrow label="{{ phrase('tlg_your_current_addon_version_in_xf1') }}">{$fullConfig.old_version_id}</xf:formrow>
</xf:if>]]></template>
  <template type="admin" title="tlg_import_step_config_xenforo" version_id="2000000" version_string="2.0.0"><![CDATA[]]></template>
  <template type="admin" title="tlg_member_role_add" version_id="2020000" version_string="2.2.0"><![CDATA[<xf:title>{{ $memberRole.exists()
    ? phrase('tlg_edit_member_role')
    : phrase('tlg_add_new_member_role') }}</xf:title>

<xf:form action="{{ link('group-member-roles/save', $memberRole) }}" ajax="true" class="block">
    <div class="block-container">
        <h2 class="block-tabHeader tabs hScroller" data-xf-init="tabs h-scroller" role="tablist">
            <span class="hScroller-scroll">
                <a class="tabs-tab is-active" role="tab" tabindex="0" aria-controls="basic-info">{{ phrase('basic') }}</a>
                <xf:foreach loop="$roleGroups" value="$roleGroupId">
                    <a class="tabs-tab" role="tab" tabindex="0"
                       aria-controls="role-{$roleGroupId}">{$roles.{$roleGroupId}.getRoleGroupTitle()}</a>
                </xf:foreach>
            </span>
        </h2>

        <ul class="tabPanes">
            <li id="basic-info" class="is-active" role="tabpanel">
                <div class="block-body">
                    <xf:if is="$memberRole.exists()">
                        <xf:formrow label="{{ phrase('tlg_member_role_id') }}">{$memberRole.member_role_id}</xf:formrow>
                        <xf:else />
                        <xf:textboxrow name="new_member_role_id" label="{{ phrase('tlg_member_role_id') }}"
                                       maxlength="{{ max_length($memberRole, 'member_role_id') }}"
                                       explain="{{ phrase('tlg_member_role_id_explain') }}" />
                    </xf:if>

                    <xf:textboxrow name="title" value="{$memberRole.title}" label="{{ phrase('title') }}" />
                    <xf:textarearow name="description" value="{$memberRole.description}" label="{{ phrase('description') }}" />

                    <xf:numberboxrow name="memberRole[display_order]" value="{$memberRole.display_order}"
                                     label="{{ phrase('display_order') }}" />

                    <xf:checkboxrow label="{{ phrase('tlg_promote_user_groups') }}" name="memberRole[user_group_ids][]"
                                    value="{$memberRole.user_group_ids}"
                                    explain="{{ phrase('tlg_promote_user_groups_explain') }}">
                        <xf:options source="$userGroups" />
                    </xf:checkboxrow>
                </div>
            </li>

            <xf:foreach loop="$roleGroups" value="$roleGroupId">
                <li id="role-{$roleGroupId}" role="tabpanel">
                    <div class="block-body">
                        <xf:formrow label="{{ phrase('permissions') }}">
                            <ul class="inputChoices" id="perms-{$roleGroupId}">
                                <xf:foreach loop="{$roles.{$roleGroupId}}" value="$roleRef" key="$roleId">
                                    <li class="inputChoices-choice">
                                        <xf:checkbox>
                                            <xf:option name="role_permissions[{$roleGroupId}][{$roleId}]"
                                                       label="{$roleRef.title}"
                                                       selected="{{ $memberRole.hasRole($roleGroupId, $roleId) ? 1 : 0 }}"
                                                       hint="{{ $xf.debug ? '(' . $roleId . ') ' : '' }}{$roleRef.explain}" />
                                        </xf:checkbox>
                                    </li>
                                </xf:foreach>
                                <li class="u-muted inputChoices-choice" style="margin-left: 1.5em">
                                    <xf:checkbox standalone="true">
                                        <xf:option name="_" data-xf-init="check-all"
                                                   data-container="#perms-{$roleGroupId}">{{ phrase('tlg_check_all') }}</xf:option>
                                    </xf:checkbox>
                                </li>
                            </ul>
                        </xf:formrow>
                    </div>
                </li>
            </xf:foreach>
        </ul>

        <xf:submitrow icon="save" sticky="true" />
    </div>

</xf:form>]]></template>
  <template type="admin" title="tlg_member_role_delete" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_delete_confirmation') }}</xf:title>

<xf:form action="{{ link('group-member-roles/delete', $memberRole) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">
                {{ phrase('tlg_please_confirm_want_to_delete_member_role:') }}
                <strong><a href="{{ link('group-member-roles/edit', $memberRole) }}">{$memberRole.title}</a></strong>
            </xf:inforow>
        </div>

        <xf:submitrow rowtype="simple" icon="delete" />
    </div>

    <xf:redirect />
</xf:form>]]></template>
  <template type="admin" title="tlg_member_role_list" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_member_roles') }}</xf:title>

<xf:pageaction>
    <div class="buttonGroup">
        <xf:button href="{{ link('group-member-roles/add') }}" icon="add" overlay="true">{{ phrase('tlg_add_new_member_role') }}</xf:button>
    </div>
</xf:pageaction>

<div class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:datalist>
                <xf:foreach loop="$memberRoles" value="$memberRole">
                    <xf:datarow>
                        <xf:cell class="dataList-cell--link dataList-cell--main" hash="{$memberRole.member_role_id}">
                            <a href="{{ link('group-member-roles/edit', $memberRole) }}">
                                <div class="u-depth">
                                    <div class="dataList-mainRow">{$memberRole.title}</div>
                                    <div class="dataList-subRow">({$memberRole.display_order} - {$memberRole.member_role_id}) {$memberRole.description}</div>
                                </div>
                            </a>
                        </xf:cell>

                        <xf:delete href="{{ link('group-member-roles/delete', $memberRole) }}" />
                    </xf:datarow>
                </xf:foreach>
            </xf:datalist>
        </div>

        <div class="block-footer">
            <span class="block-footer-counter">{{ display_totals($total) }}</span>
        </div>
    </div>
</div>]]></template>
  <template type="admin" title="tlg_option_defaultSort" version_id="2000800" version_string="2.0.8"><![CDATA[<xf:formrow label="{$option.title}"
            hint="{$hintHtml}"
            explain="{$explainHtml}"
            html="{$listedHtml}">
    <div class="inputGroup">
        <xf:select name="{$inputName}[order]" value="{$option.option_value.order}">
            <xf:option value="created_date">{{ phrase('tlg_submission_date') }}</xf:option>
            <xf:option value="name">{{ phrase('tlg_alphabetically') }}</xf:option>
            <xf:option value="member_count">{{ phrase('tlg_member_count') }}</xf:option>
            <xf:option value="view_count">{{ phrase('tlg_view_count') }}</xf:option>
            <xf:option value="event_count">{{ phrase('tlg_event_count') }}</xf:option>
            <xf:option value="discussion_count">{{ phrase('tlg_discussion_count') }}</xf:option>
            <xf:option value="last_activity">{{ phrase('tlg_last_activity') }}</xf:option>
        </xf:select>
        <span class="inputGroup-splitter"></span>
        <xf:select name="{$inputName}[direction]" value="{$option.option_value.direction}">
            <xf:option value="asc">{{ phrase('ascending') }}</xf:option>
            <xf:option value="desc">{{ phrase('descending') }}</xf:option>
        </xf:select>
    </div>
</xf:formrow>]]></template>
  <template type="admin" title="tlg_option_delete_forum_action" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:radiorow name="{$inputName}[type]" value="{$option.option_value.type}"
             label="{$option.title}"
             hint="{$hintHtml}"
             explain="{$explainHtml}"
             html="{$listedHtml}">

    <xf:option value="0" label="{{ phrase('tlg_hard_delete_forum_and_data_itself') }}" />
    <xf:option value="1" label="{{ phrase('tlg_unassociate_with_group_and_archive_forum_to:') }}">
        <xf:select name="{$inputName}[node_id]" value="{$option.option_value.node_id}">
            <xf:option value="0">&nbsp;</xf:option>
            <xf:foreach loop="$nodeTree.getFlattened()" value="$treeEntry">
                <xf:option value="{$treeEntry.record.node_id}" disabled="{{ $treeEntry.record.node_type_id != 'Forum' }}">
                    {{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}
                </xf:option>
            </xf:foreach>
            <xf:options source="$formatParams" />
        </xf:select>
    </xf:option>
</xf:radiorow>]]></template>
  <template type="admin" title="tlg_option_macros" version_id="2000800" version_string="2.0.8"><![CDATA[<xf:macro name="option_form_block" arg-group="" arg-options="!" arg-containerBeforeHtml="" arg-headers="{{ [] }}">


    <xf:if is="$options is not empty">
        <xf:form action="{{ link('options/update') }}" ajax="true" class="block">
            <div class="block-container">
                {$containerBeforeHtml|raw}
                <h2 class="block-tabHeader tabs hScroller" data-xf-init="h-scroller tabs" role="tablist">
                    <span class="hScroller-scroll">
                        <xf:foreach loop="$headers" value="$header" key="$key">
                            <a class="tabs-tab{{ $header.active ? ' is-active' : '' }}" role="tab" tabindex="0"
                               aria-controls="{$key}">{$header.label}</a>
                        </xf:foreach>
                    </span>
                </h2>

                <ul class="tabPanes">
                    <xf:foreach loop="$headers" value="$header" key="$key">
                        <li{{ $header.active ? ' class="is-active"' : '' }} role="tabpanel" id="{$key}">
                            <xf:macro name="option_form_rows" arg-group="{$group}"
                                      arg-options="{$options}" arg-minDisplayOrder="{$header.minDisplayOrder}"
                                      arg-maxDisplayOrder="{$header.maxDisplayOrder}" />
                        </li>
                    </xf:foreach>
                </ul>
                <xf:submitrow sticky="true" icon="save" />
            </div>
        </xf:form>
    </xf:if>
</xf:macro>

<xf:macro name="option_form_rows" arg-group="!" arg-options="!" arg-minDisplayOrder="{{ 0 }}" arg-maxDisplayOrder="!">
    <xf:set var="$hundred" value="0" />
    <div class="block-body">
        <xf:foreach loop="$options" value="$option">
            <xf:if is="{$option.Relations.{$group.group_id}.display_order} < {$maxDisplayOrder}
                && {$option.Relations.{$group.group_id}.display_order} >= {$minDisplayOrder}">
                <xf:if is="$group">
                    <xf:set var="$curHundred" value="{{ floor($option.Relations.{$group.group_id}.display_order / 100) }}" />
                    <xf:if is="{{ $curHundred > $hundred }}">
                        <xf:set var="$hundred" value="{$curHundred}" />
                        <hr class="formRowSep" />
                    </xf:if>
                </xf:if>

                <xf:macro template="option_macros" name="option_row"
                          arg-group="{$group}" arg-option="{$option}" />
            </xf:if>
        </xf:foreach>
    </div>
</xf:macro>]]></template>
  <template type="admin" title="tlg_option_template_eventTimeZone" version_id="3000900" version_string="3.0.9"><![CDATA[<xf:selectrow label="{$option.title}" name="{$inputName}"
            hint="{$hintHtml}"
            explain="{$explainHtml}"
            value="{$option.option_value}"
            html="{$listedHtml}">
        <xf:option value="visitor">{{ phrase('(tlg_event_time_zone_using_visitor)') }}</xf:option>
        <xf:option value="system">{{ phrase('(tlg_event_time_zone_using_system)') }}</xf:option>
        <xf:foreach loop="$xf.app.data('XF:TimeZone').getTimeZoneOptions()"
                    key="$_id" value="$_label">
            <xf:option value="{$_id}">{$_label}</xf:option>
        </xf:foreach>
</xf:selectrow>]]></template>
  <template type="admin" title="tlg_tools_rebuild" version_id="2010900" version_string="2.1.9"><![CDATA[<xf:title>{{ phrase('rebuild_caches') }}</xf:title>

<xf:macro template="tools_rebuild"
          name="rebuild_job"
          arg-header="{{ phrase('tlg_categories') }}"
          arg-body=""
          arg-job="Truonglv\Groups\Job\CategoryRebuild" />

<xf:set var="$groupBodyHtml">
    <xf:checkboxrow>
        <xf:option name="options[counter]" selected="1">{{ phrase('tlg_rebuild_group_counters') }}</xf:option>
    </xf:checkboxrow>
</xf:set>

<xf:macro template="tools_rebuild"
          name="rebuild_job"
          arg-header="{{ phrase('tlg_groups') }}"
          arg-body="{$groupBodyHtml}"
          arg-job="Truonglv\Groups\Job\GroupRebuild" />

<xf:set var="$memberBodyHtml">
    <xf:checkboxrow>
        <xf:option name="options[remove_deleted]"
                   label="{{ phrase('tlg_remove_deleted_users') }}"
                   hint="{{ phrase('tlg_remove_deleted_users_explain') }}"
                   selected="1"/>
        <xf:option name="options[remove_banned]"
                   label="{{ phrase('tlg_remove_banned_users') }}"
                   hint="{{ phrase('tlg_remove_banned_users_explain') }}"
                   selected="1"/>
    </xf:checkboxrow>
</xf:set>

<xf:macro template="tools_rebuild"
          name="rebuild_job"
          arg-header="{{ phrase('tlg_rebuild_post_metadata') }}"
          arg-body=""
          arg-job="Truonglv\Groups\Job\PostRebuild" />
<xf:macro template="tools_rebuild"
          name="rebuild_job"
          arg-header="{{ phrase('tlg_rebuild_comment_metadata') }}"
          arg-body=""
          arg-job="Truonglv\Groups\Job\CommentRebuild" />

<xf:macro template="tools_rebuild"
          name="rebuild_job"
          arg-header="{{ phrase('tlg_members') }}"
          arg-body="{$memberBodyHtml}"
          arg-job="Truonglv\Groups\Job\MemberRebuild" />
<xf:macro template="tools_rebuild"
          name="rebuild_job"
          arg-header="{{ phrase('tlg_rebuild_user_caches') }}"
          arg-body=""
          arg-job="Truonglv\Groups\Job\RebuildUserCache" />

<xf:macro template="tools_rebuild"
          name="rebuild_job"
          arg-header="{{ phrase('tlg_events') }}"
          arg-body=""
          arg-job="Truonglv\Groups\Job\EventRebuild" />]]></template>
  <template type="admin" title="tlg_widget_def_options_event" version_id="3010600" version_string="3.1.6"><![CDATA[<hr class="formRowSep" />

<xf:radiorow name="options[type]" value="{$options.type}"
             label="{{ phrase('tlg_widget_event_type') }}">
    <xf:option value="upcoming">{{ phrase('tlg_upcoming_events') }}</xf:option>
    <xf:option value="ongoing">{{ phrase('tlg_ongoing_events') }}</xf:option>
</xf:radiorow>

<xf:checkboxrow label="">
    <xf:option name="options[events_user_groups]">{{ phrase('tlg_only_show_events_from_groups_visitor_joined') }}</xf:option>
</xf:checkboxrow>

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
                 label="{{ phrase('maximum_entries') }}" />

<xf:numberboxrow name="options[cache_ttl]" value="{$options.cache_ttl}"
                 min="0" units="{{ phrase('units_seconds') }}"
                 label="{{ phrase('tlg_cache_ttl') }}" />]]></template>
  <template type="admin" title="tlg_widget_def_options_group" version_id="2010700" version_string="2.1.7"><![CDATA[<hr class="formRowSep" />

<xf:radiorow name="options[order]" value="{$options.order}" label="{{ phrase('order_by') }}">
    <xf:option value="created_date">{{ phrase('tlg_submission_date') }}</xf:option>
    <xf:option value="name">{{ phrase('tlg_alphabetically') }}</xf:option>
    <xf:option value="member_count">{{ phrase('tlg_member_count') }}</xf:option>
    <xf:option value="view_count">{{ phrase('tlg_view_count') }}</xf:option>
    <xf:option value="event_count">{{ phrase('tlg_event_count') }}</xf:option>
    <xf:option value="discussion_count">{{ phrase('tlg_discussion_count') }}</xf:option>
    <xf:option value="last_activity">{{ phrase('tlg_last_activity') }}</xf:option>
</xf:radiorow>

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
                 label="{{ phrase('maximum_entries') }}" />

<xf:radiorow name="options[style]" value="{{ $options.style ?: 'simple' }}"
             label="{{ phrase('display_style') }}">

    <xf:option value="simple"
               label="{{ phrase('simple') }}" />
    <xf:option value="full"
               label="{{ phrase('full') }}">
        <xf:dependent>
            <div>{{ phrase('tlg_items_per_row') }}</div>
            <xf:numberbox name="options[itemsPerRow]" value="{$options.itemsPerRow}" min="1" max="5" />
            <div>{{ phrase('tlg_maximum_members_show_in_card') }}</div>
            <xf:numberbox name="options[max_members]" value="{$options.max_members}" min="0" max="6"/>
        </xf:dependent>
    </xf:option>
</xf:radiorow>

<xf:selectrow name="options[category_ids][]" value="{{ $options.category_ids ?: '' }}" multiple="multiple" size="7"
              label="{{ phrase('tlg_category_limit') }}"
              explain="{{ phrase('tlg_only_include_groups_in_selected_categories') }}">

    <xf:option value="">{{ phrase('tlg_all_categories') }}</xf:option>
    <xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
        <xf:option value="{$treeEntry.record.category_id}">
            {{ repeat('--', $treeEntry.depth) }}{$treeEntry.record.title}
        </xf:option>
    </xf:foreach>
</xf:selectrow>

<xf:checkboxrow label="">
    <xf:option name="options[featured_only]"
               selected="{$options.featured_only}">{{ phrase('tlg_show_only_featured_groups') }}</xf:option>
    <xf:option name="options[use_guest]"
               selected="{$options.use_guest}"
               hint="{{ phrase('tlg_use_guest_permissions_explain') }}">{{ phrase('tlg_use_guest_permissions') }}</xf:option>
    <xf:option name="options[user_groups_only]"
               selected="{$options.user_groups_only}"
               hint="{{ phrase('tlg_show_only_groups_user_joined_explain') }}">{{ phrase('tlg_show_only_groups_user_joined') }}</xf:option>
</xf:checkboxrow>

<xf:numberboxrow name="options[ttl]" value="{$options.ttl}"
                 min="0" units="{{ phrase('units_minutes') }}" max="60"
                 label="{{ phrase('tlg_cache_ttl') }}" />

<xf:textboxrow name="options[custom_template]"
               value="{$options.custom_template}"
               label="{{ phrase('tlg_custom_template') }}"
               explain="{{ phrase('tlg_custom_template_explain') }}" />]]></template>
  <template type="email" title="tlg_group_new_event" version_id="3010200" version_string="3.1.2"><![CDATA[<mail:subject>
    {{ phrase('tlg_new_event_x_was_created_in_the_group_y', {
        'title': $event.event_name,
        'group': $group.name
    }) }}
</mail:subject>

{{ phrase('tlg_new_event_in_group_email_html', {
    'receiver': $receiver.username,
    'creator': username_link_email($event.User, $event.username),
    'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:group-events', $event) }}">{$event.event_name}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
    <div class="message">{{ bb_code_type('emailHtml', $event.FirstComment.message, 'tl_group_comment', $event.FirstComment) }}</div>
</xf:if>

<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
    <tr>
        <td>
            <a href="{{ link('canonical:group-events', $event) }}" class="button">{{ phrase('tlg_view_this_event') }}</a>
        </td>
    </tr>
</table>

{{ phrase('tlg_new_event_in_group_email_html_footer', {
    'group': '<a href="' . link('canonical:groups', $group) . '">' . $group.name . '</a>',
    'board': $xf.options.boardTitle,
    'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'tl_group_event', 'id': $event.event_id}),
    'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
}) }}]]></template>
  <template type="email" title="tlg_group_new_post" version_id="3010400" version_string="3.1.4"><![CDATA[<mail:subject>
    {{ phrase('tlg_new_post_was_created_in_the_group_y', {
        'title': $group.name
    }) }}
</mail:subject>

{{ phrase('tlg_new_post_in_group_email_html', {
    'receiver': $receiver.username,
    'creator': username_link_email($post.User, $post.username),
    'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:group-posts', $post) }}">{$group.name}</a></h2>

<div class="message">{{ bb_code_type('emailHtml', $post.FirstComment.message, 'tl_group_comment', $post.FirstComment) }}</div>

<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
    <tr>
        <td>
            <a href="{{ link('canonical:group-posts', $post) }}" class="button">{{ phrase('tlg_view_this_post') }}</a>
        </td>
    </tr>
</table>

{{ phrase('tlg_new_post_in_group_email_html_footer', {
    'group': '<a href="' . link('canonical:groups', $group) . '">' . $group.name . '</a>',
    'board': $xf.options.boardTitle,
    'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'tl_group_post', 'id': $post.post_id}),
    'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
}) }}]]></template>
  <template type="public" title="alert_user_tlg_group_inactive" version_id="3000100" version_string="3.0.1"><![CDATA[{{ phrase('tlg_the_group_you_managed_x_has_been_deleted_cause_inactive_in_y_days', {
    'name': '<strong>' . $extra.groupName . '</strong>',
    'days': $extra.days
}) }}]]></template>
  <template type="public" title="tlg_alert_item_comment_event_comment" version_id="2010600" version_string="2.1.6"><![CDATA[<xf:if is="$content.Content.user_id == $xf.visitor.user_id">
    {{ phrase('tlg_x_commented_in_your_event_y_in_the_group_z', {
        'name': username_link($user, false, {'defaultname': $alert.username}),
        'event': '<a href="'. link('group-events', $content.Content) .'" class="fauxBlockLink-blockLink">' . $content.Content.event_name . '</a>',
        'title': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
    }) }}
<xf:else />
    {{ phrase('tlg_x_commented_in_event_y_in_the_group_z', {
        'name': username_link($user, false, {'defaultname': $alert.username}),
        'event': '<a href="'. link('group-events', $content.Content) .'" class="fauxBlockLink-blockLink">' . $content.Content.event_name . '</a>',
        'title': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
    }) }}
</xf:if>]]></template>
  <template type="public" title="tlg_alert_item_comment_mention" version_id="2010301" version_string="2.1.3"><![CDATA[{{ phrase('tlg_x_mentioned_you_in_the_comment_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('group-comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_comment_new_post" version_id="2010301" version_string="2.1.3"><![CDATA[{{ phrase('tlg_x_published_a_post_in_the_group_y_may_be_more', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('group-comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_comment_post_comment" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:if is="$content.Content.user_id === $xf.visitor.user_id">
    {{ phrase('tlg_x_commented_on_your_posts_in_the_group_y', {
        'name': username_link($user, false, {'defaultname': $alert.username}),
        'title': '<a href="' . link('group-comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
    }) }}
<xf:else />
    {{ phrase('tlg_x_commented_on_post_following_in_the_group_y', {
        'name': username_link($user, false, {'defaultname': $alert.username}),
        'title': '<a href="' . link('group-comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
    }) }}
</xf:if>]]></template>
  <template type="public" title="tlg_alert_item_comment_reaction" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:if is="$content.isFirstComment()">
    {{ phrase('tlg_x_reacted_to_your_post_in_the_group_y', {
        'name': username_link($user, false, {'defaultname': $alert.username}),
        'reaction': alert_reaction($extra.reaction_id)|preescaped,
        'title': '<a href="' . link('group-comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
    }) }}
<xf:else />
    {{ phrase('tlg_x_reacted_to_your_comment_in_the_group_y', {
        'name': username_link($user, false, {'defaultname': $alert.username}),
        'reaction': alert_reaction($extra.reaction_id)|preescaped,
        'title': '<a href="' . link('group-comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
    }) }}
</xf:if>]]></template>
  <template type="public" title="tlg_alert_item_comment_reply" version_id="2010301" version_string="2.1.3"><![CDATA[{{ phrase('tlg_x_replied_on_comment_following_in_the_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('group-comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_event_created" version_id="2010600" version_string="2.1.6"><![CDATA[{{ phrase('tlg_x_created_an_event_y_in_the_group_z', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'event': '<a href="' . link('group-events', $content) . '" class="fauxBlockLink-blockLink">' . $content.event_name . '</a>',
    'title': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_event_intend_going" version_id="2010600" version_string="2.1.6"><![CDATA[{{ phrase('tlg_x_intended_to_going_your_event_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('group-events', $content) . '" class="fauxBlockLink-blockLink">' . $content.event_name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_event_intend_maybe" version_id="2010600" version_string="2.1.6"><![CDATA[{{ phrase('tlg_x_intended_to_maybe_going_your_event_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('group-events', $content) . '" class="fauxBlockLink-blockLink">' . $content.event_name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_event_reminder" version_id="2020300" version_string="2.2.3"><![CDATA[<xf:if is="$remaining > 0">
    <xf:if is="$remainingUnit == 'hour'">
        {{ phrase('tlg_event_x_in_the_group_y_will_start_in_z_hours', {
            'event': '<a href="' . link('group-events', $content) . '" class="fauxBlockLink-blockLink">' . $content.event_name . '</a>',
            'group': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>',
            'hour': $remaining
        }) }}
    <xf:else />
        {{ phrase('tlg_event_x_in_the_group_y_will_start_in_z_minutes', {
            'event': '<a href="' . link('group-events', $content) . '" class="fauxBlockLink-blockLink">' . $content.event_name . '</a>',
            'group': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>',
            'minute': $remaining
        }) }}
    </xf:if>
<xf:else />
    {{ phrase('tlg_event_x_in_the_group_y_has_been_started', {
        'event': '<a href="' . link('group-events', $content) . '" class="fauxBlockLink-blockLink">' . $content.event_name . '</a>',
        'group': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
    }) }}
</xf:if>]]></template>
  <template type="public" title="tlg_alert_item_group_approved" version_id="3000400" version_string="3.0.4"><![CDATA[{{ phrase('tlg_x_has_been_approved_your_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('groups', $content) . '" class="fauxBlockLink-blockLink">' . $content.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_group_assigned_owner" version_id="2000000" version_string="2.0.0"><![CDATA[{{ phrase('tlg_x_assigned_you_to_be_owner_of_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('groups', $content) . '" class="fauxBlockLink-blockLink">' . $content.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_group_invited" version_id="2000000" version_string="2.0.0"><![CDATA[{{ phrase('tlg_x_invited_you_join_the_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('groups', $content) . '" class="fauxBlockLink-blockLink">' . $content.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_group_merge" version_id="2010301" version_string="2.1.3"><![CDATA[{{ phrase('tlg_x_merged_group_y_into_group_z', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'source': $extra.name,
    'title': '<a href="' . link('groups', $content) . '" class="fauxBlockLink-blockLink">' . $content.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_member_promoted" version_id="2000000" version_string="2.0.0"><![CDATA[{{ phrase('tlg_x_promoted_you_to_y_in_group_z', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'role': $content.MemberRole.getTitle(),
    'title': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_member_promoted_admin" version_id="2000000" version_string="2.0.0"><![CDATA[{{ phrase('tlg_x_assigned_you_to_be_admin_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_member_promoted_moderator" version_id="2000000" version_string="2.0.0"><![CDATA[{{ phrase('tlg_x_assigned_you_to_be_moderator_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_member_request_join" version_id="2000000" version_string="2.0.0"><![CDATA[{{ phrase('tlg_x_sent_request_to_join_the_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('groups/members', $content.Group, {'member_state': 'moderated'}) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_alert_item_member_state_approved" version_id="2000000" version_string="2.0.0"><![CDATA[{{ phrase('tlg_x_approved_your_request_to_join_group_y', {
    'name': username_link($user, false, {'defaultname': $alert.username}),
    'title': '<a href="' . link('groups', $content.Group) . '" class="fauxBlockLink-blockLink">' . $content.Group.name . '</a>'
}) }}]]></template>
  <template type="public" title="tlg_approval_item_group" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:formrow label="{{ phrase('tlg_group') }}">
    {{ phrase('tlg_group_x_published_in_category_y', {
    'groupLink': link('groups', $content),
    'groupName': $content.name,
    'categoryLink': link('group-categories', $content.Category),
    'categoryTitle': $content.Category.title
    }) }}
</xf:formrow>

<xf:formrow label="{{ phrase('tlg_owner') }}">
    <xf:username user="$content.User" defaultname="{$content.owner_username}" rich="true" />
</xf:formrow>

<xf:formrow label="{{ phrase('post_date') }}">
    <xf:date time="$content.created_date" />
</xf:formrow>

<xf:macro template="approval_queue_macros" name="spam_log" arg-spamDetails="{$spamDetails}" />

<xf:formrow label="{{ phrase('description') }}">
    {{ bb_code($content.description, 'tl_group', $content) }}
</xf:formrow>

<xf:macro template="approval_queue_macros" name="action_row"
          arg-unapprovedItem="{$unapprovedItem}"
          arg-handler="{$handler}" />]]></template>
  <template type="public" title="tlg_assistant_form" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{$formTitle}</xf:title>

<xf:form action="{$formAction}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:if is="$formType == 'timePeriod'">
                <xf:macro name="time_period" arg-params="{$params}" />
            </xf:if>
        </div>

        <xf:foreach loop="$hiddenInputs" key="$inputName" value="$inputValue">
            <xf:hiddenval name="{$inputName}">{$inputValue}</xf:hiddenval>
        </xf:foreach>

        <xf:submitrow submit="{$submitTitle}" rowtype="simple" />
    </div>
</xf:form>

<xf:macro name="time_period" arg-params="!">
    <xf:radiorow label="{{ phrase('tlg_time_period') }}" name="expire_type"
                 value="{{ $params.expireDate > 0 ? 1 : 0 }}"
                 explain="{{ phrase('tlg_time_period_explain') }}">
        <xf:option value="0" label="{{ phrase('tlg_no_limitation') }}" />
        <xf:option value="1" label="{{ phrase('tlg_expires_after:') }}">
            <xf:dateinput name="expire_date" value="{{ $params.expireDate ? date($params.expireDate, 'picker') : '' }}" />
        </xf:option>
    </xf:radiorow>
</xf:macro>]]></template>
  <template type="public" title="tlg_bb_code_group" version_id="2000000" version_string="2.0.0"><![CDATA[<div class="groupBbCode--wrapper">
    <xf:css src="tlg_style.less" />
    <xf:macro template="tlg_group_list_macros"
              name="group"
              arg-group="{$group}"
              arg-showMembers="{{ true }}" />
</div>]]></template>
  <template type="public" title="tlg_browse_events" version_id="2020600" version_string="2.2.6"><![CDATA[<xf:title>{{ phrase('tlg_upcoming_events') }}</xf:title>

<xf:css src="tlg_event_style.less"/>

<div class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:foreach loop="$events" value="$event">
                <div class="block-row">
                    <xf:macro template="tlg_group_events" name="event_item"
                              arg-event="{$event}" arg-showGroup="{{ true }}" />
                </div>
            <xf:else />
                <div class="blockMessage">{{ phrase('tlg_there_are_no_events_to_display') }}</div>
            </xf:foreach>
        </div>
    </div>

    <div class="block-outer">
        <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                    link="groups/browse/events" params="{$filters}"
                    wrapperclass="block-outer-main" />
    </div>
</div>]]></template>
  <template type="public" title="tlg_browse_roles" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:title>{{ phrase('tlg_member_roles') }}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<div class="bbWrapper">
    <div class="bbTable">
        <table style="width: 100%">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>&nbsp;</th>
                    <xf:foreach loop="$memberRoles" value="$memberRole">
                        <th>{$memberRole.title}</th>
                    </xf:foreach>
                </tr>
            </thead>
            <tbody>
                <xf:foreach loop="$data" key="$key" value="$roleGroup">
                    <tr data-key="{$key}">
                        <td colspan="{{ $totalRoles + 2 }}">{$roleGroup.title}</td>
                    </tr>
                    <xf:foreach loop="$roleGroup.perms" value="$permDef">
                        <tr>
                            <td>&nbsp;</td>
                            <td>{$permDef.title}</td>
                            <xf:foreach loop="$permDef.perms" value="$allowed">
                                <td style="text-align: center">
                                    <xf:if is="$allowed"><xf:fa icon="fa-check-circle" />
                                    <xf:else />&nbsp;</xf:if>
                                </td>
                            </xf:foreach>
                        </tr>
                    </xf:foreach>
                </xf:foreach>
            </tbody>
        </table>
    </div>
</div>
]]></template>
  <template type="public" title="tlg_browse_user" version_id="3000400" version_string="3.0.4"><![CDATA[<xf:title>
    {{ ($user.user_id == $xf.visitor.user_id)
        ? phrase('tlg_your_groups')
        : phrase('tlg_groups_of_user_x', {'name': $user.username}) }}
</xf:title>

<xf:breadcrumb href="{{ link('canonical:members', $user) }}">{$user.username}</xf:breadcrumb>

<xf:macro template="tlg_group_list_macros"
          name="group_list_block"
          arg-baseUrl="groups/browse/user"
          arg-groups="{$groups}"
          arg-page="{$page}"
          arg-perPage="{$perPage}"
          arg-total="{$total}"
          arg-filters="{$filters}"
          arg-creatorFilter="{$creatorFilter}"
          arg-canInlineMod="{{ false }}"
          arg-showMembers="{{ true }}"
          arg-columnsPerRow="{{ 3 }}"
          arg-filterBarMacroName="tlg_filter_bar_macros::user_group_filter_bar" />
]]></template>
  <template type="public" title="tlg_browse_user_filters" version_id="3000400" version_string="3.0.4"><![CDATA[<xf:form action="{{ link('groups/browse/user/filters') }}">
    <div class="menu-row menu-row--separated menu-row--privacy">
        {{ phrase('tlg_privacy:') }}
        <div class="u-inputSpacer">
            <xf:select name="privacy" value="{$filters.privacy}">
                <xf:option value="">{{ phrase('any') }}</xf:option>
                <xf:option value="public">{{ phrase('tlg_privacy_public') }}</xf:option>
                <xf:option value="closed">{{ phrase('tlg_privacy_closed') }}</xf:option>
                <xf:option value="secret">{{ phrase('tlg_privacy_secret') }}</xf:option>
            </xf:select>
        </div>
    </div>

    <div class="menu-row menu-row--separated menu-row--type">
        {{ phrase('type:') }}
        <xf:select name="type" value="{$filters.type}">
            <xf:option value="">{{ phrase('any') }}</xf:option>
            <xf:option value="admin">{{ phrase('tlg_admin_of_groups') }}</xf:option>
            <xf:if is="$user.user_id == $xf.visitor.user_id">
                <xf:option value="invited">{{ phrase('tlg_invited_groups') }}</xf:option>
            </xf:if>
        </xf:select>
    </div>

    <div class="menu-row menu-row--separated menu-row--sort">
        {{ phrase('sort_by:') }}
        <div class="inputGroup u-inputSpacer">
            <xf:select name="order" value="{{ $filters.order ?: 'last_activity' }}">
                <xf:option value="created_date">{{ phrase('tlg_submission_date') }}</xf:option>
                <xf:option value="name">{{ phrase('tlg_alphabetically') }}</xf:option>
                <xf:option value="member_count">{{ phrase('tlg_member_count') }}</xf:option>
                <xf:option value="view_count">{{ phrase('tlg_view_count') }}</xf:option>
                <xf:option value="event_count">{{ phrase('tlg_event_count') }}</xf:option>
                <xf:option value="discussion_count">{{ phrase('tlg_discussion_count') }}</xf:option>
                <xf:option value="last_activity">{{ phrase('tlg_last_activity') }}</xf:option>
            </xf:select>

            <span class="inputGroup-splitter"></span>

            <xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
                <xf:option value="desc">{{ phrase('descending') }}</xf:option>
                <xf:option value="asc">{{ phrase('ascending') }}</xf:option>
            </xf:select>
        </div>
    </div>

    <div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
    </div>
    <xf:hiddenval name="apply">1</xf:hiddenval>

    <xf:hiddenval name="user_id">{$user.user_id}</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="tlg_category_list_macros" version_id="3000200" version_string="3.0.2"><![CDATA[<xf:macro name="simple_category_list"
          arg-selected="0"
          arg-pathToSelected="{{ [] }}"
          arg-children="!"
          arg-extras="!"
          arg-isActive="{{ false }}"
>
    <ol class="categoryList toggleTarget{{ $isActive ? ' is-active' : '' }}">
        <xf:foreach loop="$children" key="$id" value="$child">
            <xf:macro name="simple_category_list_item"
                      arg-selected="{$selected}"
                      arg-pathToSelected="{$pathToSelected}"
                      arg-category="{$child.record}"
                      arg-extras="{$extras.{$id}}"
                      arg-children="{$child}"
                      arg-childExtras="{$extras}"
            />
        </xf:foreach>
    </ol>
</xf:macro>

<xf:macro name="simple_category_list_item"
          arg-selected="!"
          arg-pathToSelected="{{ [] }}"
          arg-category="!"
          arg-extras="!"
          arg-children="!"
          arg-childExtras="!"
>
    <xf:set var="$isSelected" value="{{ $category.category_id == $selected }}" />
    <xf:set var="$hasPathToSelected" value="{$pathToSelected.{$category.category_id}}" />
    <xf:set var="$isActive" value="{{ $isSelected OR $hasPathToSelected AND $children is not empty }}" />

    <li class="categoryList-item">
        <div class="categoryList-itemRow">
            <xf:if is="$children is not empty">
                <a class="categoryList-toggler{{ $isActive ? ' is-active' : '' }}"
                   data-xf-click="toggle" data-target="< :up :next"
                   role="button" tabindex="0" aria-label="{{ phrase('toggle_expanded') }}"
                ></a>
            <xf:else />
                <span class="categoryList-togglerSpacer"></span>
            </xf:if>
            <a href="{{ link('group-categories', $category) }}" class="categoryList-link{{ $isSelected ? ' is-selected' : '' }}">
                {$category.title}
            </a>
            <span class="categoryList-label">
				<span class="label label--subtle label--smallest">{$extras.group_count|number_short}</span>
			</span>
        </div>
        <xf:if is="$children is not empty">
            <xf:macro name="simple_category_list"
                      arg-selected="{$selected}"
                      arg-pathToSelected="{$pathToSelected}"
                      arg-children="{$children}"
                      arg-extras="{$childExtras}"
                      arg-isActive="{$isActive}"
            />
        </xf:if>
    </li>
</xf:macro>

<xf:macro name="simple_list_block" arg-categoryTree="!" arg-categoryExtras="!" arg-selected="{{ 0 }}">
    <div class="block">
        <div class="block-container">
            <h3 class="block-header">{{ phrase('categories') }}</h3>
            <div class="block-body">
                <xf:if is="$categoryTree.count()">
                    <xf:macro name="simple_category_list"
                              arg-children="{$categoryTree}"
                              arg-extras="{$categoryExtras}"
                              arg-isActive="{{ true }}"
                              arg-selected="{$selected}"
                              arg-pathToSelected="{{ $selected ? $categoryTree.getPathTo($selected) : [] }}" />
                <xf:else />
                    <div class="block-row">{{ phrase('n_a') }}</div>
                </xf:if>
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="category"
          arg-category="!"
          arg-extras="!"
          arg-children="!"
          arg-childExtras="!"
          arg-chooseName=""
          arg-bonusInfo="">

    <div class="node node--depth2 node--resourceCategory node--resourceCategory{$category.category_id}">
        <div class="node-body">
            <div class="node-main js-nodeMain">
                <xf:if is="$chooseName">
                    <xf:checkbox standalone="true">
                        <xf:option labelclass="u-pullRight" class="js-chooseItem" name="{$chooseName}[]" value="{$category.resource_category_id}" />
                    </xf:checkbox>
                </xf:if>

                <xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />
                <h3 class="node-title">
                    <a href="{{ link('group-categories', $category) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$category.title}</a>
                </h3>
                <xf:if is="$descriptionDisplay != 'none' && $category.description">
                    <div class="node-description {{ $descriptionDisplay == 'tooltip' ? 'node-description--tooltip js-nodeDescTooltip' : '' }}">{$category.description|raw}</div>
                </xf:if>

                <div class="node-meta">
                    <div class="node-statsMeta">
                        <dl class="pairs pairs--inline">
                            <dt>{{ phrase('tlg_groups') }}</dt>
                            <dd>{$extras.group_count|number}</dd>
                        </dl>
                    </div>
                </div>

                <xf:if is="$bonusInfo is not empty">
                    <div class="node-bonus">{$bonusInfo}</div>
                </xf:if>
            </div>

            <div class="node-stats node-stats--single">
                <dl class="pairs pairs--rows">
                    <dt>{{ phrase('tlg_groups') }}</dt>
                    <dd>{$extras.group_count|number}</dd>
                </dl>
            </div>
        </div>
    </div>

</xf:macro>]]></template>
  <template type="public" title="tlg_category_view" version_id="2010700" version_string="2.1.7"><![CDATA[<xf:title>{$category.title}</xf:title>
<xf:description>{$category.description}</xf:description>

<xf:breadcrumb source="$category.getBreadcrumbs()" />

<xf:macro template="metadata_macros" name="canonical_url"
          arg-canonicalUrl="{{ link('canonical:group-categories', $category, {'page': $page}) }}" />

<xf:macro template="tlg_group_page_options" name="page_options" arg-category="{$category}" />

<xf:pageaction if="$category.canAddGroup()">
    <xf:button href="{{ link('group-categories/add', $category) }}"
               class="button--cta" icon="write">{{ phrase('tlg_add_new_group...') }}</xf:button>
</xf:pageaction>

<xf:macro template="tlg_group_list_macros"
          name="group_list_block"
          arg-baseUrl="group-categories"
          arg-groups="{$groups}"
          arg-page="{$page}"
          arg-perPage="{$perPage}"
          arg-total="{$total}"
          arg-filters="{$filters}"
          arg-category="{$category}"
          arg-linkData="{$category}"
          arg-creatorFilter="{$creatorFilter}"
          arg-canInlineMod="{$canInlineMod}"
          arg-showMembers="{{ true }}"
          arg-columnsPerRow="{{ 2 }}" />

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
    <xf:macro template="tlg_category_list_macros" name="simple_list_block"
              arg-selected="{$category.category_id}"
              arg-categoryTree="{$categoryTree}"
              arg-categoryExtras="{$categoryExtras}" />
</xf:sidenav>

<xf:widgetpos id="tlg_category_view" position="sidenav" context-category="{$category}" />]]></template>
  <template type="public" title="tlg_comment_edit" version_id="3010300" version_string="3.1.3"><![CDATA[<xf:title>{{ phrase('tlg_edit_comment') }}</xf:title>

<xf:breadcrumb source="$group.getBreadcrumbs()" />

<xf:macro name="edit_form"
          arg-formUrl="{{ link('group-comments/edit', $comment) }}"
          arg-attachmentData="{$attachmentData}"
          arg-message="{$comment.message}"
          arg-quickEdit="{$quickEdit}" />

<xf:macro name="edit_form" arg-formUrl="!" arg-message="!" arg-attachmentData="!" arg-quickEdit="{{ false }}">
    <xf:form action="{$formUrl}" ajax="true" class="block" data-xf-init="attachment-manager">
        <div class="block-container">
            <div class="block-body">
                <span class="u-anchorTarget js-editContainer"></span>
                <xf:editorrow name="message" value="{$message}"
                              attachments="{$attachmentData.attachments}"
                              rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}"
                              data-min-height="100"
                              label="{{ phrase('message') }}" />

                <xf:if is="$attachmentData">
                    <xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
                        <xf:macro template="helper_attach_upload"
                                  name="upload_block"
                                  arg-attachmentData="{$attachmentData}" />
                    </xf:formrow>
                </xf:if>
            </div>

            <xf:submitrow icon="save" sticky="true" rowtype="{{ $quickEdit ? 'simple' : '' }}">
                <xf:html>
                    <xf:if is="$quickEdit">
                        <xf:button class="js-cancelButton">{{ phrase('button.cancel') }}</xf:button>
                    </xf:if>
                </xf:html>
            </xf:submitrow>
        </div>
    </xf:form>
</xf:macro>]]></template>
  <template type="public" title="tlg_comment_item" version_id="3000300" version_string="3.0.3"><![CDATA[<xf:if is="$expandedLayout">
    <xf:macro template="tlg_comment_macros"
              name="comment_root"
              arg-comment="{$comment}"
              arg-content="{$content}" />
<xf:else />
    <xf:macro template="tlg_comment_macros"
              name="comment"
              arg-comment="{$comment}"
              arg-content="{$content}" />
</xf:if>]]></template>
  <template type="public" title="tlg_comment_list" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:foreach loop="$comments" value="$commentItem">
    <xf:macro template="tlg_comment_macros"
              name="comment"
              arg-comment="{$commentItem}"
              arg-content="{$commentItem.Content}" />
</xf:foreach>]]></template>
  <template type="public" title="tlg_comment_macros" version_id="3020700" version_string="3.2.7"><![CDATA[<xf:macro name="comment_list" arg-comments="!" arg-content="!" arg-afterHtml="{{ null }}">
    <div class="block block--messages">
        <div class="block-container lbContainer"
             data-xf-init="lightbox{{ $xf.options.selectQuotable ? ' select-to-quote' : '' }}"
             data-message-selector=".js-post"
             data-lb-id="tlg-content-{$content.getEntityId()}"
             data-lb-universal="{$xf.options.lightBoxUniversal}">

            <div class="block-body js-replyNewMessageContainer">
                <xf:foreach loop="$comments" value="$comment">
                    <xf:macro name="comment_root"
                              arg-comment="{$comment}"
                              arg-content="{$content}"/>
                </xf:foreach>
            </div>
        </div>

        <xf:if contentcheck="true">
            <div class="block-outer block-outer--after">
                <xf:contentcheck>
                    <xf:if is="$afterHtml is not empty">{$afterHtml|raw}</xf:if>
                    <xf:showignored wrapperclass="block-outer-opposite" />
                </xf:contentcheck>
            </div>
        </xf:if>
    </div>
</xf:macro>

<xf:macro name="comment_form_block" arg-content="!" arg-formAction="!"
          arg-attachmentData="{{ null }}"
          arg-comments="{{ null }}">
    <xf:if is="$content.canComment()">
        <xf:form action="{$formAction}" ajax="true" class="block js-quickReply"
                 data-xf-init="attachment-manager quick-reply{{ $xf.visitor.isShownCaptcha() ? ' guest-captcha' : '' }}"
                 data-message-container=".js-replyNewMessageContainer">

            <xf:js src="xf/message.js" min="1" />
            <xf:set var="$lastPost" value="{$comments|last}" />

            <div class="block-container">
                <div class="block-body">
                    <xf:macro template="quick_reply_macros" name="body"
                              arg-message="{{ null }}"
                              arg-attachmentData="{$attachmentData}"
                              arg-forceHash="{{ null }}"
                              arg-messageSelector=".js-post"
                              arg-simple="{{ true }}"
                              arg-submitText="{{ phrase('post_comment') }}"
                              arg-lastDate="{$comment.comment_date}"
                              arg-showPreviewButton="{{ false }}"
                              arg-lastKnownDate="{{ null }}" />
                </div>
            </div>
        </xf:form>
    </xf:if>
</xf:macro>

<xf:macro name="comment_root" arg-comment="!" arg-content="!" arg-showUser="{{ true }}">
    <xf:css src="message.less" />
    <xf:css src="tlg_comment_row.less"/>

    <xf:js src="xf/comment.js" min="1" />
    <xf:js src="Truonglv/Groups/group.js" addon="Truonglv/Groups" min="1" />
    <article class="message js-comment message--simple js-inlineModContainer{{ $comment.isIgnored() ? ' is-ignored' : '' }}"
             id="js-comment-{$comment.comment_id}"
             data-author="{{ $comment.User.username ?: $comment.username }}"
             data-content="post-{$comment.comment_id}">
        <span class="u-anchorTarget" id="comment-{$comment.comment_id}"></span>
        <div class="message-inner">
            <xf:extension name="user">
                <xf:if is="$showUser">
                    <div class="message-cell message-cell--user">
                        <xf:macro template="message_macros"
                                  name="user_info_simple"
                                  arg-user="{$comment.User}"
                                  arg-fallbackName="{$comment.username}" />
                    </div>
                </xf:if>
            </xf:extension>

            <div class="message-cell message-cell--main">
                <div class="js-comment message-main js-quickEditTarget">
                    <div class="message-content js-messageContent">
                        <xf:if is="$showUser">
                            <xf:extension name="attribution">
                                <xf:macro name="comment_root_attribution" arg-comment="{$comment}" />
                            </xf:extension>
                        </xf:if>

                        <xf:extension name="notices">
                            <xf:macro name="comment_notices" arg-comment="{$comment}" />
                        </xf:extension>

                        <xf:macro name="comment_user_content" arg-comment="{$comment}" />
                    </div>

                    <xf:macro name="comment_root_footer" arg-comment="{$comment}" arg-showLoader="{$showLoader}" />
                </div>
            </div>
        </div>
    </article>
</xf:macro>

<xf:macro name="comment_root_attribution" arg-comment="!">
    <header class="message-attribution message-attribution--plain">
        <ul class="listInline listInline--bullet">
            <li class="message-attribution-user">
                <xf:avatar user="$comment.User" size="xxs" />
                <h4 class="attribution"><xf:username user="$comment.User" rich="true" defaultname="{$comment.username}" /></h4>
            </li>
        </ul>
    </header>
</xf:macro>

<xf:macro name="comment_root_footer" arg-comment="!" arg-showLoader="{{ false }}">
    <footer class="message-footer">
        <div class="reactionsBar js-reactionsList{$comment.comment_id}{{ $comment.reactions ? ' is-active' : '' }}">
            <xf:reactions content="{$comment}" link="group-comments/reactions" />
        </div>

        <xf:set var="$dateHtml"><a href="{{ link('group-comments', $comment) }}"
                                   class="u-concealed" rel="nofollow"><small><xf:fa icon="fa-clock" /> <xf:date time="$comment.comment_date" /></small></a></xf:set>
        <xf:macro template="tlg_comment_macros"
                  name="comment_controls"
                  arg-comment="{$comment}"
                  arg-showDate="{{ true }}"
                  arg-dateHtml="{$dateHtml}"
                  arg-showReply="{{ false }}"
                  arg-editorTarget="{{ $comment.isFirstComment() ? '' : ('#js-comment-' . $comment.comment_id . '.js-quickEditTarget') }}"
        />

        <section class="message-responses js-messageResponses">
            <xf:if is="$showLoader && $comment.hasMoreComments()">
                <xf:set var="$firstComment" value="{{ $comment.LatestComments|first }}" />
                <a href="{{ link('group-comments/loader', $firstComment) }}"
                   data-xf-init="tlg-comment-loader"
                   data-container="< .js-messageResponses | .js-replyNewMessageContainer"
                   data-message-selector=".js-comment"
                   rel="nofollow"
                   class="commentLoader">{{ phrase('tlg_view_previous_comments...') }}</a>
            </xf:if>
            <div class="js-replyNewMessageContainer"><xf:trim>
                <xf:foreach loop="$comment.LatestReplies" value="$comment">
                    <xf:macro name="comment"
                              arg-comment="{$comment}"
                              arg-content="{$content}"
                    />
                </xf:foreach>
            </xf:trim></div>

            <xf:if is="$comment.canReply()">
                <xf:macro name="comment_form"
                          arg-target="js-commentsTarget-{$comment.comment_id}"
                          arg-attachmentData="{$comment.getAttachmentEditorData()}"
                          arg-formUrl="{{ link('group-comments/reply', $comment) }}" />
            </xf:if>
        </section>
    </footer>
</xf:macro>

<xf:macro name="comment_notices" arg-comment="!">
    <xf:if is="$comment.message_state == 'deleted'">
        <div class="messageNotice messageNotice--deleted">
            <xf:macro template="deletion_macros" name="notice" arg-log="{$post.DeletionLog}" />
        </div>
    <xf:elseif is="$comment.message_state == 'moderated'" />
        <div class="messageNotice messageNotice--moderated">
            {{ phrase('this_message_is_awaiting_moderator_approval_and_is_invisible_to_normal') }}
        </div>
    </xf:if>
    <xf:if is="$comment.isIgnored()">
        <div class="messageNotice messageNotice--ignored">
            {{ phrase('you_are_ignoring_content_by_this_member') }}
            <xf:showignored />
        </div>
    </xf:if>
</xf:macro>

<xf:macro name="comment_user_content" arg-comment="!" arg-expanded="{{ false }}">
    <div class="message-userContent lbContainer js-lbContainer{{ $comment.isIgnored() ? ' is-ignored' : '' }}"
         data-lb-id="comment-{$comment.comment_id}"
         data-lb-caption-desc="{{ $comment.User ? $comment.User.username : $comment.username }} &middot; {{ date_time($comment.comment_date) }}">
        <article class="message-body">
            {{ bb_code($comment.message, 'tl_group_comment', $comment) }}
        </article>
        <xf:if is="$comment.attach_count">
            <xf:macro template="message_macros" name="attachments"
                      arg-attachments="{$comment.Attachments}"
                      arg-message="{$comment}"
                      arg-canView="{{ true }}" />
        </xf:if>
    </div>
</xf:macro>

<xf:macro name="comment" arg-comment="!" arg-content="!">
    <xf:css src="tlg_comment_row.less"/>
    <xf:js src="Truonglv/Groups/group.js" addon="Truonglv/Groups" min="1" />

    <xf:extension name="extra_classes" value="commentItem" />
    <div class="{{ extension_value('extra_classes') }} js-comment comment-level--{$comment.comment_level}{{ $comment.isIgnored() ? ' is-ignored' : '' }}"
         data-author="{$comment.User.username}"
         data-content="comment-{$comment.comment_id}"
         data-row-id="{$comment.comment_id}"
         id="js-comment-{$comment.comment_id}">
        <div class="comment">
            <div class="comment-inner">
                <xf:extension name="user">
                    <span class="comment-avatar">
                        <xf:avatar user="$comment.User" size="xs" defaultname="{$comment.username}" />
                    </span>
                </xf:extension>
                <div class="comment-main">
                    <span class="u-anchorTarget" id="comment-{$comment.comment_id}"></span>
                    <div class="js-quickEditTarget{$comment.comment_id}">
                        <div class="comment-content">
                            <xf:macro name="comment_notices" arg-comment="{$comment}" />

                            <div class="comment-contentWrapper">
                                <xf:username user="$comment.User" rich="true" defaultname="{$comment.username}" class="comment-user" />

                                <xf:macro name="comment_user_content" arg-comment="{$comment}" />
                            </div>
                        </div>

                        <xf:macro name="comment_footer" arg-comment="{$comment}" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="comment_footer" arg-comment="!">
    <footer class="comment-footer comment-footer{$comment.comment_id}">
        <xf:macro name="comment_controls"
                  arg-comment="{$comment}"
                  arg-editorTarget="#js-comment-{$comment.comment_id} .js-quickEditTarget{$comment.comment_id}"
        />
        <div class="reactionsBar js-reactionsList{$comment.comment_id}{{ $comment.reactions ? ' is-active' : '' }}"><xf:trim>
            <xf:reactions content="{$comment}" link="group-comments/reactions" />
        </xf:trim></div>
        <xf:if is="$comment.hasMoreReplies()">
            <xf:set var="$firstReply" value="{{ $comment.LatestReplies|first }}" />
            <a href="{{ link('group-comments/loader', $firstReply) }}"
               data-xf-init="tlg-comment-loader"
               data-container="< .comment-footer{$comment.comment_id} | .js-comment{$comment.comment_level}--replies"
               data-message-selector=".js-comment"
               rel="nofollow"
               class="commentLoader">{{ phrase('tlg_view_previous_replies...') }}</a>
        </xf:if>
        <div class="js-comment{$comment.comment_level}--replies"><xf:trim>
            <xf:foreach loop="$comment.LatestReplies" value="$commentReply">
                <xf:macro name="comment"
                          arg-comment="{$commentReply}"
                          arg-content="{$content}" />
            </xf:foreach>
        </xf:trim></div>

        <xf:if is="$comment.canReply() && $comment.comment_level < 2">
            <xf:macro name="comment_form"
                      arg-formUrl="{{ link('group-comments/reply', $comment) }}"
                      arg-comment="{$comment}"
                      arg-target="js-responseForm{$comment.comment_id}"
                      arg-attachmentData="{$comment.getAttachmentEditorData()}"
                      arg-deferredEditor="{{ false }}"
                      arg-messageContainer="< .comment-footer{$comment.comment_id} | .js-comment{$comment.comment_level}--replies"/>
        </xf:if>
    </footer>
</xf:macro>

<xf:macro name="comment_form" arg-target="{{ null }}"
          arg-formUrl="!"
          arg-attachmentData="{{ null }}"
          arg-deferredEditor="{{ true }}"
          arg-messageContainer="< .js-messageResponses | .js-replyNewMessageContainer">
    <xf:js src="xf/message.js" min="1" />
    <xf:css src="tlg_comment_row.less" />

    <div class="commentItem message-responseForm{{ $target ? (' ' . $target) : ''}}">
        <xf:form action="{$formUrl}" ajax="true" class="comment-form"
                 data-xf-init="quick-reply{{ $attachmentData ? ' attachment-manager' : '' }}" data-message-container="{$messageContainer}">
            <div class="comment-inner">
                <span class="comment-avatar">
                    <xf:avatar user="{$xf.visitor}" size="xs" />
                </span>
                <div class="comment-main">
                    <div class="editorPlaceholder" data-xf-click="{{ $deferredEditor ? 'editor-placeholder' : '' }}">
                        <div class="editorPlaceholder-editor{{ $deferredEditor ? ' is-hidden' : '' }}">
                            <xf:macro template="quick_reply_macros" name="editor"
                                      arg-attachmentData="{$attachmentData}"
                                      arg-minHeight="40"
                                      arg-placeholder="{{ phrase('write_comment...') }}"
                                      arg-submitText="{{ phrase('post_comment') }}"
                                      arg-deferred="{$deferredEditor}"
                                      arg-simpleSubmit="{{ true }}"
                            />
                        </div>
                        <xf:if is="$deferredEditor">
                            <div class="editorPlaceholder-placeholder">
                                <div class="input"><span class="u-muted"> {{ phrase('write_comment...') }}</span></div>
                            </div>
                        </xf:if>
                    </div>
                </div>
            </div>
        </xf:form>
    </div>
</xf:macro>

<xf:macro name="comment_controls" arg-comment="!"
          arg-showDate="{{ true }}" arg-dateHtml="{{ null }}"
          arg-showReply="{{ true }}" arg-editorTarget="!" arg-extraControls="{{ null }}">

        <div class="comment-actionBar actionBar">
            <xf:if contentcheck="true">
                <div class="actionBar-set actionBar-set--internal">
                    <xf:contentcheck>
                        <xf:if is="{$showDate}">
                            <xf:if is="$dateHtml is not empty">{$dateHtml}<xf:else />
                                <span class="actionBar-action"><xf:date time="{$comment.comment_date}" /></span></xf:if>
                        </xf:if>

                        <xf:set var="$hasActionBarMenu" value="{{ false }}" />
                        <xf:if is="$comment.canEdit()">
                            <xf:js src="xf/message.js" min="1" />
                            <a href="{{ link('group-comments/edit', $comment) }}"
                               class="actionBar-action actionBar-action--edit actionBar-action--menuItem"
                               data-xf-click="{{ $editorTarget ? 'quick-edit' : '' }}"
                               data-editor-target="{$editorTarget}"
                               data-menu-closer="true">{{ phrase('edit') }}</a>
                            <xf:set var="$hasActionBarMenu" value="{{ true }}" />
                        </xf:if>
                        <xf:if is="$comment.canDelete()">
                            <a href="{{ link('group-comments/delete', $comment) }}"
                               class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
                               data-xf-click="overlay">{{ phrase('delete') }}</a>
                            <xf:set var="$hasActionBarMenu" value="{{ true }}" />
                        </xf:if>

                        <xf:if is="$comment.canReport()">
                            <a href="{{ link('group-comments/report', $comment) }}"
                               class="actionBar-action actionBar-action--report"
                               data-xf-click="overlay">{{ phrase('report') }}</a>
                        </xf:if>

                        <xf:if is="$extraControls is not empty">
                            {{ $extraControls|raw }}
                            <xf:set var="$hasActionBarMenu" value="{{ true }}" />
                        </xf:if>

                        <xf:if is="$hasActionBarMenu">
                            <a class="actionBar-action actionBar-action--menuTrigger"
                               data-xf-click="menu"
                               title="{{ phrase('more_options')|for_attr }}"
                               role="button" tabindex="0" aria-expanded="false"
                               aria-haspopup="true">&#8226;&#8226;&#8226;</a>
                            <div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
                                <div class="menu-content">
                                    <h4 class="menu-header">{{ phrase('more_options') }}</h4>
                                    <div class="js-menuBuilderTarget"></div>
                                </div>
                            </div>
                        </xf:if>
                    </xf:contentcheck>
                </div>
            </xf:if>

            <xf:if contentcheck="true">
                <div class="actionBar-set actionBar-set--external">
                    <xf:contentcheck>
                        <xf:if is="$comment.canReact()">
                            <xf:react content="{$comment}" link="group-comments/react"
                                      list="< .js-comment | .js-reactionsList{$comment.comment_id}" />
                        </xf:if>
                        <xf:if is="$showReply && $comment.canReply()">
                            <xf:set var="$replyRefId">{{ ($comment.comment_level > 1) ? $comment.parent_id : $comment.comment_id }}</xf:set>
                            <a data-xf-click="tlg-reply"
                               data-target="< .comment-footer{$replyRefId} | .js-responseForm{$replyRefId}"
                               data-author="{{ $comment.User ? $comment.User.username : $comment.username }}"
                               data-level="{$comment.comment_level}"
                               class="actionBar-action actionBar-action--reply">{{ phrase('reply') }}</a>
                        </xf:if>
                    </xf:contentcheck>
                </div>
            </xf:if>
    </div>
</xf:macro>]]></template>
  <template type="public" title="tlg_comment_row.less" version_id="3020600" version_string="3.2.6"><![CDATA[@postMaxHeight: 300px;

.comment-level--1 {
  .message-responseForm {
    display: none;
    &.is-active {
      display: block;
    }
  }
}
.commentLoader {
  padding: 5px 0;
  display: inline-block;
}

.comment-actionBar {
  .actionBar-action {
    font-size: @xf-fontSizeSmall;
    .fa {
      margin-right: 3px;
    }
  }
}

.commentItem {
  &.message-responseForm {
    margin-top: @xf-paddingLarge;
  }
  .comment-avatar {
    width: 32px;
  }

  .comment-form {
    .comment-input {
      margin: 0 @xf-paddingLarge;
    }
    .formRow-explain {
      font-size: @xf-fontSizeSmaller;
    }

    .button--icon {
      min-width: 40px;
      align-self: flex-start;
    }
  }
}]]></template>
  <template type="public" title="tlg_css_helper.less" version_id="2000400" version_string="2.0.4"><![CDATA[.m-groupFlexCenter() {
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.flex-row {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
}

// helper display flex.
.h-dFlex {
  .groups-displayFlex();
}

.h-dFlex--wrap {
  flex-wrap: wrap;
}

.groups-displayFlex() {
  display: flex;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  flex-direction: row;
  flex-wrap: nowrap;
  flex-shrink: 1;
}

// loaders
/**
 * Lines
 */
@-webkit-keyframes line-scale {
  0% {
    -webkit-transform: scaley(1);
    transform: scaley(1); }
  50% {
    -webkit-transform: scaley(0.4);
    transform: scaley(0.4); }
  100% {
    -webkit-transform: scaley(1);
    transform: scaley(1); } }
@keyframes line-scale {
  0% {
    -webkit-transform: scaley(1);
    transform: scaley(1); }
  50% {
    -webkit-transform: scaley(0.4);
    transform: scaley(0.4); }
  100% {
    -webkit-transform: scaley(1);
    transform: scaley(1); } }

.loader--line-scale {
  > div {
    background-color: #fff;
    width: 4px;
    height: 35px;
    border-radius: 2px;
    margin: 2px;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
    display: inline-block;

    &:nth-child(1) {
      -webkit-animation: line-scale 1s -0.4s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08);
      animation: line-scale 1s -0.4s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08);
    }

    &:nth-child(2) {
      -webkit-animation: line-scale 1s -0.3s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08);
      animation: line-scale 1s -0.3s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08);
    }

    &:nth-child(3) {
      -webkit-animation: line-scale 1s -0.2s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08);
      animation: line-scale 1s -0.2s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08); }

    &:nth-child(4) {
      -webkit-animation: line-scale 1s -0.1s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08);
      animation: line-scale 1s -0.1s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08); }

    &:nth-child(5) {
      -webkit-animation: line-scale 1s 0s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08);
      animation: line-scale 1s 0s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08); }
  }
}]]></template>
  <template type="public" title="tlg_event_add" version_id="3020900" version_string="3.2.9"><![CDATA[<xf:title>{{ $event.exists() ? phrase('tlg_edit_event') : phrase('tlg_add_event') }}</xf:title>

<xf:if is="$showWrapper">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">events</xf:set>
    </xf:wrap>
</xf:if>

<xf:js src="Truonglv/Groups/event.js" addon="Truonglv/Groups" min="1" />

<xf:set var="$googleMapKey"><xf:callback class="Truonglv\Groups\App"
                                         method="getOption">googleMapKey</xf:callback></xf:set>

<xf:if is="$googleMapKey is not empty">
    <xf:js>
        <script async defer
                src="https://maps.googleapis.com/maps/api/js?key={$googleMapKey}&libraries=places">
        </script>
    </xf:js>
</xf:if>

<xf:form action="{{ $event.event_id > 0 ? link('group-events/edit', $event) : link('group-events/add', null, {'group_id': $group.group_id}) }}"
         class="block" ajax="true" data-xf-init="attachment-manager">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="event_name" value="{$event.event_name}"
                           placeholder="{{ phrase('tlg_event_name') }}"
                           rowtype="fullWidth noLabel"
                           class="input--title"
                           autofocus="autofocus"
                           maxlength="{{ max_length($event, 'event_name') }}" />

            <xf:editorrow name="description" label="{{ phrase('description') }}"
                          attachments="{$attachmentData.attachments}"
                          rowtype="fullWidth noLabel mergePrev"
                          value="{{ $event.exists() ? $event.FirstComment.message : null }}" />

            <xf:if is="$attachmentData">
                <xf:formrow>
                    <xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
                </xf:formrow>
            </xf:if>

            <xf:if is="$canEditTags">
                <xf:macro template="tag_macros" name="edit_rows" arg-uneditableTags="{{ $uneditableTags ?: null }}"
                          arg-editableTags="{{ $editableTags ?: null }}" />
            </xf:if>

            <hr class="formRowSep" />

            <xf:macro name="date_input"
                      arg-label="{{ phrase('tlg_begin_date') }}"
                      arg-date="{$event.getBeginDateOutput('edit')}"
                      arg-name="begin_date" />

            <xf:macro name="date_input"
                      arg-label="{{ phrase('tlg_end_date') }}"
                      arg-date="{{ $event.getEndDateOutput('edit') }}"
                      arg-name="end_date" />

            <xf:if is="$canEditTimeZone">
                <xf:selectrow name="timezone" value="{{ $event.timezone ?: $xf.visitor.timezone }}"
                              label="{{ phrase('time_zone') }}">
                    <xf:options source="{$xf.app.data('XF:TimeZone').getTimeZoneOptions()}" />
                </xf:selectrow>
            </xf:if>

            <xf:radiorow name="location_type" value="{$event.location_type}" label="{{ phrase('tlg_location_type') }}">
                <xf:option value="">{{ phrase('none') }}</xf:option>
                <xf:option value="virtual" label="{{ phrase('tlg_location_type_virtual') }}">
                    <xf:dependent>
                        <xf:textbox name="virtual_address" value="{$event.virtual_address}"
                                    maxlength="{{ max_length($event, 'virtual_address') }}" />
                    </xf:dependent>
                </xf:option>

                <xf:option value="real" label="{{ phrase('tlg_location_type_real') }}">
                    <xf:dependent>
                        <xf:textbox name="address" value="{$event.address}"
                           id="tl_groups_ac_field"
                           label="{{ phrase('tlg_address') }}"
                           maxlength="{{ max_length($event, 'address') }}" />
                        <xf:if is="$googleMapKey is not empty">
                            <div data-error=""
                                 data-xf-init="tlg-event-map"
                                 data-zoom="17" data-place="{$event.address}"
                                 data-acfield="#tl_groups_ac_field">

                                <div class="map" style="width: 100%;height:350px"></div>
                            </div>
                        </xf:if>
                    </xf:dependent>
                </xf:option>
            </xf:radiorow>

            <xf:numberboxrow name="max_attendees" value="{$event.max_attendees}"
                             label="{{ phrase('tlg_event_maximum_attendees') }}"
                             explain="{{ phrase('tlg_event_maximum_attendees_explain') }}" min="0" />
        </div>

        <xf:hiddenval name="latitude">{$event.latitude}</xf:hiddenval>
        <xf:hiddenval name="longitude">{$event.longitude}</xf:hiddenval>

        <xf:submitrow icon="save" sticky="true" />
    </div>
</xf:form>

<xf:macro name="date_input" arg-label="!" arg-name="!" arg-date="!">
    <xf:css src="tlg_event_style.less"/>

    <xf:formrow label="{$label}" rowtype="input">
        <div class="event-input-group">
            <xf:dateinput value="{$date.date}" name="{$name}[date]"
                          class="flex--grow date-input--field" />
            <xf:callback class="Truonglv\Groups\Callback"
                         method="renderHourSelect" params="{'date':$date}">{$name}[hour]</xf:callback>
        </div>
    </xf:formrow>
</xf:macro>]]></template>
  <template type="public" title="tlg_event_cancel" version_id="3000900" version_string="3.0.9"><![CDATA[<xf:title>{{ phrase('tlg_cancel_event') }}</xf:title>

<xf:if is="$enableWrapper">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">events</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('group-events/cancel', $event) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">
                <p>{{ phrase('tlg_sure_you_want_to_cancel_the_following_event') }}</p>
                <a href="{{ link('group-events', $event) }}">{$event.event_name}</a>
            </xf:inforow>
        </div>

        <xf:submitrow icon="save" rowtype="simple" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_event_comment" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('post_comment') }}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$selected">events</xf:set>
</xf:wrap>

<xf:form action="{{ link('group-events/add-comment', $event) }}" class="block" ajax="true" data-xf-init="attachment-manager">
    <div class="block-container">
        <div class="block-body">
            <xf:editorrow name="message"
                          value="{$defaultMessage}"
                          attachments="{{ $attachmentData ? $attachmentData.attachments : [] }}"
                          rowtype="fullWidth noLabel"
                          placeholder="{{ phrase('reply_placeholder') }}"
                          label="{{ phrase('message') }}" />

            <xf:formrow>
                <xf:if is="$attachmentData">
                    <xf:macro template="helper_attach_upload" name="upload_block"
                              arg-attachmentData="{$attachmentData}"
                              arg-forceHash="{$thread.draft_reply.attachment_hash}" />
                </xf:if>
            </xf:formrow>
        </div>

        <xf:submitrow icon="reply" submit="{{ phrase('post_comment') }}" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_event_intend" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_event_intention') }}</xf:title>

<xf:if is="!$quickIntend">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">events</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('group-events/intend', $event) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:radiorow name="intend" value="{$guest.intend}" label="{{ phrase('tlg_event_intend_to...') }}">
                <xf:foreach loop="$intends" value="$title" key="$intend">
                    <xf:option value="{$intend}">{$title}</xf:option>
                </xf:foreach>
            </xf:radiorow>
        </div>

        <xf:submitrow icon="save"/>
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_event_new_comments" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:if is="$firstUnshownPost">
    <div class="message">
        <div class="message-inner">
            <div class="message-cell message-cell--alert">
                {{ phrase('tlg_there_more_comments_to_display') }} <a href="{{ link('group-comments', $firstUnshownPost) }}">{{ phrase('view_them') }}</a>
            </div>
        </div>
    </div>
</xf:if>

<xf:foreach loop="$comments" value="$comment">
    <xf:macro template="tlg_comment_macros"
              name="comment"
              arg-comment="{$comment}"
              arg-event="{$event}" />
</xf:foreach>]]></template>
  <template type="public" title="tlg_event_style.less" version_id="3010600" version_string="3.1.6"><![CDATA[.eventItem-date {
  display: flex;
  flex-direction: column;

  .eventItem-date--day {
    font-size: @xf-fontSizeLarger;
    color: @xf-textColorAttention;
  }
}


.countdown-wrapper {
  display: flex;
  justify-content: center;

  .countdown-tick {
    flex: 0 1 25%;
    min-width: 25%;
    padding: 5px;
    box-sizing: border-box;

    .countdown-tick--wrapper {
      border: 1px solid @xf-borderColor;
      border-radius: 6px;
      padding: @xf-paddingLarge;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #FFF;
    }

    &--number {
      font-size: @xf-fontSizeLargest * 1.4;
      color: @xf-textColorEmphasized;
    }

    &--text {
      font-size: @xf-fontSizeSmall;
      color: @xf-textColorMuted;
    }
  }
}

.blockMessage--eventNotice {
  margin-bottom: 10px;
}

.event-input-group {
  display: flex;
  flex-wrap: nowrap;

  .date-input--field {
    margin-left: @xf-paddingMedium;

    &[type="number"] {
      max-width: 80px;
    }
  }

  .inputGroup--date {
    min-width: 150px;
    .date-input--field {
      margin-left: 0;
    }
  }
}

.block-eventDescription {
  .message--simple {
    .message-body {
      margin-top: 0;
    }
  }
  .actionBar-set {
    &.actionBar-set--internal {
      margin-left: 0;
    }
  }
  .message-responses {
    display: none;
  }
}

// widget events
.p-body-sidebar {
  .widget-events {
    .eventItem-date {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }
  }
}
]]></template>
  <template type="public" title="tlg_event_view" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:title>{$event.event_name}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">events</xf:set>
</xf:wrap>

<xf:css src="tlg_event_style.less" />
<xf:js src="Truonglv/Groups/event.js" min="1" addon="Truonglv/Groups"/>

<xf:set var="$fpSnippet" value="{{ snippet($event.FirstComment.message, 0, {'stripBbCode': true}) }}" />

<xf:page option="ldJsonHtml">
    <script type="application/ld+json">{$event.getSchemaStructuredData()|json|raw}</script>
</xf:page>

<div class="p-body-header">
    <div class="p-title">
        <h2 class="p-title-value">{$event.event_name}</h2>
        <xf:if contentcheck="true">
            <div class="p-title-pageAction">
                <div class="buttonGroup">
                    <xf:contentcheck>
                        <xf:macro name="event_actions" arg-event="{$event}" />
                    </xf:contentcheck>
                </div>
            </div>
        </xf:if>
    </div>
</div>

<div class="block">
    <div class="block-outer">
        <h2 class="block-tabHeader tabs--standalone tabs hScroller"
            data-xf-init="tabs h-scroller"
            data-panes=".js-eventTabPanes"
            data-state="replace"
            role="tablist" style="margin-bottom:10px">
			<span class="hScroller-scroll">
                <a href="{{ link('group-events', $event) }}"
                           class="tabs-tab{{ ($tabFilter === 'information') ? ' is-active' : '' }}">
                    <xf:fa icon="fa-info-circle" /> {{ phrase('tlg_event_information') }}</a>
                <a href="{{ link('group-events', $event, {'tab': 'comments'}) }}"
                   class="tabs-tab{{ ($tabFilter === 'comments') ? ' is-active' : '' }}">
                    <xf:fa icon="fa-comments" /> {{ phrase('tlg_event_comments') }}</a>
                <a href="{{ link('group-events', $event, {'tab': 'guests'}) }}"
                   class="tabs-tab{{ ($tabFilter === 'guests') ? ' is-active' : '' }}">
                    <xf:fa icon="fa-users" /> {{ phrase('tlg_event_guests') }}</a>
            </span>
        </h2>
    </div>

    <xf:if is="$event.isCancelled()">
        <div class="block-outer">
            <div class="blockMessage blockMessage--important">
                {{ phrase('tlg_event_is_cancelled') }}
            </div>
        </div>
    <xf:else />
        <xf:macro name="event_notices" arg-event="{$event}" />
    </xf:if>

    <ul class="tabPanes js-eventTabPanes">
        <li class="is-active" role="tabpanel">
            <xf:macro name="{$macroName}" arg-event="{$event}" arg-data="{$macroParams}"/>
        </li>
    </ul>
</div>

<xf:if is="!$event.isCancelled()">
    <xf:if contentcheck="true">
    <div class="block">
        <div class="block-container">
            <h3 class="block-minorHeader">
                <xf:contentcheck>
                    <xf:if is="$event.begin_date > $xf.time">
                        {{ phrase('tlg_event_opening_after:') }}
                    <xf:elseif is="$event.end_date > $xf.time" />
                        {{ phrase('tlg_event_closing_in:') }}
                    </xf:if>
                </xf:contentcheck>
            </h3>

            <div class="block-separator"></div>

            <div class="block-body">
                <xf:if is="$event.begin_date > $xf.time">
                    <xf:macro name="countdown_template" arg-time="{$event.begin_date}"/>
                <xf:elseif is="$event.end_date > $xf.time"/>
                    <xf:macro name="countdown_template" arg-time="{$event.end_date}"/>
                </xf:if>
            </div>
        </div>
    </div>
    </xf:if>
</xf:if>

<xf:macro name="event_notices" arg-event="!">
    <xf:if contentcheck="true">
        <div class="block-outer">
            <div class="blockMessage blockMessage--important blockMessage--eventNotice">
                <xf:contentcheck>
                    <xf:set var="$guest" value="{$event.Guests.{$xf.visitor.user_id}}" />
                    <xf:if is="$guest is not empty">
                        <xf:if is="$guest.intend === 'going'">
                            {{ phrase('tlg_you_intended_going_to_this_event') }}
                            <xf:elseif is="$guest.intend === 'maybe'" />
                            {{ phrase('tlg_you_intended_maybe_going_to_this_event') }}
                            <xf:elseif is="$guest.intend === 'not_going'" />
                            {{ phrase('tlg_you_are_not_going_to_this_event') }}
                        </xf:if>
                        <xf:if is="$event.canIntend()">
                            <xf:button href="{{ link('group-events/intend', $event) }}"
                                       class="button--link"
                                       overlay="true">{{ phrase('change') }}</xf:button>
                        </xf:if>
                        <xf:elseif is="$event.canIntend()" />
                        {{ phrase('tlg_you_are_not_going_to_this_event') }}
                        <xf:button href="{{ link('group-events/intend', $event) }}"
                                   class="button--link"
                                   overlay="true">{{ phrase('change') }}</xf:button>
                    </xf:if>
                </xf:contentcheck>
            </div>
        </div>
    </xf:if>
</xf:macro>

<xf:macro name="event_actions" arg-event="!">
    <xf:if is="$event.canWatchUnwatch()">
        <xf:button href="{{ link('group-events/watch', $event) }}"
                   class="button--link"><xf:fa icon="fa-eye" /> {{ $event.isWatched() ? phrase('tlg_event_unwatch') : phrase('tlg_event_watch') }}</xf:button>
    </xf:if>
    <xf:if contentcheck="true">
        <div class="buttonGroup-buttonWrapper">
            <div class="menu eventItem--menuControls" data-menu="menu" aria-hidden="true">
                <div class="menu-content">
                    <xf:contentcheck>
                        <xf:if is="$event.canEdit()">
                            <a href="{{ link('group-events/edit', $event) }}"
                               class="menu-linkRow">{{ phrase('tlg_edit_event') }}</a>
                        </xf:if>
                        <xf:if is="$event.canCancel()">
                            <xf:if is="$event.isCancelled()">
                                <a href="{{ link('group-events/uncancel', $event) }}"
                                   class="menu-linkRow">{{ phrase('tlg_uncancel_event') }}</a>
                                <xf:else />
                                <a href="{{ link('group-events/cancel', $event) }}" data-xf-click="overlay"
                                   class="menu-linkRow">{{ phrase('tlg_cancel_event') }}</a>
                            </xf:if>
                        </xf:if>
                        <xf:if is="$event.canDelete()">
                            <a href="{{ link('group-events/delete', $event) }}" data-xf-click="overlay"
                               class="menu-linkRow">{{ phrase('tlg_delete_event') }}</a>
                        </xf:if>
                    </xf:contentcheck>
                </div>
            </div>

            <xf:button class="button--link menuTrigger" data-xf-click="menu"
                       aria-expanded="false" aria-haspopup="true" data-menu="< .buttonGroup | .eventItem--menuControls"
                       title="{{ phrase('more_options') }}">&#8226;&#8226;&#8226;</xf:button>
        </div>
    </xf:if>
</xf:macro>

<xf:macro name="tab_information" arg-event="!" arg-data="!">
    <div class="block block-eventDescription">
        <div class="block-container">
            <div class="block-body">
                <xf:macro template="tlg_comment_macros"
                          name="comment_root"
                          arg-comment="{$data.description}"
                          arg-content="{$event}"
                          arg-showUser="{{ false }}"/>
            </div>
        </div>
    </div>

    <div class="block">
        <div class="block-container">
            <div class="block-body">
                <xf:if is="$event.display_address">
                    <p class="block-minorHeader">
                        <xf:fa icon="fa-map-marker" /> {{ phrase('tlg_address') }}</p>
                    <div class="block-separator"></div>
                    <div class="block-row">
                        {$event.display_address}
                        <xf:if is="$event.getEmbedMapUrl()">
                            <iframe width="100%" height="350" frameborder="0" style="border:0"
                                    src="{$event.getEmbedMapUrl()}" allowfullscreen></iframe>
                        </xf:if>
                    </div>
                </xf:if>

                <xf:if is="$xf.options.enableTagging AND ($event.canEditTags() OR $event.tags)">
                    <p class="block-minorHeader"><xf:fa icon="fa-tags" /> {{ phrase('tags') }}</p>
                    <div class="block-separator"></div>
                    <div class="block-row">
                        <xf:if is="$event.tags">
                            <xf:foreach loop="$event.tags" value="$tag">
                                <a href="{{ link('tags', $tag) }}" class="tagItem" dir="auto">{$tag.tag}</a>
                            </xf:foreach>
                            <xf:else />
                            {{ phrase('none') }}
                        </xf:if>

                        <xf:if is="$event.canEditTags()">
                            <a href="{{ link('group-events/tags', $event) }}" class="u-concealed" data-xf-click="overlay"
                               data-xf-init="tooltip" title="{{ phrase('edit_tags')|for_attr }}">
                                <xf:fa icon="fa-pencil" />
                                <span class="u-srOnly">{{ phrase('edit') }}</span>
                            </a>
                        </xf:if>
                    </div>
                </xf:if>

                <p class="block-minorHeader"><xf:fa icon="fa-user-secret" /> {{ phrase('tlg_host') }}</p>
                <div class="block-separator"></div>
                <div class="block-row"><xf:avatar user="{$event.User}" size="s" defaultname="{$event.username}" /></div>

                <p class="block-minorHeader"><xf:fa icon="far fa-calendar" /> {{ phrase('tlg_event_date') }}</p>
                <div class="block-separator"></div>
                <div class="block-row">
                    <div class="eventItem-meta--date">
                        <dl class="pairs--inline pairs">
                            <dt>{{ phrase('tlg_event_begin') }}</dt>
                            <dd>{$event.getBeginDateOutput()}</dd>
                        </dl>
                    </div>

                    <div class="eventItem-meta--date">
                        <dl class="pairs--inline pairs">
                            <dt>{{ phrase('tlg_event_end') }}</dt>
                            <dd>{$event.getEndDateOutput()}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="tab_comments" arg-event="!" arg-data="!">
    <xf:set var="$afterHtml">
        <xf:pagenav page="{$data.page}" perpage="{$data.perPage}" total="{$data.totalComments}"
                link="group-events" data="{$data.event}" params="{$data.pageNavParams}"
                wrapperclass="block-outer-main" />
    </xf:set>
    <xf:macro template="tlg_comment_macros" name="comment_list"
              arg-afterHtml="{$afterHtml}"
              arg-comments="{$data.comments}" arg-content="{$event}"/>

    <xf:macro template="tlg_comment_macros" name="comment_form_block"
              arg-formAction="{{ link('group-events/comment', $event) }}"
              arg-comments="{$data.comments}" arg-content="{$event}"
              arg-attachmentData="{$data.attachmentData}" />
</xf:macro>

<xf:macro name="tab_guests" arg-event="!" arg-data="!">
    <xf:foreach loop="$data.guests" key="$intend" value="$subData">
        <div class="block">
            <div class="block-container">
                <h3 class="block-minorHeader">{$subData.title} ({$subData.total|number})</h3>
                <ul class="block-row listInline">
                    <xf:foreach loop="$subData.users" value="$user">
                        <xf:avatar user="{$user.User}" size="s" defaultname="{{ phrase('guest') }}" />
                    </xf:foreach>
                </ul>
                <xf:if is="$subData.nextPage">
                    <div class="block-footer">
                        <a href="{{ link('group-events', $event, {'tab': 'guests', 'intend': $intend, 'page': $subData.nextPage}) }}">{{ phrase('more...') }}</a>
                    </div>
                </xf:if>
            </div>
        </div>
    </xf:foreach>
</xf:macro>

<xf:macro name="countdown_template" arg-time="!">
    <div class="countdown-wrapper" data-xf-init="tlg-event-countdown"
         data-class-prefix=".countdown-tick--"
         data-time="{$time}">
        <div class="countdown-tick countdown-tick--days">
            <div class="countdown-tick--wrapper">
                <span class="countdown-tick--number"><xf:callback class="Truonglv\Groups\Callback" method="getCountdownUnit"
                                                                  params="{'unit': 'days'}">{$time}</xf:callback></span>
                <span class="countdown-tick--text">{{ phrase('days') }}</span>
            </div>
        </div>
        <div class="countdown-tick countdown-tick--hours">
            <div class="countdown-tick--wrapper">
                <span class="countdown-tick--number"><xf:callback class="Truonglv\Groups\Callback" method="getCountdownUnit"
                                                                  params="{'unit': 'hours'}">{$time}</xf:callback></span>
                <span class="countdown-tick--text">{{ phrase('hours') }}</span>
            </div>
        </div>
        <div class="countdown-tick countdown-tick--minutes">
            <div class="countdown-tick--wrapper">
                <span class="countdown-tick--number"><xf:callback class="Truonglv\Groups\Callback" method="getCountdownUnit"
                                                                  params="{'unit': 'minutes'}">{$time}</xf:callback></span>
                <span class="countdown-tick--text">{{ phrase('units_minutes') }}</span>
            </div>
        </div>
        <div class="countdown-tick countdown-tick--seconds">
            <div class="countdown-tick--wrapper">
                <span class="countdown-tick--number"><xf:callback class="Truonglv\Groups\Callback" method="getCountdownUnit"
                                                                  params="{'unit': 'seconds'}">{$time}</xf:callback></span>
                <span class="countdown-tick--text">{{ phrase('seconds') }}</span>
            </div>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="tlg_filter_bar_macros" version_id="3030100" version_string="3.3.1"><![CDATA[<xf:macro name="group_list_filter_bar"
          arg-filters="!"
          arg-baseLinkPath="!"
          arg-category="{{ null }}"
          arg-creatorFilter="{{ null }}">
    <xf:set var="$sortOrders" value="{{ {
		'created_date': phrase('tlg_submission_date'),
		'name': phrase('tlg_alphabetically'),
		'member_count': phrase('tlg_member_count'),
		'view_count': phrase('tlg_view_count'),
		'event_count': phrase('tlg_event_count'),
		'discussion_count': phrase('tlg_discussion_count'),
		'last_activity': phrase('tlg_last_activity')
	} }}" />

    <div class="block-filterBar">
        <div class="filterBar">
            <xf:if contentcheck="true">
                <ul class="filterBar-filters">
                    <xf:contentcheck>
                        <xf:comment>TLG_FILER_BAR:GROUP_LIST_TOP</xf:comment>
                        <xf:if is="$filters.privacy">
                            <li><a href="{{ link($baseLinkPath, $category, $filters|replace('privacy', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('tlg_privacy:') }}</span>
                                <xf:if is="$filters.privacy == 'public'">
                                    {{ phrase('tlg_privacy_public') }}
                                <xf:elseif is="$filters.privacy == 'closed'" />
                                    {{ phrase('tlg_privacy_closed') }}
                                <xf:elseif is="$filters.privacy == 'secret'" />
                                    {{ phrase('tlg_privacy_secret') }}
                                </xf:if>
                            </a></li>
                        </xf:if>
                        <xf:if is="$filters.creator_id AND $creatorFilter">
                            <li><a href="{{ link($baseLinkPath, $category, $filters|replace('creator_id', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('tlg_creator:') }}</span>
                                {$creatorFilter.username}</a></li>
                        </xf:if>
                        <xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
                            <li><a href="{{ link($baseLinkPath, $category, $filters|replace({'order': null, 'direction': null})) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
                                {$sortOrders.{$filters.order}}
                                <xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
                                <span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
                            </a></li>
                        </xf:if>
                        <xf:if is="$xf.options.tl_groups_enableLanguage AND $filters.language_code">
                            <xf:set var="$languages" value="{{ $xf.app.data('XF:Language').getLocaleList() }}" />
                            <xf:if is="{$languages.{$filters.language_code}}">
                                <li><a href="{{ link($baseLinkPath, $category, $filters|replace({'language_code': null})) }}"
                                       class="filterBar-filterToggle" data-xf-init="tooltip"
                                       title="{{ phrase('return_to_default_order')|for_attr }}">
                                    <span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
                                    {$languages.{$filters.language_code}}
                                </a></li>
                            </xf:if>
                        </xf:if>
                        <xf:comment>TLG_FILER_BAR:GROUP_LIST_BOTTOM</xf:comment>
                    </xf:contentcheck>
                </ul>
            </xf:if>

            <a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
            <div class="menu menu--wide" data-menu="menu" aria-hidden="true"
                 data-href="{{ link($baseLinkPath . '/filters', $category, $filters) }}"
                 data-load-target=".js-filterMenuBody">
                <div class="menu-content">
                    <h4 class="menu-header">{{ phrase('show_only:') }}</h4>
                    <div class="js-filterMenuBody">
                        <div class="menu-row">{{ phrase('loading...') }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="member_list_filter_bar" arg-filters="!" arg-group="!" arg-filterUser="{{ null }}">
    <xf:set var="$sortOrders" value="{{ {
		'joined_date': phrase('tlg_join_date'),
		'username': phrase('name')
	} }}" />

    <div class="block-filterBar">
        <div class="filterBar">
            <xf:if contentcheck="true">
                <ul class="filterBar-filters">
                    <xf:contentcheck>
                        <xf:comment>TLG_FILER_BAR:MEMBER_LIST_TOP</xf:comment>
                        <xf:if is="$filters.member_state">
                            <li><a href="{{ link('groups/members', $group, $filters|replace('member_state', 'any')|replace('group_id', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('tlg_member_status:') }}</span>
                                <xf:if is="$filters.member_state == 'valid'">
                                    {{ phrase('tlg_member_state_valid') }}
                                <xf:elseif is="$filters.member_state == 'invited'" />
                                    {{ phrase('tlg_member_state_invited') }}
                                <xf:elseif is="$filters.member_state == 'banned'" />
                                    {{ phrase('tlg_member_state_banned') }}
                                <xf:elseif is="$filters.member_state == 'moderated'" />
                                    {{ phrase('tlg_member_state_moderated') }}
                                <xf:elseif is="$filters.member_state == 'any'" />
                                    {{ phrase('any') }}
                                </xf:if>
                            </a></li>
                        </xf:if>

                        <xf:if is="$filters.user_id AND $filterUser">
                            <li><a href="{{ link('groups/members', $group, $filters|replace('user_id', null)|replace('group_id', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('name:') }}</span>
                                {$filterUser.username}</a></li>
                        </xf:if>
                        <xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
                            <li><a href="{{ link('groups/members', $group, $filters|replace({'order': null, 'direction': null})|replace('group_id', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
                                {$sortOrders.{$filters.order}}
                                <xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
                                <span class="u-srOnly">
                                    <xf:if is="$filters.direction == 'asc'">
                                        {{ phrase('ascending') }}
                                    <xf:else />
                                        {{ phrase('descending') }}</xf:if>
                                </span>
                            </a></li>
                        </xf:if>
                        <xf:if is="$filters.is_staff">
                            <li><a href="{{ link('groups/members', $group, $filters|replace('is_staff', null)|replace('group_id', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('tlg_staff_only:') }}</span>
                                {{ phrase('yes') }}</a></li>
                        </xf:if>
                        <xf:comment>TLG_FILER_BAR:MEMBER_LIST_BOTTOM</xf:comment>
                    </xf:contentcheck>
                </ul>
            </xf:if>

            <a class="filterBar-menuTrigger" data-xf-click="menu" role="button"
               tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
            <div class="menu menu--wide" data-menu="menu" aria-hidden="true"
                 data-href="{{ link('group-members/filters', null, $filters) }}"
                 data-load-target=".js-filterMenuBody">
                <div class="menu-content">
                    <h4 class="menu-header">{{ phrase('show_only:') }}</h4>
                    <div class="js-filterMenuBody">
                        <div class="menu-row">{{ phrase('loading...') }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="user_group_filter_bar" arg-filters="!">
    <xf:set var="$sortOrders" value="{{ {
		'created_date': phrase('tlg_submission_date'),
		'name': phrase('tlg_alphabetically'),
		'member_count': phrase('tlg_member_count'),
		'view_count': phrase('tlg_view_count'),
		'event_count': phrase('tlg_event_count'),
		'discussion_count': phrase('tlg_discussion_count'),
		'last_activity': phrase('tlg_last_activity')
	} }}" />
    <div class="block-filterBar">
        <div class="filterBar">
            <xf:if contentcheck="true">
                <ul class="filterBar-filters">
                    <xf:contentcheck>
                        <xf:if is="$filters.privacy">
                            <li><a href="{{ link('groups/browse/user', null, $filters|replace('privacy', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('tlg_privacy:') }}</span>
                                <xf:if is="$filters.privacy == 'public'">
                                    {{ phrase('tlg_privacy_public') }}
                                    <xf:elseif is="$filters.privacy == 'closed'" />
                                    {{ phrase('tlg_privacy_closed') }}
                                    <xf:elseif is="$filters.privacy == 'secret'" />
                                    {{ phrase('tlg_privacy_secret') }}
                                </xf:if>
                            </a></li>
                        </xf:if>

                        <xf:if is="$filters.type">
                            <li><a href="{{ link('groups/browse/user', null, $filters|replace('type', null)) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('type:') }}</span>
                                <xf:if is="$filters.type == 'invited'">
                                    {{ phrase('tlg_invited_groups') }}
                                    <xf:elseif is="$filters.type == 'admin'" />
                                    {{ phrase('tlg_admin_of_groups') }}
                                </xf:if>
                            </a></li>
                        </xf:if>

                        <xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
                            <li><a href="{{ link('groups/browse/user', null, $filters|replace({'order': null, 'direction': null})) }}"
                                   class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
                                <span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
                                {$sortOrders.{$filters.order}}
                                <xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
                                <span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
                            </a></li>
                        </xf:if>
                    </xf:contentcheck>
                </ul>
            </xf:if>

            <a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0"
               aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
            <div class="menu menu--wide" data-menu="menu" aria-hidden="true"
                 data-href="{{ link('groups/browse/user/filters', null, $filters) }}"
                 data-load-target=".js-filterMenuBody">
                <div class="menu-content">
                    <h4 class="menu-header">{{ phrase('show_only:') }}</h4>
                    <div class="js-filterMenuBody">
                        <div class="menu-row">{{ phrase('loading...') }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="tlg_filters" version_id="3000100" version_string="3.0.1"><![CDATA[<xf:form action="{$formAction}">
    <!-- TLG_FILTERS: TOP -->
    <!-- TLG_FILTERS:above_privacy -->
    <div class="menu-row menu-row--separated">
        {{ phrase('tlg_privacy:') }}
        <div class="u-inputSpacer">
            <xf:select name="privacy" value="{$filters.privacy}">
                <xf:option value="">{{ phrase('any') }}</xf:option>
                <xf:option value="public">{{ phrase('tlg_privacy_public') }}</xf:option>
                <xf:option value="closed">{{ phrase('tlg_privacy_closed') }}</xf:option>
                <xf:option value="secret">{{ phrase('tlg_privacy_secret') }}</xf:option>
            </xf:select>
        </div>
    </div>
    <!-- TLG_FILTERS:above_created_by -->
    <div class="menu-row menu-row--separated">
        {{ phrase('created_by:') }}
        <div class="u-inputSpacer">
            <xf:textbox name="creator" value="{{ $creatorFilter ? $creatorFilter.username : '' }}" ac="single" />
        </div>
    </div>

    <!-- TLG_FILTERS:above_language -->
    <xf:if is="$languages is not empty">
        <div class="menu-row menu-row--separated">
            {{ phrase('language') }}
            <div class="u-inputSpacer">
                <xf:select name="language_code" value="{$filters.language_code}">
                    <xf:option value="">{{ phrase('any') }}</xf:option>
                    <xf:options source="{$languages}" />
                </xf:select>
            </div>
        </div>
    </xf:if>

    <!-- TLG_FILTERS:above_sort_by -->
    <div class="menu-row menu-row--separated">
        {{ phrase('sort_by:') }}
        <div class="inputGroup u-inputSpacer">
            <xf:select name="order" value="{{ $filters.order ?: 'last_activity' }}">
                <xf:option value="created_date">{{ phrase('tlg_submission_date') }}</xf:option>
                <xf:option value="name">{{ phrase('tlg_alphabetically') }}</xf:option>
                <xf:option value="member_count">{{ phrase('tlg_member_count') }}</xf:option>
                <xf:option value="view_count">{{ phrase('tlg_view_count') }}</xf:option>
                <xf:option value="event_count">{{ phrase('tlg_event_count') }}</xf:option>
                <xf:option value="discussion_count">{{ phrase('tlg_discussion_count') }}</xf:option>
                <xf:option value="last_activity">{{ phrase('tlg_last_activity') }}</xf:option>
            </xf:select>

            <span class="inputGroup-splitter"></span>

            <xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
                <xf:option value="desc">{{ phrase('descending') }}</xf:option>
                <xf:option value="asc">{{ phrase('ascending') }}</xf:option>
            </xf:select>
        </div>
    </div>
    <!-- TLG_FILTERS: BOTTOM -->

    <div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
    </div>
    <xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="tlg_forum_add" version_id="3000200" version_string="3.0.2"><![CDATA[<xf:title>{{ $forum.exists() ? phrase('tlg_edit_forum') : phrase('tlg_add_forum') }}</xf:title>

<xf:if is="!$withData">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">discussions</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{$formAction}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:macro name="title" arg-node="{$node}" />
            <xf:macro name="description" arg-node="{$node}" />

            <hr class="formRowSep" />
            <xf:macro name="position" arg-node="{$node}" arg-nodeTree="{$nodeTree}" />
            <hr class="formRowSep" />

            <xf:numberboxrow name="min_tags" value="{$forum.min_tags}" min="0" max="100"
                             label="{{ phrase('minimum_required_tags') }}"
                             explain="{{ phrase('forum_min_tags_explain') }}" />

            <xf:radiorow name="allowed_watch_notifications" value="{$forum.allowed_watch_notifications}"
                         label="{{ phrase('forum_watch_notification_limit') }}"
                         explain="{{ phrase('forum_watch_notification_limit_desc') }}">

                <xf:option value="all" label="{{ phrase('new_messages') }}" />
                <xf:option value="thread" label="{{ phrase('new_threads') }}" />
                <xf:option value="none" label="{{ phrase('none') }}" />
            </xf:radiorow>

            <xf:formrow rowtype="input"
                        label="{{ phrase('default_sort_order') }}">

                <div class="inputPair">
                    <xf:select name="default_sort_order" value="{$forum.default_sort_order}" class="input--inline">
                        <xf:option value="last_post_date" label="{{ phrase('last_message') }}" />
                        <xf:option value="post_date" label="{{ phrase('start_date') }}" />
                        <xf:option value="title" label="{{ phrase('title') }}" />
                        <xf:option value="reply_count" label="{{ phrase('replies') }}" />
                        <xf:option value="view_count" label="{{ phrase('views') }}" />
                    </xf:select>
                    <xf:select name="default_sort_direction" value="{$forum.default_sort_direction}"
                               class="input--inline">
                        <xf:option value="desc" label="{{ phrase('descending') }}" />
                        <xf:option value="asc" label="{{ phrase('ascending') }}" />
                    </xf:select>
                </div>
            </xf:formrow>

            <xf:selectrow name="list_date_limit_days" value="{$forum.list_date_limit_days}"
                          label="{{ phrase('thread_list_date_limit') }}"
                          explain="{{ phrase('thread_list_date_limit_used_on_busy_forums_to_improve_performance') }}">

                <xf:option value="0">{{ phrase('none') }}</xf:option>
                <xf:option value="7">{{ phrase('x_days', {'days': '7'}) }}</xf:option>
                <xf:option value="14">{{ phrase('x_days', {'days': '14'}) }}</xf:option>
                <xf:option value="30">{{ phrase('x_days', {'days': '30'}) }}</xf:option>
                <xf:option value="60">{{ phrase('x_months', {'months': '2'}) }}</xf:option>
                <xf:option value="90">{{ phrase('x_months', {'months': '3'}) }}</xf:option>
                <xf:option value="182">{{ phrase('x_months', {'months': '6'}) }}</xf:option>
                <xf:option value="365">{{ phrase('1_year') }}</xf:option>
            </xf:selectrow>
        </div>

        <xf:submitrow icon="save" sticky="true" />
    </div>
</xf:form>

<xf:macro name="title" arg-node="!">
    <xf:textboxrow name="node[title]" value="{$node.title}" label="{{ phrase('title') }}" />
</xf:macro>

<xf:macro name="description" arg-node="!">
    <xf:textarearow name="node[description]" value="{$node.description}" autosize="true"
                    label="{{ phrase('description') }}" />
</xf:macro>

<xf:macro name="position" arg-node="!" arg-nodeTree="!">
    <xf:selectrow name="node[parent_node_id]" value="{$node.parent_node_id}"
                  label="{{ phrase('parent_node') }}">

        <xf:option value="0">{{ phrase('(none)') }}</xf:option>

        <xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
            <xf:option value="{$treeEntry.record.node_id}">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
        </xf:foreach>
    </xf:selectrow>
</xf:macro>]]></template>
  <template type="public" title="tlg_forum_post_thread" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">discussions</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title"><h2 class="p-title-value">{{ phrase('post_thread') }}</h2></div>
</div>

<xf:include template="forum_post_thread"/>]]></template>
  <template type="public" title="tlg_forum_view" version_id="2020300" version_string="2.2.3"><![CDATA[<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">discussions</xf:set>
    <xf:set var="$noBreadcrumbs">1</xf:set>
    <xf:set var="$noPageOptions">1</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title"><h2 class="p-title-value">{$forum.title}</h2></div>
    <div class="p-description">{$forum.description}</div>
</div>

<xf:include template="forum_view" />

<xf:macro name="forum_mod_actions" arg-forum="!" arg-group="{{ null }}">
<xf:if is="$group is not empty">
    <xf:if is="$forum.canCreateThread()">
        <xf:button href="{{ link('forums/post-thread', $forum) }}" class="button--cta" icon="write">
            {{ phrase('post_thread') }}
        </xf:button>
    </xf:if>

    <xf:if contentcheck="true">
        <xf:button class="button--link menuTrigger" data-xf-click="menu"
                   aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options') }}">&#8226;&#8226;&#8226;</xf:button>
        <div class="menu" data-menu="menu" aria-hidden="true">
            <div class="menu-content">
                <h4 class="menu-header">{{ phrase('more_options') }}</h4>
                <xf:contentcheck>
                    <xf:if is="$group.canEditForum()">
                        <a href="{{ link('group-forums/edit', $forum) }}"
                           class="menu-linkRow"
                           data-xf-click="overlay">{{ phrase('tlg_edit_forum') }}</a>
                    </xf:if>

                    <xf:if is="$group.canDeleteForum()">
                        <a href="{{ link('group-forums/delete', $forum) }}"
                           class="menu-linkRow"
                           data-xf-click="overlay">{{ phrase('tlg_delete_forum') }}</a>
                    </xf:if>
                </xf:contentcheck>
            </div>
        </div>
    </xf:if>
</xf:if>
</xf:macro>]]></template>
  <template type="public" title="tlg_full_calendar.css" version_id="3010900" version_string="3.1.9"><![CDATA[
/* classes attached to <body> */
/* TODO: make fc-event selector work when calender in shadow DOM */
.fc-not-allowed,
.fc-not-allowed .fc-event { /* override events' custom cursors */
    cursor: not-allowed;
}

/* TODO: not attached to body. attached to specific els. move */
.fc-unselectable {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.fc {
    /* layout of immediate children */
    display: flex;
    flex-direction: column;

    font-size: 1em
}
.fc,
.fc *,
.fc *:before,
.fc *:after {
    box-sizing: border-box;
}
.fc table {
    border-collapse: collapse;
    border-spacing: 0;
    font-size: 1em; /* normalize cross-browser */
}
.fc th {
    text-align: center;
}
.fc th,
.fc td {
    vertical-align: top;
    padding: 0;
}
.fc a[data-navlink] {
    cursor: pointer;
}
.fc a[data-navlink]:hover {
    text-decoration: underline;
}
.fc-direction-ltr {
    direction: ltr;
    text-align: left;
}
.fc-direction-rtl {
    direction: rtl;
    text-align: right;
}
.fc-theme-standard td,
.fc-theme-standard th {
    border: 1px solid #ddd;
    border: 1px solid var(--fc-border-color, #ddd);
}
/* for FF, which doesn't expand a 100% div within a table cell. use absolute positioning */
/* inner-wrappers are responsible for being absolute */
/* TODO: best place for this? */
.fc-liquid-hack td,
.fc-liquid-hack th {
    position: relative;
}

@font-face {
    font-family: 'fcicons';
    src: url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format('truetype');
    font-weight: normal;
    font-style: normal;
}

.fc-icon {
    /* added for fc */
    display: inline-block;
    width: 1em;
    height: 1em;
    text-align: center;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

    /* use !important to prevent issues with browser extensions that change fonts */
    font-family: 'fcicons' !important;
    speak: none;
    font-style: normal;
    font-weight: normal;
    font-variant: normal;
    text-transform: none;
    line-height: 1;

    /* Better Font Rendering =========== */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.fc-icon-chevron-left:before {
    content: "\e900";
}

.fc-icon-chevron-right:before {
    content: "\e901";
}

.fc-icon-chevrons-left:before {
    content: "\e902";
}

.fc-icon-chevrons-right:before {
    content: "\e903";
}

.fc-icon-minus-square:before {
    content: "\e904";
}

.fc-icon-plus-square:before {
    content: "\e905";
}

.fc-icon-x:before {
    content: "\e906";
}
/*
Lots taken from Flatly (MIT): https://bootswatch.com/4/flatly/bootstrap.css

These styles only apply when the standard-theme is activated.
When it's NOT activated, the fc-button classes won't even be in the DOM.
*/
.fc {

    /* reset */

}
.fc .fc-button {
    border-radius: 0;
    overflow: visible;
    text-transform: none;
    margin: 0;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
}
.fc .fc-button:focus {
    outline: 1px dotted;
    outline: 5px auto -webkit-focus-ring-color;
}
.fc .fc-button {
    -webkit-appearance: button;
}
.fc .fc-button:not(:disabled) {
    cursor: pointer;
}
.fc .fc-button::-moz-focus-inner {
    padding: 0;
    border-style: none;
}
.fc {

    /* theme */

}
.fc .fc-button {
    display: inline-block;
    font-weight: 400;
    text-align: center;
    vertical-align: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-color: transparent;
    border: 1px solid transparent;
    padding: 0.4em 0.65em;
    font-size: 1em;
    line-height: 1.5;
    border-radius: 0.25em;
}
.fc .fc-button:hover {
    text-decoration: none;
}
.fc .fc-button:focus {
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(44, 62, 80, 0.25);
}
.fc .fc-button:disabled {
    opacity: 0.65;
}
.fc {

    /* "primary" coloring */

}
.fc .fc-button-primary {
    color: #fff;
    color: var(--fc-button-text-color, #fff);
    background-color: #2C3E50;
    background-color: var(--fc-button-bg-color, #2C3E50);
    border-color: #2C3E50;
    border-color: var(--fc-button-border-color, #2C3E50);
}
.fc .fc-button-primary:hover {
    color: #fff;
    color: var(--fc-button-text-color, #fff);
    background-color: #1e2b37;
    background-color: var(--fc-button-hover-bg-color, #1e2b37);
    border-color: #1a252f;
    border-color: var(--fc-button-hover-border-color, #1a252f);
}
.fc .fc-button-primary:disabled { /* not DRY */
    color: #fff;
    color: var(--fc-button-text-color, #fff);
    background-color: #2C3E50;
    background-color: var(--fc-button-bg-color, #2C3E50);
    border-color: #2C3E50;
    border-color: var(--fc-button-border-color, #2C3E50); /* overrides :hover */
}
.fc .fc-button-primary:focus {
    box-shadow: 0 0 0 0.2rem rgba(76, 91, 106, 0.5);
}
.fc .fc-button-primary:not(:disabled):active,
.fc .fc-button-primary:not(:disabled).fc-button-active {
    color: #fff;
    color: var(--fc-button-text-color, #fff);
    background-color: #1a252f;
    background-color: var(--fc-button-active-bg-color, #1a252f);
    border-color: #151e27;
    border-color: var(--fc-button-active-border-color, #151e27);
}
.fc .fc-button-primary:not(:disabled):active:focus,
.fc .fc-button-primary:not(:disabled).fc-button-active:focus {
    box-shadow: 0 0 0 0.2rem rgba(76, 91, 106, 0.5);
}
.fc {

    /* icons within buttons */

}
.fc .fc-button .fc-icon {
    vertical-align: middle;
    font-size: 1.5em; /* bump up the size (but don't make it bigger than line-height of button, which is 1.5em also) */
}
.fc .fc-button-group {
    position: relative;
    display: inline-flex;
    vertical-align: middle;
}
.fc .fc-button-group > .fc-button {
    position: relative;
    flex: 1 1 auto;
}
.fc .fc-button-group > .fc-button:hover {
    z-index: 1;
}
.fc .fc-button-group > .fc-button:focus,
.fc .fc-button-group > .fc-button:active,
.fc .fc-button-group > .fc-button.fc-button-active {
    z-index: 1;
}
.fc-direction-ltr .fc-button-group > .fc-button:not(:first-child) {
    margin-left: -1px;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
.fc-direction-ltr .fc-button-group > .fc-button:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
.fc-direction-rtl .fc-button-group > .fc-button:not(:first-child) {
    margin-right: -1px;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
.fc-direction-rtl .fc-button-group > .fc-button:not(:last-child) {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
.fc .fc-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.fc .fc-toolbar.fc-header-toolbar {
    margin-bottom: 1.5em;
}
.fc .fc-toolbar.fc-footer-toolbar {
    margin-top: 1.5em;
}
.fc .fc-toolbar-title {
    font-size: 1.75em;
    margin: 0;
}
.fc-direction-ltr .fc-toolbar > * > :not(:first-child) {
    margin-left: .75em; /* space between */
}
.fc-direction-rtl .fc-toolbar > * > :not(:first-child) {
    margin-right: .75em; /* space between */
}
.fc-direction-rtl .fc-toolbar-ltr { /* when the toolbar-chunk positioning system is explicitly left-to-right */
    flex-direction: row-reverse;
}
.fc .fc-scroller {
    -webkit-overflow-scrolling: touch;
    position: relative; /* for abs-positioned elements within */
}
.fc .fc-scroller-liquid {
    height: 100%;
}
.fc .fc-scroller-liquid-absolute {
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
}
.fc .fc-scroller-harness {
    position: relative;
    overflow: hidden;
    direction: ltr;
    /* hack for chrome computing the scroller's right/left wrong for rtl. undone below... */
    /* TODO: demonstrate in codepen */
}
.fc .fc-scroller-harness-liquid {
    height: 100%;
}
.fc-direction-rtl .fc-scroller-harness > .fc-scroller { /* undo above hack */
    direction: rtl;
}
.fc-theme-standard .fc-scrollgrid {
    border: 1px solid #ddd;
    border: 1px solid var(--fc-border-color, #ddd); /* bootstrap does this. match */
}
.fc .fc-scrollgrid,
.fc .fc-scrollgrid table { /* all tables (self included) */
    width: 100%; /* because tables don't normally do this */
    table-layout: fixed;
}
.fc .fc-scrollgrid table { /* inner tables */
    border-top-style: hidden;
    border-left-style: hidden;
    border-right-style: hidden;
}
.fc .fc-scrollgrid {

    border-collapse: separate;
    border-right-width: 0;
    border-bottom-width: 0;

}
.fc .fc-scrollgrid-liquid {
    height: 100%;
}
.fc .fc-scrollgrid-section { /* a <tr> */
    height: 1px /* better than 0, for firefox */

}
.fc .fc-scrollgrid-section > td {
    height: 1px; /* needs a height so inner div within grow. better than 0, for firefox */
}
.fc .fc-scrollgrid-section table {
    height: 1px;
    /* for most browsers, if a height isn't set on the table, can't do liquid-height within cells */
    /* serves as a min-height. harmless */
}
.fc .fc-scrollgrid-section-liquid > td {
    height: 100%; /* better than `auto`, for firefox */
}
.fc .fc-scrollgrid-section > * {
    border-top-width: 0;
    border-left-width: 0;
}
.fc .fc-scrollgrid-section-header > *,
.fc .fc-scrollgrid-section-footer > * {
    border-bottom-width: 0;
}
.fc .fc-scrollgrid-section-body table,
.fc .fc-scrollgrid-section-footer table {
    border-bottom-style: hidden; /* head keeps its bottom border tho */
}
.fc {

    /* stickiness */

}
.fc .fc-scrollgrid-section-sticky > * {
    background: #fff;
    background: var(--fc-page-bg-color, #fff);
    position: sticky;
    z-index: 3; /* TODO: var */
    /* TODO: box-shadow when sticking */
}
.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky > * {
    top: 0; /* because border-sharing causes a gap at the top */
    /* TODO: give safari -1. has bug */
}
.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky > * {
    bottom: 0; /* known bug: bottom-stickiness doesn't work in safari */
}
.fc .fc-scrollgrid-sticky-shim { /* for horizontal scrollbar */
    height: 1px; /* needs height to create scrollbars */
    margin-bottom: -1px;
}
.fc-sticky { /* no .fc wrap because used as child of body */
    position: sticky;
}
.fc .fc-view-harness {
    flex-grow: 1; /* because this harness is WITHIN the .fc's flexbox */
    position: relative;
}
.fc {

    /* when the harness controls the height, make the view liquid */

}
.fc .fc-view-harness-active > .fc-view {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}
.fc .fc-col-header-cell-cushion {
    display: inline-block; /* x-browser for when sticky (when multi-tier header) */
    padding: 2px 4px;
}
.fc .fc-bg-event,
.fc .fc-non-business,
.fc .fc-highlight {
    /* will always have a harness with position:relative/absolute, so absolutely expand */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}
.fc .fc-non-business {
    background: rgba(215, 215, 215, 0.3);
    background: var(--fc-non-business-color, rgba(215, 215, 215, 0.3));
}
.fc .fc-bg-event {
    background: rgb(143, 223, 130);
    background: var(--fc-bg-event-color, rgb(143, 223, 130));
    opacity: 0.3;
    opacity: var(--fc-bg-event-opacity, 0.3)
}
.fc .fc-bg-event .fc-event-title {
    margin: .5em;
    font-size: .85em;
    font-size: var(--fc-small-font-size, .85em);
    font-style: italic;
}
.fc .fc-highlight {
    background: rgba(188, 232, 241, 0.3);
    background: var(--fc-highlight-color, rgba(188, 232, 241, 0.3));
}
.fc .fc-cell-shaded,
.fc .fc-day-disabled {
    background: rgba(208, 208, 208, 0.3);
    background: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));
}
/* link resets */
/* ---------------------------------------------------------------------------------------------------- */
a.fc-event,
a.fc-event:hover {
    text-decoration: none;
}
/* cursor */
.fc-event[href],
.fc-event.fc-event-draggable {
    cursor: pointer;
}
/* event text content */
/* ---------------------------------------------------------------------------------------------------- */
.fc-event .fc-event-main {
    position: relative;
    z-index: 2;
}
/* dragging */
/* ---------------------------------------------------------------------------------------------------- */
.fc-event-dragging:not(.fc-event-selected) { /* MOUSE */
    opacity: 0.75;
}
.fc-event-dragging.fc-event-selected { /* TOUCH */
    box-shadow: 0 2px 7px rgba(0, 0, 0, 0.3);
}
/* resizing */
/* ---------------------------------------------------------------------------------------------------- */
/* (subclasses should hone positioning for touch and non-touch) */
.fc-event .fc-event-resizer {
    display: none;
    position: absolute;
    z-index: 4;
}
.fc-event:hover, /* MOUSE */
.fc-event-selected { /* TOUCH */

}
.fc-event:hover .fc-event-resizer, .fc-event-selected .fc-event-resizer {
    display: block;
}
.fc-event-selected .fc-event-resizer {
    border-radius: 4px;
    border-radius: calc(var(--fc-event-resizer-dot-total-width, 8px) / 2);
    border-width: 1px;
    border-width: var(--fc-event-resizer-dot-border-width, 1px);
    width: 8px;
    width: var(--fc-event-resizer-dot-total-width, 8px);
    height: 8px;
    height: var(--fc-event-resizer-dot-total-width, 8px);
    border-style: solid;
    border-color: inherit;
    background: #fff;
    background: var(--fc-page-bg-color, #fff)

    /* expand hit area */

}
.fc-event-selected .fc-event-resizer:before {
    content: '';
    position: absolute;
    top: -20px;
    left: -20px;
    right: -20px;
    bottom: -20px;
}
/* selecting (always TOUCH) */
/* OR, focused by tab-index */
/* (TODO: maybe not the best focus-styling for .fc-daygrid-dot-event) */
/* ---------------------------------------------------------------------------------------------------- */
.fc-event-selected,
.fc-event:focus {
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2)

    /* expand hit area (subclasses should expand) */

}
.fc-event-selected:before, .fc-event:focus:before {
    content: "";
    position: absolute;
    z-index: 3;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}
.fc-event-selected,
.fc-event:focus {

    /* dimmer effect */

}
.fc-event-selected:after, .fc-event:focus:after {
    content: "";
    background: rgba(0, 0, 0, 0.25);
    background: var(--fc-event-selected-overlay-color, rgba(0, 0, 0, 0.25));
    position: absolute;
    z-index: 1;

    /* assume there's a border on all sides. overcome it. */
    /* sometimes there's NOT a border, in which case the dimmer will go over */
    /* an adjacent border, which looks fine. */
    top: -1px;
    left: -1px;
    right: -1px;
    bottom: -1px;
}
/*
A HORIZONTAL event
*/
.fc-h-event { /* allowed to be top-level */
    display: block;
    border: 1px solid #3788d8;
    border: 1px solid var(--fc-event-border-color, #3788d8);
    background-color: #3788d8;
    background-color: var(--fc-event-bg-color, #3788d8)

}
.fc-h-event .fc-event-main {
    color: #fff;
    color: var(--fc-event-text-color, #fff);
}
.fc-h-event .fc-event-main-frame {
    display: flex; /* for make fc-event-title-container expand */
}
.fc-h-event .fc-event-time {
    max-width: 100%; /* clip overflow on this element */
    overflow: hidden;
}
.fc-h-event .fc-event-title-container { /* serves as a container for the sticky cushion */
    flex-grow: 1;
    flex-shrink: 1;
    min-width: 0; /* important for allowing to shrink all the way */
}
.fc-h-event .fc-event-title {
    display: inline-block; /* need this to be sticky cross-browser */
    vertical-align: top; /* for not messing up line-height */
    left: 0;  /* for sticky */
    right: 0; /* for sticky */
    max-width: 100%; /* clip overflow on this element */
    overflow: hidden;
}
.fc-h-event.fc-event-selected:before {
    /* expand hit area */
    top: -10px;
    bottom: -10px;
}
/* adjust border and border-radius (if there is any) for non-start/end */
.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),
.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end) {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-left-width: 0;
}
.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),
.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    border-right-width: 0;
}
/* resizers */
.fc-h-event:not(.fc-event-selected) .fc-event-resizer {
    top: 0;
    bottom: 0;
    width: 8px;
    width: var(--fc-event-resizer-thickness, 8px);
}
.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,
.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end {
    cursor: w-resize;
    left: -4px;
    left: calc(-0.5 * var(--fc-event-resizer-thickness, 8px));
}
.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,
.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start {
    cursor: e-resize;
    right: -4px;
    right: calc(-0.5 * var(--fc-event-resizer-thickness, 8px));
}
/* resizers for TOUCH */
.fc-h-event.fc-event-selected .fc-event-resizer {
    top: 50%;
    margin-top: -4px;
    margin-top: calc(-0.5 * var(--fc-event-resizer-dot-total-width, 8px));
}
.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,
.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end {
    left: -4px;
    left: calc(-0.5 * var(--fc-event-resizer-dot-total-width, 8px));
}
.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,
.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start {
    right: -4px;
    right: calc(-0.5 * var(--fc-event-resizer-dot-total-width, 8px));
}
.fc .fc-popover {
    position: absolute;
    z-index: 9999;
    box-shadow: 0 2px 6px rgba(0,0,0,.15);
}
.fc .fc-popover-header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 3px 4px;
}
.fc .fc-popover-title {
    margin: 0 2px;
}
.fc .fc-popover-close {
    cursor: pointer;
    opacity: 0.65;
    font-size: 1.1em;
}
.fc-theme-standard .fc-popover {
    border: 1px solid #ddd;
    border: 1px solid var(--fc-border-color, #ddd);
    background: #fff;
    background: var(--fc-page-bg-color, #fff);
}
.fc-theme-standard .fc-popover-header {
    background: rgba(208, 208, 208, 0.3);
    background: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));
}


:root {
    --fc-daygrid-event-dot-width: 8px;
}
/* help things clear margins of inner content */
.fc-daygrid-day-frame,
.fc-daygrid-day-events,
.fc-daygrid-event-harness { /* for event top/bottom margins */
}
.fc-daygrid-day-frame:before, .fc-daygrid-day-events:before, .fc-daygrid-event-harness:before {
    content: "";
    clear: both;
    display: table; }
.fc-daygrid-day-frame:after, .fc-daygrid-day-events:after, .fc-daygrid-event-harness:after {
    content: "";
    clear: both;
    display: table; }
.fc .fc-daygrid-body { /* a <div> that wraps the table */
    position: relative;
    z-index: 1; /* container inner z-index's because <tr>s can't do it */
}
.fc .fc-daygrid-day.fc-day-today {
    background-color: rgba(255, 220, 40, 0.15);
    background-color: var(--fc-today-bg-color, rgba(255, 220, 40, 0.15));
}
.fc .fc-daygrid-day-frame {
    position: relative;
    min-height: 100%; /* seems to work better than `height` because sets height after rows/cells naturally do it */
}
.fc {

    /* cell top */

}
.fc .fc-daygrid-day-top {
    display: flex;
    flex-direction: row-reverse;
}
.fc .fc-day-other .fc-daygrid-day-top {
    opacity: 0.3;
}
.fc {

    /* day number (within cell top) */

}
.fc .fc-daygrid-day-number {
    position: relative;
    z-index: 4;
    padding: 4px;
}
.fc {

    /* event container */

}
.fc .fc-daygrid-day-events {
    margin-top: 1px; /* needs to be margin, not padding, so that available cell height can be computed */
}
.fc {

    /* positioning for balanced vs natural */

}
.fc .fc-daygrid-body-balanced .fc-daygrid-day-events {
    position: absolute;
    left: 0;
    right: 0;
}
.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events {
    position: relative; /* for containing abs positioned event harnesses */
    min-height: 2em; /* in addition to being a min-height during natural height, equalizes the heights a little bit */
}
.fc .fc-daygrid-body-natural { /* can coexist with -unbalanced */
}
.fc .fc-daygrid-body-natural .fc-daygrid-day-events {
    margin-bottom: 1em;
}
.fc {

    /* event harness */

}
.fc .fc-daygrid-event-harness {
    position: relative;
}
.fc .fc-daygrid-event-harness-abs {
    position: absolute;
    top: 0; /* fallback coords for when cannot yet be computed */
    left: 0; /* */
    right: 0; /* */
}
.fc .fc-daygrid-bg-harness {
    position: absolute;
    top: 0;
    bottom: 0;
}
.fc {

    /* bg content */

}
.fc .fc-daygrid-day-bg .fc-non-business { z-index: 1 }
.fc .fc-daygrid-day-bg .fc-bg-event { z-index: 2 }
.fc .fc-daygrid-day-bg .fc-highlight { z-index: 3 }
.fc {

    /* events */

}
.fc .fc-daygrid-event {
    z-index: 6;
    margin-top: 1px;
}
.fc .fc-daygrid-event.fc-event-mirror {
    z-index: 7;
}
.fc {

    /* cell bottom (within day-events) */

}
.fc .fc-daygrid-day-bottom {
    font-size: .85em;
    padding: 2px 3px 0
}
.fc .fc-daygrid-day-bottom:before {
    content: "";
    clear: both;
    display: table; }
.fc .fc-daygrid-more-link {
    position: relative;
    z-index: 4;
    cursor: pointer;
}
.fc {

    /* week number (within frame) */

}
.fc .fc-daygrid-week-number {
    position: absolute;
    z-index: 5;
    top: 0;
    padding: 2px;
    min-width: 1.5em;
    text-align: center;
    background-color: rgba(208, 208, 208, 0.3);
    background-color: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));
    color: #808080;
    color: var(--fc-neutral-text-color, #808080);
}
.fc {

    /* popover */

}
.fc .fc-more-popover .fc-popover-body {
    min-width: 220px;
    padding: 10px;
}
.fc-direction-ltr .fc-daygrid-event.fc-event-start,
.fc-direction-rtl .fc-daygrid-event.fc-event-end {
    margin-left: 2px;
}
.fc-direction-ltr .fc-daygrid-event.fc-event-end,
.fc-direction-rtl .fc-daygrid-event.fc-event-start {
    margin-right: 2px;
}
.fc-direction-ltr .fc-daygrid-week-number {
    left: 0;
    border-radius: 0 0 3px 0;
}
.fc-direction-rtl .fc-daygrid-week-number {
    right: 0;
    border-radius: 0 0 0 3px;
}
.fc-liquid-hack .fc-daygrid-day-frame {
    position: static; /* will cause inner absolute stuff to expand to <td> */
}
.fc-daygrid-event { /* make root-level, because will be dragged-and-dropped outside of a component root */
    position: relative; /* for z-indexes assigned later */
    white-space: nowrap;
    border-radius: 3px; /* dot event needs this to when selected */
    font-size: .85em;
    font-size: var(--fc-small-font-size, .85em);
}
/* --- the rectangle ("block") style of event --- */
.fc-daygrid-block-event .fc-event-time {
    font-weight: bold;
}
.fc-daygrid-block-event .fc-event-time,
.fc-daygrid-block-event .fc-event-title {
    padding: 1px;
}
/* --- the dot style of event --- */
.fc-daygrid-dot-event {
    display: flex;
    align-items: center;
    padding: 2px 0

}
.fc-daygrid-dot-event .fc-event-title {
    flex-grow: 1;
    flex-shrink: 1;
    min-width: 0; /* important for allowing to shrink all the way */
    overflow: hidden;
    font-weight: bold;
}
.fc-daygrid-dot-event:hover,
.fc-daygrid-dot-event.fc-event-mirror {
    background: rgba(0, 0, 0, 0.1);
}
.fc-daygrid-dot-event.fc-event-selected:before {
    /* expand hit area */
    top: -10px;
    bottom: -10px;
}
.fc-daygrid-event-dot { /* the actual dot */
    margin: 0 4px;
    box-sizing: content-box;
    width: 0;
    height: 0;
    border: 4px solid #3788d8;
    border: calc(var(--fc-daygrid-event-dot-width, 8px) / 2) solid var(--fc-event-border-color, #3788d8);
    border-radius: 4px;
    border-radius: calc(var(--fc-daygrid-event-dot-width, 8px) / 2);
}
/* --- spacing between time and title --- */
.fc-direction-ltr .fc-daygrid-event .fc-event-time {
    margin-right: 3px;
}
.fc-direction-rtl .fc-daygrid-event .fc-event-time {
    margin-left: 3px;
}


/*
A VERTICAL event
*/

.fc-v-event { /* allowed to be top-level */
    display: block;
    border: 1px solid #3788d8;
    border: 1px solid var(--fc-event-border-color, #3788d8);
    background-color: #3788d8;
    background-color: var(--fc-event-bg-color, #3788d8)

}

.fc-v-event .fc-event-main {
    color: #fff;
    color: var(--fc-event-text-color, #fff);
    height: 100%;
}

.fc-v-event .fc-event-main-frame {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.fc-v-event .fc-event-time {
    flex-grow: 0;
    flex-shrink: 0;
    max-height: 100%;
    overflow: hidden;
}

.fc-v-event .fc-event-title-container { /* a container for the sticky cushion */
    flex-grow: 1;
    flex-shrink: 1;
    min-height: 0; /* important for allowing to shrink all the way */
}

.fc-v-event .fc-event-title { /* will have fc-sticky on it */
    top: 0;
    bottom: 0;
    max-height: 100%; /* clip overflow */
    overflow: hidden;
}

.fc-v-event:not(.fc-event-start) {
    border-top-width: 0;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}

.fc-v-event:not(.fc-event-end) {
    border-bottom-width: 0;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

.fc-v-event.fc-event-selected:before {
    /* expand hit area */
    left: -10px;
    right: -10px;
}

.fc-v-event {

    /* resizer (mouse AND touch) */

}

.fc-v-event .fc-event-resizer-start {
    cursor: n-resize;
}

.fc-v-event .fc-event-resizer-end {
    cursor: s-resize;
}

.fc-v-event {

    /* resizer for MOUSE */

}

.fc-v-event:not(.fc-event-selected) .fc-event-resizer {
    height: 8px;
    height: var(--fc-event-resizer-thickness, 8px);
    left: 0;
    right: 0;
}

.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start {
    top: -4px;
    top: calc(var(--fc-event-resizer-thickness, 8px) / -2);
}

.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end {
    bottom: -4px;
    bottom: calc(var(--fc-event-resizer-thickness, 8px) / -2);
}

.fc-v-event {

    /* resizer for TOUCH (when event is "selected") */

}

.fc-v-event.fc-event-selected .fc-event-resizer {
    left: 50%;
    margin-left: -4px;
    margin-left: calc(var(--fc-event-resizer-dot-total-width, 8px) / -2);
}

.fc-v-event.fc-event-selected .fc-event-resizer-start {
    top: -4px;
    top: calc(var(--fc-event-resizer-dot-total-width, 8px) / -2);
}

.fc-v-event.fc-event-selected .fc-event-resizer-end {
    bottom: -4px;
    bottom: calc(var(--fc-event-resizer-dot-total-width, 8px) / -2);
}
.fc .fc-timegrid .fc-daygrid-body { /* the all-day daygrid within the timegrid view */
    z-index: 2; /* put above the timegrid-body so that more-popover is above everything. TODO: better solution */
}
.fc .fc-timegrid-divider {
    padding: 0 0 2px; /* browsers get confused when you set height. use padding instead */
}
.fc .fc-timegrid-body {
    position: relative;
    z-index: 1; /* scope the z-indexes of slots and cols */
    min-height: 100%; /* fill height always, even when slat table doesn't grow */
}
.fc .fc-timegrid-axis-chunk { /* for advanced ScrollGrid */
    position: relative /* offset parent for now-indicator-container */

}
.fc .fc-timegrid-axis-chunk > table {
    position: relative;
    z-index: 1; /* above the now-indicator-container */
}
.fc .fc-timegrid-slots {
    position: relative;
    z-index: 1;
}
.fc .fc-timegrid-slot { /* a <td> */
    height: 1.5em;
    border-bottom: 0 /* each cell owns its top border */
}
.fc .fc-timegrid-slot:empty:before {
    content: '\00a0'; /* make sure there's at least an empty space to create height for height syncing */
}
.fc .fc-timegrid-slot-minor {
    border-top-style: dotted;
}
.fc .fc-timegrid-slot-label-cushion {
    display: inline-block;
    white-space: nowrap;
}
.fc .fc-timegrid-slot-label {
    vertical-align: middle; /* vertical align the slots */
}
.fc {


    /* slots AND axis cells (top-left corner of view including the "all-day" text) */

}
.fc .fc-timegrid-axis-cushion,
.fc .fc-timegrid-slot-label-cushion {
    padding: 0 4px;
}
.fc {


    /* axis cells (top-left corner of view including the "all-day" text) */
    /* vertical align is more complicated, uses flexbox */

}
.fc .fc-timegrid-axis-frame-liquid {
    height: 100%; /* will need liquid-hack in FF */
}
.fc .fc-timegrid-axis-frame {
    overflow: hidden;
    display: flex;
    align-items: center; /* vertical align */
    justify-content: flex-end; /* horizontal align. matches text-align below */
}
.fc .fc-timegrid-axis-cushion {
    max-width: 60px; /* limits the width of the "all-day" text */
    flex-shrink: 0; /* allows text to expand how it normally would, regardless of constrained width */
}
.fc-direction-ltr .fc-timegrid-slot-label-frame {
    text-align: right;
}
.fc-direction-rtl .fc-timegrid-slot-label-frame {
    text-align: left;
}
.fc-liquid-hack .fc-timegrid-axis-frame-liquid {
    height: auto;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}
.fc .fc-timegrid-col.fc-day-today {
    background-color: rgba(255, 220, 40, 0.15);
    background-color: var(--fc-today-bg-color, rgba(255, 220, 40, 0.15));
}
.fc .fc-timegrid-col-frame {
    min-height: 100%; /* liquid-hack is below */
    position: relative;
}
.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame {
    height: auto;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}
.fc-media-screen .fc-timegrid-cols {
    position: absolute; /* no z-index. children will decide and go above slots */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0
}
.fc-media-screen .fc-timegrid-cols > table {
    height: 100%;
}
.fc-media-screen .fc-timegrid-col-bg,
.fc-media-screen .fc-timegrid-col-events,
.fc-media-screen .fc-timegrid-now-indicator-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}
.fc {

    /* bg */

}
.fc .fc-timegrid-col-bg {
    z-index: 2; /* TODO: kill */
}
.fc .fc-timegrid-col-bg .fc-non-business { z-index: 1 }
.fc .fc-timegrid-col-bg .fc-bg-event { z-index: 2 }
.fc .fc-timegrid-col-bg .fc-highlight { z-index: 3 }
.fc .fc-timegrid-bg-harness {
    position: absolute; /* top/bottom will be set by JS */
    left: 0;
    right: 0;
}
.fc {

    /* fg events */
    /* (the mirror segs are put into a separate container with same classname, */
    /* and they must be after the normal seg container to appear at a higher z-index) */

}
.fc .fc-timegrid-col-events {
    z-index: 3;
    /* child event segs have z-indexes that are scoped within this div */
}
.fc {

    /* now indicator */

}
.fc .fc-timegrid-now-indicator-container {
    bottom: 0;
    overflow: hidden; /* don't let overflow of lines/arrows cause unnecessary scrolling */
    /* z-index is set on the individual elements */
}
.fc-direction-ltr .fc-timegrid-col-events {
    margin: 0 2.5% 0 2px;
}
.fc-direction-rtl .fc-timegrid-col-events {
    margin: 0 2px 0 2.5%;
}
.fc-timegrid-event-harness {
    position: absolute /* top/left/right/bottom will all be set by JS */
}
.fc-timegrid-event-harness > .fc-timegrid-event {
    position: absolute; /* absolute WITHIN the harness */
    top: 0; /* for when not yet positioned */
    bottom: 0; /* " */
    left: 0;
    right: 0;
}
.fc-timegrid-event-harness-inset .fc-timegrid-event,
.fc-timegrid-event.fc-event-mirror,
.fc-timegrid-more-link {
    box-shadow: 0px 0px 0px 1px #fff;
    box-shadow: 0px 0px 0px 1px var(--fc-page-bg-color, #fff);
}
.fc-timegrid-event,
.fc-timegrid-more-link { /* events need to be root */
    font-size: .85em;
    font-size: var(--fc-small-font-size, .85em);
    border-radius: 3px;
}
.fc-timegrid-event { /* events need to be root */
    margin-bottom: 1px /* give some space from bottom */
}
.fc-timegrid-event .fc-event-main {
    padding: 1px 1px 0;
}
.fc-timegrid-event .fc-event-time {
    white-space: nowrap;
    font-size: .85em;
    font-size: var(--fc-small-font-size, .85em);
    margin-bottom: 1px;
}
.fc-timegrid-event-short .fc-event-main-frame {
    flex-direction: row;
    overflow: hidden;
}
.fc-timegrid-event-short .fc-event-time:after {
    content: '\00a0-\00a0'; /* dash surrounded by non-breaking spaces */
}
.fc-timegrid-event-short .fc-event-title {
    font-size: .85em;
    font-size: var(--fc-small-font-size, .85em)
}
.fc-timegrid-more-link { /* does NOT inherit from fc-timegrid-event */
    position: absolute;
    z-index: 9999; /* hack */
    color: inherit;
    color: var(--fc-more-link-text-color, inherit);
    background: #d0d0d0;
    background: var(--fc-more-link-bg-color, #d0d0d0);
    cursor: pointer;
    margin-bottom: 1px; /* match space below fc-timegrid-event */
}
.fc-timegrid-more-link-inner { /* has fc-sticky */
    padding: 3px 2px;
    top: 0;
}
.fc-direction-ltr .fc-timegrid-more-link {
    right: 0;
}
.fc-direction-rtl .fc-timegrid-more-link {
    left: 0;
}
.fc {

    /* line */

}
.fc .fc-timegrid-now-indicator-line {
    position: absolute;
    z-index: 4;
    left: 0;
    right: 0;
    border-style: solid;
    border-color: red;
    border-color: var(--fc-now-indicator-color, red);
    border-width: 1px 0 0;
}
.fc {

    /* arrow */

}
.fc .fc-timegrid-now-indicator-arrow {
    position: absolute;
    z-index: 4;
    margin-top: -5px; /* vertically center on top coordinate */
    border-style: solid;
    border-color: red;
    border-color: var(--fc-now-indicator-color, red);
}
.fc-direction-ltr .fc-timegrid-now-indicator-arrow {
    left: 0;

    /* triangle pointing right. TODO: mixin */
    border-width: 5px 0 5px 6px;
    border-top-color: transparent;
    border-bottom-color: transparent;
}
.fc-direction-rtl .fc-timegrid-now-indicator-arrow {
    right: 0;

    /* triangle pointing left. TODO: mixin */
    border-width: 5px 6px 5px 0;
    border-top-color: transparent;
    border-bottom-color: transparent;
}


:root {
    --fc-list-event-dot-width: 10px;
    --fc-list-event-hover-bg-color: #f5f5f5;
}
.fc-theme-standard .fc-list {
    border: 1px solid #ddd;
    border: 1px solid var(--fc-border-color, #ddd);
}
.fc {

    /* message when no events */

}
.fc .fc-list-empty {
    background-color: rgba(208, 208, 208, 0.3);
    background-color: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center; /* vertically aligns fc-list-empty-inner */
}
.fc .fc-list-empty-cushion {
    margin: 5em 0;
}
.fc {

    /* table within the scroller */
    /* ---------------------------------------------------------------------------------------------------- */

}
.fc .fc-list-table {
    width: 100%;
    border-style: hidden; /* kill outer border on theme */
}
.fc .fc-list-table tr > * {
    border-left: 0;
    border-right: 0;
}
.fc .fc-list-sticky .fc-list-day > * { /* the cells */
    position: sticky;
    top: 0;
    background: #fff;
    background: var(--fc-page-bg-color, #fff); /* for when headers are styled to be transparent and sticky */
}
.fc {

    /* only exists for aria reasons, hide for non-screen-readers */

}
.fc .fc-list-table thead {
    position: absolute;
    left: -10000px;
}
.fc {

    /* the table's border-style:hidden gets confused by hidden thead. force-hide top border of first cell */

}
.fc .fc-list-table tbody > tr:first-child th {
    border-top: 0;
}
.fc .fc-list-table th {
    padding: 0; /* uses an inner-wrapper instead... */
}
.fc .fc-list-table td,
.fc .fc-list-day-cushion {
    padding: 8px 14px;
}
.fc {


    /* date heading rows */
    /* ---------------------------------------------------------------------------------------------------- */

}
.fc .fc-list-day-cushion:after {
    content: "";
    clear: both;
    display: table; /* clear floating */
}
.fc-theme-standard .fc-list-day-cushion {
    background-color: rgba(208, 208, 208, 0.3);
    background-color: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));
}
.fc-direction-ltr .fc-list-day-text,
.fc-direction-rtl .fc-list-day-side-text {
    float: left;
}
.fc-direction-ltr .fc-list-day-side-text,
.fc-direction-rtl .fc-list-day-text {
    float: right;
}
/* make the dot closer to the event title */
.fc-direction-ltr .fc-list-table .fc-list-event-graphic { padding-right: 0 }
.fc-direction-rtl .fc-list-table .fc-list-event-graphic { padding-left: 0 }
.fc .fc-list-event.fc-event-forced-url {
    cursor: pointer; /* whole row will seem clickable */
}
.fc .fc-list-event:hover td {
    background-color: #f5f5f5;
    background-color: var(--fc-list-event-hover-bg-color, #f5f5f5);
}
.fc {

    /* shrink certain cols */

}
.fc .fc-list-event-graphic,
.fc .fc-list-event-time {
    white-space: nowrap;
    width: 1px;
}
.fc .fc-list-event-dot {
    display: inline-block;
    box-sizing: content-box;
    width: 0;
    height: 0;
    border: 5px solid #3788d8;
    border: calc(var(--fc-list-event-dot-width, 10px) / 2) solid var(--fc-event-border-color, #3788d8);
    border-radius: 5px;
    border-radius: calc(var(--fc-list-event-dot-width, 10px) / 2);
}
.fc {

    /* reset <a> styling */

}
.fc .fc-list-event-title a {
    color: inherit;
    text-decoration: none;
}
.fc {

    /* underline link when hovering over any part of row */

}
.fc .fc-list-event.fc-event-forced-url:hover a {
    text-decoration: underline;
}



.fc-theme-bootstrap a:not([href]) {
    color: inherit; /* natural color for navlinks */
}]]></template>
  <template type="public" title="tlg_grid_card.less" version_id="3010500" version_string="3.1.5"><![CDATA[{{ include('tlg_css_helper.less') }}

.gridCard {
  flex: 0 0 33.33%;
  padding: @xf-paddingMedium;
  min-width: 33.33%;
  align-self: stretch;
  position: relative;
  .m-transition();

  .fa {
    margin-right: 4px;
  }

  &.is-mod-selected {
    opacity: 0.5;
  }

  .groupCover--wrapper {
    position: relative;
    .badge {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 12px;
      .m-dropShadow();
    }
  }
}

// header
.gridCard--header {
  display: flex;
  background-color: @xf-contentHighlightBg;
  border-bottom: 1px solid @xf-borderColorLight;

  .gridCard--header--avatar {
    >* {
      .m-avatarSize(60px);
    }
  }

  .gridCard--header--main {
    flex: 1;
    margin-left: @xf-paddingMedium;
    margin-right: @xf-paddingMedium;
  }

  .gridCard--header--actions {
    min-width: 50px;
  }
}

.gridCard--container {
  height: 100%;
  background: @xf-contentBg;
  border-radius: @xf-borderRadiusSmall;
  display: flex;
  flex-direction: column;

  .m-dropShadow();

  .gridCard--cover {
    height: 100px;
    overflow: hidden;

    .m-borderTopRadius(@xf-borderRadiusSmall);

    >* {
      height: 100px;
      font-size: 30px;
    }
  }

  .groupAvatar--img {
    width: 100%;
    height: 100%;
  }

  > * {
    &:not(.gridCard--cover) {
      padding: @xf-paddingMedium;
    }
  }
}

.gridCard--body {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.gridCard--footer {
  border-top: 1px solid @xf-borderColorLight;
  display: flex;
  flex-direction: row;

  .groupItem--members {
    flex: 1;
    margin: 0 !important;
    overflow-x: hidden;
    .groups-displayFlex();

    li {
      + li {
        margin-left: -10px;
      }

      .avatar {
        border:2px solid #fff;
      }
    }
  }

  .button--groupJoin {
    align-self: flex-start;
  }
}

.gridCard--header--title {
  font-weight: normal;
  font-size: @xf-fontSizeLarge;
  display: flex;
  align-items: center;
  flex-direction: row;
  .badge {
    font-size: 0;
    width: 10px;
    height: 10px;
    box-sizing: border-box;
    border-radius: 5px;
    margin-left: @xf-paddingMedium;
  }
}

.groupItem--meta {
  font-size: @xf-fontSizeSmaller;
}

.gridCardFlexColLoop(5);

// 900px
@media(max-width: @xf-responsiveWide) {
  .gridCardList--flex--3-col {
    .gridCard {
      flex-basis: 50%;
      min-width: 50%;
    }
  }
}

// 650px
@media(max-width: @xf-responsiveMedium) {
  .gridCardList--flex--3-col,
  .gridCardList--flex--2-col {
    .gridCard {
      flex-basis: 100%;
      min-width: 100%;
    }
  }
}
// 480px
@media(max-width: @xf-responsiveNarrow) {
  .gridCardList--flex{
    .gridCard {
      flex-basis: 100%;
      min-width: 100%;
    }
  }
}

// Auto generate grid card columns class
.gridCardFlexColLoop(@n) when (@n > 0) {
  .gridCardList--flex--@{n}-col {
    .gridCard {
      flex-basis: (100% / @n);
      min-width: (100% / @n);
    }
  }

  .gridCardFlexColLoop((@n - 1));
}]]></template>
  <template type="public" title="tlg_grid_card_macros" version_id="2020900" version_string="2.2.9"><![CDATA[<xf:macro name="card"
          arg-avatarHtml="!"
          arg-cardTitle="!"
          arg-extraHeaderHtml="{{ null }}"
          arg-bodyHtml="{{ null }}"
          arg-footerHtml="{{ null }}"
          arg-actionHtml="{{ null }}"
          arg-coverHtml="{{ null }}"
          arg-config="{{ null }}">

    <xf:css src="tlg_grid_card.less" />
    <div class="gridCard js-inlineModContainer{{ !empty($config.cardClass) ? (' ' . $config.cardClass) : '' }}" id="{{ unique_id() }}">
        <div class="gridCard--container">
            <xf:if is="$coverHtml is not empty"><div class="gridCard--cover">{$coverHtml|raw}</div></xf:if>

            <div class="gridCard--header">
                <div class="gridCard--header--avatar">{$avatarHtml|raw}</div>

                <div class="gridCard--header--main">
                    {$cardTitle|raw}
                    <xf:if is="$extraHeaderHtml">{$extraHeaderHtml|raw}</xf:if>
                </div>

                <xf:if contentcheck="true">
                    <div class="gridCard--header--actions"><xf:contentcheck>{$actionHtml|raw}</xf:contentcheck></div>
                </xf:if>
            </div>

            <xf:if contentcheck="true">
                <div class="gridCard--body{{ !empty($config.bodyClass) ? (' ' . $config.bodyClass) : '' }}">
                    <xf:contentcheck>{$bodyHtml|raw}</xf:contentcheck>
                </div>
            </xf:if>

            <xf:if contentcheck="true">
                <div class="gridCard--footer"><xf:contentcheck>{$footerHtml|raw}</xf:contentcheck></div>
            </xf:if>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="tlg_group_about" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:title>{{ phrase('about') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">about</xf:set>
</xf:wrap>

<xf:if is="$group.AvatarAttachment">
    <xf:set var="$imageUrl">{$group.AvatarAttachment.Data.getThumbnailUrl(true)}</xf:set>
<xf:elseif is="property('publicMetadataLogoUrl')" />
    <xf:set var="$imageUrl">{{ base_url(property('publicMetadataLogoUrl'), true) }}</xf:set>
</xf:if>

<xf:macro template="metadata_macros" name="metadata"
          arg-description="{$group.short_description}"
          arg-shareUrl="{{ link('canonical:groups', $group) }}"
          arg-imageUrl="{$imageUrl}"
          arg-canonicalUrl="{{ link('canonical:groups', $group, {'page': $page}) }}" />

<xf:page option="ldJsonHtml">
    <xf:macro template="tlg_group_macros" name="structured_data" arg-group="{$group}"/>
</xf:page>

<xf:if contentcheck="true">
    <div class="block">
        <div class="block-container">
            <div class="block-body block-row">
                <xf:contentcheck><xf:macro template="custom_fields_macros" name="custom_fields_view"
                                           arg-type="tl_groups"
                                           arg-group="above_info"
                                           arg-onlyInclude="{$category.field_cache}"
                                           arg-set="{$group.custom_fields}" /></xf:contentcheck>
            </div>
        </div>
    </div>
</xf:if>

<div class="block">
    <div class="block-container">
        <h3 class="block-minorHeader">{{ phrase('description') }}</h3>
        <div class="block-row">
            <xf:css src="message.less" />
            <xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ true }}" />

            <div class="lbContainer" data-lb-id="group-{$group.group_id}"
                 data-message-selector=".js-groupDescription" data-xf-init="lightbox"
                 data-lb-universal="{$xf.options.lightBoxUniversal}">
                <article class="message message--groupDescription js-groupDescription"
                         data-content="js-option-{$option.question_option_id}"
                         data-author="{{ $group.User ? $group.User.username : $group.owner_username }}"
                         id="js-groupDescription-{$group.group_id}">
                    <div class="message-content js-messageContent">
                        <div class="message-userContent lbContainer js-lbContainer"
                             data-lb-id="option-{$option.question_option_id}"
                             data-lb-caption-desc="{{ $group.User ? $group.User.username : $group.owner_username }} &middot; {{ date_time($group.created_date) }}">
                            <article>
                                {{ bb_code($group.description, 'tl_group', $group) }}
                            </article>
                        </div>
                </article>
            </div>
        </div>
    </div>
</div>

<div class="block">
    <div class="block-container">
        <div class="block-body block-row">
            <dl class="pairs pairs--columns pairs--spaced pairs--fixedSmall">
                <dt>{{ phrase('category') }}</dt>
                <dd><a href="{{ link('group-categories', $group.Category) }}">{$group.Category.category_title}</a></dd>
            </dl>
            <!-- TLG_GROUP_ABOUT: BELOW_CATEGORY -->

            <xf:if is="$xf.options.enableTagging AND ($group.canEditTags() OR $group.tags)">
            <dl class="pairs pairs--columns pairs--spaced pairs--fixedSmall">
                <dt>{{ phrase('tags') }}</dt>
                <dd>
                    <xf:if is="$group.tags">
                        <xf:foreach loop="$group.tags" value="$tag">
                            <a href="{{ link('tags', $tag) }}" class="tagItem" dir="auto">{$tag.tag}</a>
                        </xf:foreach>
                        <xf:else />
                        {{ phrase('none') }}
                    </xf:if>

                    <xf:if is="$group.canEditTags()">
                        <a href="{{ link('groups/tags', $group) }}" class="u-concealed" data-xf-click="overlay"
                           data-xf-init="tooltip" title="{{ phrase('edit_tags')|for_attr }}">
                            <xf:fa icon="fa-pencil" />
                            <span class="u-srOnly">{{ phrase('edit') }}</span>
                        </a>
                    </xf:if>
                </dd>
            </dl>
            </xf:if>
            <!-- TLG_GROUP_ABOUT: BELOW_TAGS -->
        </div>
    </div>
</div>

<xf:if contentcheck="true">
    <div class="block">
        <div class="block-container">
            <div class="block-body block-row">
                <xf:contentcheck><xf:macro template="custom_fields_macros" name="custom_fields_view"
                                           arg-type="tl_groups"
                                           arg-group="below_info"
                                           arg-onlyInclude="{$category.field_cache}"
                                           arg-set="{$group.custom_fields}" /></xf:contentcheck>
            </div>
        </div>
    </div>
</xf:if>

<xf:if contentcheck="true">
<div class="block">
    <div class="block-container">
        <div class="block-body block-row">
            <xf:contentcheck><xf:macro template="custom_fields_macros" name="custom_fields_view"
                      arg-type="tl_groups"
                      arg-group="extra_tab"
                      arg-onlyInclude="{$category.field_cache}"
                      arg-set="{$group.custom_fields}" /></xf:contentcheck>
        </div>
    </div>
</div>
</xf:if>

<div class="block">
    <div class="block-container">
        <h3 class="block-minorHeader">{{ phrase('staff_member') }}</h3>
        <div class="block-separator"></div>
        <div class="block-body">
            <div class="block-row">
                <ol class="listInline">
                    <xf:foreach loop="$managers" value="$manager">
                        <xf:avatar user="{$manager.User}" size="s" defaultname="{$manager.username}" />
                    </xf:foreach>
                </ol>
            </div>
        </div>
    </div>
</div>

<xf:if contentcheck="true">
<div class="block">
    <div class="block-container">
        <h3 class="block-minorHeader">{{ phrase('tlg_members') }}</h3>
        <div class="block-separator"></div>
        <div class="block-body">
            <div class="block-row">
                <ol class="listInline">
                    <xf:contentcheck>
                        <xf:foreach loop="$members" value="$member"
                                    if="$member.isValidMember()">
                            <xf:avatar user="{$member.User}" size="s" defaultname="{$member.username}" />
                        </xf:foreach>
                    </xf:contentcheck>
                </ol>
            </div>
        </div>

        <div class="block-footer"><a href="{{ link('groups/members', $group) }}">{{ phrase('tlg_see_all_members') }}</a></div>
    </div>
</div>
</xf:if>]]></template>
  <template type="public" title="tlg_group_add" version_id="2020600" version_string="2.2.6"><![CDATA[<xf:title>{{ $group.exists() ? phrase('tlg_edit_group') : phrase('tlg_add_new_group') }}</xf:title>

<xf:breadcrumb source="$category.getBreadcrumbs()" />

<xf:form action="{{ $group.exists() ? link('groups/edit', $group) : link('group-categories/add', $category) }}"
         ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="name" value="{$group.name}"
                           maxlength="{{ max_length($group, 'name') }}"
                           rowtype="fullWidth noLabel"
                           class="input--title"
                           placeholder="{{ phrase('tlg_name_your_group') }}" />
            <!-- TLG_GROUP_ADD:BELOW_GROUP_NAME -->

            <xf:if contentcheck="true">
                <xf:contentcheck>
                    <xf:macro template="custom_fields_macros" name="custom_fields_edit"
                              arg-type="tl_groups"
                              arg-set="{$group.custom_fields}"
                              arg-group="above_info"
                              arg-editMode="{{ $group.getFieldEditMode() }}"
                              arg-onlyInclude="{$category.field_cache}" />
                </xf:contentcheck>

                <hr class="formRowSep" />
            </xf:if>

            <xf:textarearow name="short_description" value="{$group.short_description}"
                            maxlength="{{ max_length($group, 'short_description') }}"
                           rows="2" rowtype="fullWidth noLabel mergePrev"
                           placeholder="{{ phrase('tlg_enter_your_best_group_description_to_help_people_understand_your_group') }}" />
            <!-- TLG_GROUP_ADD:BELOW_SHORT_DESCRIPTION -->

            <xf:editorrow name="description" label="{{ phrase('description') }}"
                          rowtype="fullWidth noLabel mergePrev" value="{$group.description}" />
            <!-- TLG_GROUP_ADD:BELOW_DESCRIPTION -->

            <xf:if contentcheck="true">
                <xf:contentcheck>
                    <xf:macro template="custom_fields_macros" name="custom_fields_edit_groups"
                              arg-type="tl_groups"
                              arg-set="{$group.custom_fields}"
                              arg-groups="{{ ['below_info', 'extra_tab', 'new_tab'] }}"
                              arg-editMode="{{ $group.getFieldEditMode() }}"
                              arg-onlyInclude="{$category.field_cache}" />
                </xf:contentcheck>
            </xf:if>

            <xf:if is="!$group.group_id">
                <hr class="formRowSep" />
                <xf:macro template="tlg_group_privacy_update"
                          name="group_privacy_rows" arg-group="{$group}" arg-category="{$category}"/>
                <!-- TLG_GROUP_ADD:BELOW_PRIVACY -->
            </xf:if>

            <xf:if contentcheck="true">
                <hr class="formRowSep" />
                <xf:contentcheck>
                    <xf:if is="$xf.options.tl_groups_enableLanguage > 0">
                        <xf:selectrow name="language_code" label="{{ phrase('language') }}"
                                      explain="{{ phrase('tlg_language_code_explain') }}"
                                      value="{$group.language_code}">
                            <xf:foreach loop="$languages" value="$languageName" key="$languageCode">
                                <xf:option value="{$languageCode}">{$languageName}</xf:option>
                            </xf:foreach>
                        </xf:selectrow>
                    </xf:if>
                    <xf:if is="$canEditTags">
                        <xf:macro template="tag_macros" name="edit_rows" arg-uneditableTags="{{ $uneditableTags ?: null }}"
                                  arg-editableTags="{{ $editableTags ?: null }}" />
                    </xf:if>
                </xf:contentcheck>
            </xf:if>
        </div>

        <xf:submitrow icon="save" />
    </div>

    <xf:if is="!$group.group_id">
        <xf:hiddenval name="category_id">{$category.category_id}</xf:hiddenval>
    </xf:if>
</xf:form>]]></template>
  <template type="public" title="tlg_group_add_chooser" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_add_group_in...') }}</xf:title>

<xf:macro name="category_list" arg-children="{$categoryTree}" arg-extras="{$categoryExtras}" />

<xf:macro name="category_list" arg-children="!" arg-extras="!" arg-depth="0">
    <xf:foreach loop="$children" key="$id" value="$child">
        <xf:macro name="category_list_entry"
                  arg-category="{$child.record}"
                  arg-extras="{$extras.{$id}}"
                  arg-children="{$child.children}"
                  arg-childExtras="{$extras}"
                  arg-depth="{$depth}"
        />
    </xf:foreach>
</xf:macro>

<xf:macro name="category_list_entry" arg-category="!" arg-extras="!" arg-children="!" arg-childExtras="!" arg-depth="0">
    <xf:if is="$category.canAddGroup()">
        <xf:macro name="{{ $depth == 0 ? 'category_list_entry_add_level_0' : 'category_list_entry_add' }}"
                  arg-category="{$category}"
                  arg-extras="{$extras}"
                  arg-children="{$children}"
                  arg-childExtras="{$childExtras}"
                  arg-depth="{$depth}"
        />
        <xf:else />
        <xf:macro name="{{ $depth == 0 ? 'category_list_entry_no_add_level_0' : 'category_list_entry_no_add' }}"
                  arg-category="{$category}"
                  arg-extras="{$extras}"
                  arg-children="{$children}"
                  arg-childExtras="{$childExtras}"
                  arg-depth="{$depth}"
        />
    </xf:if>
</xf:macro>

<xf:macro name="category_list_entry_no_add_level_0"
          arg-category="!"
          arg-extras="!"
          arg-children="!"
          arg-childExtras="!"
          arg-depth="0"
>
    <div class="block block--treeEntryChooser">
        <div class="block-container">
            <h2 class="block-header">
                {$category.category_title}
                <xf:if is="$category.description">
					<span class="block-desc">
						{$category.description|strip_tags}
					</span>
                </xf:if>
            </h2>
            <div class="block-body">
                <xf:macro name="category_list"
                          arg-children="{$children}"
                          arg-extras="{$childExtras}"
                          arg-depth="{{ $depth + 1 }}"
                />
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="category_list_entry_add_level_0"
          arg-category="!"
          arg-extras="!"
          arg-children="!"
          arg-childExtras="!"
          arg-depth="0"
>
    <div class="block block--treeEntryChooser">
        <div class="block-container">
            <xf:macro name="category_list_entry_add"
                      arg-category="{$category}"
                      arg-extras="{$extras}"
                      arg-children="{$children}"
                      arg-childExtras="{$childExtras}"
                      arg-depth="{$depth}"
            />
        </div>
    </div>
</xf:macro>

<xf:macro name="category_list_entry_add"
          arg-category="!"
          arg-extras="!"
          arg-children="!"
          arg-childExtras="!"
          arg-depth="0"
>
    <div class="block-row block-row--clickable block-row--separated fauxBlockLink">
        <div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }}">
            <div class="contentRow-main">
                <h2 class="contentRow-title">
                    <a href="{{ link('group-categories/add', $category) }}" class="fauxBlockLink-blockLink">
                        {$category.category_title}
                    </a>
                </h2>
                <xf:if is="$category.description">
                    <div class="contentRow-minor contentRow-minor--singleLine">
                        {$category.description|strip_tags}
                    </div>
                </xf:if>
            </div>
            <div class="contentRow-suffix">
                <dl class="pairs pairs--rows pairs--rows--centered">
                    <dt>{{ phrase('tlg_groups') }}</dt>
                    <dd>{$extras.group_count|number_short}</dd>
                </dl>
            </div>
        </div>
    </div>
    <xf:macro name="category_list"
              arg-children="{$children}"
              arg-extras="{$childExtras}"
              arg-depth="{{ $depth + 1 }}"
    />
</xf:macro>

<xf:macro name="category_list_entry_no_add"
          arg-category="!"
          arg-extras="!"
          arg-children="!"
          arg-childExtras="!"
          arg-depth="0"
>
    <div class="block-row block-row--separated">
        <div class="contentRow contentRow--alignMiddle{{ $depth > 1 ? ' u-depth' . ($depth - 1) : '' }} is-disabled">
            <div class="contentRow-main">
                <h2 class="contentRow-title">
                    {$category.category_title}
                </h2>
                <div class="contentRow-minor contentRow-minor--singleLine">
                    {{ phrase('tlg_you_may_not_add_groups_to_this_category') }}
                </div>
            </div>
            <div class="contentRow-suffix">
                <dl class="pairs pairs--rows pairs--rows--centered">
                    <dt>{{ phrase('tlg_groups') }}</dt>
                    <dd>{$extras.group_count|number_short}</dd>
                </dl>
            </div>
        </div>
    </div>
    <xf:macro name="category_list"
              arg-children="{$children}"
              arg-extras="{$childExtras}"
              arg-depth="{{ $depth + 1 }}"
    />
</xf:macro>]]></template>
  <template type="public" title="tlg_group_cover_reposition" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">about</xf:set>
    <xf:set var="$coverEditor">1</xf:set>
</xf:wrap>]]></template>
  <template type="public" title="tlg_group_delete" version_id="2020000" version_string="2.2.0"><![CDATA[<xf:title>{{ phrase('confirm_deletion') }}</xf:title>

<xf:if is="$breadcrumbs">
    <xf:breadcrumb source="{$breadcrumbs}" />
</xf:if>

<xf:form action="{$confirmUrl}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:macro
                template="helper_action"
                name="delete_type"
                arg-canHardDelete="{$entity.canDelete('hard')}" />
        </div>

        <xf:submitrow submit="{{ phrase('delete') }}" icon="delete" rowtype="simple" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_group_discussions" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_discussions') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">discussions</xf:set>
</xf:wrap>

<div class="block">
    <xf:if contentcheck="true">
        <div class="block-outer">
            <div class="block-outer-opposite">
                <div class="buttonGroup-buttonWrapper">
                    <div class="buttonGroup">
                        <xf:contentcheck>
                            <xf:if is="$group.canAddForum()">
                                <xf:button href="{{ link('groups/add-forum', $group) }}"
                                           overlay="true"
                                           icon="add"
                                           class="button--link">{{ phrase('tlg_add_forum') }}</xf:button>
                            </xf:if>
                        </xf:contentcheck>
                    </div>
                </div>
            </div>
        </div>
    </xf:if>
</div>

<xf:macro template="forum_list" name="node_list" arg-children="{$nodeTree}" arg-extras="{$nodeExtras}" />]]></template>
  <template type="public" title="tlg_group_event_calendar" version_id="3010900" version_string="3.1.9"><![CDATA[<xf:title>{{ phrase('tlg_events') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">events</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title">
        <h2 class="p-title-value">{{ phrase('tlg_events') }}</h2>
        <xf:if contentcheck="true">
            <div class="p-title-pageAction">
                <xf:contentcheck>
                    <xf:if is="$group.canAddEvent()">
                        <xf:button href="{{ link('group-events/add', null, {'group_id': $group.group_id}) }}"
                                   icon="write"
                                   class="button--link">{{ phrase('tlg_add_event') }}</xf:button>
                    </xf:if>
                    <xf:button href="{{ link('groups/events', $group, {'view': 'list'}) }}"
                               class="button--link">{{ phrase('tlg_event_list_compact') }}</xf:button>
                </xf:contentcheck>
            </div>
        </xf:if>
    </div>
</div>

<xf:css src="tlg_full_calendar.css" />
<xf:js src="Truonglv/Groups/Libs/fullCalendar/main.js" min="1" addon="Truonglv/Groups" />
<xf:js src="Truonglv/Groups/event.js" min="1" addon="Truonglv/Groups" />

<div class="block">
    <div class="block-container">
        <div class="block-row">
            <div data-xf-init="tlg-event--fullcalendar"
                 data-source="{{ link('group-events/calendar', null, {'group_id': $group.group_id}) }}"
                 data-button-today="{{ phrase('tlg_event_button_today')|for_attr }}"
                 data-button-month="{{ phrase('tlg_event_button_month')|for_attr }}"
                 data-button-week="{{ phrase('tlg_event_button_week')|for_attr }}"
                 data-button-day="{{ phrase('tlg_event_button_day')|for_attr }}"
                 data-button-list="{{ phrase('tlg_event_button_list')|for_attr }}"
            ></div>
        </div>
    </div>
</div>]]></template>
  <template type="public" title="tlg_group_events" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:title>{{ phrase('tlg_events') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">events</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title">
        <h2 class="p-title-value">{{ phrase('tlg_events') }}</h2>
        <xf:if contentcheck="true">
            <div class="p-title-pageAction">
                <xf:contentcheck>
                    <xf:if is="$group.canAddEvent()">
                        <xf:button href="{{ link('group-events/add', null, {'group_id': $group.group_id}) }}"
                                   icon="write"
                                   class="button--link">{{ phrase('tlg_add_event') }}</xf:button>
                    </xf:if>
                    <xf:button href="{{ link('groups/events', $group, {'view': 'calendar'}) }}"
                               class="button--link">{{ phrase('tlg_event_calendar') }}</xf:button>
                </xf:contentcheck>
            </div>
        </xf:if>
    </div>
</div>

<xf:js src="Truonglv/Groups/event.js" addon="Truonglv/Groups" min="1" />
<xf:css src="tlg_event_style.less" />

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
     data-type="tl_group_event"
     data-href="{{ link('inline-mod') }}">
    <div class="block-outer">
        <h2 class="block-tabHeader tabs--standalone tabs hScroller"
            data-xf-init="tabs h-scroller"
            data-panes=".js-eventTabPanes"
            data-state="replace"
            role="tablist" style="margin-bottom: 10px">
			<span class="hScroller-scroll">
                <a href="{{ link('groups/events', $group, {'filter': 'ongoing', 'view': 'list'}) }}"
                   role="tab"
                   class="tabs-tab{{ $tabFilter == 'ongoing' ? ' is-active' : '' }}">
                    <xf:fa icon="fa-truck" /> {{ phrase('tlg_event_ongoing') }}</a>
                <a href="{{ link('groups/events', $group, {'filter': 'upcoming', 'view': 'list'}) }}"
                   role="tab"
                   class="tabs-tab{{ $tabFilter == 'upcoming' ? ' is-active' : '' }}">
                    <xf:fa icon="fa-calendar" /> {{ phrase('tlg_event_upcoming') }}</a>
                <a href="{{ link('groups/events', $group, {'filter': 'closed', 'view': 'list'}) }}"
                   role="tab"
                   class="tabs-tab{{ $tabFilter == 'closed' ? ' is-active' : '' }}">
                    <xf:fa icon="fa-lock" /> {{ phrase('tlg_event_closed') }}</a>
            </span>
        </h2>
    </div>

    <ul class="tabPanes js-eventTabPanes">
        <li class="is-active" role="tabpanel">
            <div class="block-container">
                <div class="block-body">
                    <xf:foreach loop="$events" value="$event">
                        <div class="block-row">
                            <xf:macro name="event_item" arg-event="{$event}" />
                        </div>
                    <xf:else />
                        <div class="blockMessage">{{ phrase('tlg_there_are_no_events_to_display') }}</div>
                    </xf:foreach>
                </div>
            </div>
        </li>
    </ul>

    <div class="block-outer block-outer--after">
        <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                    linkdata="{$group}"
                    link="groups/events" params="{$filters}"
                    wrapperclass="block-outer-main" />
    </div>
</div>

<xf:macro name="event_item" arg-event="!" arg-showGroup="{{ false }}">
    <xf:set var="$dayNames" value="{{ {
        '0': phrase('day_sunday'),
        '1': phrase('day_monday'),
        '2': phrase('day_tuesday'),
        '3': phrase('day_wednesday'),
        '4': phrase('day_thursday'),
        '5': phrase('day_friday'),
        '6': phrase('day_saturday')
    } }}" />

    <div class="contentRow">
        <div class="contentRow-figure">
            <div class="eventItem-date">
                <span class="eventItem-date--day">{{ date($event.begin_date, 'd/m') }}</span>
                <span class="eventItem-date--dayName u-muted">{$dayNames.{{ date($event.begin_date, 'w') }}}</span>
            </div>
        </div>

        <div class="contentRow-main">
            <xf:if is="$event.canIntend() && !$event.isIntended()">
                <div class="contentRow-extra">
                    <xf:button href="{{ link('group-events/intend', $event, {'quick': 1}) }}"
                               class="button--link">{{ phrase('tlg_register_now') }}</xf:button>
                </div>
            </xf:if>
            <h3 class="contentRow-title">
                <a href="{{ link('group-events', $event) }}">{$event.event_name}</a>
            </h3>

            <div class="contentRow-snippet">{{ snippet($event.FirstComment.message, 300, {'stripQuote': true}) }}</div>

            <div class="contentRow-minor contentRow-minor--hideLinks">
                <ul class="listInline listInline--bullet">
                    <li>
                        <xf:username user="{$event.User}" defaultname="{$event.username}" />
                    </li>
                    <li>
                        <span>{{ phrase('tlg_event_x_attendees', {'count': $event.attendee_count}) }}</span>
                    </li>
                    <xf:if is="$event.max_attendees > 0">
                        <li>
                            <span>{{ phrase('tlg_event_remaining_x_slots', {'count': $event.getRemainingAttendeesSlots()}) }}</span>
                        </li>
                    </xf:if>
                    <xf:if is="$showGroup">
                        <li>
                            <span>{{ phrase('tlg_in_group:') }}</span>
                            <a href="{{ link('groups', $event.Group) }}" data-xf-init="preview"
                               data-preview-url="{{ link('groups/preview', $event.Group) }}">{$event.Group.name}</a>
                        </li>
                    </xf:if>
                </ul>
            </div>
        </div>
    </div>
</xf:macro>
]]></template>
  <template type="public" title="tlg_group_feeds" version_id="2020300" version_string="2.2.3"><![CDATA[<xf:title>{{ phrase('tlg_your_feeds') }}</xf:title>

<div class="block block--messages">
    <div class="block-outer">
        <h2 class="block-tabHeader tabs--standalone tabs hScroller">
            <span class="hScroller-scroll">
                <a href="{{ link('groups/browse/feeds') }}" class="tabs-tab{{ ($tabSelected == 'posts') ? ' is-active' : '' }}"
                   role="tab" aria-controls="posts">{{ phrase('posts') }}</a>
                <xf:if is="$supportThreads">
                    <a href="{{ link('groups/browse/feeds', null, {'tab': 'threads'}) }}"
                       class="tabs-tab{{ ($tabSelected == 'threads') ? ' is-active' : '' }}" role="tab"
                       aria-controls="threads">{{ phrase('threads') }}</a>
                </xf:if>
                <a href="{{ link('groups/browse/feeds', null, {'tab': 'events'}) }}"
                   class="tabs-tab{{ ($tabSelected == 'events') ? ' is-active' : '' }}"
                   role="tab" aria-controls="events">{{ phrase('tlg_events') }}</a>
            </span>
        </h2>
    </div>

    <div class="block-container">
        <div class="block-body">
            <xf:if is="$tabSelected == 'threads'">
                <xf:macro name="tab_threads" arg-records="{$records}" />
            <xf:elseif is="$tabSelected == 'events'" />
                <xf:macro name="tab_events" arg-records="{$records}" />
            <xf:else />
                <xf:macro name="tab_posts" arg-records="{$records}" />
            </xf:if>
        </div>
    </div>

    <div class="block-outer block-outer--after">
        <xf:pagenav page="{$page}" perpage="{$perPage}"
                    total="{$total}" link="groups/browse/feeds"
                    data="{'tab': $tabSelected}"/>
        <xf:showignored wrapperclass="block-outer-opposite" />
    </div>
</div>

<xf:macro name="tab_posts" arg-records="!">
    <div class="lbContainer"
         data-xf-init="lightbox"
         data-message-selector=".js-post"
         data-lb-id="feeds-{$xf.visitor.user_id}"
         data-lb-universal="{$xf.options.lightBoxUniversal}">
        <xf:foreach loop="$records" value="$post">
            <xf:macro template="tlg_post_macros" arg-showGroup="{{ true }}"
                      name="post" arg-post="{$post}" arg-showLoader="{{ true }}" />
            <xf:else />
                <div class="block-row">{{ phrase('tlg_there_are_no_posts_to_display') }}</div>
        </xf:foreach>
    </div>
</xf:macro>

<xf:macro name="tab_threads" arg-records="!">
    <xf:foreach loop="$records" value="$thread">
        <div class="block-row block-row--separated {{ $thread.isIgnored() ? 'is-ignored' : '' }}"
             data-author="{{ $thread.User.username ?: $thread.username }}">
            <div class="contentRow {{ !$thread.isVisible() ? 'is-deleted' : '' }}">
                <span class="contentRow-figure">
                    <xf:avatar user="{$thread.User}" size="s" defaultname="{$thread.username}" />
                </span>
                <div class="contentRow-main">
                    <h3 class="contentRow-title">
                        <a href="{{ link('threads', $thread) }}">{{ prefix('thread', $thread) . $thread.title }}</a>
                    </h3>

                    <div class="contentRow-snippet">{{ snippet($thread.FirstPost.message, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

                    <div class="contentRow-minor contentRow-minor--hideLinks">
                        <ul class="listInline listInline--bullet">
                            <li><xf:username user="{$thread.User}" defaultname="{$thread.username}" /></li>
                            <li>{{ phrase('thread') }}</li>
                            <li><xf:date time="{$thread.post_date}" /></li>
                            <li>{{ phrase('replies:') }} {$thread.reply_count|number}</li>
                            <li>{{ phrase('forum:') }} <a href="{{ link('forums', $thread.Forum) }}">{$thread.Forum.title}</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </xf:foreach>
</xf:macro>

<xf:macro name="tab_events" arg-records="!">
    <xf:css src="tlg_event_style.less"/>
    <ul class="listPlain">
        <xf:foreach loop="$records" value="$event">
            <div class="block-row eventItem-row">
                <xf:macro name="event_item"
                          template="tlg_group_events" arg-showGroup="{{ true }}" arg-event="{$event}" />
            </div>
        </xf:foreach>
    </ul>
</xf:macro>]]></template>
  <template type="public" title="tlg_group_field" version_id="3000800" version_string="3.0.8"><![CDATA[<xf:title>{$group.name}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">field_{$fieldId}</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title"><h2 class="p-title-value">{$fieldDefinition.title}</h2></div>
    <div class="p-description">{$fieldDefinition.description}</div>
</div>

<div class="block">
    <div class="block-container">
        <div class="block-body block-row">
            <xf:macro template="custom_fields_macros" name="custom_field_value"
                      arg-definition="{$fieldDefinition}"
                      arg-value="{$fieldValue}" />
        </div>
    </div>
</div>]]></template>
  <template type="public" title="tlg_group_form_upload" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{$fieldLabel}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">about</xf:set>
</xf:wrap>

<xf:form action="{$formAction}" ajax="true" upload="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:uploadrow name="file"
                          label="{$fieldLabel}"
                          explain="{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
                                'width': $baseWidth,
                                'height': $baseHeight
                          }) }}" />

            <xf:if is="$canDelete">
                <xf:checkboxrow>
                    <xf:option name="delete">{{ phrase('tlg_delete_existing_image') }}</xf:option>
                </xf:checkboxrow>
            </xf:if>
        </div>

        <xf:submitrow submit="{{ phrase('upload') }}" rowtype="simple" icon="upload" />
    </div>
</xf:form>
]]></template>
  <template type="public" title="tlg_group_index" version_id="2010700" version_string="2.1.7"><![CDATA[<xf:title>{{ phrase('tlg_groups') }}</xf:title>

<xf:macro template="metadata_macros" name="canonical_url"
          arg-canonicalUrl="{{ link('canonical:groups', null, {'page': $page}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('tlg_groups'): {'search_type': 'tl_group'}
} }}" />

<xf:pageaction if="$xf.visitor.canAddGroup()">
    <xf:button href="{{ link('groups/add') }}" class="button--cta"
               icon="write"
               overlay="true">{{ phrase('tlg_add_new_group...') }}</xf:button>
</xf:pageaction>

<xf:macro template="tlg_group_list_macros"
          name="group_list_block"
          arg-baseUrl="groups"
          arg-groups="{$groups}"
          arg-page="{$page}"
          arg-perPage="{$perPage}"
          arg-total="{$total}"
          arg-filters="{$filters}"
          arg-creatorFilter="{$creatorFilter}"
          arg-canInlineMod="{$canInlineMod}"
          arg-showMembers="{{ true }}"
          arg-columnsPerRow="{{ 2 }}" />

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
    <xf:macro template="tlg_category_list_macros" name="simple_list_block"
              arg-categoryTree="{$categoryTree}"
              arg-categoryExtras="{$categoryExtras}" />
</xf:sidenav>

<xf:widgetpos id="tlg_group_index" position="sidenav"/>]]></template>
  <template type="public" title="tlg_group_list.less" version_id="3010700" version_string="3.1.7"><![CDATA[{{ include('tlg_css_helper.less') }}

.group--counterList {
  justify-content: space-between;
  .groups-displayFlex();
}

.groupListBlock {
  .groupList {
    margin-right: -@xf-paddingMedium + 1;
    margin-left: -@xf-paddingMedium + 1;
    flex-wrap: wrap;
  }

  &.groupListBlock--empty {
    .block-container {
        margin-bottom: @xf-paddingMedium;
      }
  }

  .block-filterBar {
    border-bottom-width: 0;
  }
}

.groupCover--wrapper {
  position: relative;

  .groupCoverFrame {
    height: 100%;
    font-size: 30px;
  }

  .groupCover--inlineMod {
    .m-dropShadow();
    background: rgba(0,0,0,.6);
    color: #ecf0ff;
    border-radius: 50%;

    position: absolute;
    top: @xf-paddingMedium;
    left: @xf-paddingMedium;
    width: 24px;
    height: 24px;
    font-size: 15px;
    padding-top: 2px;
    padding-left: 2px;
    text-align: center;
  }

  .iconic--noLabel {
    &:hover {
      cursor: pointer;
      input {
        + i:before {
          color: #FFFFFF;
        }
      }
    }
  }
}
.widget-groups {
  .contentRow-figure {
    .groupAvatar {
      .m-avatarSize(24px);
    }
  }
}

// 650px
@media(max-width: @xf-responsiveMedium) {
  .groupListBlock {
    border-radius: 0;
    border-left: none;
    border-right: none;

    .groupList {
      margin-right: -@xf-paddingLarge;
      margin-left: -@xf-paddingLarge;

      .gridCard {
        padding-left: 0;
        padding-right: 0;
      }
    }

    .gridCard--container {
      border-radius: 0;
      .gridCard--cover {
        .m-borderTopRadius(0);
      }
    }
  }
}
// 480px
@media(max-width: @xf-responsiveNarrow) {
}
]]></template>
  <template type="public" title="tlg_group_list_macros" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:macro name="group_list_block"
          arg-baseUrl="!"
          arg-groups="!"
          arg-canInlineMod="!"
          arg-page="!"
          arg-perPage="!"
          arg-total="!"
          arg-linkData="{{ null }}"
          arg-category="{{ null }}"
          arg-filters="{{ null }}"
          arg-creatorFilter="{{ null }}"
          arg-showFilters="{{ true }}"
          arg-showMembers="{{ false }}"
          arg-columnsPerRow="{{ 3 }}"
          arg-filterBarMacroName="tlg_filter_bar_macros::group_list_filter_bar">
    <xf:if is="$canInlineMod">
        <xf:js src="xf/inline_mod.js" min="1" />
    </xf:if>

    <xf:css src="tlg_group_list.less" />

    <div class="block groupListBlock{{ $total > 0 ? '' : ' groupListBlock--empty' }}" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
         data-type="tl_group"
         data-href="{{ link('inline-mod') }}">
        <div class="block-outer"><xf:trim>

            <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                        link="{$baseUrl}" params="{$filters}" data="{$linkData}"
                        wrapperclass="block-outer-main" />

            <xf:if contentcheck="true">
                <div class="block-outer-opposite">
                    <div class="buttonGroup">
                        <xf:contentcheck>
                            <xf:if is="$canInlineMod">
                                <xf:macro template="inline_mod_macros" name="button" />
                            </xf:if>
                        </xf:contentcheck>
                    </div>
                </div>
            </xf:if>

        </xf:trim></div>

        <xf:if is="$showFilters">
            <div class="block-container">
                <xf:macro name="{$filterBarMacroName}"
                          arg-filters="{$filters}"
                          arg-baseLinkPath="{$baseUrl}"
                          arg-category="{$category}"
                          arg-creatorFilter="{$creatorFilter}" />
            </div>
        </xf:if>

        <xf:if is="$groups is not empty">
            <xf:macro name="group_list"
                      arg-columnsPerRow="{$columnsPerRow}"
                      arg-canInlineMod="{$canInlineMod}"
                      arg-showMembers="{$showMembers}"
                      arg-groups="{$groups}" />
        <xf:elseif is="$filters AND $showFilters" />
            <div class="blockMessage">{{ phrase('tlg_there_no_groups_matching_your_filters') }}</div>
        <xf:else />
            <div class="blockMessage">{{ phrase('tlg_no_groups_have_been_created_yet') }}</div>
        </xf:if>

        <div class="block-outer block-outer--after">
            <xf:pagenav
                    page="{$page}" perpage="{$perPage}" total="{$total}"
                    link="{$baseUrl}" data="{$linkData}" params="{$filters}"
                    wrapperclass="block-outer-main" />
            <xf:showignored wrapperclass="block-outer-opposite" />
        </div>
    </div>
</xf:macro>

<xf:macro name="group_list"
          arg-groups="!"
          arg-canInlineMod="{{ false }}"
          arg-showMembers="{{ false }}"
          arg-columnsPerRow="{{ 3 }}"
          arg-showSettings="{{ true }}">

    <xf:if is="$groups is not empty">
        <div class="groupList h-dFlex h-dFlex--wrap gridCardList--flex--{$columnsPerRow}-col" data-xf-init="tl_groups_list">
            <xf:foreach loop="$groups" value="$group">
                <xf:macro name="group"
                          arg-showInlineMod="{$canInlineMod}"
                          arg-showMembers="{$showMembers}"
                          arg-showSettings="{$showSettings}"
                          arg-group="{$group}" />
            </xf:foreach>
        </div>
    </xf:if>
</xf:macro>

<xf:macro name="group_simple" arg-group="!" arg-showCategory="{{ true }}" arg-showJoinButton="{{ false }}">
    <xf:css src="tlg_style.less" />

    <div class="contentRow">
        <div class="contentRow-figure">
            <xf:callback class="Truonglv\Groups\Callback"
                         method="renderAvatar"
                         params="{'group': $group}" />
        </div>

        <div class="contentRow-main contentRow-main--close">
            <a href="{{ link('groups', $group) }}"
               data-preview-url="{{ link('groups/preview', $group) }}"
               data-xf-init="preview-tooltip">{$group.name}</a>

            <div class="contentRow-minor contentRow-minor--hideLinks">
                <ul class="listInline listInline--bullet">
                    <li><xf:macro template="tlg_group_macros" name="privacy_html" arg-group="{$group}" /></li>
                    <li>{{ phrase('tlg_x_members', {'count': $group.member_count|number_short}) }}</li>
                </ul>
            </div>
            <xf:if is="$showCategory">
                <div class="contentRow-minor contentRow-minor--hideLinks">
                    <a href="{{ link('group-categories', $group.Category) }}">{$group.Category.category_title}</a>
                </div>
            </xf:if>
            <xf:if is="$showJoinButton AND $group.canJoin()">
                <xf:button href="{{ link('groups/join', $group) }}" overlay="true"
                           class="button--small button--icon button--link">
                    <xf:fa icon="fas fa-sign-in" />
                    {{ phrase('tlg_join_group') }}
                </xf:button>
            </xf:if>
        </div>
    </div>
</xf:macro>

<xf:macro name="group" arg-group="!" arg-showInlineMod="{{ false }}"
          arg-showSettings="{{ true }}"
          arg-showMembers="{{ false }}">
    <xf:css src="tlg_group_list.less" />
    <xf:css src="tlg_style.less" />

    <xf:js src="Truonglv/Groups/group.js" addon="Truonglv/Groups" min="1" />

    <xf:set var="$coverHtml">
        <div class="groupCover--wrapper">
            <xf:callback class="Truonglv\Groups\Callback"
                                          method="renderCover"
                                          params="{'group': $group, 'forceHeight': 100}" />

            <xf:if is="$showInlineMod">
                <span class="groupCover--inlineMod">
                    <xf:checkbox standalone="true">
                        <xf:option name="ids[]" value="{$group.group_id}"
                                   data-xf-init="tooltip"
                                   title="{{ phrase('select_for_moderation')|for_attr }}"
                                   hiddenLabel="true"
                                   class="js-inlineModToggle" />
                    </xf:checkbox>
                </span>
            </xf:if>
            <xf:if is="!$group.isVisible()">
                <span class="badge badge--highlighted">{$group.getGroupStatePhrase()}</span>
            </xf:if>
        </div>
    </xf:set>

    <xf:set var="$avatarHtml"><xf:callback class="Truonglv\Groups\Callback"
                                           method="renderAvatar"
                                           params="{'group': $group, 'full': false}" /></xf:set>

    <xf:set var="$actionHtml">
        <xf:if is="$xf.visitor.user_id > 0 AND $showSettings">
            <xf:macro template="tlg_group_macros" name="settings" arg-group="{$group}" />
        </xf:if>
    </xf:set>

    <xf:set var="$cardTitle"><xf:trim>
        <a href="{{ link('groups', $group) }}" class="gridCard--header--title"
           data-tp-primary="on">
            <span>{$group.name}</span>
            <xf:if is="$group.isUnread()">
                <span class="badge badge--highlighted"></span>
            </xf:if>
        </a>
    </xf:trim></xf:set>
    <xf:set var="$config" value="{{{ 'cardClass': $group.group_state . ' ' . $group.privacy}}}" />

    <xf:set var="$extraHeaderHtml"><xf:trim>
        <ul class="listInline u-muted groupItem--meta">
            <li><xf:macro template="tlg_group_macros" name="privacy_html" arg-group="{$group}" /></li>
        </ul>

        <ul class="listInline group--counterList u-muted">
            <li class="groupItem-stat groupItem-stat--viewCount">
                <xf:fa icon="fa-eye" />
                {$group.view_count|number_short}
            </li>
            <li class="groupItem-stat groupItem-stat--memberCount">
                <xf:fa icon="fa-users" />
                {$group.member_count|number_short}
            </li>
            <xf:if is="$xf.options.tl_groups_enableForums">
                <li class="groupItem-stat groupItem-stat--discussionCount">
                    <xf:fa icon="fa-comment" />
                    {$group.discussion_count|number_short}
                </li>
            </xf:if>
            <li class="groupItem-stat groupItem-stat--eventCount">
                <xf:fa icon="fa-calendar" />
                {$group.event_count|number_short}
            </li>
        </ul>
    </xf:trim></xf:set>

    <xf:set var="$bodyHtml">
        <div class="groupList--description u-muted">{$group.short_description}</div>
    </xf:set>

    <xf:set var="$footerHtml">
        <xf:if is="$xf.options.tl_groups_maxMembersInCard > 0 && $showMembers">
            <ol class="listInline groupItem--members">
                <xf:foreach loop="$group.CardMembers" value="$member">
                    <li><xf:avatar user="$member.User" size="xs" defaultname="{$member.username}" /></li>
                </xf:foreach>
            </ol>
        </xf:if>

        <xf:macro template="tlg_group_macros"
                  name="join_button"
                  arg-hiddenLeave="{{ true }}"
                  arg-group="{$group}" />
    </xf:set>

    <xf:macro template="tlg_grid_card_macros"
              name="card"
              arg-cardTitle="{$cardTitle}"
              arg-extraHeaderHtml="{$extraHeaderHtml}"
              arg-config="{$config}"
              arg-bodyHtml="{$bodyHtml}"
              arg-footerHtml="{$footerHtml}"
              arg-actionHtml="{$actionHtml}"
              arg-avatarHtml="{$avatarHtml}"
              arg-coverHtml="{$coverHtml}" />
</xf:macro>]]></template>
  <template type="public" title="tlg_group_macros" version_id="3030200" version_string="3.3.2"><![CDATA[<xf:macro name="privacy_html" arg-group="!">
    <span class="groupPrivacy groupPrivacy--{$group.privacy}">
        <xf:if is="$group.privacy == 'public'">
            <xf:fa icon="fa-globe" /> {{ phrase('tlg_privacy_public') }}
        <xf:elseif is="$group.privacy == 'closed'" />
            <xf:fa icon="fa-lock" /> {{ phrase('tlg_privacy_closed') }}
        <xf:elseif is="$group.privacy == 'secret'" />
            <xf:fa icon="fa-user-secret" /> {{ phrase('tlg_privacy_secret') }}
        </xf:if>
    </span>

    <xf:comment>tl_groups:extra_privacy_html</xf:comment>
</xf:macro>

<xf:macro name="avatar_block" arg-group="!" arg-blockClasses="{{ null }}">
    <div class="block{{ $blockClasses ? (' ' . $blockClasses) : '' }}">
        <xf:callback class="Truonglv\Groups\Callback"
                     method="renderAvatar"
                     params="{'group': $group}" />
    </div>
</xf:macro>

<xf:macro name="avatar_html" arg-group="!"
          arg-avatarText="{{ null }}"
          arg-attrs="{{ null }}"
          arg-full="{{ false }}">
    <a href="{{ link('groups', $group) }}"
       class="groupAvatar groupAvatar--link{{ $group.AvatarAttachment ? '' : ' groupAvatar--default' }}"{{ ($attrs) ? (' ' . $attrs) : '' }}>
        <xf:if is="$group.AvatarAttachment">
            <img src="{{ $full ? $group.getAvatarUrl(true) : $group.AvatarAttachment.thumbnail_url }}"
                 class="groupAvatar--img" width="{{ $full ? 250 : 100 }}" height="{{ $full ? 250 : 100 }}"
                 data-width="{$group.AvatarAttachment.width}"
                 data-height="{$group.AvatarAttachment.height}"
                 alt="{$group.name}"/>
        <xf:else />
            <span class="groupAvatar--text groupAvatar--dynamic">{$avatarText}</span>
        </xf:if>
    </a>
</xf:macro>

<xf:macro name="cover" arg-group="!" arg-forceHeight="{{ 0 }}" arg-isRepositioning="{{ false }}">
    <xf:js src="Truonglv/Groups/group.js" addon="Truonglv/Groups" min="1" />

    <xf:callback class="Truonglv\Groups\Callback"
                 method="renderCover"
                 params="{'group': $group, 'forceHeight': $forceHeight, 'isRepositioning': $isRepositioning}" />
</xf:macro>

<xf:macro name="cover_html"
          arg-group="!"
          arg-attrs="{{ null }}"
          arg-imgAttrs="{{ null }}"
          arg-forceHeight="{{ null }}"
          arg-lazy="{{ true }}"
          arg-repositioning="{{ false }}">
    <div class="groupCover groupCoverFrame{{ $repositioning ? ' groupCoverFrame--setup' : '' }}{{ $group.CoverAttachment ? '' : ' groupCover--default' }}"{{ ($attrs) ? (' ' . $attrs) : '' }}>
        <a href="{{ link('groups', $group) }}"{{ ($attrs) ? (' ' . $attrs) : '' }}>
            <xf:if is="$group.CoverAttachment">
                <img data-crop="{$group->getCoverCropData()|json}"
                     class="groupCover--img{{ $lazy ? ' groupCover--lazy' : '' }}" data-xf-init="tlg-cover-setup"
                     {{ ($imgAttrs) ? (' ' . $imgAttrs) : '' }}
                     {{ $forceHeight ? (' data-force-height="' . $forceHeight .'"') : '' }}/>
            <xf:else />
                <span class="groupCover--text">{{ snippet($group.name, 25) }}</span>
            </xf:if>
        </a>
    </div>
</xf:macro>

<xf:macro name="privacy_row" arg-group="{{ null }}" arg-selected="{{ null }}" arg-allowSecret="{{ false }}" arg-allowClosed="{{ false }}">
    <xf:radiorow name="privacy" label="{{ phrase('tlg_privacy') }}" value="{$selected}">
        <xf:option value="public" label="{{ phrase('tlg_privacy_public') }}"
                   hint="{{ phrase('tlg_privacy_public_explain') }}">
            <xf:checkbox>
                <xf:option name="allow_guest_posting"
                           selected="{$group.allow_guest_posting}" value="1">{{ phrase('tlg_also_allow_guest_posting_into_news_feed...') }}</xf:option>
            </xf:checkbox>
        </xf:option>

        <xf:if is="$allowClosed">
            <xf:option value="closed" label="{{ phrase('tlg_privacy_closed') }}"
                       hint="{{ phrase('tlg_privacy_closed_explain') }}" />
        </xf:if>

        <xf:if is="$allowSecret">
            <xf:option value="secret" label="{{ phrase('tlg_privacy_secret') }}"
                       hint="{{ phrase('tlg_privacy_secret_explain') }}" />
        </xf:if>

        <xf:comment>tl_groups:extra_privacy_row</xf:comment>
    </xf:radiorow>
</xf:macro>

<xf:macro name="extra_privacy_rows" arg-group="{{ null }}">
    <xf:checkboxrow label="">
        <xf:option name="always_moderate_join" selected="{$group.always_moderate_join}"
                   label="{{ phrase('tlg_all_requests_must_be_approved_by_a_moderator') }}"
                   hint="{{ phrase('tlg_all_requests_must_be_approved_by_a_moderator_explain') }}" />
    </xf:checkboxrow>
</xf:macro>

<xf:macro name="quick_overview" arg-group="!">
    <div class="block">
        <div class="block-container">
            <h3 class="block-minorHeader">{{ phrase('tlg_quick_overview') }}</h3>
            <div class="block-body block-row">
                <dl class="pairs pairs--justified">
                    <dt>{{ phrase('tlg_category') }}</dt>
                    <dd><a href="{{ link('group-categories', $group.Category) }}">{$group.Category.category_title}</a></dd>
                </dl>

                <xf:if is="$xf.options.tl_groups_enableLanguage > 0">
                    <dl class="pairs pairs--justified">
                        <dt>{{ phrase('language') }}</dt>
                        <dd>{$group.language_title}</dd>
                    </dl>
                </xf:if>

                <dl class="pairs pairs--justified">
                    <dt>{{ phrase('tlg_total_members') }}</dt>
                    <dd>{$group.member_count|number_short}</dd>
                </dl>

                <dl class="pairs pairs--justified">
                    <dt>{{ phrase('tlg_total_events') }}</dt>
                    <dd>{$group.event_count|number_short}</dd>
                </dl>

                <xf:if is="$xf.options.tl_groups_enableForums">
                    <dl class="pairs pairs--justified">
                        <dt>{{ phrase('tlg_total_discussions') }}</dt>
                        <dd>{$group.discussion_count|number_short}</dd>
                    </dl>
                </xf:if>

                <dl class="pairs pairs--justified">
                    <dt>{{ phrase('tlg_total_views') }}</dt>
                    <dd>{$group.view_count|number_short}</dd>
                </dl>

                <xf:set var="$isXFMGEnabled"><xf:callback class="Truonglv\Groups\App" method="isEnabledXenMediaAddOn" /></xf:set>
                <xf:if is="$isXFMGEnabled is not empty">
                    <dl class="pairs pairs--justified">
                        <dt>{{ phrase('tlg_total_albums') }}</dt>
                        <dd>{$group.album_count|number_short}</dd>
                    </dl>
                </xf:if>

                <xf:comment>tl_groups_quick_overview_extra</xf:comment>
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="share_block" arg-group="!">
    <div class="block">
        <div class="block-container">
            <h3 class="block-minorHeader">{{ phrase('tlg_share_this_group') }}</h3>
            <div class="block-body block-row">
                <xf:macro template="share_page_macros" name="buttons"
                          arg-iconic="{{ true }}" />

                <xf:set var="$groupUrl">{{ link('canonical:groups', $group) }}</xf:set>

                <xf:macro template="share_page_macros"
                          name="share_clipboard_input"
                          arg-label="{{ phrase('tlg_group_url') }}"
                          arg-text="{$groupUrl}" />

                <xf:set var="$groupUrlBbCode">[GROUP={$group.group_id}][/GROUP]</xf:set>
                <xf:macro template="share_page_macros"
                          name="share_clipboard_input"
                          arg-label="{{ phrase('tlg_copy_group_bbcode') }}"
                          arg-text="{$groupUrlBbCode}" />
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="invite_member_form" arg-group="!">
    <div class="block">
        <div class="block-container">
            <h3 class="block-minorHeader">{{ phrase('tlg_invite_member') }}</h3>
            <div class="block-footer"><xf:fa icon="fa-exclamation-circle" /> {{ phrase('tlg_invite_other_people_to_join_this_group') }}</div>
            <xf:form action="{{ link('groups/invite', $group) }}" method="post" ajax="true">
                <div class="block-body block-row">
                    <xf:textbox name="username" ac="single" autocomplete="off" autofocus="off"
                                tabindex="-1"
                                maxlength="{{ max_length($xf.visitor, 'username') }}"
                                placeholder="{{ phrase('name...') }}" />

                    <div class="formSubmitRow--simple formSubmitRow">
                        <div class="formSubmitRow-controls">
                            <xf:button type="submit" class="button--icon button--cta">
                                <xf:fa icon="fa-paper-plane" /> {{ phrase('tlg_send_invite') }}
                            </xf:button>
                        </div>
                    </div>
                </div>
            </xf:form>
        </div>
    </div>
</xf:macro>

<xf:macro name="settings" arg-group="!" arg-advanced="{{ false }}">
    <xf:if contentcheck="true">
        <div class="buttonGroup-buttonWrapper">
            <xf:button class="button--link menuTrigger"
                       data-xf-click="menu"
                       aria-expanded="false"
                       aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}"><xf:fa icon="fa-cog" /></xf:button>
            <div class="menu" data-menu="menu" aria-hidden="true">
                <div class="menu-content">
                    <xf:contentcheck>
                        <xf:comment>tl_groups.group_settings_top</xf:comment>
                        <xf:if is="$group.Member AND !$group.Member.isInvited()">
                            <a href="{{ link('group-members/leave', $group.Member) }}"
                                       class="menu-linkRow"
                                       data-xf-click="overlay">
                                {{ $group.Member.isValidMember() ? phrase('tlg_leave_group') : phrase('tlg_cancel_requesting') }}
                            </a>
                        </xf:if>

                        <xf:if is="$group.canReport()">
                            <a href="{{ link('groups/report', $group) }}"
                               class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_report_group') }}</a>
                        </xf:if>

                        <xf:if is="$group.canUseAsBadge()">
                            <a href="{{ link('groups/badge', $group) }}" class="menu-linkRow">
                                {{ phrase('tlg_toggle_display_group_badge') }}
                                <span>{{ $group.isEnabledGroupBadge() ? phrase('(enabled)') : phrase('(disabled)') }}</span>
                            </a>
                        </xf:if>

                        <xf:if is="$group.Member OR $group.canReport()"><hr class="menu-separator" /></xf:if>

                        <xf:comment>tl_groups.group_settings_middle</xf:comment>

                        <xf:if is="$advanced is not empty">
                            <xf:macro name="settings_advanced" arg-group="{$group}"/>
                        </xf:if>

                        <xf:comment>tl_groups.group_settings_bottom</xf:comment>
                    </xf:contentcheck>
                </div>
            </div>
        </div>
    </xf:if>
</xf:macro>

<xf:macro name="settings_advanced" arg-group="!">
    <xf:if is="$group.canUpdatePrivacy()">
        <a href="{{ link('groups/privacy', $group) }}" class="menu-linkRow">{{ phrase('tlg_update_privacy') }}</a>
    </xf:if>

    <xf:if is="$group.canManageAvatar()">
        <a href="{{ link('groups/avatar', $group) }}" class="menu-linkRow">{{ phrase('tlg_upload_avatar') }}</a>
    </xf:if>

    <xf:if is="$group.canManageCover()">
        <a href="{{ link('groups/cover', $group) }}" class="menu-linkRow">{{ phrase('tlg_upload_cover') }}</a>
        <xf:if is="$group.cover_attachment_id > 0">
            <a href="{{ link('groups/cover', $group, {'reposition': 1}) }}" class="menu-linkRow">{{ phrase('tlg_reposition_cover') }}</a>
        </xf:if>
    </xf:if>

    <xf:if is="$group.canAddForum()">
        <a href="{{ link('groups/add-forum', $group) }}"
           data-xf-click="overlay"
           class="menu-linkRow">{{ phrase('tlg_add_forum') }}</a>
    </xf:if>

    <xf:if contentcheck="true">
        <hr class="menu-separator" />
        <xf:contentcheck>
            <xf:if is="$group.canApproveUnapprove()">
                <xf:if is="$group.group_state == 'moderated'">
                    <a href="{{ link('groups/toggle-approve', $group) }}"
                       class="menu-linkRow">{{ phrase('tlg_approve_group') }}</a>
                    <xf:elseif is="$group.isVisible()" />
                    <a href="{{ link('groups/toggle-approve', $group) }}"
                       class="menu-linkRow">{{ phrase('tlg_unapprove_group') }}</a>
                </xf:if>
            </xf:if>

            <xf:if is="$group.canEdit()">
                <a href="{{ link('groups/edit', $group) }}"
                   class="menu-linkRow">{{ phrase('tlg_edit_group') }}</a>
            </xf:if>

            <xf:if is="$group.canMove()">
                <a href="{{ link('groups/move', $group) }}" data-xf-click="overlay"
                   class="menu-linkRow">{{ phrase('tlg_move_group') }}</a>
            </xf:if>

            <xf:if is="$group.canDelete('soft')">
                <a href="{{ link('groups/delete', $group) }}"
                   class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_delete_group') }}</a>
            </xf:if>

            <xf:if is="$group.canUndelete()">
                <a href="{{ link('groups/undelete', $group) }}"
                   data-xf-click="overlay"
                   class="menu-linkRow">{{ phrase('tlg_undelete_group') }}</a>
            </xf:if>

            <xf:if is="$group.canFeatureUnfeature()">
                <a href="{{ link('groups/feature', $group) }}"
                   class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_feature_group') }}</a>
                <xf:if is="$group.isFeatured()">
                    <a href="{{ link('groups/unfeature', $group) }}"
                       class="menu-linkRow">{{ phrase('tlg_unfeature_group') }}</a>
                </xf:if>
            </xf:if>

            <xf:if is="$group.canReassign()">
                <a href="{{ link('groups/reassign', $group) }}"
                   class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_reassign_group') }}</a>
            </xf:if>

            <xf:if is="$group.canMerge()">
                <a href="{{ link('groups/merge', $group) }}"
                   class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_merge_group') }}</a>
            </xf:if>

            <xf:comment>tl_groups.group_settings_extra_mod</xf:comment>
        </xf:contentcheck>
    </xf:if>
</xf:macro>

<xf:macro name="join_button" arg-group="!" arg-hiddenLeave="{{ false }}">
    <xf:if is="$group.Member">
        <xf:if is="!$hiddenLeave AND !$group.Member.isInvited()">
            <xf:button href="{{ link('group-members/leave', $group.Member) }}"
                       class="button--{{ $group.Member.isValidMember() ? 'link' : 'cta' }} button--groupJoin"
                       overlay="true">
                <xf:fa icon="fa-sign-out" />
                {{ $group.Member.isValidMember() ? phrase('tlg_leave_group') : phrase('tlg_cancel_requesting') }}
            </xf:button>
        </xf:if>
    <xf:elseif is="$group.canJoin()" />
        <xf:button href="{{ link('groups/join', $group) }}" overlay="true" class="button--cta button--groupJoin">
            <xf:fa icon="fa-sign-in" />
            {{ phrase('tlg_join_group') }}
        </xf:button>
    </xf:if>
</xf:macro>

<xf:macro name="member_view_tabs_heading" arg-user="!">
    <xf:if is="$xf.visitor.hasPermission('tl_groups', 'view')">
        <a href="{{ link('groups/browse/user', null, {'user_id': $user.user_id}) }}"
           rel="nofollow" class="tabs-tab" id="tlg-groups"
           role="tab">{{ phrase('tlg_groups') }}</a>
    </xf:if>
</xf:macro>

<xf:macro name="member_view_tabs_content" arg-user="!">
    <xf:if is="$xf.visitor.hasPermission('tl_groups', 'view')">
    <li data-href="{{ link('groups/browse/user', null, {'user_id': $user.user_id, 'ref': 'profile'}) }}" role="tabpanel"
        aria-labelledby="tlg-groups">
        <div class="blockMessage">{{ phrase('loading...') }}</div>
    </li>
    </xf:if>
</xf:macro>

<xf:macro name="structured_data" arg-group="!">
    <xf:set var="$fpSnippet" value="{{ snippet($group.description, 0, {'stripBbCode': true}) }}" />

    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "CreativeWork",
            "@id": "{{ link('canonical:groups', $group)|escape('json') }}",
            "url": "{{ link('canonical:groups', $group)|escape('json') }}",
            "name": "{$group.name|escape('json')}",
            "about": "{$group.short_description|escape('json')}",
            "headline": "{$group.short_description|escape('json')}",
            "description": "{$fpSnippet|escape('json')}",
            "creator": {
                "@type": "Person",
                "name": "{{ ($group.User ? $group.User.username : $group.owner_username)|escape('json') }}"
            },
            <xf:if is="$group.AvatarAttachment">"thumbnailUrl": "{$group.getAvatarUrl(true)|escape('json')}",</xf:if>
            <xf:if is="$group.tags">"keywords": "{$group.tags|pluck('tag')|join(',')|escape('json')}",</xf:if>
            "datePublished": "{{ date($group.created_date, 'c')|escape('json') }}",
            "dateModified": "{{ date($group.last_activity, 'c')|escape('json') }}"
        }
    </script>
</xf:macro>

<xf:macro name="user_info_badge" arg-group="!">
    <xf:css src="tlg_style.less" />
    <div class="groupBadge{{ $group.CoverAttachment ? ' has-cover' : '' }}" data-group-id="{$group.group_id}"
         style="{{ $group.CoverAttachment ? ('background-image:url(' . $group.CoverAttachment.thumbnail_url . ')') : '' }}">
        <xf:if is="$group.CoverAttachment">
            <div class="groupBadge-overlay"></div>
        </xf:if>
        <xf:macro name="avatar_html" arg-group="{$group}" />
        <a href="{{ link('groups', $group) }}" class="groupBadge-name"
           data-xf-init="preview-tooltip"
           data-preview-url="{{ link('groups/preview', $group) }}">{$group.name}</a>
    </div>
</xf:macro>

<xf:macro name="share_qr_code" arg-group="!">
    <xf:js src="vendor/qrcode/jquery-qrcode.min.js" />
    <xf:css src="tlg_style.less" />
    <div class="block group-qrcode--block">
        <div class="block-container">
            <div class="block-row">
                <div class="tlg-group--qrcode"></div>
            </div>
        </div>
    </div>
    <xf:js>
        $('.tlg-group--qrcode').qrcode({
            text: '{{ link('canonical:groups', $group)|escape }}'
        })
    </xf:js>
</xf:macro>]]></template>
  <template type="public" title="tlg_group_media_list" version_id="3030000" version_string="3.3.0"><![CDATA[<xf:title>{{ phrase('xfmg_media') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">media</xf:set>
</xf:wrap>

<xf:if is="$canInlineMod">
    <xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="p-body-header">
    <div class="p-title"><h2 class="p-title-value">{{ phrase('xfmg_media') }}</h2></div>
</div>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
     data-type="xfmg_album" data-href="{{ link('inline-mod') }}">
    <div class="block-outer">
        <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                    link="groups/media" data="{$group}" params="{$filters|replace('group_id', null)}"
                    wrapperclass="block-outer-main" />

        <div class="block-outer-opposite">
            <xf:if contentcheck="true">
            <div class="buttonGroup">
                <xf:contentcheck>
                    <xf:if is="$canAddAlbum OR $canLinkAlbums">
                        <xf:button href="{{ link('groups/media/add', $group) }}"
                                   class="button--cta" icon="add"
                                   overlay="true">{{ phrase('tlg_add_album') }}</xf:button>
                    </xf:if>

                    <xf:if is="$canInlineMod">
                        <xf:macro template="inline_mod_macros" name="button" />
                    </xf:if>
                </xf:contentcheck>
            </div>
            </xf:if>

            <xf:if is="$canAddAlbum">
                <xf:button href="{{ link('media/albums/create', null, {'group_id': $group.group_id}) }}"
                           class="button--cta"
                           icon="add">{{ phrase('tlg_add_album') }}</xf:button>
            </xf:if>
        </div>
    </div>
    <div class="block-container">
        <xf:macro template="xfmg_album_list_macros" name="list_filter_bar"
                  arg-filters="{$filters}"
                  arg-baseLinkPath="media/albums"
                  arg-ownerFilter="{$ownerFilter}" />

        <div class="block-body">
            <xf:if is="$albums is not empty">
                <xf:macro template="xfmg_album_list_macros" name="album_list" arg-albums="{$albums}" />
            <xf:elseif is="$filters is not empty" />
                <div class="block-row">{{ phrase('xfmg_there_no_albums_matching_your_filters') }}</div>
            <xf:else />
                <div class="block-row">{{ phrase('xfmg_no_albums_have_been_added_yet') }}</div>
            </xf:if>
        </div>
    </div>

    <div class="block-outer block-outer--after">
        <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                    link="groups/media" data="{$group}" params="{$filters|replace('group_id', null)}"
                    wrapperclass="block-outer-main" />

        <xf:showignored wrapperclass="block-outer-opposite" />
    </div>
</div>]]></template>
  <template type="public" title="tlg_group_member_join" version_id="2000300" version_string="2.0.3"><![CDATA[<xf:if is="!$isInline">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">about</xf:set>
    </xf:wrap>
</xf:if>

<xf:title>{{ phrase('tlg_join_group') }}</xf:title>

<xf:form action="{{ link('groups/join', $group) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">
                {{ phrase('tlg_sure_you_want_to_join_following_group') }}
                <a href="{{ link('groups', $group) }}"><strong>{$group.name}</strong></a>
            </xf:inforow>
        </div>

        <xf:submitrow rowtype="simple" submit="{{ $group.always_moderate_join ? phrase('tlg_request_to_join') : phrase('tlg_join_group') }}"/>
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_group_members" version_id="3030100" version_string="3.3.1"><![CDATA[<xf:title>{{ phrase('members') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">members</xf:set>
</xf:wrap>

<xf:macro template="metadata_macros" name="canonical_url"
          arg-canonicalUrl="{{ link('canonical:groups/members', $group) }}" />

<xf:if is="$canInlineMod">
    <xf:js src="xf/inline_mod.js"/>
</xf:if>

<section class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
         data-type="tl_group_member{$group.group_id}" data-href="{{ link('inline-mod', null, {'group_id': $group.group_id}) }}">
    <div class="block-outer">
        <xf:macro template="tlg_filter_bar_macros"
                  name="member_list_filter_bar"
                  arg-group="{$group}"
                  arg-filterUser="{$filterUser}"
                  arg-filters="{$filters}" />

        <xf:if contentcheck="true">
            <div class="block-outer-opposite">
                <div class="buttonGroup">
                    <xf:contentcheck>
                        <xf:if is="$canInlineMod">
                            <xf:macro template="inline_mod_macros" name="button" />
                        </xf:if>
                    </xf:contentcheck>
                </div>
            </div>
        </xf:if>
    </div>

    <div class="block-container">
        <div class="block-body">
            <xf:if is="$members is not empty">
                <xf:macro name="member_list" arg-members="{$members}" arg-canInlineMod="{$canInlineMod}" />
            <xf:else />
                <div class="block-row">{{ phrase('tlg_there_no_members_matching_your_filters') }}</div>
            </xf:if>
        </div>
    </div>

    <div class="block-outer block-outer--after">
        <xf:pagenav
                page="{$page}" perpage="{$perPage}" total="{$total}"
                link="groups/members" data="{$group}" params="{$filters}"
                wrapperclass="block-outer-main" />
        <xf:showignored wrapperclass="block-outer-opposite" />
    </div>
</section>

<xf:macro name="member_list_item_actions" arg-member="!">
<xf:if contentcheck="true">
    <xf:button class="button--link menuTrigger groupList-item--actions"
               data-xf-click="menu"
               aria-expanded="false"
               aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}"><xf:fa icon="fa-cog" /></xf:button>
    <div class="menu" data-menu="menu" aria-hidden="true">
        <div class="menu-content">
            <xf:contentcheck>
                <xf:if is="$member.canBePromote()">
                    <xf:if is="!$member.isAdmin() && !$member.isModerator()">
                        <a href="{{ link('group-members/promote', $member) }}"
                           class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_promote_member') }}</a>
                    </xf:if>

                    <xf:if is="$member.isAdmin()">
                        <a href="{{ link('group-members/promote', $member, {'type': 'admin'}) }}"
                           class="menu-linkRow">{{ phrase('tlg_remove_as_admin') }}</a>
                    <xf:else />
                        <a href="{{ link('group-members/promote', $member, {'type': 'admin'}) }}"
                           class="menu-linkRow">{{ phrase('tlg_make_admin') }}</a>
                    </xf:if>

                    <xf:if is="$member.isModerator()">
                        <a href="{{ link('group-members/promote', $member, {'type': 'moderator'}) }}"
                           class="menu-linkRow">{{ phrase('tlg_remove_as_moderator') }}</a>
                    <xf:else />
                        <a href="{{ link('group-members/promote', $member, {'type': 'moderator'}) }}"
                           class="menu-linkRow">{{ phrase('tlg_make_moderator') }}</a>
                    </xf:if>
                </xf:if>

                <xf:if is="$member.canLiftBan()">
                    <a href="{{ link('group-members/lift-ban', $member) }}"
                       class="menu-linkRow">{{ phrase('tlg_lift_ban_member') }}</a>
                <xf:elseif is="$member.canBeBanned()" />
                    <a href="{{ link('group-members/ban', $member) }}"
                       class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_ban_member') }}</a>
                </xf:if>

                <xf:if is="$member.canBeApproved()">
                    <a href="{{ link('group-members/approve', $member) }}"
                       class="menu-linkRow">{{ phrase('tlg_approve_member') }}</a>
                </xf:if>

                <xf:comment>tl_groups.member_list_item_extra_actions</xf:comment>

                <xf:if is="$member.canBeRemove()">
                    <span class="divider"></span>
                    <a href="{{ link('group-members/remove', $member) }}"
                       class="menu-linkRow" data-xf-click="overlay">{{ phrase('tlg_remove_member') }}</a>
                </xf:if>
            </xf:contentcheck>
        </div>
    </div>
</xf:if>
</xf:macro>

<xf:macro name="member_list" arg-members="!" arg-canInlineMod="{{ false }}">
<xf:css src="tlg_style.less"/>

<ol class="groupMembers listPlain">
    <xf:foreach loop="$members" value="$member">
        <xf:macro name="member_list_item" arg-member="{$member}" arg-canInlineMod="{$canInlineMod}" />
    </xf:foreach>
</ol>
</xf:macro>

<xf:macro name="member_list_item" arg-member="!" arg-canInlineMod="{{ false }}">
    <li class="block-row {$member.member_role_id} {$member.member_state}{{ $canInlineMod ? ' js-inlineModContainer' : '' }}"
        data-author="{{ $member.User ? $member.User.username : $member.username }}">
        <div class="contentRow">
            <div class="contentRow-figure">
                <xf:avatar user="{$member.User}" size="m" defaultname="{$member.username}"/>
            </div>

            <div class="contentRow-main">
                <xf:if contentcheck="true">
                    <div class="contentRow-extra contentRow-extra--large">
                        <xf:contentcheck><xf:macro name="member_list_item_actions" arg-member="{$member}"/></xf:contentcheck>
                    </div>
                </xf:if>

                <h3 class="contentRow-title">
                    <xf:username user="{$member.User}" defaultname="{$member.username}"/>
                </h3>

                <div class="contentRow-minor">
                    <ul class="listInline listInline--bullet">
                        <li>
                            <span>{{ phrase('tlg_member_role:') }}</span>
                            <span>{$member.MemberRole.title}</span>
                        </li>
                        <li>
                            <span>{{ phrase('tlg_member_status:') }}</span>
                            <span>{$member.member_state_title}</span>
                        </li>
                        <li>
                            <span>{{ $member.isInvited() ? phrase('tlg_invited_date:') : phrase('tlg_join_date:') }}</span>
                            <span><xf:date time="$member.joined_date"/></span>
                        </li>
                        <xf:if is="$member.GroupView">
                            <li>
                                <span>{{ phrase('tlg_last_viewed_group:') }}</span>
                                <span><xf:date time="$member.GroupView.view_date"/></span>
                            </li>
                        </xf:if>
                    </ul>
                </div>

                <!-- TLG_GROUP_MEMBERS: member_list_item::extra_minor -->

                <xf:if is="$canInlineMod">
                <div class="contentRow-minor contentRow-minor--hideLinks">
                    <xf:checkbox standalone="true">
                        <xf:option name="ids[]" value="{$member.member_id}"
                                   data-xf-init="tooltip"
                                   title="{{ phrase('select_for_moderation')|for_attr }}"
                                   class="js-inlineModToggle" />
                    </xf:checkbox>
                </div>
                </xf:if>
            </div>
        </div>
    </li>
</xf:macro>]]></template>
  <template type="public" title="tlg_group_merge" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_merge_group') }}</xf:title>

<xf:if is="$hasWrapper">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$selected">about</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('groups/merge', $group) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="source_group" ac="single" data-acurl="{{ link('groups/find') }}"
                           label="{{ phrase('tlg_merge_with_group') }}"/>

            <xf:radiorow name="alert_type" label="{{ phrase('options') }}" value="admin">
                <xf:option value="">{{ phrase('tlg_do_not_send_notifications') }}</xf:option>
                <xf:option value="admin">{{ phrase('tlg_send_notifications_to_admin_and_moderator_only') }}</xf:option>
                <xf:option value="all">{{ phrase('tlg_send_notifications_to_all_members') }}</xf:option>
            </xf:radiorow>
        </div>

        <xf:submitrow icon="save"/>
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_group_move" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_move_group') }}</xf:title>

<xf:if is="$hasWrapper">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$selected">about</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('groups/move', $group) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:selectrow name="category_id"
                          value="{$group.category_id}"
                          label="{{ phrase('tlg_destination_category') }}">
                <xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
                    <xf:option value="{$treeEntry.record.category_id}"
                               disabled="{{ $treeEntry.record.category_id === $group.category_id ? 1 : 0 }}">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.category_title}</xf:option>
                </xf:foreach>
            </xf:selectrow>
        </div>

        <xf:submitrow icon="save" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_group_page_options" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:macro name="page_options" arg-category="!" arg-group="{{ null }}">
    <xf:page option="groupCategory" value="{$category}" />

    <xf:page option="searchConstraints" value="{{ {
		phrase('tlg_groups'): {'search_type': 'tl_groups'},
		phrase('tlg_this_category'): {'search_type': 'tl_group', 'c': {'categories': [$category.category_id], 'child_categories': 1}}
	} }}" />
</xf:macro>]]></template>
  <template type="public" title="tlg_group_preview" version_id="3020000" version_string="3.2.0"><![CDATA[<xf:css src="member_tooltip.less" />
<xf:css src="tlg_style.less" />

<div class="tooltip-content-inner tooltip-expanded tooltip-group--inner">
    <div class="memberTooltip">
        <xf:macro template="tlg_group_macros" name="cover"
                  arg-group="{$group}"
                  arg-forceHeight="90" />

        <div class="memberTooltip-header">
			<span class="memberTooltip-avatar">
                <xf:callback class="Truonglv\Groups\Callback"
                             method="renderAvatar"
                             params="{'group': $group}" />
			</span>
            <div class="memberTooltip-headerInfo">
                <xf:if contentcheck="true">
                    <div class="memberTooltip-headerAction">
                        <xf:contentcheck>
                            <xf:macro template="tlg_group_macros" name="settings" arg-group="{$group}" />
                        </xf:contentcheck>
                    </div>
                </xf:if>

                <h4 class="memberTooltip-name"><a href="{{ link('groups', $group) }}">{$group.name}</a></h4>

                <div class="memberTooltip-blurb u-muted groupItem--meta">
                    <div><xf:macro template="tlg_group_macros" name="privacy_html" arg-group="{$group}" /></div>
                </div>
            </div>
        </div>
        <div class="memberTooltip-info">
            <div class="memberTooltip-stats">
                <div class="pairJustifier">
                    <dl class="pairs pairs--rows pairs--rows--centered">
                        <dt>{{ phrase('created') }}</dt>
                        <dd><xf:date time="$group.created_date" /></dd>
                    </dl>
                    <dl class="pairs pairs--rows pairs--rows--centered">
                        <dt>{{ phrase('tlg_members') }}</dt>
                        <dd>{$group.member_count|number_short}</dd>
                    </dl>
                    <dl class="pairs pairs--rows pairs--rows--centered">
                        <dt>{{ phrase('tlg_discussions') }}</dt>
                        <dd>{$group.discussion_count|number_short}</dd>
                    </dl>
                    <dl class="pairs pairs--rows pairs--rows--centered">
                        <dt>{{ phrase('tlg_events') }}</dt>
                        <dd>{$group.event_count|number_short}</dd>
                    </dl>
                </div>
            </div>
        </div>

        <hr class="memberTooltip-separator" />

        <div class="memberTooltip-actions">
            <ol class="listInline flex--grow">
                <xf:foreach loop="$group.CardMembers" value="$member">
                    <li><xf:avatar user="{$member.User}" size="xs" defaultname="{$member.username}" /></li>
                </xf:foreach>
            </ol>
            <xf:macro template="tlg_group_macros"
                      name="join_button"
                      arg-group="{$group}" />
        </div>
    </div>
</div>]]></template>
  <template type="public" title="tlg_group_privacy_update" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:title>{{ phrase('tlg_update_privacy') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">about</xf:set>
</xf:wrap>

<xf:form action="{{ link('groups/privacy', $group) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:macro name="group_privacy_rows" arg-group="{$group}" arg-category="{$group.Category}"/>
        </div>

        <xf:submitrow icon="save" />
    </div>
</xf:form>

<xf:macro name="group_privacy_rows" arg-group="!" arg-category="!">
    <xf:macro template="tlg_group_macros" name="privacy_row"
              arg-selected="{$group.privacy}" arg-group="{$group}"
              arg-allowSecret="{$category.canAddSecretGroup()}"
              arg-allowClosed="{$category.canAddGroupType('closed')}" />

    <xf:macro template="tlg_group_macros" name="extra_privacy_rows"
              arg-group="{$group}" />
</xf:macro>]]></template>
  <template type="public" title="tlg_group_reassign" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_reassign_group') }}</xf:title>

<xf:if is="!$quickAssign">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$selected">about</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('groups/reassign', $group) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="username" value="" ac="single"
                           label="{{ phrase('tlg_reassign_to_user') }}" />
        </div>

        <xf:submitrow icon="save" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_group_resources" version_id="2020900" version_string="2.2.9"><![CDATA[<xf:title>{{ phrase('tlg_resources') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">resources</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title">
        <h2 class="p-title-value">{{ phrase('tlg_resources') }}</h2>
        <xf:if contentcheck="true">
            <div class="p-title-pageAction">
                <xf:contentcheck>
                    <xf:if is="$group.canAddResource()">
                        <xf:button href="{{ link('group-resources/add', null, {'group_id': $group.group_id}) }}"
                                   icon="write" class="button--link">{{ phrase('tlg_add_resource') }}</xf:button>
                    </xf:if>
                </xf:contentcheck>
            </div>
        </xf:if>
    </div>
</div>

<div class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:if is="$total > 0">
                <xf:macro template="tlg_resource_macros" name="resource_list"
                          arg-resources="{$resources}" arg-group="{$group}" />
            <xf:else />
                <div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
            </xf:if>
        </div>
    </div>

    <div class="block-outer block-outer--after">
        <xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
                    link="groups/resources" data="{$group}"/>
    </div>
</div>]]></template>
  <template type="public" title="tlg_group_view" version_id="3020600" version_string="3.2.6"><![CDATA[<xf:title>{$group.name}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">newsFeed</xf:set>
</xf:wrap>

<xf:if is="$group.AvatarAttachment">
    <xf:set var="$imageUrl">{$group.AvatarAttachment.Data.getThumbnailUrl(true)}</xf:set>
<xf:elseif is="property('publicMetadataLogoUrl')" />
    <xf:set var="$imageUrl">{{ base_url(property('publicMetadataLogoUrl'), true) }}</xf:set>
</xf:if>

<xf:macro template="metadata_macros" name="metadata"
          arg-description="{$group.short_description}"
          arg-shareUrl="{{ link('canonical:groups', $group) }}"
          arg-imageUrl="{$imageUrl}"
          arg-canonicalUrl="{{ link('canonical:groups', $group, {'page': $page}) }}" />

<xf:page option="ldJsonHtml">
    <xf:macro template="tlg_group_macros" name="structured_data" arg-group="{$group}"/>
</xf:page>

<xf:if is="$group.canAddPost()">
<xf:form action="{{ link('groups/add-post', $group) }}"
         ajax="true"
         class="block js-quickReply"
         data-xf-init="attachment-manager quick-reply"
         data-ascending="false"
         data-message-container=".js-newPostsContainer">

    <xf:js src="xf/message.js" min="1" />
    <xf:set var="$lastPost" value="{$posts|last}" />

    <div class="block-container">
        <div class="block-body">
            <xf:macro template="quick_reply_macros" name="body"
                      arg-message=""
                      arg-attachmentData="{$attachmentData}"
                      arg-forceHash="{$attachmentHash}"
                      arg-messageSelector=".js-post"
                      arg-multiQuoteStorageKey=""
                      arg-lastDate="{$lastPost.post_date}"
                      arg-showPreviewButton="{{ false }}"
                      arg-simple="{{ true }}"
                      arg-submitText="{{ phrase('post_verb') }}" />
        </div>
    </div>
</xf:form>
</xf:if>

<xf:if is="$stickyPosts is not empty">
    <div class="block block--messages" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="tl_group_wall_post"
         data-href="{{ link('inline-mod') }}">
        <div class="block-container lbContainer"
             data-xf-init="lightbox"
             data-message-selector=".js-post"
             data-lb-id="group-{$group.group_id}"
             data-lb-universal="{$xf.options.lightBoxUniversal}">
            <h3 class="block-minorHeader"><xf:fa icon="fa-thumbtack" /> {{ phrase('tlg_sticky_posts') }}</h3>
            <div class="block-body">
                <xf:foreach loop="$stickyPosts" value="$post">
                    <xf:macro template="tlg_post_macros" name="post"
                              arg-post="{$post}" arg-showLoader="{{ true }}" />
                </xf:foreach>
            </div>
        </div>
    </div>
</xf:if>

<div class="block block--messages" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
     data-type="tl_group_wall_post"
     data-href="{{ link('inline-mod') }}">
    <div class="block-container lbContainer"
         data-xf-init="lightbox"
         data-message-selector=".js-post"
         data-lb-id="group-{$group.group_id}"
         data-lb-universal="{$xf.options.lightBoxUniversal}">

        <div class="block-body js-newPostsContainer">
            <xf:foreach loop="$posts" value="$post">
                <xf:macro template="tlg_post_macros"
                          name="post"
                          arg-post="{$post}"
                          arg-showLoader="{{ true }}" />
            <xf:else />
                <div class="js-newMessagesIndicator">
                    <xf:if is="$stickyPosts is empty">
                        <div class="block-row">{{ phrase('tlg_there_are_no_posts_to_display') }}</div>
                    </xf:if>
                </div>
            </xf:foreach>
        </div>
    </div>

    <div class="block-outer block-outer--after">
        <xf:pagenav link="{$pageNavLink}" data="{$group}" page="{$page}" perpage="{$perPage}" total="{$total}" />
        <xf:showignored wrapperclass="block-outer-opposite" />
    </div>
</div>

]]></template>
  <template type="public" title="tlg_group_wrapper" version_id="3020600" version_string="3.2.6"><![CDATA[<xf:h1 hidden="true" />

<xf:if is="$noBreadcrumbs is empty">
    <xf:breadcrumb source="$group.getBreadcrumbs($pageSelected != 'newsFeed')" />
</xf:if>

<xf:css src="tlg_style.less" />

<xf:page option="sideNavTitle">{$group.name|raw}</xf:page>

<xf:sidenav>
    <xf:comment>tl_groups_sidebar_top</xf:comment>

    <xf:macro template="tlg_group_macros" name="avatar_block"
              arg-group="{$group}" arg-blockClasses="groupAvatar-block" />

    <xf:macro template="tlg_group_wrapper_macros" name="tabs"
              arg-group="{$group}"
              arg-selected="{$pageSelected}" />

    <xf:if is="$group.canInvitePeople()">
        <xf:macro template="tlg_group_macros" name="invite_member_form"
                  arg-group="{$group}" />
    </xf:if>

    <xf:macro template="tlg_group_macros" name="share_block"
              arg-group="{$group}" />

    <xf:macro template="tlg_group_macros" name="quick_overview"
              arg-group="{$group}" />

    <xf:macro template="tlg_group_macros" name="share_qr_code" arg-group="{$group}" />

    <xf:comment>tl_groups_sidebar_bottom</xf:comment>
</xf:sidenav>

<xf:widgetpos id="tlg_group_view_sidenav" position="sidenav"
              context-group="{$group}" context-selected="{$pageSelected}"/>

<xf:if is="$noPageOptions is empty">
    <xf:macro template="tlg_group_page_options" name="page_options"
              arg-category="{$group.Category}"
              arg-group="{$group}" />
</xf:if>

<div class="groupWrapper groupWrapper-{$group.group_id}">
    <xf:macro template="tlg_group_wrapper_macros" name="header"
              arg-group="{$group}" />

    <xf:macro template="tlg_group_wrapper_macros" name="cover_header"
              arg-isEditing="{$coverEditor}"
              arg-navSelected="{$pageSelected}"
              arg-group="{$group}" />

    <xf:if is="$group.Member && $group.Member.isInvited()">
        <div class="blockMessage blockMessage--important">
            {{ phrase('tlg_some_people_has_invited_you_join_this_group') }}
            <xf:button href="{{ link('group-members/leave', $group.Member) }}"
                       class="button--cta" overlay="true">{{ phrase('tlg_no_thanks') }}</xf:button>
            <xf:button href="{{ link('group-members/accepted', $group.Member) }}"
                       class="button--link">{{ phrase('accept') }}</xf:button>
        </div>
    </xf:if>

    <xf:macro template="tlg_group_wrapper_macros" name="status"
              arg-group="{$group}" />

    {$innerContent|raw}
</div>
]]></template>
  <template type="public" title="tlg_group_wrapper_macros" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:macro name="header"
          arg-group="!"
          arg-titleHtml="{{ null }}"
          arg-showMeta="{{ true }}"
          arg-metaHtml="{{ null }}">

    <xf:page option="headerHtml">
        <div class="contentRow contentRow--hideFigureNarrow">
            <div class="contentRow-main">
                <div class="p-title">
                    <h1 class="p-title-value">
                        <xf:if is="$titleHtml !== null">{$titleHtml|raw}<xf:else />{$group.name}</xf:if>
                    </h1>
                </div>
                <xf:if is="$showMeta">
                    <div class="p-description">
                        <xf:if is="$metaHtml !== null">{$metaHtml|raw}<xf:else />{$group.short_description}</xf:if>
                    </div>
                </xf:if>
            </div>
        </div>
    </xf:page>
</xf:macro>

<xf:macro name="status" arg-group="!">
    <xf:if contentcheck="true">
        <dl class="blockStatus blockStatus--standalone">
            <dt>{{ phrase('status') }}</dt>
            <xf:contentcheck>
                <xf:if is="$group.group_state == 'deleted'">
                    <dd class="blockStatus-message blockStatus-message--deleted">
                        <xf:macro template="deletion_macros" name="notice" arg-log="{$group.DeletionLog}" />
                    </dd>
                    <xf:elseif is="$group.group_state == 'moderated'" />
                    <dd class="blockStatus-message blockStatus-message--moderated">
                        {{ phrase('awaiting_approval_before_being_displayed_publicly') }}
                    </dd>
                </xf:if>
            </xf:contentcheck>
        </dl>
    </xf:if>
</xf:macro>

<xf:macro name="tabs" arg-group="!" arg-selected="!">
    <div class="block" data-selected="{$selected}">
        <div class="block-container">
            <h3 class="block-minorHeader">
                <a href="{{ link('groups', $group) }}">{$group.name}</a>
            </h3>

            <div class="block-footer"><xf:macro template="tlg_group_macros" name="privacy_html" arg-group="{$group}" /></div>

            <div class="block-body">
                <ol class="groupViewNav listPlain">
                    <xf:comment>tl_groups:top_navigation</xf:comment>
                    <xf:foreach loop="$group.getNavigationItems()" key="$navId" value="$navItem">
                        <li class="groupViewNav--item groupViewNav--{$navId}{{ ($selected == $navId) ? ' is-active' : '' }}">
                            <a href="{$navItem.link}">
                                <span class="groupViewNav--itemText">{$navItem.title}</span>
                                <xf:if is="$navItem.counter > 0">
                                    <span class="badge badge--highlighted">{$navItem.counter}</span>
                                </xf:if>
                            </a>
                        </li>
                    </xf:foreach>
                    <xf:comment>tl_groups:bottom_navigation</xf:comment>
                </ol>
            </div>
        </div>
    </div>
</xf:macro>

<xf:macro name="cover_header" arg-group="!" arg-isEditing="{{ false }}" arg-navSelected="{{ null }}">
    <div class="block">
        <div class="block-container groupCover-header {{ $isEditing is empty ? '' : 'groupCover-editor' }}">
            <div class="block-body">
                <xf:macro template="tlg_group_macros" name="cover"
                          arg-isRepositioning="{$isEditing}"
                          arg-group="{$group}" />
            </div>

            <xf:if is="$isEditing is not empty">
                <xf:macro name="cover_editor_setup" arg-group="{$group}"
                          arg-width="{$baseWidth}"
                          arg-height="{$baseHeight}" />
            <xf:else />
                <xf:macro name="cover_header_navigation" arg-group="{$group}" arg-selected="{$navSelected}" />
            </xf:if>
        </div>
    </div>
</xf:macro>

<xf:macro name="cover_header_navigation" arg-group="!" arg-selected="!">
    <div class="groupHeader-navList h-dFlex">
        <div class="p-nav-scroller hScroller" data-xf-init="h-scroller" data-auto-scroll=".groupViewNav--item.is-active">
            <div class="hScroller-scroll">
                <ul class="p-nav-list js-offCanvasNavSource">
                    <xf:foreach loop="$group.getNavigationItems()" key="$navId" value="$nav">
                        <li class="groupViewNav--item groupViewNav--{$navId}{{ ($selected == $navId) ? ' is-active' : '' }}">
                            <a href="{$nav.link}">
                                {$nav.title}
                                <xf:if is="$nav.counter">
                                    <span class="badge badge--highlighted">{$nav.counter|number}</span>
                                </xf:if>
                            </a>
                        </li>
                    </xf:foreach>
                </ul>
            </div>
        </div>

        <xf:if contentcheck="true">
            <div class="buttonGroup groupHeader-navList--user h-dFlex">
                <xf:contentcheck>
                    <xf:if contentcheck="true">
                        <xf:contentcheck>
                            <xf:macro template="tlg_group_macros"
                                      name="join_button"
                                      arg-group="{$group}" />
                        </xf:contentcheck>
                    </xf:if>

                    <xf:if is="$group.Member AND $group.Member.canUpdateNotify()">
                        <xf:button href="{{ link('group-members/notify', $group.Member) }}"
                                   class="button--link button--groupAlerts" overlay="true">
                            <xf:fa icon="fa-bell{{ $group.Member.alert == 'off' ? '-slash' : '' }}" />
                            {{ phrase('tlg_notifications') }}
                        </xf:button>
                    </xf:if>

                    <xf:comment>tl_groups_cover_header:buttonGroup_extra</xf:comment>

                    <xf:if contentcheck="true">
                        <xf:contentcheck>
                            <xf:macro template="tlg_group_macros" name="settings" arg-group="{$group}" arg-advanced="{{ true }}" />
                        </xf:contentcheck>
                    </xf:if>
                </xf:contentcheck>
            </div>
        </xf:if>
    </div>
</xf:macro>

<xf:macro name="cover_editor_setup" arg-group="!" arg-width="!" arg-height="!">
    <xf:js src="Truonglv/Groups/Libs/hammer/hammer.js" min="1" addon="Truonglv/Groups"/>
    <xf:js src="Truonglv/Groups/Libs/cropbox/jquery.cropbox.js" addon="Truonglv/Groups" min="1" />
    <xf:js src="Truonglv/Groups/cover.js" addon="Truonglv/Groups" min="1" />

    <div class="block-footer" style="text-align: center">
        <div class="buttonGroup">
            <xf:button data-xf-init="tlg-cover-editor"
                       data-width="{$width}"
                       data-save="{{ link('groups/cover', $group) }}"
                       data-guide-text="{{ phrase('tlg_drag_to_reposition_cover')|for_attr }}"
                       data-height="{$height}"
                       data-frame="< .groupCover-header | .groupCoverFrame"
                       data-hammer-js="{{ js_url('Truonglv/Groups/Libs/hammer/hammer.min.js') }}"
                       icon="save">{{ phrase('button.save') }}</xf:button>
            <xf:button href="{{ link('groups', $group) }}" class="button--link" icon="cancel">{{ phrase('cancel') }}</xf:button>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="tlg_helper_edit_tags" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('edit_tags') }}</xf:title>

<xf:if is="$group">
    <xf:breadcrumb source="$group.Category.getBreadcrumbs()" />
</xf:if>

<xf:macro template="tag_macros" name="edit_form"
          arg-action="{$formAction}"
          arg-uneditableTags="{$uneditableTags}"
          arg-editableTags="{$editableTags}"
          arg-minTags="0" />
]]></template>
  <template type="public" title="tlg_index" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_groups') }}</xf:title>

<xf:macro template="metadata_macros" name="canonical_url"
          arg-canonicalUrl="{{ link('canonical:groups', null, {'page': $page}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('tlg_groups'): {'search_type': 'tl_group'}
} }}" />

<xf:pageaction if="$xf.visitor.canAddGroup()">
    <xf:button href="{{ link('groups/add') }}" class="button--cta"
               icon="write"
               overlay="true">{{ phrase('tlg_add_new_group...') }}</xf:button>
</xf:pageaction>

<xf:macro template="tlg_group_list_macros"
          name="group_list_block"
          arg-baseUrl="groups"
          arg-groups="{$groups}"
          arg-page="{$page}"
          arg-perPage="{$perPage}"
          arg-total="{$total}"
          arg-filters="{$filters}"
          arg-creatorFilter="{$creatorFilter}"
          arg-canInlineMod="{$canInlineMod}"
          arg-showMembers="{{ true }}"
          arg-columnsPerRow="{{ 2 }}" />

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
    <xf:macro template="tlg_category_list_macros" name="simple_list_block"
              arg-categoryTree="{$categoryTree}"
              arg-categoryExtras="{$categoryExtras}" />
</xf:sidenav>]]></template>
  <template type="public" title="tlg_inline_mod_group_delete" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_inline_moderation_delete_groups') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">{{ phrase('tlg_you_sure_you_want_to_delete_x_groups', {'count': $total}) }}</xf:inforow>

            <xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />
        </div>
        <xf:submitrow icon="delete" />
    </div>

    <xf:foreach loop="$groups" value="$group">
        <xf:hiddenval name="ids[]">{$group.group_id}</xf:hiddenval>
    </xf:foreach>

    <xf:hiddenval name="type">tl_group</xf:hiddenval>
    <xf:hiddenval name="action">delete</xf:hiddenval>
    <xf:hiddenval name="confirmed">1</xf:hiddenval>

    <xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="tlg_inline_mod_group_merge" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_inline_moderation_merge_groups') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">{{ phrase('tlg_you_sure_you_want_to_merge_x_groups', {'total': $total}) }}</xf:inforow>

            <xf:selectrow name="target_group_id" value="{$first.group_id}"
                          label="{{ phrase('tlg_destination_group') }}">
                <xf:foreach loop="$entities" value="$entity">
                    <xf:option value="{$entity.group_id}">{$entity.name}</xf:option>
                </xf:foreach>
            </xf:selectrow>

            <xf:radiorow name="alert_type" label="{{ phrase('options') }}" value="admin">
                <xf:option value="">{{ phrase('tlg_do_not_send_notifications') }}</xf:option>
                <xf:option value="admin">{{ phrase('tlg_send_notifications_to_admin_and_moderator_only') }}</xf:option>
                <xf:option value="all">{{ phrase('tlg_send_notifications_to_all_members') }}</xf:option>
            </xf:radiorow>
        </div>
        <xf:submitrow icon="save" />
    </div>

    <xf:foreach loop="$entities" value="$group">
        <xf:hiddenval name="ids[]">{$group.group_id}</xf:hiddenval>
    </xf:foreach>

    <xf:hiddenval name="type">tl_group</xf:hiddenval>
    <xf:hiddenval name="action">merge</xf:hiddenval>
    <xf:hiddenval name="confirmed">1</xf:hiddenval>

    <xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="tlg_inline_mod_group_move" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_inline_moderation_move_groups') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:selectrow name="category_id"
                          value="{$group.category_id}"
                          label="{{ phrase('tlg_destination_category') }}">
                <xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
                    <xf:option value="{$treeEntry.record.category_id}"
                               disabled="{{ $treeEntry.record.category_id === $group.category_id ? 1 : 0 }}">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.category_title}</xf:option>
                </xf:foreach>
            </xf:selectrow>
        </div>
        <xf:submitrow icon="save" />
    </div>

    <xf:foreach loop="$groups" value="$group">
        <xf:hiddenval name="ids[]">{$group.group_id}</xf:hiddenval>
    </xf:foreach>

    <xf:hiddenval name="type">tl_group</xf:hiddenval>
    <xf:hiddenval name="action">move</xf:hiddenval>
    <xf:hiddenval name="confirmed">1</xf:hiddenval>

    <xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="tlg_inline_mod_member_ban" version_id="2000500" version_string="2.0.5"><![CDATA[<xf:title>{{ phrase('tlg_ban_members') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">{{ phrase('tlg_you_sure_you_want_to_ban_x_members', {'count': $total}) }}</xf:inforow>

            <xf:radiorow name="type" label="{{ phrase('tlg_time_period') }}">
                <xf:option value="0">{{ phrase('tlg_no_limitation') }}</xf:option>
                <xf:option value="1" label="{{ phrase('tlg_expires_after:') }}">
                    <xf:dateinput name="end_date" label="{{ phrase('end_date') }}" value=""/>
                </xf:option>
            </xf:radiorow>
        </div>
        <xf:submitrow icon="save" />
    </div>

    <xf:foreach loop="$members" value="$member">
        <xf:hiddenval name="ids[]">{$member.member_id}</xf:hiddenval>
    </xf:foreach>

    <xf:hiddenval name="type">tl_group_member</xf:hiddenval>
    <xf:hiddenval name="action">ban</xf:hiddenval>
    <xf:hiddenval name="confirmed">1</xf:hiddenval>
    <xf:hiddenval name="group_id">{$group.group_id}</xf:hiddenval>

    <xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="tlg_inline_mod_member_promote" version_id="2000500" version_string="2.0.5"><![CDATA[<xf:title>{{ phrase('tlg_promote_members') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:inforow rowtype="confirm">{{ phrase('tlg_you_sure_you_want_to_promote_x_members', {'count': $total}) }}</xf:inforow>

            <xf:radiorow name="member_role_id" label="{{ phrase('tlg_change_member_role_to') }}">
                <xf:foreach loop="$memberRoles" value="$memberRole">
                    <xf:option value="{$memberRole.member_role_id}"
                               label="{$memberRole.title}"
                               hint="{$memberRole.description}" />
                </xf:foreach>
            </xf:radiorow>
        </div>
        <xf:submitrow icon="save" />
    </div>

    <xf:foreach loop="$members" value="$member">
        <xf:hiddenval name="ids[]">{$member.member_id}</xf:hiddenval>
    </xf:foreach>

    <xf:hiddenval name="type">tl_group_member</xf:hiddenval>
    <xf:hiddenval name="action">promote</xf:hiddenval>
    <xf:hiddenval name="confirmed">1</xf:hiddenval>
    <xf:hiddenval name="group_id">{$group.group_id}</xf:hiddenval>

    <xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="tlg_media_album_add_chooser" version_id="3030200" version_string="3.3.2"><![CDATA[<xf:title>{{ phrase('tlg_add_album') }}</xf:title>

<xf:if is="!$isInline">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">media</xf:set>
    </xf:wrap>
</xf:if>

<xf:js src="Truonglv/Groups/group.js" min="1" addon="Truonglv/Groups" />
<xf:css src="tlg_style.less" />

<xf:form action="{{ link('groups/media-add', $group) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:radiorow name="action" value="{{ $canAddAlbums ? 'new' : 'existing' }}"
                         label="{{ phrase('tlg_add_album_type') }}">
                <xf:if is="$canAddAlbums">
                    <xf:option value="new">{{ phrase('tlg_add_new_albums') }}</xf:option>
                </xf:if>
                <xf:if is="$canLinkAlbums">
                    <xf:option value="existing" label="{{ phrase('tlg_link_existing_albums') }}">
                        <xf:dependent>
                            <div class="linkAlbums-fields">
                                <xf:textbox name="album_ids[]" ac="single" data-xf-init="field-adder"
                                            placeholder="{{ phrase('tlg_enter_album_title_to_find...') }}"
                                            data-acurl="{{ link('media/albums/find') }}" />
                            </div>
                        </xf:dependent>
                    </xf:option>
                </xf:if>
            </xf:radiorow>
        </div>

        <xf:submitrow submit="{{ phrase('continue...') }}" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_media_album_create" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_add_album') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">media</xf:set>
</xf:wrap>

<xf:css src="xfmg_media_add.less" />

<xf:js src="xfmg/media_add.js" min="1" />
<xf:js prod="xf/attachment_manager-compiled.js" dev="vendor/flow.js/flow-compiled.js, xf/attachment_manager.js" />

<xf:form action="{{ link('media/save-media') }}" ajax="true"
         data-xf-init="media-manager"
         data-media-action-url="{{ link('media/add-action') }}"
         data-action-button=".js-mediaAction"
         data-files-container=".js-mediaList"
         data-upload-template=".js-mediaAddTemplate"
         data-file-row=".js-mediaItem" >

    <div class="block block--mediaList">
        <div class="block-container">
            <div class="block-body block-row">
                <ul class="mediaList mediaList--buttons">
                    <li class="mediaList-button{{ !$album.canUploadMedia() ? ' is-hidden' : '' }}">
                        <xf:if is="$album.canUploadMedia()">
                            <a href="{{ link('attachments/upload', null, {'type': 'xfmg_media', 'context': $attachmentData.context, 'hash': $attachmentData.hash}) }}"
                               target="_blank" class="mediaList-inner mediaList-inner--upload js-attachmentUpload"
                               data-accept=".{$attachmentData.constraints.extensions|join(',.')}">
                                {{ phrase('xfmg_upload_file') }}
                            </a>

                            <xf:hiddenval name="attachment_hash">{$attachmentData.hash}</xf:hiddenval>
                            <xf:hiddenval name="attachment_hash_combined">{{ {
                                'type': 'xfmg_media',
                                'context': $attachmentData.context,
                                'hash': $attachmentData.hash
                                }|json }}</xf:hiddenval>
                            <xf:else />
                            <div class="js-attachmentUpload"><!-- Placeholder upload button --></div>
                        </xf:if>
                    </li>
                    <xf:if is="$album.canEmbedMedia()">
                        <li class="mediaList-button">
                            <a href="{{ link('media/embed-media', null, {'context': $attachmentData.context}) }}"
                               class="mediaList-inner mediaList-inner--link"
                               data-xf-click="overlay"
                               target="_blank">
                                {{ phrase('xfmg_embed_media') }}
                            </a>
                        </li>
                    </xf:if>
                </ul>

                <ul class="mediaList js-mediaList u-hidden"></ul>

                <xf:macro template="xfmg_media_add_macros" name="added_media_template" arg-album="{$album}" arg-category="{$category}" />
            </div>
        </div>
    </div>

    <div class="block">
        <div class="block-container">
            <div class="block-body">
                <xf:textboxrow name="album[title]"
                               maxlength="{{ max_length('XFMG:Album', 'title') }}"
                               label="{{ phrase('xfmg_album_title') }}" />

                <xf:textarearow name="album[description]" autosize="true" rows="1"
                                data-xf-init="user-mentioner"
                                maxlength="{{ max_length('XFMG:Album', 'description') }}"
                                label="{{ phrase('xfmg_album_description') }}">
                </xf:textarearow>
            </div>
            <xf:submitrow rowtype="simple" icon="save" />
        </div>
    </div>

    <xf:hiddenval name="album[view_privacy]">public</xf:hiddenval>
    <xf:if is="$album.album_id">
        <xf:hiddenval name="album_id">{$album.album_id}</xf:hiddenval>
    <xf:else />
        <xf:hiddenval name="album_id">0</xf:hiddenval>
    </xf:if>

    <xf:hiddenval name="group_id">{$group.group_id}</xf:hiddenval>
</xf:form>
]]></template>
  <template type="public" title="tlg_media_album_view" version_id="3000100" version_string="3.0.1"><![CDATA[<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">media</xf:set>
</xf:wrap>

<xf:include template="xfmg_album_view">
    <xf:set var="$socialGroups_showAddMediaButton">{$xf.visitor.user_id}</xf:set>
    <xf:set var="$tlgNoBreadcrumbs">1</xf:set>
</xf:include>]]></template>
  <template type="public" title="tlg_media_view" version_id="3000100" version_string="3.0.1"><![CDATA[<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">media</xf:set>
</xf:wrap>

<xf:include template="xfmg_media_view">
    <xf:set var="$tlgNoBreadcrumbs">1</xf:set>
</xf:include>]]></template>
  <template type="public" title="tlg_member_filters" version_id="3030100" version_string="3.3.1"><![CDATA[<xf:form action="{{ link('group-members/filters') }}">
    <div class="menu-row menu-row--separated">
        {{ phrase('tlg_member_status:') }}
        <div class="u-inputSpacer">
            <xf:select name="member_state" value="{$filters.member_state}">
                <xf:option value="any">{{ phrase('any') }}</xf:option>
                <xf:option value="valid">{{ phrase('tlg_member_state_valid') }}</xf:option>
                <xf:option value="invited">{{ phrase('tlg_member_state_invited') }}</xf:option>
                <xf:option value="banned">{{ phrase('tlg_member_state_banned') }}</xf:option>
                <xf:option value="moderated">{{ phrase('tlg_member_state_moderated') }}</xf:option>
            </xf:select>
        </div>
    </div>

    <div class="menu-row menu-row--separated">
        {{ phrase('tlg_show_member_staff_only:') }}
        <div class="u-inputSpacer">
            <xf:radio name="is_staff" value="{{ $filters.is_staff ?: 0 }}">
                <xf:option value="1">{{ phrase('yes') }}</xf:option>
                <xf:option value="0">{{ phrase('no') }}</xf:option>
            </xf:radio>
        </div>
    </div>

    <div class="menu-row menu-row--separated">
        {{ phrase('name:') }}
        <div class="u-inputSpacer">
            <xf:textbox name="user" value="{{ $filterUser ? $filterUser.username : '' }}" ac="single" />
        </div>
    </div>

    <div class="menu-row menu-row--separated">
        {{ phrase('sort_by:') }}
        <div class="inputGroup u-inputSpacer">
            <xf:select name="order" value="{{ $filters.order ?: 'joined_date' }}">
                <xf:option value="joined_date">{{ phrase('tlg_join_date') }}</xf:option>
                <xf:option value="username">{{ phrase('name') }}</xf:option>
            </xf:select>

            <span class="inputGroup-splitter"></span>

            <xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
                <xf:option value="desc">{{ phrase('descending') }}</xf:option>
                <xf:option value="asc">{{ phrase('ascending') }}</xf:option>
            </xf:select>
        </div>
    </div>

    <div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
    </div>

    <xf:hiddenval name="group_id">{$group.group_id}</xf:hiddenval>
    <xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="tlg_member_join" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_join_group:') }} {$group.name}</xf:title>

<xf:form action="{{ link('groups/member/join') }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
        </div>

        <xf:hiddenval name="group_id">{$group.group_id}</xf:hiddenval>
        <xf:hiddenval name="redirect">{$redirect}</xf:hiddenval>

        <xf:submitrow submit="{{ phrase('tlg_join_group') }}" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_member_leave_confirm" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_leave_group') }}</xf:title>

<xf:if is="$needWrapper">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">members</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('group-members/leave', $member) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body block-row">{{ phrase('tlg_sure_you_want_to_leave_the_group') }}</div>

        <xf:if is="$member.isOwner()">
            <div class="block-body">
                <xf:textboxrow name="username" label="{{ phrase('tlg_leave_and_reassign_for') }}"
                               ac="single" />
            </div>
        </xf:if>

        <xf:submitrow submit="{{ phrase('tlg_leave_group') }}" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_member_notify_settings" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_notifications') }}</xf:title>

<xf:if is="$needWrapper">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">members</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('group-members/notify', $member) }}" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:checkboxrow label="{{ phrase('tlg_receive_group_notifications_via') }}"
                            explain="{{ phrase('tlg_you_will_receive_a_notice_when_new_content_published') }}">
                <xf:option name="alert"
                           selected="{{ $member.alert == 'all' || $member.alert == 'alert' ? true : false }}">{{ phrase('alerts') }}</xf:option>
                <xf:option name="email"
                           selected="{{ $member.alert == 'all' || $member.alert == 'email' ? true : false }}">{{ phrase('emails') }}</xf:option>
            </xf:checkboxrow>
        </div>

        <xf:submitrow icon="save" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_member_promote" version_id="3000200" version_string="3.0.2"><![CDATA[<xf:title>{{ phrase('tlg_promote_member:') }} {$member.username}</xf:title>

<xf:if is="!$inlinePromote">
    <xf:wrap template="tlg_group_wrapper">
        <xf:set var="$pageSelected">members</xf:set>
    </xf:wrap>
</xf:if>

<xf:form action="{{ link('group-members/promote', $member) }}" class="block" ajax="true">
    <div class="block-container">
        <div class="block-body">
            <xf:radiorow name="member_role_id" label="{{ phrase('tlg_change_member_role_to') }}"
                         explain="{{ phrase('tlg_promote_read_more_about_role_permissions', {
                            'link': link('groups/browse/roles', null, {'group_id': $member.group_id})
                        }) }}">
                <xf:foreach loop="$memberRoles" value="$memberRole">
                    <xf:option value="{$memberRole.member_role_id}"
                               selected="{{ $memberRole.member_role_id == $member.member_role_id ? 1 : 0 }}"
                               label="{$memberRole.title}"
                               hint="{$memberRole.description}" />
                </xf:foreach>
            </xf:radiorow>
        </div>

        <xf:submitrow submit="{{ phrase('tlg_promote_member') }}" />
    </div>
</xf:form>

]]></template>
  <template type="public" title="tlg_post_edit" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:title>{{ phrase('tlg_edit_post') }}</xf:title>

<xf:breadcrumb source="$group.getBreadcrumbs()" />

<xf:macro name="edit_form"
          template="tlg_comment_edit"
          arg-formUrl="{{ link('group-posts/edit', $post) }}"
          arg-attachmentData="{$attachmentData}"
          arg-message="{$post.FirstComment.message}"
          arg-quickEdit="{$quickEdit}" />]]></template>
  <template type="public" title="tlg_post_item" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:macro template="tlg_post_macros"
          name="post"
          arg-post="{$post}" />]]></template>
  <template type="public" title="tlg_post_item.less" version_id="3020000" version_string="3.2.0"><![CDATA[.postItem {
  .postItem-inner {
    padding: @xf-paddingLarge;
  }

  .postItem-header {
    display: flex;
    flex-wrap: nowrap;

    .postItem-header--user {
      margin-left: @xf-paddingLarge;
      flex: 1;

      .attribution {
        margin: 0;
        padding: 0;
      }

      .message-attribution {
        border-bottom: none;
        padding-bottom: 0;
      }
    }
  }

  .postItem-footer {
    .postItem--comments {
      &.is-hidden {
        display: none;
      }

      position: relative;
      &:before {
        content: '.';
        border-top: 1px solid @xf-borderColor;
        display: block;
        margin-left: -@xf-paddingLarge;
        margin-right: -@xf-paddingLarge;
        font-size: 0;
        padding-top: @xf-paddingLarge;
      }
    }
  }

  .postItem-footer--actionBar {
    margin-top: @xf-paddingLarge;
    .actionBar-set--external,
    .actionBar-set--internal {
      margin-top: 0;
    }
  }
}

.postItem--comments {
  .comment {
    .comment-contentWrapper {
      margin-bottom: 0;
    }

    .comment-actionBar {
      .actionBar-set {
        margin-top: 0;
      }
    }
  }
}]]></template>
  <template type="public" title="tlg_post_macros" version_id="3020900" version_string="3.2.9"><![CDATA[<xf:macro name="post" arg-post="!" arg-showGroup="{{ false }}" arg-showFull="{{ false }}" arg-showLoader="{{ false }}">
    <xf:css src="message.less" />
    <xf:css src="tlg_comment_row.less"/>
    <xf:css src="tlg_post_item.less"/>

    <xf:js src="xf/comment.js" min="1" />
    <xf:js src="Truonglv/Groups/group.js" addon="Truonglv/Groups" min="1" />
    <xf:extension name="extra_classes" value="postItem" />
    <div class="message {{ extension_value('extra_classes') }} js-post js-inlineModContainer{{ $post.isIgnored() ? ' is-ignored' : '' }}"
         data-author="{{ $post.User.username ?: $post.username }}"
         data-content="post-{$post.post_id}"
         id="js-post-{$post.post_id}">
        <span class="u-anchorTarget" id="post-{$post.post_id}"></span>

        <div class="postItem-inner js-quickEditTarget">
            <header class="postItem-header">
                <xf:avatar user="{$post.User}" size="s" defaultname="{$post.username}"/>
                <div class="postItem-header--user">
                    <xf:extension name="user">
                        <h4 class="attribution">
                            <xf:username user="{$post.User}" defaultname="{$post.username}" />
                        </h4>
                    </xf:extension>

                    <xf:extension name="attribution">
                        <xf:macro name="post_attribution" arg-post="{$post}" />
                    </xf:extension>
                </div>

                <xf:extension name="actions">
                    <xf:macro name="post_actions" arg-post="{$post}" />
                </xf:extension>
            </header>

            <div class="postItem-body">
                <xf:extension name="notices">
                    <xf:macro name="post_notices" arg-post="{$post}" />
                </xf:extension>

                <xf:extension name="user_content">
                    <xf:macro name="post_user_content" arg-post="{$post}" arg-showFull="{$showFull}" />
                </xf:extension>
            </div>

            <xf:extension name="footer">
                <xf:macro name="post_footer" arg-post="{$post}" arg-showLoader="{$showLoader}" />
            </xf:extension>
        </div>
    </div>
</xf:macro>

<xf:macro name="post_user_content" arg-post="!" arg-showFull="{{ false }}">
    <div class="message-userContent lbContainer js-lbContainer{{ $post.isIgnored() ? ' is-ignored' : '' }}"
         data-lb-id="post-{$post.post_id}"
         data-lb-caption-desc="{{ $post.User ? $post.User.username : $post.username }} &middot; {{ date_time($post.post_date) }}">
        <article class="message-body">
            <xf:if is="$showFull || $post.FirstComment.message == $post.message_preview">
                {{ bb_code($post.FirstComment.message, 'tl_group_comment', $post.FirstComment) }}
            <xf:else />
                {{ bb_code($post.message_preview, 'tl_group_comment', $post.FirstComment) }}
                <a href="{{ link('group-posts', $post) }}" class="postItem--readMore">{{ phrase('tlg_read_more...') }}</a>
            </xf:if>
        </article>

        <xf:if is="$post.FirstComment.attach_count">
            <xf:macro template="message_macros" name="attachments"
                      arg-attachments="{$post.FirstComment.Attachments}"
                      arg-message="{$post.FirstComment}"
                      arg-canView="{{ true }}" />
        </xf:if>
    </div>
</xf:macro>

<xf:macro name="post_footer" arg-post="!" arg-showLoader="{{ false }}">
    <footer class="postItem-footer message-footer">
        <div class="reactionsBar js-reactionsList{$post.post_id}{{ $post.FirstComment.reactions ? ' is-active' : '' }}">
            <xf:reactions content="{$post.FirstComment}" link="group-comments/reactions" />
        </div>

        <xf:macro name="post_footer_actions" arg-post="{$post}" />

        <div class="postItem--comments js-messageResponses{{ (!$post.canComment() && $post.comment_count == 0) ? ' is-hidden' : '' }}">
            <xf:if is="$showLoader && $post.hasMoreComments()">
                <xf:set var="$firstComment" value="{{ $post.LatestComments|first }}" />
                <a href="{{ link('group-comments/loader', $firstComment) }}"
                   data-xf-init="tlg-comment-loader"
                   data-container="< .js-messageResponses | .js-replyNewMessageContainer"
                   data-message-selector=".js-comment"
                   rel="nofollow"
                   data-loaded="{{[{$post.first_comment_id}]|json}}"
                   class="commentLoader">{{ phrase('tlg_view_previous_comments...') }}</a>
            </xf:if>
            <div class="js-replyNewMessageContainer"><xf:trim>
                <xf:foreach loop="$post.LatestComments" value="$comment">
                    <xf:macro
                            template="tlg_comment_macros"
                            name="comment"
                            arg-comment="{$comment}"
                            arg-content="{$post}"
                    />
                </xf:foreach>
            </xf:trim></div>

            <xf:macro name="post_comment_form" arg-post="{$post}" />
        </div>
    </footer>
</xf:macro>

<xf:macro name="post_footer_actions" arg-post="!">
    <div class="postItem-footer--actionBar message-actionBar actionBar">
        <xf:if contentcheck="true">
            <div class="actionBar-set actionBar-set--external">
                <xf:contentcheck>
                    <xf:if is="$post.FirstComment.canReact()">
                        <xf:react content="{$post.FirstComment}" link="group-comments/react"
                                  list="< .postItem-footer | .js-reactionsList{$post.post_id}" />
                        <xf:if is="$post.canComment()">
                            <a data-xf-click="tlg-reply"
                               data-target="< .postItem-footer | .js-postForm{$post.post_id}"
                               data-author="{{ $post.FirstComment.User ? $comment.User.username : $comment.username }}"
                               class="actionBar-action--reply actionBar-action"
                               data-focus-only="1">{{ phrase('comment') }}</a>
                        </xf:if>
                    </xf:if>
                </xf:contentcheck>
            </div>
        </xf:if>
        <xf:if contentcheck="true">
            <div class="actionBar-set actionBar-set--internal">
                <xf:contentcheck>
                    <xf:if is="$post.FirstComment.canEdit()">
                        <xf:comment>https://nobita.me/threads/87421/</xf:comment>
                        <xf:css src="editor.less" />
                        <a href="{{ link('group-comments/edit', $post.FirstComment) }}"
                           data-editor-target="< #js-post-{$post.post_id} | .js-quickEditTarget"
                           class="postItem--actionBar--edit actionBar-action"
                           data-xf-click="quick-edit">{{ phrase('edit') }}</a>
                    </xf:if>
                </xf:contentcheck>
            </div>
        </xf:if>
    </div>
</xf:macro>

<xf:macro name="post_comment_form" arg-post="!">
    <xf:if is="$post.canComment()">
        <xf:macro
                template="tlg_comment_macros"
                name="comment_form"
                arg-target="js-postForm{$post.post_id}"
                arg-attachmentData="{$post.getNewComment().getAttachmentEditorData()}"
                arg-formUrl="{{ link('group-posts/comment', $post) }}" />
    </xf:if>
</xf:macro>

<xf:macro name="post_notices" arg-post="!">
    <xf:if is="$post.FirstComment.message_state == 'deleted'">
        <div class="messageNotice messageNotice--deleted">
            <xf:macro template="deletion_macros" name="notice" arg-log="{$post.FirstComment.DeletionLog}" />
        </div>
    <xf:elseif is="$post.FirstComment.message_state == 'moderated'" />
        <div class="messageNotice messageNotice--moderated">
            {{ phrase('this_message_is_awaiting_moderator_approval_and_is_invisible_to_normal') }}
        </div>
    </xf:if>
    <xf:if is="$post.isIgnored()">
        <div class="messageNotice messageNotice--ignored">
            {{ phrase('you_are_ignoring_content_by_this_member') }}
            <xf:showignored />
        </div>
    </xf:if>
</xf:macro>

<xf:macro name="post_actions" arg-post="!">
    <xf:if contentcheck="true">
        <div class="postItem-header--menu">
            <xf:button class="button--link menuTrigger" data-xf-click="menu"
                       aria-expanded="false" aria-haspopup="true"
                       title="{{ phrase('more_options') }}">&#8226;&#8226;&#8226;</xf:button>
            <div class="menu" data-menu="menu" aria-hidden="true">
                <div class="menu-content">
                    <h4 class="menu-header">{{ phrase('more_options') }}</h4>
                    <xf:contentcheck>
                        <xf:if is="$post.canDelete()">
                            <a href="{{ link('group-comments/delete', $post.FirstComment) }}"
                               class="menu-linkRow"
                               data-xf-click="overlay">{{ phrase('delete') }}</a>
                        </xf:if>
                        <xf:if is="$post.FirstComment.canReport()">
                            <a href="{{ link('group-comments/report', $post.FirstComment) }}"
                               class="menu-linkRow"
                               data-xf-click="overlay">{{ phrase('report') }}</a>
                        </xf:if>
                        <xf:if is="$post.canStickUnstick()">
                            <a href="{{ link('group-posts/toggle-sticky', $post) }}"
                               class="menu-linkRow">{{ $post.sticky ? phrase('tlg_unstick_post') : phrase('tlg_stick_post') }}</a>
                        </xf:if>
                    </xf:contentcheck>
                </div>
            </div>
        </div>
    </xf:if>
</xf:macro>

<xf:macro name="post_attribution" arg-post="!">
    <ul class="listInline listInline--bullet message-attribution">
        <li>
            <a href="{{ link('group-posts', $post) }}" class="u-concealed"><xf:date time="{$post.post_date}" /></a>
        </li>
        <xf:if is="$showGroup">
            <li>
                <a href="{{ link('groups', $post.Group) }}" class="u-concealed">{$post.Group.name}</a>
            </li>
        </xf:if>
    </ul>
</xf:macro>]]></template>
  <template type="public" title="tlg_post_view" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">newsFeed</xf:set>
</xf:wrap>

<xf:title>{$post.getMetadataTitle()}</xf:title>

<xf:set var="$fpSnippet" value="{{ snippet($post.FirstComment.message, 0, {'stripBbCode': true}) }}" />
<xf:if is="$post.getMetadataShareImage()">
    <xf:set var="$image">{$post.getMetadataShareImage()}</xf:set>
<xf:elseif is="property('publicMetadataLogoUrl')" />
    <xf:set var="$image">{{ base_url(property('publicMetadataLogoUrl'), true) }}</xf:set>
</xf:if>

<xf:macro template="metadata_macros" name="metadata"
          arg-description="{$fpSnippet}"
          arg-shareUrl="{{ link('canonical:group-posts', $post) }}"
          arg-imageUrl="{$image}"
          arg-type="article"
          arg-title="{$post.getMetadataTitle()}"
          arg-canonicalUrl="{{ link('canonical:group-posts', $post, {'page': $page}) }}" />

<div class="block block--messages" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
     data-type="tl_group_wall_post"
     data-href="{{ link('inline-mod') }}">
    <div class="block-container lbContainer"
         data-xf-init="lightbox"
         data-message-selector=".js-post"
         data-lb-id="group-{$group.group_id}"
         data-lb-universal="{$xf.options.lightBoxUniversal}">
        <div class="block-body js-newPostsContainer">
            <xf:macro template="tlg_post_macros"
                      name="post"
                      arg-showFull="{{ true }}"
                      arg-post="{$post}" />
        </div>
    </div>
</div>

<xf:pagenav link="group-posts" data="{$post}"
            page="{$page}" perpage="{$perPage}"
            total="{$total}" />]]></template>
  <template type="public" title="tlg_reaction_item_comment" version_id="2010301" version_string="2.1.3"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-comment="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
    <div class="contentRow-title">
        <xf:if is="$comment.user_id == $xf.visitor.user_id">
            {{ phrase('tlg_x_reacted_to_your_comment_in_the_group_y', {
                'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
                'reaction': alert_reaction($reactionId, 'medium')|preescaped,
                'title': '<a href="' . link('group-comments', $comment) . '">' . $comment.Group.name . '</a>'
            }) }}
        <xf:else />
            {{ phrase('tlg_x_reacted_to_ys_comment_in_the_group_z', {
                'name': username_link($reactionUser, false, {'defaultname': $fallbackName}),
                'posterParams': 'href="' . link('group-comments', $comment) . '"',
                'poster': $comment.username,
                'reaction': alert_reaction($reactionId, 'medium')|preescaped,
                'title': '<a href="' . link('group-comments', $comment) . '">' . $comment.Group.name . '</a>'
            }) }}
        </xf:if>
    </div>

    <div class="contentRow-snippet">{{ snippet($comment.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>

    <div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet"
          arg-reactionUser="{$reaction.ReactionUser}"
          arg-reactionId="{$reaction.reaction_id}"
          arg-comment="{$content}"
          arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="tlg_report_content_comment" version_id="2000000" version_string="2.0.0"><![CDATA[<div class="block-row block-row--separated">
    {{ bb_code($report.content_info.message, 'tl_group_comment', $content ?: $report.User) }}
</div>

<div class="block-row block-row--separated block-row--minor">
    <dl class="pairs pairs--inline">
        <dt>{{ phrase('tlg_group') }}</dt>
        <dd><a href="{{ link('groups', $report.content_info) }}">{$report.content_info.group_name}</a></dd>
    </dl>
</div>]]></template>
  <template type="public" title="tlg_report_content_group" version_id="2010301" version_string="2.1.3"><![CDATA[<div class="block-row block-row--separated">
    {{ bb_code($report.content_info.message, 'tl_group', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
    <dl class="pairs pairs--inline">
        <dt>{{ phrase('tlg_category') }}</dt>
        <dd><a href="{{ link('group-categories', $report.content_info) }}">{$report.content_info.category_title}</a></dd>
    </dl>
</div>]]></template>
  <template type="public" title="tlg_resource_add" version_id="3000700" version_string="3.0.7"><![CDATA[<xf:title>{{ $resource.exists() ? phrase('tlg_edit_resource') : phrase('tlg_add_resource') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">resources</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title">
        <h2 class="p-title-value">{{ $resource.exists() ? phrase('tlg_edit_resource') : phrase('tlg_add_resource') }}</h2>
    </div>
</div>

<xf:form action="{{ $resource.exists()
    ? link('group-resources/edit', $resource)
    : link('group-resources/add', null, {'group_id': $group.group_id}) }}"
         ajax="true" upload="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:textboxrow name="title" value="{$resource.title}"
                           label="{{ phrase('title') }}" maxlength="{{ max_length($resource, 'title') }}"/>
            <xf:editorrow name="message" value="{{ $resource.FirstComment ? $resource.FirstComment.message : '' }}"
                          label="{{ phrase('description') }}" />

            <xf:formrow label="{{ phrase('tlg_uploaded_files') }}" data-xf-init="attachment-manager">
                <xf:macro template="helper_attach_upload" name="upload_block"
                          arg-attachmentData="{$attachmentData}"/>
            </xf:formrow>

            <xf:if is="!$resource.exists()">
                <hr class="formRowSep" />
                <xf:set var="$recommendSize">{$xf.app.options.tl_groups_resourceIconSize}</xf:set>
                <xf:radiorow label="{{ phrase('tlg_resource_icon') }}"
                             name="icon_type" value="{{ $resource.icon_url ? 'remote' : 'local' }}"
                             explain="{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {'width':$recommendSize,'height':$recommendSize}) }}">
                    <xf:option value="local" label="{{ phrase('tlg_upload_from_your_device') }}">
                        <xf:dependent>
                            <xf:upload name="resource_icon" />
                        </xf:dependent>
                    </xf:option>
                    <xf:option value="remote" label="{{ phrase('tlg_remote_image_url') }}">
                        <xf:dependent>
                            <xf:textbox name="icon_url" value="{$resource.icon_url}"
                                        maxlength="{{ max_length($resource, 'icon_url') }}" />
                        </xf:dependent>
                    </xf:option>
                </xf:radiorow>
            </xf:if>
        </div>

        <xf:submitrow icon="save" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_resource_download_logs" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:title>{$resource.title}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">resources</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title">
        <h2 class="p-title-value">
            {{ phrase('tlg_users_download_resource:') }}
            <a href="{{ link('group-resources', $resource) }}">{$resource.title}</a>
        </h2>
    </div>
</div>

<div class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:if is="$total > 0">
                <xf:foreach loop="$entities" value="$log">
                    <xf:macro name="log_row" arg-log="{$log}" />
                </xf:foreach>
            <xf:else />
                <div class="blockMessage">{{ phrase('tlg_there_are_no_users_download_this_resource') }}</div>
            </xf:if>
        </div>
    </div>

    <div class="block-outer block-outer--after">
        <xf:pagenav page="{$page}" perpage="{$perPage}"
                    total="{$total}" link="group-resources/logs"
                    data="{$resource}"/>
    </div>
</div>

<xf:macro name="log_row" arg-log="!">
    <div class="block-row">
        <div class="contentRow contentRow--alignMiddle">
            <div class="contentRow-figure">
                <xf:avatar user="$log.User" size="xs" />
            </div>
            <div class="contentRow-main">
                <div class="contentRow-extra contentRow-extra--large">{$log.total|number}</div>
                <h3 class="contentRow-title"><xf:username user="$log.User" rich="true" /></h3>
                <div class="contentRow-minor contentRow-minor--hideLinks">
                    <ul class="listInline listInline--bullet">
                        <li>
                            <xf:fa icon="fa-download" />
                            <xf:date time="{$log.download_date}" />
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="tlg_resource_icon" version_id="3000700" version_string="3.0.7"><![CDATA[<xf:title>{{ phrase('tlg_resource_change_icon') }}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">resources</xf:set>
</xf:wrap>

<xf:form action="{{ link('group-resources/icon', $resource) }}" upload="true" ajax="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:set var="$recommendSize">{$xf.app.options.tl_groups_resourceIconSize}</xf:set>
            <xf:radiorow label="{{ phrase('tlg_resource_icon') }}"
                         name="icon_type" value="{{ $resource.icon_url ? 'remote' : 'local' }}"
                         explain="{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {'width':$recommendSize,'height':$recommendSize}) }}">
                <xf:option value="local" label="{{ phrase('tlg_upload_from_your_device') }}">
                    <xf:dependent>
                        <xf:upload name="resource_icon" />
                    </xf:dependent>
                </xf:option>
                <xf:option value="remote" label="{{ phrase('tlg_remote_image_url') }}">
                    <xf:dependent>
                        <xf:textbox name="icon_url" value="{$resource.icon_url}"
                                    maxlength="{{ max_length($resource, 'icon_url') }}" />
                    </xf:dependent>
                </xf:option>
            </xf:radiorow>

            <xf:checkboxrow label="">
                <xf:option name="delete" value="1">{{ phrase('tlg_resource_delete_current_icon') }}</xf:option>
            </xf:checkboxrow>
        </div>

        <xf:submitrow icon="save" />
    </div>
</xf:form>]]></template>
  <template type="public" title="tlg_resource_macros" version_id="3000700" version_string="3.0.7"><![CDATA[<xf:macro name="resource_list" arg-resources="!" arg-group="!">
    <div class="structItemContainer">
        <xf:foreach loop="$resources" value="$resource">
            <xf:macro name="resource_list_item" arg-resource="{$resource}"
                      arg-group="{$group}"/>
        </xf:foreach>
    </div>
</xf:macro>

<xf:macro name="resource_actions" arg-resource="!">
<xf:if contentcheck="true">
    <div class="buttonGroup">
        <xf:contentcheck>
            <xf:if contentcheck="true">
                <div class="buttonGroup-buttonWrapper">
                    <div class="menu eventItem--menuControls" data-menu="menu" aria-hidden="true">
                        <div class="menu-content">
                            <xf:contentcheck>
                                <xf:if is="$resource.canEdit()">
                                    <a href="{{ link('group-resources/edit', $resource) }}"
                                       class="menu-linkRow">{{ phrase('edit') }}</a>
                                    <a href="{{ link('group-resources/icon', $resource) }}"
                                       class="menu-linkRow">{{ phrase('tlg_resource_change_icon') }}</a>
                                </xf:if>
                                <xf:if is="$resource.canDelete()">
                                    <a href="{{ link('group-resources/delete', $resource) }}" data-xf-click="overlay"
                                       class="menu-linkRow">{{ phrase('delete') }}</a>
                                </xf:if>
                                <xf:if is="$resource.canViewDownloadLogs()">
                                    <a href="{{ link('group-resources/logs', $resource) }}"
                                       class="menu-linkRow">{{ phrase('tlg_download_logs') }}</a>
                                </xf:if>
                            </xf:contentcheck>
                        </div>
                    </div>

                    <xf:button class="button--link menuTrigger" data-xf-click="menu"
                               aria-expanded="false" aria-haspopup="true"
                               data-menu="< .buttonGroup | .eventItem--menuControls"
                               title="{{ phrase('more_options') }}">&#8226;&#8226;&#8226;</xf:button>
                </div>
            </xf:if>

            <xf:if is="$resource.canDownload()">
                <xf:button href="{{ link('group-resources/download', $resource) }}"
                           icon="download"
                           class="button--link">{{ phrase('download') }}</xf:button>
            </xf:if>
        </xf:contentcheck>
    </div>
</xf:if>
</xf:macro>

<xf:macro name="resource_list_item" arg-resource="!" arg-group="!">
    <xf:css src="structured_list.less" />
    <div class="structItem structItem--resource"
         data-author="{{ $resource.User.username ?: $resource.username }}">
        <div class="structItem-cell structItem-cell--icon structItem-cell--iconExpanded">
            <div class="structItem-iconContainer">
                <xf:if is="$resource.display_icon_url">
                    <a href="{{ link('group-resources', $resource) }}" class="avatar avatar--s">
                        <img src="{$resource.display_icon_url}" alt="{$resource.title}" />
                    </a>
                <xf:else />
                    <xf:avatar user="$resource.User" size="s" defaultname="{$resource.username}" />
                </xf:if>
            </div>
        </div>
        <div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
            <div class="structItem-title">
                <a href="{{ link('group-resources', $resource) }}" data-tp-primary="on">{$resource.title}</a>
            </div>

            <div class="structItem-minor">
                <ul class="structItem-parts">
                    <li><xf:username user="$resource.User" defaultname="{$resource.username}" /></li>
                    <li class="structItem-startDate"><a href="{{ link('group-resources', $resource) }}"
                                                        rel="nofollow"><xf:date time="{$resource.resource_date}" /></a></li>
                    <li class="structItem-downloadCount">
                        {{ phrase('tlg_resource_downloads:') }}&nbsp;{$resource.download_count|number}
                    </li>
                </ul>
            </div>
        </div>
    </div>
</xf:macro>]]></template>
  <template type="public" title="tlg_resource_view" version_id="3020400" version_string="3.2.4"><![CDATA[<xf:title>{$resource.title}</xf:title>

<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">resources</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title">
        <h2 class="p-title-value">{$resource.title}</h2>
        <xf:if contentcheck="true">
            <div class="p-title-pageAction">
                <xf:contentcheck><xf:macro name="tlg_resource_macros::resource_actions" arg-resource="{$resource}"/></xf:contentcheck>
            </div>
        </xf:if>
    </div>
</div>

<div class="block">
    <div class="block-container">
        <div class="block-body">
            <div class="block-row">
                {{ bb_code($resource.FirstComment.message, 'tl_group_comment', $resource.FirstComment) }}
            </div>
        </div>

        <div class="block-footer">
            <ul class="listInline listInline--bullet">
                <li>
                    <xf:fa icon="fa-user" />
                    <xf:username user="{$resource.User}" defaultname="{$resource.username}"/>
                </li>
                <li>
                    <xf:fa icon="fa-history" />
                    <xf:date time="{$resource.resource_date}" />
                </li>
                <li class="structItem-downloadCount"
                    data-xf-init="tooltip" title="{{ phrase('tlg_resource_downloads') }}">
                    <xf:fa icon="fa-download" />&nbsp;{$resource.download_count|number}
                </li>
            </ul>
        </div>
    </div>
</div>

<xf:set var="$afterHtml">
    <xf:pagenav
            page="{$data.page}" perpage="{$data.perPage}" total="{$data.totalComments}"
            link="group-resources" data="{$data.event}" params="{$data.pageNavParams}"
            wrapperclass="block-outer-main" />
</xf:set>
<xf:macro template="tlg_comment_macros" name="comment_list"
          arg-afterHtml="{$afterHtml}"
          arg-comments="{$comments}" arg-content="{$resource}"/>
<xf:macro template="tlg_comment_macros" name="comment_form_block"
          arg-formAction="{{ link('group-resources/comment', $resource) }}"
          arg-comments="{$comments}" arg-content="{$resource}"
          arg-attachmentData="{$attachmentData}" />]]></template>
  <template type="public" title="tlg_search_form_group" version_id="2000000" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('tlg_search_groups') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:formrow rowtype="input" label="{{ phrase('tlg_search_in_categories') }}">
    <ul class="inputList">
        <li><xf:select name="c[categories][]" size="7" multiple="multiple" value="{$input.c.categories|default([0])}">
            <xf:option value="">{{ phrase('all_categories') }}</xf:option>
            <xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
                <xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp&nbsp', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
            </xf:foreach>
        </xf:select></li>
        <li><xf:checkbox standalone="true">
            <xf:option name="c[child_categories]" selected="{{ (!$input.c || $input.c.child_categories) }}"
                       label="{{ phrase('tlg_search_child_categories_as_well') }}" />
        </xf:checkbox></li>
    </ul>
</xf:formrow>

<xf:macro template="search_form_macros" name="order"
          arg-isRelevanceSupported="{$isRelevanceSupported}"
          arg-input="{$input}" />]]></template>
  <template type="public" title="tlg_search_result_comment" version_id="2020900" version_string="2.2.9"><![CDATA[<li class="block-row block-row--separated{{ $comment.isIgnored() ? ' is-ignored' : '' }} js-inlineModContainer"
    data-author="{{ $comment.User.username ?: $comment.username }}">
    <div class="contentRow{{ !$comment.isVisible() ? ' is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$comment.User}" size="s" defaultname="{$comment.username}" />
		</span>
        <div class="contentRow-main">
            <h3 class="contentRow-title">
                <a href="{{ link('group-comments', $comment) }}">{{ highlight($comment.Group.name, $options.term) }}</a>
            </h3>

            <div class="contentRow-snippet">{{ snippet($comment.message, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

            <div class="contentRow-minor contentRow-minor--hideLinks">
                <ul class="listInline listInline--bullet">
                    <xf:if is="$options.mod == 'tl_group_comment' && $comment.canUseInlineModeration()">
                        <li><xf:checkbox standalone="true">
                            <xf:option value="{$comment.comment_id}" class="js-inlineModToggle"
                                       data-xf-init="tooltip"
                                       title="{{ phrase('select_for_moderation')|for_attr }}" />
                        </xf:checkbox></li>
                    </xf:if>
                    <li><xf:username user="{$comment.User}" defaultname="{$comment.username}" /></li>
                    <li>{{ phrase('tlg_comment') }}</li>
                    <li><xf:date time="{$comment.comment_date}" /></li>
                    <li>{{ phrase('tlg_group:') }} <a href="{{ link('groups', $comment.Group) }}"
                                                      data-preview-url="{{ link('groups/preview', $comment.Group) }}"
                                                      data-xf-init="preview-tooltip">{$comment.Group.name}</a></li>
                </ul>
            </div>
        </div>
    </div>
</li>]]></template>
  <template type="public" title="tlg_search_result_event" version_id="2020900" version_string="2.2.9"><![CDATA[<li class="block-row block-row--separated {{ $event.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $event.User.username ?: $event.username }}">
    <div class="contentRow {{ !$event.isVisible() ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$event.User}" size="s" defaultname="{$event.username}" />
		</span>
        <div class="contentRow-main">
            <h3 class="contentRow-title">
                <a href="{{ link('group-events', $event) }}">{{ highlight($event.event_name, $options.term) }}</a>
            </h3>

            <div class="contentRow-snippet">{{ snippet($event.FirstComment.message, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

            <div class="contentRow-minor contentRow-minor--hideLinks">
                <ul class="listInline listInline--bullet">
                    <xf:if is="$options.mod == 'tl_group_event' && $event.canUseInlineModeration()">
                        <li><xf:checkbox standalone="true">
                            <xf:option value="{$event.event_id}" class="js-inlineModToggle"
                                       data-xf-init="tooltip"
                                       title="{{ phrase('select_for_moderation')|for_attr }}" />
                        </xf:checkbox></li>
                    </xf:if>
                    <li><xf:username user="{$event.User}" defaultname="{$event.username}" /></li>
                    <li>{{ phrase('tlg_event') }}</li>
                    <li><xf:date time="{$event.created_date}" /></li>
                    <li>{{ phrase('tlg_comments:') }} {$event.comment_count|number}</li>
                    <li>{{ phrase('tlg_group:') }} <a href="{{ link('groups', $event.Group) }}"
                                                      data-preview-url="{{ link('groups/preview', $event.Group) }}"
                                                      data-xf-init="preview-tooltip">{$event.Group.name}</a></li>
                </ul>
            </div>
        </div>
    </div>
</li>]]></template>
  <template type="public" title="tlg_search_result_group" version_id="2010301" version_string="2.1.3"><![CDATA[<li class="block-row block-row--separated{{ $group.isIgnored() ? ' is-ignored' : '' }} js-inlineModContainer"
    data-author="{{ $group.User.username ?: $group.owner_username }}">
    <div class="contentRow{{ !$group.isVisible() ? ' is-deleted' : '' }}">
		<span class="contentRow-figure">
            <xf:callback class="Truonglv\Groups\Callback"
                         method="renderAvatar"
                         params="{'group': $group, 'linkClass': 'avatar avatar--s'}" />
		</span>
        <div class="contentRow-main">
            <h3 class="contentRow-title">
                <a href="{{ link('groups', $group) }}">{{ highlight($group.name, $options.term) }}</a>
            </h3>

            <div class="contentRow-snippet">{{ snippet($group.description, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

            <div class="contentRow-minor contentRow-minor--hideLinks">
                <ul class="listInline listInline--bullet">
                    <xf:if is="$options.mod == 'tl_group' && $group.canUseInlineModeration()">
                        <li><xf:checkbox standalone="true">
                            <xf:option value="{$group.group_id}" class="js-inlineModToggle"
                                       data-xf-init="tooltip"
                                       title="{{ phrase('select_for_moderation')|for_attr }}" />
                        </xf:checkbox></li>
                    </xf:if>
                    <li><xf:username user="{$group.User}" defaultname="{$group.owner_username}" /></li>
                    <li>{{ phrase('tlg_group') }}</li>
                    <li><xf:date time="{$group.created_date}" /></li>
                    <li>{{ phrase('tlg_category:') }} <a href="{{ link('group-categories', $group.Category) }}">{$group.Category.category_title}</a></li>
                </ul>
            </div>
        </div>
    </div>
</li>]]></template>
  <template type="public" title="tlg_search_result_resource" version_id="2020900" version_string="2.2.9"><![CDATA[<li class="block-row block-row--separated {{ $resource.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer"
    data-author="{{ $resource.User.username ?: $resource.username }}">
    <div class="contentRow">
		<span class="contentRow-figure">
			<xf:avatar user="{$resource.User}" size="s" defaultname="{$resource.username}" />
		</span>
        <div class="contentRow-main">
            <h3 class="contentRow-title">
                <a href="{{ link('group-resources', $resource) }}">{{ highlight($resource.title, $options.term) }}</a>
            </h3>

            <div class="contentRow-snippet">{{ snippet($resource.FirstComment.message, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

            <div class="contentRow-minor contentRow-minor--hideLinks">
                <ul class="listInline listInline--bullet">
                    <xf:if is="$options.mod == 'tl_group_resource'">
                        <li><xf:checkbox standalone="true">
                            <xf:option value="{$resource.resource_id}" class="js-inlineModToggle"
                                       data-xf-init="tooltip"
                                       title="{{ phrase('select_for_moderation')|for_attr }}" />
                        </xf:checkbox></li>
                    </xf:if>
                    <li><xf:username user="{$resource.User}" defaultname="{$resource.username}" /></li>
                    <li>{{ phrase('tlg_resource') }}</li>
                    <li><xf:date time="{$resource.resource_date}" /></li>
                    <li>{{ phrase('tlg_comments:') }} {$resource.comment_count|number}</li>
                    <li>{{ phrase('tlg_group:') }} <a href="{{ link('groups', $resource.Group) }}"
                                                      data-preview-url="{{ link('groups/preview', $resource.Group) }}"
                                                      data-xf-init="preview-tooltip">{$resource.Group.name}</a></li>
                </ul>
            </div>
        </div>
    </div>
</li>]]></template>
  <template type="public" title="tlg_style.less" version_id="3030200" version_string="3.3.2"><![CDATA[{{ include('tlg_css_helper.less') }}

// declare variables.
@groupNavItemHeight: 42px;

.groupViewNav--item {
  &:hover, &.is-active {
    background-color: @xf-paletteColor1;
    a {
      text-decoration: none;
      .xf-link();
    }
  }
}

.groupViewNav {
  .groupViewNav--item {
    a {
      padding: @xf-paddingLarge;
      display: flex;

      .groupViewNav--itemText {
        flex: 1;
      }
    }

    &:last-child {
      a {
        .m-borderBottomRadius(@xf-borderRadiusMedium - 1);
      }
    }

    &.is-active {
      a {
        border-left: 2px solid @xf-borderColorFeature;
      }
    }

    .badge {
      align-self: center;
    }
  }
}

.groupCover-header {
  .groupCover {
    .m-borderTopRadius(@xf-borderRadiusSmall + 1);
  }
}

.groupCoverFrame {
  width: 100%;
  height: 205px;
  overflow: hidden;
  position: relative;

  .m-transition(height, 200ms, ease-in);

  &.groupCoverFrame--setup {
    background-color: @xf-contentAccentBg;
    .loader--line-scale {
      > div {
        background-color: @xf-textColorAccentContent;
      }
    }
  }

  a {
    &:hover {
      text-decoration: none;
    }
  }

  .groupCover--img {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;

    .m-transition(top);
  }

  &.groupCoverFrame--setup {
    .groupCover--img {
      .m-transition(none);
    }
  }

  .groupCover--guide {
    position: absolute;
    font-size: @xf-fontSizeSmall;
    padding: @xf-paddingMedium @xf-paddingLarge;
    background-color: rgba(0,0,0,.4);
    border-radius: @xf-borderRadiusMedium;
    color: @xf-paletteNeutral1;

    .m-dropShadow();

    &:before {
      .m-faBase();
      .m-faContent("\f047");
      margin-right: @xf-paddingSmall;
    }
  }

  // fixed flash text while cover editor
  .cropControls {
    display: none;
  }
}

.timePicker--wrap {
  display: block;
  padding: @xf-paddingLarge;
  box-sizing: border-box;

  .timePicker--wrap--text {
    font-size: @xf-fontSizeNormal;
  }
}

.flex--row {
  display: flex;
  flex-direction: row;
}

.flex--grow {
  flex-grow: 1;
}

// Group Prevew Customized
.tooltip--preview {
  .tooltip-content {
    .tooltip-expanded {
      max-height: 255px;
      margin: -@xf-paddingMedium;

      .memberTooltip-avatar {
        padding-right: 10px;
      }

      .groupCoverFrame {
        height: 90px;
        font-size: 25px;
      }

      .memberTooltip-actions {
        display: flex;
      }
    }

    .memberTooltip-name {
      font-size: @xf-fontSizeLarge;
    }

    .groupAvatar {
      .m-avatarSize(50px);
    }
  }
}

.groupCoverFrame,
.groupAvatar--default {
  .m-groupFlexCenter();

  font-size: 50px;
}

// Group avatar default (text dynamic)
.groupAvatar {
  display: flex;
  border-radius: @xf-tlg_avatarBorderRadius;
  overflow: hidden;

  &:hover {
    text-decoration: none;
  }

  img {
    width: 100%;
  }
}

// SIDEBAR GROUP AVATAR
.contentRow-figure {
  .groupAvatar {
    .m-avatarSize(24px);
    border-radius: @xf-tlg_avatarBorderRadius;
  }
}

.groupAvatar--default {
  text-decoration: none;
}

.p-body-sideNav {
  .groupAvatar {
    .m-avatarSize(@xf-sidebarWidth);
  }
}

.p-body-sideNavInner {
  &.is-active,
  &.is-transitioning {
    .groupAvatar-block {
      .groupAvatar {
        width: 100%;
        height: 100%;
        border-radius: 0;
      }
    }
  }
}

.groupHeader-navList {
  .groupViewNav--item, .groupHeader-navList--user {
    padding: @xf-paddingMedium;
  }

  .hScroller-action {
    .m-hScrollerActionColorVariation(@xf-contentHighlightBg, @xf-textColorFeature, @xf-textColorEmphasized);
  }

  .groupViewNav--item {
    height: @groupNavItemHeight;
    box-sizing: border-box;
    line-height: (@groupNavItemHeight + @xf-paddingMedium * 2)/2;
    padding-left: @xf-paddingLargest;
    padding-right: @xf-paddingLargest;

    &.is-active {
      border-bottom: 2px solid @xf-borderColorFeature;
      background-color: @xf-paletteColor1;

      a {
        background-color: transparent;
      }
    }
  }

  .groupHeader-navList--user {
    min-width: 200px;
    justify-content: flex-end;
  }
}

// template: tl_groups_bb_code_group.html
.groupBbCode--wrapper {
  max-width: 320px;

  .listInline {
    margin: 0 !important;
  }
}

.groupMembers {
  .contentRow {
    .avatar {
      .m-avatarSize(66px);
    }
  }
}

// 900px
@media (min-width: @xf-responsiveWide) {
  .groupHeader-navList {
    .hScroller {
      display: none !important;
    }

    .groupHeader-navList--user {
      justify-content: flex-start;
    }
  }
}

// 900px
@media (max-width: @xf-responsiveWide) {
  .groupHeader-navList {
    .hScroller {
      display: block !important;
    }
  }

  .groupCover-header {
    position: relative;
    .groupCover {
      .m-borderTopRadius(0);
    }

    .groupHeader-navList--user {
      position: absolute;
      bottom: @groupNavItemHeight;
      right: 0;

      .button--groupJoin,
      .button--groupAlerts {
        display: none;
      }

      .button {
        &.menuTrigger {
          border: 1px solid @xf-borderColor;
          border-top-left-radius: @xf-borderRadiusMedium !important;
          border-bottom-left-radius: @xf-borderRadiusMedium !important;
        }
      }
    }
  }
}

.tooltip-group--inner {
  .memberTooltip-avatar {
    width: 60px;
  }
}

.groupBadge {
  display: flex;
  align-items: center;
  padding: @xf-paddingMedium;
  background-color: @xf-inlineModHighlightColor;
  border-radius: @xf-borderRadiusMedium;

  &.has-cover {
    background-position: center;
    background-size: cover;
    background-repeat: no-repeat;
    position: relative;
  }

  .groupBadge-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,.3);
    border-radius: @xf-borderRadiusMedium;
  }

  .groupAvatar {
    width: 28px;
    height: 28px;
    min-width: 28px;
    z-index: 1;
  }

  .groupBadge-name {
    margin-left: @xf-paddingMedium;
    z-index: 1;
    color: #fff;
    text-overflow: ellipsis;
    overflow: hidden;
    width: ~"calc(100% - 28px)";
    white-space: nowrap;
    &:hover {
      text-decoration: none;
    }
  }
}

.group-qrcode--block {
  .tlg-group--qrcode {
    text-align: center;
  }
}

// tlg_media_album_add_chooser.html
.linkAlbums-fields {
  .input {
    + .input {
      margin-top: @xf-paddingLarge;
    }
  }
}]]></template>
  <template type="public" title="tlg_thread_view" version_id="3000000" version_string="3.0.0"><![CDATA[<xf:wrap template="tlg_group_wrapper">
    <xf:set var="$pageSelected">discussions</xf:set>
    <xf:set var="$noBreadcrumbs">1</xf:set>
    <xf:set var="$noPageOptions">1</xf:set>
</xf:wrap>

<div class="p-body-header">
    <div class="p-title"><h2 class="p-title-value">{{ prefix('thread', $thread) }}{$thread.title}</h2></div>
</div>

<xf:if is="$thread.discussion_type == 'poll'">
    <xf:include template="thread_view_type_poll" />
<xf:elseif is="$thread.discussion_type == 'article'" />
    <xf:include template="thread_view_type_article" />
<xf:elseif is="$thread.discussion_type == 'question'" />
    <xf:include template="thread_view_type_question" />
<xf:elseif is="$thread.discussion_type == 'suggestion'" />
    <xf:include template="thread_view_type_suggestion" />
<xf:else />
    <xf:include template="thread_view" />
</xf:if>]]></template>
  <template type="public" title="tlg_widget_event" version_id="3010600" version_string="3.1.6"><![CDATA[<xf:if is="$events is not empty">
    <xf:css src="tlg_event_style.less" />

    <div class="block widget-events"{{ widget_data($widget) }}>
        <div class="block-container">
            <xf:if is="$title"><h3 class="block-minorHeader">{$title}</h3></xf:if>
            <ul class="block-body">
                <xf:foreach loop="$events" value="$event">
                    <li class="block-row">
                        <xf:macro template="tlg_group_events"
                                  name="event_item"
                                  arg-event="{$event}" />
                    </li>
                </xf:foreach>
            </ul>
        </div>
    </div>
</xf:if>]]></template>
  <template type="public" title="tlg_widget_group" version_id="2010700" version_string="2.1.7"><![CDATA[<xf:if is="$groups is not empty">
    <xf:if is="$style == 'simple'">
        <xf:css src="tls_group_list.less"/>
        <div class="block widget-groups"{{ widget_data($widget) }}>
            <div class="block-container">
                <xf:if is="$title"><h3 class="block-minorHeader">{$title}</h3></xf:if>
                <ul class="block-body">
                    <xf:foreach loop="$groups" value="$group">
                        <li class="block-row">
                            <xf:macro template="tlg_group_list_macros"
                                      name="group_simple"
                                      arg-group="{$group}" />
                        </li>
                    </xf:foreach>
                </ul>
            </div>
        </div>
    <xf:elseif is="$style == 'full'" />
        <div class="block"{{ widget_data($widget) }}>
            <div class="block-container">
                <xf:if is="$title"><h3 class="block-header">{$title}</h3></xf:if>

                <div class="block-body">
                    <xf:macro template="tlg_group_list_macros"
                              name="group_list"
                              arg-columnsPerRow="{$itemsPerRow}"
                              arg-showMembers="{$showMembers}"
                              arg-showSettings="{{ false }}"
                              arg-groups="{$groups}" />
                </div>
            </div>
        </div>
    </xf:if>
</xf:if>]]></template>
</templates>
