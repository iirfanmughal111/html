<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="activity_summary_options_xfmg_latest_albums" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:selectrow name="options[category_ids][]" size="7" multiple="multiple" value="{$options.category_ids}"
	label="{{ phrase('xfmg_display_from_categories') }}">

	<xf:option value="">{{ phrase('xfmg_all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:checkboxrow>
	<xf:option name="options[include_personal_albums]" selected="{$options.include_personal_albums}">
		<xf:label>{{ phrase('xfmg_display_personal_albums') }}</xf:label>
	</xf:option>
</xf:checkboxrow>

<xf:checkboxrow label="{{ phrase('xfmg_only_include_albums_with') }}..." rowtype="noColon">
	<xf:option label="{{ phrase('xfmg_at_least_x_comments') }}" selected="$options.min_comments !== null">
		<xf:numberbox name="options[min_comments]" value="{{ $options.min_comments ?: 0}}" min="0" />
	</xf:option>

	<xf:option label="{{ phrase('reaction_score_at_least_x') }}" selected="$options.min_reaction_score !== null">
		<xf:numberbox name="options[min_reaction_score]" value="{{ $options.min_reaction_score ?: 0 }}" />
	</xf:option>
</xf:checkboxrow>

<xf:formrow rowtype="input"
	label="{{ phrase('sort') }}">

	<div class="inputPair">
		<xf:select name="options[order]" value="{$options.order}">
			<xf:options source="{$sortOrders}" />
		</xf:select>
		<xf:select name="options[direction]" value="{$options.direction}">
			<xf:option value="ASC">{{ phrase('ascending') }}</xf:option>
			<xf:option value="DESC">{{ phrase('descending') }}</xf:option>
		</xf:select>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="activity_summary_options_xfmg_latest_comments" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:checkboxrow label="{{ phrase('xfmg_only_include_comments_with') }}..." rowtype="noColon">
	<xf:option label="{{ phrase('reaction_score_at_least_x') }}" selected="$options.min_reaction_score !== null">
		<xf:numberbox name="options[min_reaction_score]" value="{{ $options.min_reaction_score ?: 0 }}" />
	</xf:option>
</xf:checkboxrow>

<xf:formrow rowtype="input"
	label="{{ phrase('sort') }}">

	<div class="inputPair">
		<xf:select name="options[order]" value="{$options.order}">
			<xf:options source="{$sortOrders}" />
		</xf:select>
		<xf:select name="options[direction]" value="{$options.direction}">
			<xf:option value="ASC">{{ phrase('ascending') }}</xf:option>
			<xf:option value="DESC">{{ phrase('descending') }}</xf:option>
		</xf:select>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="activity_summary_options_xfmg_latest_media" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('maximum_entries') }}" />

<xf:selectrow name="options[category_ids][]" size="7" multiple="multiple" value="{$options.category_ids}"
	label="{{ phrase('xfmg_display_from_categories') }}">

	<xf:option value="">{{ phrase('xfmg_all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:checkboxrow>
	<xf:option name="options[include_personal_albums]" selected="{$options.include_personal_albums}"
		hint="{{ phrase('xfmg_display_from_personal_albums_hint') }}">

		<xf:label>{{ phrase('xfmg_display_from_personal_albums') }}</xf:label>
	</xf:option>
</xf:checkboxrow>

<xf:checkboxrow label="{{ phrase('xfmg_only_include_media_items_with') }}..." rowtype="noColon">
	<xf:option label="{{ phrase('xfmg_at_least_x_comments') }}" selected="$options.min_comments !== null">
		<xf:numberbox name="options[min_comments]" value="{{ $options.min_comments ?: 0 }}" />
	</xf:option>

	<xf:option label="{{ phrase('reaction_score_at_least_x') }}" selected="$options.min_reaction_score !== null">
		<xf:numberbox name="options[min_reaction_score]" value="{{ $options.min_reaction_score ?: 0 }}" />
	</xf:option>
</xf:checkboxrow>

<xf:formrow rowtype="input"
	label="{{ phrase('sort') }}">

	<div class="inputPair">
		<xf:select name="options[order]" value="{$options.order}">
			<xf:options source="{$sortOrders}" />
		</xf:select>
		<xf:select name="options[direction]" value="{$options.direction}">
			<xf:option value="ASC">{{ phrase('ascending') }}</xf:option>
			<xf:option value="DESC">{{ phrase('descending') }}</xf:option>
		</xf:select>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_xfmgFfmpeg" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:checkboxrow
	hint="{$hintHtml}"
	html="{$listedHtml}">

	<xf:option name="{$inputName}[enabled]" selected="$option.option_value.enabled" data-hide="true"
		label="{$option.title}">

		<xf:dependent>
			<div>{{ phrase('xfmg_ffmpeg_binary_path') }}</div>
			<xf:textbox name="{$inputName}[ffmpegPath]" value="{$option.option_value.ffmpegPath}" />
			<p class="formRow-explain">{{ phrase('xfmg_enter_path_to_ffmpeg_binary_on_this_server') }}</p>
		</xf:dependent>

		<xf:dependent>
			<xf:checkbox>
				<xf:option name="{$inputName}[thumbnail]" selected="$option.option_value.thumbnail"
					label="{{ phrase('xfmg_generate_thumbnails') }}"
					hint="{{ phrase('xfmg_ffmpeg_generate_thumbnail_explain') }}" />
			</xf:checkbox>
		</xf:dependent>

		<xf:dependent>
			<xf:checkbox>
				<xf:option name="{$inputName}[poster]" selected="$option.option_value.poster"
					label="{{ phrase('xfmg_generate_posters') }}"
					hint="{{ phrase('xfmg_generate_posters_explain') }}" />
			</xf:checkbox>
		</xf:dependent>

		<xf:dependent>
			<xf:checkbox>
				<xf:option name="{$inputName}[transcode]" selected="$option.option_value.transcode"
					label="{{ phrase('xfmg_transcode_media') }}"
					hint="{{ phrase('xfmg_transcode_media_explain') }}">

					<xf:dependent>
						<div>{{ phrase('xfmg_php_binary_path') }}</div>
						<xf:textbox name="{$inputName}[phpPath]" value="{$option.option_value.phpPath}" />
						<p class="formRow-explain">{{ phrase('xfmg_to_transcode_media_we_need_to_defer_processing_to_command_line') }}</p>
					</xf:dependent>

					<xf:dependent>
						<div>{{ phrase('xfmg_transcode_limit') }}</div>
						<xf:numberbox name="{$inputName}[limit]" value="{{ $option.option_value.limit ?: 1 }}" min="1" max="20" />
						<p class="formRow-explain">{{ phrase('xfmg_ffmpeg_transcode_limit_explain') }}</p>
					</xf:dependent>

					<xf:dependent>
						<xf:checkbox>
							<xf:option label="{{ phrase('xfmg_force_transcoding_of_all_videos') }}" name="{$inputName}[forceTranscode]" value="1" selected="{{ $option.option_value.forceTranscode ?: false }}">
								<xf:hint>{{ phrase('xfmg_force_transcoding_of_all_videos_hint') }}</xf:hint>
							</xf:option>
						</xf:checkbox>
					</xf:dependent>
				</xf:option>
			</xf:checkbox>
		</xf:dependent>

	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="option_template_xfmgThumbnailDimensions" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:formrow rowtype="input"
	label="{$option.title}"
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}">

	<div class="inputGroup inputGroup--numbers">
		<xf:numberbox name="{$inputName}[width]" min="50" value="{$option.option_value.width}" placeholder="{{ phrase('width') }}" />
		<span class="inputGroup-text">x</span>
		<xf:numberbox name="{$inputName}[height]" min="50" value="{$option.option_value.height}" placeholder="{{ phrase('height') }}" />
		<span class="inputGroup-text">{{ phrase('units_pixels') }}</span>
	</div>
</xf:formrow>]]></template>
  <template type="admin" title="option_template_xfmgWatermarking" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:checkboxrow
	hint="{$hintHtml}"
	explain="{$option.explain}">

	<xf:option name="{$inputName}[enabled]" selected="$option.option_value.enabled" data-hide="true"
		label="{$option.title}">

		<xf:dependent>
			<xf:upload name="watermark" />
			<xf:if is="xfmg_watermark('url')">
				<div class="formRow-explain">{{ phrase('xfmg_change_watermark_explain', {'link': link('tools/rebuild')}) }}</div>
			</xf:if>
			<xf:if is="xfmg_watermark('url')">
				<div class="inputChoices-spacer"></div>
				<div>{{ phrase('xfmg_current_watermark') }}</div>
				<div class="currentWatermark">
					<img src="{{ xfmg_watermark('url') }}" />
				</div>
			</xf:if>
		</xf:dependent>
	</xf:option>

	<xf:html>
		{$listedHtml}
		<xf:hiddenval name="{$inputName}[watermark_hash]">{$option.option_value.watermark_hash}</xf:hiddenval>
	</xf:html>
</xf:checkboxrow>

<xf:css>
	.currentWatermark
	{
		background-color: {{ property('paletteColor5') }};
		border-radius: {{ property('borderRadiusMedium') }};
		padding: {{ property('paddingMedium') }};
		display: flex;
		justify-content: center;
		align-items: center;
		max-width: 340px;
	}

	.currentImage img
	{
		width: 100%;
		opacity: 0.8;
	}
</xf:css>]]></template>
  <template type="admin" title="widget_def_options_xfmg_albums_slider" version_id="902020370" version_string="2.2.3"><![CDATA[<hr class="formRowSep" />

<xf:selectrow name="options[category_ids][]" size="7" multiple="multiple" value="{$options.category_ids}"
	label="{{ phrase('xfmg_display_from_categories') }}">

	<xf:option value="">{{ phrase('xfmg_all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}" disabled="{{ $treeEntry.record.category_type != 'album' }}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}
		</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:checkboxrow>
	<xf:option name="options[include_personal_albums]" selected="{$options.include_personal_albums}">
		<xf:label>{{ phrase('xfmg_display_personal_albums') }}</xf:label>
	</xf:option>
</xf:checkboxrow>

<xf:radiorow name="options[order]" value="{$options.order}"
	label="{{ phrase('display_order') }}">
	<xf:option value="latest">{{ phrase('xfmg_latest_media') }}</xf:option>
	<xf:option value="random">{{ phrase('xfmg_random_media') }}</xf:option>
</xf:radiorow>

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xfmg_number_of_albums') }}"
	explain="{{ phrase('xfmg_this_is_total_number_of_albums_that_will_be_loaded_in_slider') }}" />

<xf:numberboxrow name="options[slider][item]" value="{$options.slider.item}" min="1"
	label="{{ phrase('xfmg_maximum_slides') }}"
	explain="{{ phrase('xfmg_maximum_slides_explain') }}" />

<xf:checkboxrow>
	<xf:option data-hide="true" selected="$options.slider.itemWide OR $options.slider.itemMedium OR $options.slider.itemNarrow">
		<xf:label>{{ phrase('xfmg_enable_responsive_slides') }}</xf:label>
		<xf:dependent>
			<dl class="inputLabelPair">
				<dt><label for="ctrl_wide">{{ phrase('xfmg_maximum_slides') }} {{ phrase('(xfmg_wide)') }}</label></dt>
				<dd><xf:numberbox name="options[slider][itemWide]" id="ctrl_wide" value="{$options.slider.itemWide}" min="0" required="{{ false }}" /></dd>
			</dl>
			<dl class="inputLabelPair">
				<dt><label for="ctrl_medium">{{ phrase('xfmg_maximum_slides') }} {{ phrase('(xfmg_medium)') }}</label></dt>
				<dd><xf:numberbox name="options[slider][itemMedium]" id="ctrl_medium" value="{$options.slider.itemMedium}" min="0" required="{{ false }}" /></dd>
			</dl>
			<dl class="inputLabelPair">
				<dt><label for="ctrl_narrow">{{ phrase('xfmg_maximum_slides') }} {{ phrase('(xfmg_narrow)') }}</label></dt>
				<dd><xf:numberbox name="options[slider][itemNarrow]" id="ctrl_narrow" value="{$options.slider.itemNarrow}" min="0" required="{{ false }}" /></dd>
			</dl>
		</xf:dependent>
		<xf:afterhint>{{ phrase('xfmg_enable_responsive_slides_explain') }}</xf:afterhint>
	</xf:option>
</xf:checkboxrow>

<xf:checkboxrow>
	<xf:option name="options[slider][auto]"
		selected="{$options.slider.auto}"
		hint="{{ phrase('xfmg_auto_play_hint') }}">
		{{ phrase('xfmg_auto_play') }}
	</xf:option>

	<xf:option name="options[slider][pauseOnHover]"
		selected="{$options.slider.pauseOnHover}"
		hint="{{ phrase('xfmg_pause_on_hover_hint') }}">
		{{ phrase('xfmg_pause_on_hover') }}
	</xf:option>

	<xf:option name="options[slider][loop]"
		selected="{$options.slider.loop}"
		hint="{{ phrase('xfmg_loop_slides_hint') }}">
		{{ phrase('xfmg_loop_slides') }}
	</xf:option>

	<xf:option name="options[slider][pager]"
		selected="{$options.slider.pager}"
		hint="{{ phrase('xfmg_display_pager_hint') }}">
		{{ phrase('xfmg_display_pager') }}
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="widget_def_options_xfmg_latest_comments" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<hr class="formRowSep" />

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xfmg_latest_comments_limit') }}"
	explain="{{ phrase('xfmg_latest_comments_limit_explain') }}" />]]></template>
  <template type="admin" title="widget_def_options_xfmg_media_slider" version_id="902020370" version_string="2.2.3"><![CDATA[<hr class="formRowSep" />

<xf:selectrow name="options[category_ids][]" size="7" multiple="multiple" value="{$options.category_ids}"
	label="{{ phrase('xfmg_display_from_categories') }}">

	<xf:option value="">{{ phrase('xfmg_all_categories') }}</xf:option>
	<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:checkboxrow>
	<xf:option name="options[include_personal_albums]" selected="{$options.include_personal_albums}"
		hint="{{ phrase('xfmg_display_from_personal_albums_hint') }}">

		<xf:label>{{ phrase('xfmg_display_from_personal_albums') }}</xf:label>
	</xf:option>
</xf:checkboxrow>

<xf:radiorow name="options[order]" value="{$options.order}"
	label="{{ phrase('display_order') }}">
	<xf:option value="latest">{{ phrase('xfmg_latest_media') }}</xf:option>
	<xf:option value="random">{{ phrase('xfmg_random_media') }}</xf:option>
</xf:radiorow>

<xf:numberboxrow name="options[limit]" value="{$options.limit}" min="1"
	label="{{ phrase('xfmg_number_of_media_items') }}"
	explain="{{ phrase('xfmg_number_of_media_items_explain') }}" />

<xf:numberboxrow name="options[slider][item]" value="{$options.slider.item}" min="1"
	label="{{ phrase('xfmg_maximum_slides') }}"
	explain="{{ phrase('xfmg_maximum_slides_explain') }}" />

<xf:checkboxrow>
	<xf:option data-hide="true" selected="$options.slider.itemWide OR $options.slider.itemMedium OR $options.slider.itemNarrow">
		<xf:label>{{ phrase('xfmg_enable_responsive_slides') }}</xf:label>
		<xf:dependent>
			<dl class="inputLabelPair">
				<dt><label for="ctrl_wide">{{ phrase('xfmg_maximum_slides') }} {{ phrase('(xfmg_wide)') }}</label></dt>
				<dd><xf:numberbox name="options[slider][itemWide]" id="ctrl_wide" value="{$options.slider.itemWide}" min="0" required="{{ false }}" /></dd>
			</dl>
			<dl class="inputLabelPair">
				<dt><label for="ctrl_medium">{{ phrase('xfmg_maximum_slides') }} {{ phrase('(xfmg_medium)') }}</label></dt>
				<dd><xf:numberbox name="options[slider][itemMedium]" id="ctrl_medium" value="{$options.slider.itemMedium}" min="0" required="{{ false }}" /></dd>
			</dl>
			<dl class="inputLabelPair">
				<dt><label for="ctrl_narrow">{{ phrase('xfmg_maximum_slides') }} {{ phrase('(xfmg_narrow)') }}</label></dt>
				<dd><xf:numberbox name="options[slider][itemNarrow]" id="ctrl_narrow" value="{$options.slider.itemNarrow}" min="0" required="{{ false }}" /></dd>
			</dl>
		</xf:dependent>
		<xf:afterhint>{{ phrase('xfmg_enable_responsive_slides_explain') }}</xf:afterhint>
	</xf:option>
</xf:checkboxrow>

<xf:checkboxrow>
	<xf:option name="options[slider][auto]"
		selected="{$options.slider.auto}"
		hint="{{ phrase('xfmg_auto_play_hint') }}">
		{{ phrase('xfmg_auto_play') }}
	</xf:option>

	<xf:option name="options[slider][pauseOnHover]"
		selected="{$options.slider.pauseOnHover}"
		hint="{{ phrase('xfmg_pause_on_hover_hint') }}">
		{{ phrase('xfmg_pause_on_hover') }}
	</xf:option>

	<xf:option name="options[slider][loop]"
		selected="{$options.slider.loop}"
		hint="{{ phrase('xfmg_loop_slides_hint') }}">
		{{ phrase('xfmg_loop_slides') }}
	</xf:option>

	<xf:option name="options[slider][pager]"
		selected="{$options.slider.pager}"
		hint="{{ phrase('xfmg_display_pager_hint') }}">
		{{ phrase('xfmg_display_pager') }}
	</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="xfmg_base_batch_update" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$success">
	<div class="blockMessage blockMessage--success blockMessage--iconic">{{ phrase('batch_update_was_completed_successfully') }}</div>
</xf:if>

<xf:form action="{{ link($linkPrefix . '/confirm') }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:include template="{$criteriaTemplate}" />
		</div>
		<xf:submitrow icon="search" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xfmg_base_batch_update_confirm" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:form action="{{ link($linkPrefix . '/action') }}" class="block">
	<div class="block-container">
		<h2 class="block-header">{{ phrase('xfmg_update_items') }}</h2>
		<div class="block-body">
			<xf:formrow label="{{ phrase('xfmg_matched') }}">
				{$total|number}
				<xf:if is="!$ids">
					<span role="presentation" aria-hidden="true">&middot;</span>
					<a href="{{ link($linkPrefix . '/list', null, {'criteria': $criteria, 'all': true}) }}">{{ phrase('view_or_filter_matches') }}</a>
				</xf:if>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="actions[approve]" value="approve">{{ phrase('approve') }}</xf:option>
				<xf:option name="actions[unapprove]" value="unapprove">{{ phrase('unapprove') }}</xf:option>
				<xf:option name="actions[soft_delete]" value="soft_delete">{{ phrase('xfmg_soft_delete_items') }}</xf:option>
				<xf:if is="$type == 'xfmg_media'">
					<xf:option name="actions[add_watermark]" value="add_watermark">{{ phrase('xfmg_watermark_items') }}</xf:option>
					<xf:option name="actions[remove_watermark]" value="remove_watermark">{{ phrase('xfmg_unwatermark_items') }}</xf:option>
				</xf:if>
			</xf:checkboxrow>

		</div>
		<xf:submitrow submit="{{ phrase('xfmg_update_items') }}" icon="save" />
	</div>

	<xf:if is="$ids">
		<xf:hiddenval name="ids">{$ids|json}</xf:hiddenval>
	<xf:else />
		<xf:hiddenval name="criteria">{$criteria|json}</xf:hiddenval>
	</xf:if>
</xf:form>

<xf:form action="{{ link($linkPrefix . '/action') }}" class="block">
	<div class="block-container">
		<h2 class="block-header">{{ phrase('xfmg_delete_items') }}</h2>
		<div class="block-body">
			<xf:checkboxrow>
				<xf:option label="{{ phrase('xfmg_confirm_deletion_of_x_items', {'total': $total|number}) }}" name="actions[delete]" />
			</xf:checkboxrow>
		</div>
		<xf:submitrow name="confirm_delete" icon="delete" />
	</div>

	<xf:if is="$ids">
		<xf:hiddenval name="ids">{$ids|json}</xf:hiddenval>
	<xf:else />
		<xf:hiddenval name="criteria">{$criteria|json}</xf:hiddenval>
	</xf:if>
</xf:form>]]></template>
  <template type="admin" title="xfmg_base_batch_update_list" version_id="902020470" version_string="2.2.4"><![CDATA[<xf:css src="public:core_xfmg.less" />

<xf:if is="$items is not empty">
	<xf:form action="{{ link($linkPrefix . '/confirm') }}" class="block" ajax="true" data-json-name="json">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist class="dataList--contained" data-xf-init="responsive-data-list">
					<xf:datarow rowtype="header">
						<xf:if is="$showingAll">
							<xf:cell class="dataList-cell--min">
								<xf:checkbox standalone="true"><xf:option check-all=".dataList >" data-xf-init="tooltip" title="{{ phrase('select_all') }}" /></xf:checkbox>
							</xf:cell>
						</xf:if>
						<xf:cell colspan="2">{{ phrase('title') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xfmg_category') }}</xf:cell>
						<xf:if is="$type == 'media'">
							<xf:cell class="dataList-cell--min">{{ phrase('xfmg_album') }}</xf:cell>
						</xf:if>
						<xf:cell class="dataList-cell--min">{{ phrase('author') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xfmg_comment_count') }}</xf:cell>
						<xf:cell class="dataList-cell--min">{{ phrase('xfmg_date_added') }}</xf:cell>
					</xf:datarow>
					<xf:foreach loop="$items" value="$item">
						<xf:datarow>
							<xf:if is="$showingAll">
								<xf:toggle name="ids[]" value="{$item.getEntityId()}" selected="true" />
							</xf:if>
							<xf:cell class="dataList-cell--min dataList-cell--image">
								{{ xfmg_thumbnail($item, 'xfmgThumbnail--smallest') }}
							</xf:cell>
							<xf:if is="$type == 'media'">
								<xf:main href="{{ link_type('public', 'media', $item) }}" label="{$item.title}" />
							<xf:else />
								<xf:main href="{{ link_type('public', 'media/albums', $item) }}" label="{$item.title}" />
							</xf:if>
							<xf:cell class="dataList-cell--min">
								{{ $item.Category.title ?: phrase('n_a') }}
							</xf:cell>
							<xf:if is="$type == 'media'">
								<xf:cell class="dataList-cell--min">
									{{ $item.Album.title ?: phrase('n_a') }}
								</xf:cell>
							</xf:if>
							<xf:cell class="dataList-cell--min">
								{$item.username}
							</xf:cell>
							<xf:cell class="dataList-cell--min">
								{$item.comment_count|number}
							</xf:cell>
							<xf:if is="$item.content_type == 'xfmg_media'">
								<xf:cell class="dataList-cell--min">
									<xf:date time="{$item.media_date}" />
								</xf:cell>
							<xf:else />
								<xf:cell class="dataList-cell--min">
									<xf:date time="{$item.create_date}" />
								</xf:cell>
							</xf:if>
						</xf:datarow>
					</xf:foreach>
					<xf:if is="$filter AND $total > $perPage">
						<xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
							<xf:cell colspan="3">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
						</xf:datarow>
					</xf:if>
				</xf:datalist>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter">{{ display_totals($items, $total) }}</span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all=".dataList" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<xf:if is="$showAll">
					<span class="block-footer-controls">
						<a href="{{ link($linkPrefix . '/list', null, {'criteria': $criteria, 'all': $showingAll}) }}">{{ phrase('show_all_matches') }}</a>
					</span>
				<xf:elseif is="$showingAll" />
					<span class="block-footer-controls"><xf:button type="submit">{{ phrase('batch_update') }}</xf:button></span>
				</xf:if>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="{$linkPrefix}/list"
			params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
			wrapperclass="js-filterHide block-outer block-outer--after" />
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('no_records_matched') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xfmg_batch_update_albums" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_batch_update_albums') }}</xf:title>

<xf:include template="xfmg_base_batch_update">
	<xf:set var="$criteriaTemplate">xfmg_helper_albums_search_criteria</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xfmg_batch_update_albums_confirm" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_batch_update_albums') }}</xf:title>

<xf:include template="xfmg_base_batch_update_confirm" />]]></template>
  <template type="admin" title="xfmg_batch_update_albums_list" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_albums') }}</xf:title>

<xf:include template="xfmg_base_batch_update_list">
	<xf:set var="$type">albums</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xfmg_batch_update_media" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_batch_update_media') }}</xf:title>

<xf:include template="xfmg_base_batch_update">
	<xf:set var="$criteriaTemplate">xfmg_helper_media_search_criteria</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xfmg_batch_update_media_confirm" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:title>{{ phrase('xfmg_batch_update_media') }}</xf:title>

<xf:include template="xfmg_base_batch_update_confirm">
	<xf:set var="$type" value="xfmg_media" />
</xf:include>]]></template>
  <template type="admin" title="xfmg_batch_update_media_list" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_media_items') }}</xf:title>

<xf:include template="xfmg_base_batch_update_list">
	<xf:set var="$type">media</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xfmg_category_delete" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:macro template="category_tree_macros" name="category_delete_form"
	arg-linkPrefix="media-gallery/categories"
	arg-category="{$category}" />]]></template>
  <template type="admin" title="xfmg_category_edit" version_id="902020035" version_string="2.2.0 Beta 5"><![CDATA[<xf:if is="$category.isInsert()">
	<xf:title>{{ phrase('add_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('edit_category:') }} {$category.title}</xf:title>
</xf:if>

<xf:pageaction if="$category.category_id">
	<xf:button href="{{ link('media-gallery/categories/delete', $category) }}"
		icon="delete"
		data-xf-click="overlay" />
</xf:pageaction>

<xf:form action="{{ link('media-gallery/categories/save', $category) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$category.title}"
				label="{{ phrase('title') }}" />

			<xf:textarearow name="description" value="{$category.description}" rows="2" autosize="true"
				label="{{ phrase('description') }}"
				hint="{{ phrase('you_may_use_html') }}" />

			<xf:macro template="category_tree_macros" name="parent_category_select_row"
				arg-category="{$category}"
				arg-categoryTree="{$categoryTree}" />

			<xf:macro template="display_order_macros" name="row"
				arg-value="{$category.display_order}" />

			<xf:numberboxrow name="min_tags" value="{$category.min_tags}" min="0" max="100"
				label="{{ phrase('minimum_required_tags') }}"
				explain="{{ phrase('xfmg_minimum_required_tags_explain') }}" />

			<hr class="formRowSep" />

			<xf:if is="$category.isEmpty()">
				<xf:radiorow name="category_type" value="{$category.category_type}"
					label="{{ phrase('xfmg_category_type') }}"
					explain="{{ phrase('xfmg_container_categories_explain') }}">

					<xf:options source="$categoryTypes" />
				</xf:radiorow>
			<xf:else />
				<xf:formrow label="{{ phrase('xfmg_category_type') }}">
					{$categoryTypes.{$category.category_type}}
					<div class="formRow-explain">{{ phrase('xfmg_category_type_change_explain') }}</div>
					<xf:hiddenval name="category_type">{$category.category_type}</xf:hiddenval>
				</xf:formrow>
			</xf:if>

			<xf:checkboxrow name="allowed_types" listclass="listColumns" value="{$category.allowed_types}"
				label="{{ phrase('xfmg_allowed_media_types') }}"
				explain="{{ phrase('xfmg_allowed_media_types_explain') }}">

				<xf:options source="$mediaTypes" />
			</xf:checkboxrow>

			<xf:checkboxrow explain="{{ phrase('xfmg_category_index_limit_explain') }}">
				<xf:option label="{{ phrase('xfmg_only_show_media_added_within_last_x_days:') }}"
					selected="$category.category_index_limit !== null">
					<xf:numberbox name="category_index_limit" value="{$category.category_index_limit}" min="0" step="1" />
				</xf:option>
			</xf:checkboxrow>

			<xf:selectrow name="mirror_node_ids[]" value="{$mirrorNodeIds}" multiple="multiple" size="7"
				label="{{ phrase('xfmg_mirror_node_ids') }}">

				<xf:option value="" selected="!$mirrorNodeIds">{{ phrase('(none)') }}</xf:option>
				<xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.node_id}"
						disabled="{{ $treeEntry.record.node_type_id != 'Forum' }}">
						{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}
					</xf:option>
				</xf:foreach>

				<xf:explain>
					{{ phrase('xfmg_mirror_node_ids_explain') }}
				</xf:explain>
			</xf:selectrow>
		</div>
		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xfmg_category_list" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_media_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="page_action"
	arg-linkPrefix="media-gallery/categories" />

<xf:macro template="category_tree_macros" name="category_list"
	arg-categoryTree="{$categoryTree}"
	arg-filterKey="xfmg-categories"
	arg-linkPrefix="media-gallery/categories"
/>]]></template>
  <template type="admin" title="xfmg_category_permission_edit" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('media-gallery/categories/permissions', $record) }}">{{ phrase('permissions:') }} {$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="media-gallery/categories/permissions"
	arg-saveParams="{$saveParams}" />
]]></template>
  <template type="admin" title="xfmg_category_permission_list" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="media-gallery/categories/permissions" />
]]></template>
  <template type="admin" title="xfmg_category_sort" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('sort_categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="sortable_form"
	arg-categoryTree="{$categoryTree}"
	arg-linkPrefix="media-gallery/categories" />]]></template>
  <template type="admin" title="xfmg_forum_edit_mirror" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:selectrow name="xfmg_media_mirror_category_id" value="{$forum.xfmg_media_mirror_category_id}"
	label="{{ phrase('xfmg_media_mirror_category_id') }}">

	<xf:option value="0">{{ phrase('(none)') }}</xf:option>
	<xf:foreach loop="$xfmgCategoryTree.getFlattened(0)" value="$treeEntry">
		<xf:option value="{$treeEntry.record.category_id}"
			disabled="{{ $treeEntry.record.category_type != 'media' }}">
			{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}
		</xf:option>
	</xf:foreach>

	<xf:explain>
		{{ phrase('xfmg_media_mirror_category_id_explain') }}
	</xf:explain>
</xf:selectrow>]]></template>
  <template type="admin" title="xfmg_helper_albums_search_criteria" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<hr class="formRowSep" />

<xf:textboxrow name="criteria[title]" value="{$criteria.title}" type="search"
	label="{{ phrase('title') }}" />

<xf:textboxrow name="criteria[username]" value="{$criteria.username}" type="search"
	label="{{ phrase('created_by') }}" />

<hr class="formRowSep" />

<xf:formrow rowtype="input"
	label="{{ phrase('created_between') }}">

	<div class="inputGroup">
		<xf:dateinput name="criteria[create_date][start]" value="{$criteria.create_date.start}" size="15" />
		<span class="inputGroup-text">-</span>
		<xf:dateinput name="criteria[create_date][end]" value="{$criteria.create_date.end}" size="15" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('xfmg_comment_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[comment_count][start]" value="{$criteria.comment_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[comment_count][end]" value="{$criteria.comment_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('reaction_score_between') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[reaction_score][start]" value="{$criteria.reaction_score.start}" size="5" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[reaction_score][end]" value="{$criteria.reaction_score.end}" size="5" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('view_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[view_count][start]" value="{$criteria.view_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[view_count][end]" value="{$criteria.view_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<hr class="formRowSep" />

<xf:checkboxrow name="criteria[album_state]"
	label="{{ phrase('state') }}">

	<xf:option value="visible" selected="in_array('visible', $criteria.album_state)">{{ phrase('visible') }}</xf:option>
	<xf:option value="deleted" selected="in_array('deleted', $criteria.album_state)">{{ phrase('deleted') }}</xf:option>
	<xf:option value="moderated" selected="in_array('moderated', $criteria.album_state)">{{ phrase('moderated') }}</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="xfmg_helper_media_search_criteria" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<hr class="formRowSep" />

<xf:textboxrow name="criteria[title]" value="{$criteria.title}" type="search"
	label="{{ phrase('title') }}" />


<xf:selectrow name="criteria[category_id]" value="{$criteria.category_id}" multiple="true"
	label="{{ phrase('xfmg_specific_category') }}">

	<xf:option value="0" label="{{ phrase('(any)') }}" />
	<xf:foreach loop="$categories" value="$category">
		<xf:option value="{$category.value}" disabled="{$category.disabled}">{$category.label}</xf:option>
	</xf:foreach>
</xf:selectrow>

<xf:textboxrow name="criteria[username]" value="{$criteria.username}" type="search"
	label="{{ phrase('created_by') }}" />

<hr class="formRowSep" />

<xf:formrow rowtype="input"
	label="{{ phrase('created_between') }}">

	<div class="inputGroup">
		<xf:dateinput name="criteria[media_date][start]" value="{$criteria.media_date.start}" size="15" />
		<span class="inputGroup-text">-</span>
		<xf:dateinput name="criteria[media_date][end]" value="{$criteria.media_date.end}" size="15" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('xfmg_comment_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[comment_count][start]" value="{$criteria.comment_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[comment_count][end]" value="{$criteria.comment_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('reaction_score_between') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[reaction_score][start]" value="{$criteria.reaction_score.start}" size="5" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[reaction_score][end]" value="{$criteria.reaction_score.end}" size="5" />
	</div>
</xf:formrow>

<xf:formrow rowtype="input"
	label="{{ phrase('view_count_between') }}"
	explain="{{ phrase('use_negative_one_specify_no_max') }}">

	<div class="inputGroup">
		<xf:numberbox name="criteria[view_count][start]" value="{$criteria.view_count.start}" size="5" min="0" />
		<span class="inputGroup-text">-</span>
		<xf:numberbox name="criteria[view_count][end]" value="{$criteria.view_count.end}" size="5" min="-1" />
	</div>
</xf:formrow>

<hr class="formRowSep" />

<xf:checkboxrow name="criteria[media_state]"
	label="{{ phrase('state') }}">

	<xf:option value="visible" selected="in_array('visible', $criteria.media_state)">{{ phrase('visible') }}</xf:option>
	<xf:option value="deleted" selected="in_array('deleted', $criteria.media_state)">{{ phrase('deleted') }}</xf:option>
	<xf:option value="moderated" selected="in_array('moderated', $criteria.media_state)">{{ phrase('moderated') }}</xf:option>
</xf:checkboxrow>

<xf:checkboxrow name="criteria[watermarked]"
	label="{{ phrase('xfmg_watermark_state') }}">

	<xf:option value="0" selected="in_array(0, $criteria.watermarked)">{{ phrase('xfmg_not_watermarked') }}</xf:option>
	<xf:option value="1" selected="in_array(1, $criteria.watermarked)">{{ phrase('xfmg_watermarked') }}</xf:option>
</xf:checkboxrow>

<xf:checkboxrow name="criteria[media_type]"
	label="{{ phrase('xfmg_media_type') }}">

	<xf:option value="image" selected="in_array('image', $criteria.media_type)">{{ phrase('xfmg_images') }}</xf:option>
	<xf:option value="audio" selected="in_array('audio', $criteria.media_type)">{{ phrase('xfmg_audio') }}</xf:option>
	<xf:option value="video" selected="in_array('video', $criteria.media_type)">{{ phrase('xfmg_videos') }}</xf:option>
	<xf:option value="embed" selected="in_array('embed', $criteria.media_type)">{{ phrase('xfmg_embeds') }}</xf:option>
</xf:checkboxrow>]]></template>
  <template type="admin" title="xfmg_import_config_ips_gallery" version_id="902010131" version_string="2.1.1 Beta 1"><![CDATA[<h3 class="block-formSectionHeader">
	<span class="block-formSectionHeader-aligner">
		{{ phrase('source_database_configuration') }}
	</span>
</h3>

<xf:macro template="import_config_macros" name="db_host"
	arg-value="{$db.host}"
	arg-placeholder="$INFO['sql_host']" />

<xf:macro template="import_config_macros" name="db_dbname"
	arg-value="{$db.dbname}"
	arg-placeholder="$INFO['sql_database']" />

<xf:macro template="import_config_macros" name="db_username"
	arg-value="{$db.username}"
	arg-placeholder="$INFO['sql_user']" />

<xf:macro template="import_config_macros" name="db_password"
	arg-value="{$db.password}"
	arg-placeholder="$INFO['sql_pass']" />

<xf:macro template="import_config_macros" name="db_port"
	arg-value="{$db.port}"
	arg-placeholder="$INFO['sql_port']" />

<xf:macro template="import_config_macros" name="db_tablePrefix"
	arg-value="{$db.tablePrefix}"
	arg-placeholder="$INFO['sql_tbl_prefix']" />

<hr class="formRowSep" />

<xf:textboxrow label="{{ phrase('import_ips_path') }}" name="config[ips_path]" required="required"
	explain="{{ phrase('import_ips_path_explain') }}" />

<xf:textboxrow name="config[forum_import_log]" label="{{ phrase('forum_import_log') }}" required="required">
	<xf:explain>
		{{ phrase('you_must_provide_name_of_forum_import_log') }}
	</xf:explain>
</xf:textboxrow>]]></template>
  <template type="admin" title="xfmg_import_config_photopost" version_id="902010131" version_string="2.1.1 Beta 1"><![CDATA[<h3 class="block-formSectionHeader">{{ phrase('source_database_configuration') }}</h3>
<xf:if is="!$baseConfig.db.host">
	<xf:textboxrow name="config[db][host]" value="{$db.host}"
		label="{{ phrase('mysql_server') }}"
		placeholder="$host" />
	<xf:textboxrow name="config[db][port]" value="{$db.port}"
		label="{{ phrase('mysql_port') }}"
		placeholder="$sqlport" />
	<xf:textboxrow name="config[db][username]" value="{$db.username}"
		label="{{ phrase('mysql_user_name') }}"
		placeholder="$mysql_user" />
	<xf:textboxrow name="config[db][password]" value="{$db.password}" autocomplete="off"
		label="{{ phrase('mysql_password') }}"
		placeholder="$mysql_password" />
	<xf:textboxrow name="config[db][dbname]" value="{$db.dbname}"
		label="{{ phrase('mysql_database_name') }}"
		placeholder="$database" />
	<xf:textboxrow name="config[db][tablePrefix]" value="{$db.tablePrefix}"
		label="{{ phrase('mysql_table_prefix') }}"
		placeholder="$pp_db_prefix" />
	<hr class="formRowSep" />
	<xf:textboxrow name="config[db][charset]" value="{$db.charset}"
		label="{{ phrase('mysql_force_charset') }}"
		explain="{{ phrase('mysql_force_charset_explain') }}"
		placeholder="$ppcharset" />
<xf:else />
	<xf:formrow label="{{ phrase('mysql_server') }}">{$fullConfig.db.host}:{$fullConfig.db.dbname}</xf:formrow>
</xf:if>

<xf:if is="!$baseConfig.integration">
	<hr class="formRowSep" />

	<xf:radiorow name="config[integration]" label="{{ phrase('xfmg_photopost_integration_source') }}">
		<xf:option value="internal" label="{{ phrase('xfmg_photopost_internal') }}" data-hide="true">
			<xf:checkbox>
				<xf:option value="attempt_match" selected="true">{{ phrase('xfmg_photopost_attempt_match_explain') }}</xf:option>
			</xf:checkbox>
			<xf:afterhint>{{ phrase('xfmg_photopost_internal_explain') }}</xf:afterhint>
		</xf:option>
		<xf:option value="forum" label="{{ phrase('xfmg_photopost_forum_integration') }}" data-hide="true">
			<xf:textbox name="config[forum_import_log]" required="true" placeholder="{{ phrase('forum_import_log') }}" />
			<xf:afterhint>{{ phrase('xfmg_photopost_forum_explain') }}</xf:afterhint>
		</xf:option>
		<xf:option value="xenforo" label="{{ phrase('xfmg_photopost_xenforo_integration') }}" data-hide="true">
			<xf:textbox name="config[forum_import_log]" placeholder="{{ phrase('forum_import_log') }}" />
			<xf:afterhint>{{ phrase('xfmg_photopost_xenforo_explain') }}</xf:afterhint>
		</xf:option>
	</xf:radiorow>
<xf:else />
	<xf:formrow label="{{ phrase('xfmg_photopost_integration_source') }}">
		<xf:if is="$baseConfig.integration == 'internal'">
			{{ phrase('xfmg_photopost_internal') }}
		<xf:elseif is="$baseConfig.integration == 'forum'" />
			{{ phrase('xfmg_photopost_forum') }}
		<xf:elseif is="$baseConfig.integration == 'xenforo'" />
			XenForo
		</xf:if>
	</xf:formrow>
</xf:if>]]></template>
  <template type="admin" title="xfmg_import_config_vb_albums" version_id="902010131" version_string="2.1.1 Beta 1"><![CDATA[<h3 class="block-formSectionHeader">{{ phrase('source_database_configuration') }}</h3>
<xf:if is="!$baseConfig.db.host">
	<xf:textboxrow name="config[db][host]" value="{$db.host}"
		label="{{ phrase('mysql_server') }}"
		placeholder="$config['MasterServer']['servername']" />
	<xf:textboxrow name="config[db][port]" value="{$db.port}"
		label="{{ phrase('mysql_port') }}"
		placeholder="$config['MasterServer']['port']" />
	<xf:textboxrow name="config[db][username]" value="{$db.username}"
		label="{{ phrase('mysql_user_name') }}"
		placeholder="$config['MasterServer']['username']" />
	<xf:textboxrow name="config[db][password]" value="{$db.password}" autocomplete="off"
		label="{{ phrase('mysql_password') }}"
		placeholder="$config['MasterServer']['password']" />
	<xf:textboxrow name="config[db][dbname]" value="{$db.dbname}"
		label="{{ phrase('mysql_database_name') }}"
		placeholder="$config['Database']['dbname']" />
	<xf:textboxrow name="config[db][tablePrefix]" value="{$db.tablePrefix}"
		label="{{ phrase('mysql_table_prefix') }}"
		placeholder="$config['Database']['tableprefix']" />
	<hr class="formRowSep" />
	<xf:textboxrow name="config[db][charset]" value="{$db.charset}"
		label="{{ phrase('mysql_force_charset') }}"
		explain="{{ phrase('mysql_force_charset_explain') }}"
		placeholder="$config['Mysqli']['charset']" />
	<hr class="formRowSep" />
	<xf:if is="!$baseConfig.forum_import_log">
		<xf:textboxrow name="config[forum_import_log]" label="{{ phrase('forum_import_log') }}">
			<xf:explain>
				{{ phrase('you_must_provide_name_of_forum_import_log') }}
			</xf:explain>
		</xf:textboxrow>
	<xf:else />
		<xf:formrow label="{{ phrase('forum_import_log') }}">
			{$fullConfig.forum_import_log}
		</xf:formrow>
	</xf:if>
<xf:else />
	<xf:formrow label="{{ phrase('mysql_server') }}">{$fullConfig.db.host}:{$fullConfig.db.dbname}</xf:formrow>
</xf:if>]]></template>
  <template type="admin" title="xfmg_import_step_config_photopost" version_id="902010131" version_string="2.1.1 Beta 1"><![CDATA[<xf:if is="in_array('mediaItems', $steps)">
	<h3 class="block-formSectionHeader">{{ phrase('xfmg_files_path') }}</h3>
	<xf:textboxrow name="step_config[mediaItems][path]" value="{$stepConfig.mediaItems.path}"
		label="{{ phrase('xfmg_path_to_files_directory') }}"
		required="required"
		explain="{{ phrase('xfmg_enter_full_path_to_folder_containing_your_photopost_files') }}" />
</xf:if>]]></template>
  <template type="admin" title="xfmg_import_step_config_vb_albums" version_id="902010131" version_string="2.1.1 Beta 1"><![CDATA[<xf:if is="in_array('mediaItems', $steps) && $baseConfig.attachpath">
	<h3 class="block-formSectionHeader">{{ phrase('attachments') }}</h3>
	<xf:textboxrow name="step_config[mediaItems][path]" value="{$stepConfig.mediaItems.path}"
		label="{{ phrase('import_attachments_path') }}"
		required="required"
		explain="{{ phrase('xfmg_enter_full_path_to_folder_containing_your_vbulletin_attachments') }}" />
</xf:if>]]></template>
  <template type="admin" title="xfmg_media_field_delete" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="xfmg_media_field_edit" version_id="902000034" version_string="2.0.0 Beta 4"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}" />

		<xf:checkboxrow>
			<xf:option name="album_use" selected="$field.album_use">{{ phrase('xfmg_field_can_be_used_in_personal_albums') }}</xf:option>
			<xf:option name="display_add_media" selected="$field.display_add_media">{{ phrase('xfmg_field_can_be_edited_while_adding_media') }}</xf:option>
		</xf:checkboxrow>
	</xf:set>
	<xf:set var="$displayOptions">
		<xf:selectrow name="category_ids[]" value="{$categoryIds}" multiple="multiple" size="7"
			label="{{ phrase('xfmg_applicable_categories') }}">

			<xf:option value="" selected="!{$categoryIds}">{{ phrase('(none)') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:selectrow>
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xfmg_media_field_list" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_media_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="xfmg_permission_category_edit" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('permissions/media-categories', $record) }}">{$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="permissions/media-categories"
	arg-saveParams="{$saveParams}" />
]]></template>
  <template type="admin" title="xfmg_permission_category_list" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="permissions/media-categories" />
]]></template>
  <template type="admin" title="xfmg_permission_category_overview" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_media_category_permissions') }}</xf:title>

<xf:if is="$categoryTree.countChildren()">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="media-categories" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
						<xf:set var="$category" value="{$treeEntry.record}" />
						<xf:datarow rowclass="{{ {$customPermissions.{$category.category_id}} ? 'dataList-row--custom' : '' }}">
							<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$category.category_id}">
								<a href="{{ link('permissions/media-categories', $category) }}">
									<div class="u-depth{$treeEntry.depth}">
										<div class="dataList-mainRow">{$category.title}</div>
									</div>
								</a>
							</xf:cell>
							<xf:action href="{{ link('media-gallery/categories/edit', $category) }}">{{ phrase('edit') }}</xf:action>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer">
				<span class="block-footer-counter">{{ display_totals(count($categoryTree.getFlattened(0))) }}</span>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xfmg_tools_rebuild" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_media_items') }}"
	arg-job="XFMG:MediaItem" />
<!--[XF:after_mg_media_items]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_media_thumbnails') }}"
	arg-job="XFMG:MediaThumb" />
<!--[XF:after_mg_media_thumb]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_media_posters') }}"
	arg-job="XFMG:MediaPoster" />
<!--[XF:after_mg_media_poster]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_update_media_watermarks') }}"
	arg-job="XFMG:UpdateWatermark" />
<!--[XF:after_mg_watermark]-->

<xf:set var="$xfmgSyncMirrorBody">
	<xf:inforow>
		{{ phrase('xfmg_sync_attachment_media_mirroring_explain') }}
	</xf:inforow>
</xf:set>
<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_sync_attachment_media_mirroring') }}"
	arg-body="{$xfmgSyncMirrorBody}"
	arg-job="XFMG:SyncAttachmentMirror" />
<!--[XF:after_mg_albums]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_albums') }}"
	arg-job="XFMG:Album" />
<!--[XF:after_mg_albums]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_album_thumbnails') }}"
	arg-job="XFMG:AlbumThumb" />
<!--[XF:after_mg_album_thumb]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_categories') }}"
	arg-job="XFMG:Category" />
<!--[XF:after_mg_category]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_user_counts') }}"
	arg-job="XFMG:UserCount" />
<!--[XF:after_mg_users]-->

<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XFMG: {{ phrase('xfmg_rebuild_user_media_quotas') }}"
	arg-job="XFMG:UserMediaQuota" />
<!--[XF:after_mg_user_quota]-->]]></template>
  <template type="email" title="xfmg_activity_summary_latest_albums" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:if is="$albums is not empty">
	<xf:macro template="activity_summary_macros" name="outer_header"
		arg-title="{$title}" />

	<xf:foreach loop="$albums" value="$album">
		<xf:set var="$header">
			<a href="{{ link('canonical:media/albums', $album) }}">{$album.title}</a>
		</xf:set>
		<xf:set var="$attribution">
			{{ $album.User ? $album.User.username : $album.username }} &middot; {{ date_time($album.create_date) }} &middot; {{ phrase('xfmg_media:') }} {$album.media_count|number_short}
		</xf:set>
		<xf:set var="$content">
			<xf:if is="$album.getThumbnailUrl(true)">
				<div style="text-align: center">
					<a href="{{ link('canonical:media/albums', $album) }}"><img src="{{ $album.getThumbnailUrl(true) }}" alt="{$album.title}" /></a>
				</div>
			</xf:if>
			{{ bb_code_type_snippet('emailHtml', $album.description, 'xfmg_album', $album.description, 100) }}
		</xf:set>
		<xf:set var="$footer">
			<xf:if is="$album.Category">
				{{ phrase('category:') }} <a href="{{ link('canonical:media/categories', $album.Category) }}">{$album.Category.title}</a>
			</xf:if>
		</xf:set>
		<xf:set var="$footerOpposite">
			<a href="{{ link('canonical:media/albums', $album) }}" class="button button--link">{{ phrase('xfmg_view_album') }}</a>
		</xf:set>

		<xf:macro template="activity_summary_macros" name="block"
			arg-header="{$header}"
			arg-attribution="{$attribution}"
			arg-content="{$content}"
			arg-footer="{$footer}"
			arg-footerOpposite="{$footerOpposite}" />
	</xf:foreach>
</xf:if>]]></template>
  <template type="email" title="xfmg_activity_summary_latest_comments" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:if is="$comments is not empty">
	<xf:macro template="activity_summary_macros" name="outer_header"
		arg-title="{$title}" />

	<xf:foreach loop="$comments" value="$comment">
		<xf:set var="$attribution">
			{{ $comment.User ? $comment.User.username : $comment.username }}
			&middot;
			<xf:if is="$comment.content_type == 'xfmg_media'">
				{{ phrase('xfmg_media:') }} <a href="{{ link('canonical:media', $comment.Content) }}">{$comment.Content.title}</a>
			<xf:else />
				{{ phrase('xfmg_album:') }} <a href="{{ link('canonical:media/albums', $comment.Content) }}">{$comment.Content.title}</a>
			</xf:if>
			&middot; {{ date_time($comment.comment_date) }}
		</xf:set>
		<xf:set var="$content">
			<xf:if is="$comment.content_type == 'xfmg_media'">
				<xf:if is="$comment.Content.getCurrentThumbnailUrl(true)">
					<div class="quote">
						<img src="{{ $comment.Content.getCurrentThumbnailUrl(true) }}" width="100" alt="{$comment.Content.title}" />
					</div>
				</xf:if>
			<xf:else />
				<xf:if is="$comment.Content.getThumbnailUrl(true)">
					<div class="quote">
						<img src="{{ $comment.Content.getThumbnailUrl(true) }}" width="100" alt="{$comment.Content.title}" />
					</div>
				</xf:if>
			</xf:if>

			{{ bb_code_type_snippet('emailHtml', $comment.message, 'xfmg_comment', $comment.message, 200) }}
		</xf:set>
		<xf:set var="$footerOpposite">
			<a href="{{ link('canonical:media/comments', $comment) }}" class="button button--link">{{ phrase('read_more') }}</a>
		</xf:set>

		<xf:macro template="activity_summary_macros" name="block"
			arg-attribution="{$attribution}"
			arg-content="{$content}"
			arg-footerOpposite="{$footerOpposite}" />
	</xf:foreach>
</xf:if>]]></template>
  <template type="email" title="xfmg_activity_summary_latest_media" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:if is="$mediaItems is not empty">
	<xf:macro template="activity_summary_macros" name="outer_header"
		arg-title="{$title}" />

	<xf:foreach loop="$mediaItems" value="$mediaItem">
		<xf:set var="$header">
			<a href="{{ link('canonical:media', $mediaItem) }}">{$mediaItem.title}</a>
		</xf:set>
		<xf:set var="$attribution">
			{{ $mediaItem.User ? $mediaItem.User.username : $mediaItem.username }}
			&middot; {{ date_time($mediaItem.media_date) }}
			<xf:if is="$mediaItem.comment_count">
				&middot; {{ phrase('comments:') }} {$mediaItem.comment_count|number_short}
			</xf:if>
		</xf:set>
		<xf:set var="$content">
			<div style="text-align: center">
				<xf:if is="$mediaItem.getCurrentThumbnailUrl(true)">
					<a href="{{ link('canonical:media', $mediaItem) }}"><img src="{{ $mediaItem.getCurrentThumbnailUrl(true) }}" alt="{$mediaItem.title}" /></a>
				<xf:else />
					<span class="mediaPlaceholder" style="display: inline-block; max-width: 400px">
						<a href="{{ link('canonical:media', $mediaItem) }}">{$mediaItem.title}</a>
					</span>
				</xf:if>
			</div>
			{{ bb_code_type_snippet('emailHtml', $mediaItem.description, 'xfmg_media', $mediaItem.description, 100) }}
		</xf:set>
		<xf:set var="$footer">
			<xf:if is="$mediaItem.Album">
				{{ phrase('xfmg_album:') }} <a href="{{ link('canonical:media/albums', $mediaItem.Album) }}">{$mediaItem.Album.title}</a>
			<xf:elseif is="$mediaItem.Category" />
				{{ phrase('category:') }} <a href="{{ link('canonical:media/categories', $mediaItem.Category) }}">{$mediaItem.Category.title}</a>
			</xf:if>
		</xf:set>
		<xf:set var="$footerOpposite">
			<a href="{{ link('canonical:media', $mediaItem) }}" class="button button--link">{{ phrase('xfmg_view_media') }}</a>
		</xf:set>

		<xf:macro template="activity_summary_macros" name="block"
			arg-header="{$header}"
			arg-attribution="{$attribution}"
			arg-content="{$content}"
			arg-footer="{$footer}"
			arg-footerOpposite="{$footerOpposite}" />
	</xf:foreach>
</xf:if>]]></template>
  <template type="email" title="xfmg_album_macros" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:macro name="go_album_bar" arg-album="!">
	<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
	<tr>
		<td>
			<a href="{{ link('canonical:media/albums', $album) }}" class="button">{{ phrase('xfmg_view_this_album') }}</a>
		</td>
		<td align="{{ $xf.isRtl ? 'left' : 'right' }}">
			<a href="{{ link('canonical:watched/media-albums') }}" class="buttonFake">{{ phrase('xfmg_watched_albums') }}</a>
		</td>
	</tr>
	</table>
</xf:macro>

<xf:macro name="watched_album_footer" arg-album="!">
	{{ phrase('xfmg_watched_album_email_html_footer', {
		'album': $album.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'xfmg_album', 'id': $album.album_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>]]></template>
  <template type="email" title="xfmg_media_macros" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:macro name="go_media_bar" arg-mediaItem="!" arg-watchType="!">
	<table cellpadding="10" cellspacing="0" border="0" width="100%" class="linkBar">
	<tr>
		<td>
			<a href="{{ link('canonical:media', $mediaItem) }}" class="button">{{ phrase('xfmg_view_this_media_item') }}</a>
		</td>
		<td align="{{ $xf.isRtl ? 'left' : 'right' }}">
			<xf:if is="$watchType == 'category'">
				<a href="{{ link('canonical:watched/media-categories') }}" class="buttonFake">{{ phrase('watched_categories') }}</a>
			<xf:elseif is="$watchType == 'media'" />
				<a href="{{ link('canonical:watched/media') }}" class="buttonFake">{{ phrase('xfmg_watched_media') }}</a>
			</xf:if>
		</td>
	</tr>
	</table>
</xf:macro>

<xf:macro name="watched_category_footer" arg-category="!">
	{{ phrase('xfmg_watched_category_email_html_footer', {
		'category': $category.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'xfmg_category', 'id': $category.category_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>

<xf:macro name="watched_media_footer" arg-mediaItem="!">
	{{ phrase('xfmg_watched_media_email_html_footer', {
		'media': $mediaItem.title,
		'board': $xf.options.boardTitle,
		'disable_this_link': link('canonical:email-stop/content', $xf.toUser, {'t': 'xfmg_media', 'id': $mediaItem.media_id}),
		'disable_all_link': link('canonical:email-stop/all', $xf.toUser)
	}) }}
</xf:macro>]]></template>
  <template type="email" title="xfmg_watched_album_media" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<mail:subject>
	{{ phrase('xfmg_media_x_new_watched_album', {
		'media': $mediaItem.title
	}) }}
</mail:subject>

{{ phrase('xfmg_watched_album_media_email_html', {
	'author': username_link_email($mediaItem.User, $mediaItem.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:media', $mediaItem) }}">{$mediaItem.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage AND $mediaItem.description">
	<div class="message">{{ structured_text($mediaItem.description)|raw }}</div>
</xf:if>


<xf:macro template="xfmg_album_macros" name="go_album_bar" arg-album="{$album}" />
<xf:macro template="xfmg_album_macros" name="watched_album_footer" arg-album="{$album}" />
]]></template>
  <template type="email" title="xfmg_watched_category_media" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<mail:subject>
	{{ phrase('xfmg_media_x_new_watched_category', {
		'media': $mediaItem.title
	}) }}
</mail:subject>

{{ phrase('xfmg_watched_category_media_email_html', {
	'author': username_link_email($mediaItem.User, $mediaItem.username),
	'board': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
}) }}

<h2><a href="{{ link('canonical:media', $mediaItem) }}">{$mediaItem.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage AND $mediaItem.description">
	<div class="message">{{ structured_text($mediaItem.description)|raw }}</div>
</xf:if>


<xf:macro template="xfmg_media_macros" name="go_media_bar" arg-mediaItem="{$mediaItem}" arg-watchType="category" />

<xf:macro template="xfmg_media_macros" name="watched_category_footer" arg-category="{$category}" />
]]></template>
  <template type="email" title="xfmg_watched_media_comment" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<mail:subject>
	<xf:if is="$comment.content_type == 'xfmg_media'">
		{{ phrase('xfmg_new_comment_on_watched_media_item') }}
	<xf:else />
		{{ phrase('xfmg_new_comment_on_watched_album') }}
	</xf:if>
</mail:subject>

<xf:if is="$comment.content_type == 'xfmg_media'">
	{{ phrase('xfmg_watched_media_comment_email_html', {
		'author': username_link_email($comment.User, $comment.username),
		'board_title': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
	}) }}
<xf:else />
	{{ phrase('xfmg_watched_album_comment_email_html', {
		'author': username_link_email($comment.User, $comment.username),
		'board_title': '<a href="' . link('canonical:index') . '">' . $xf.options.boardTitle . '</a>'
	}) }}
</xf:if>

<h2><a href="{{ link('canonical:media/comments', $comment) }}">{$content.title}</a></h2>

<xf:if is="$xf.options.emailWatchedThreadIncludeMessage">
	<div class="message">{{ bb_code_type('emailHtml', $comment.message, 'xfmg_comment', $comment) }}</div>
</xf:if>

<xf:if is="$comment.content_type == 'xfmg_media'">
	<xf:macro template="xfmg_media_macros" name="go_media_bar" arg-mediaItem="{$content}" arg-watchType="media" />
	<xf:macro template="xfmg_media_macros" name="watched_media_footer" arg-mediaItem="{$content}" />
<xf:elseif is="$comment.content_type == 'xfmg_album'"/>
	<xf:macro template="xfmg_album_macros" name="go_album_bar" arg-album="{$content}" />
	<xf:macro template="xfmg_album_macros" name="watched_album_footer" arg-album="{$content}" />
</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_album_delete" version_id="902020370" version_string="2.2.3"><![CDATA[{{ phrase('xfmg_your_album_x_was_deleted', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_album_edit" version_id="902020370" version_string="2.2.3"><![CDATA[{{ phrase('xfmg_your_album_x_was_edited', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_album_move" version_id="902000470" version_string="2.0.4"><![CDATA[{{ phrase('xfmg_your_album_x_was_moved', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_comment_delete" version_id="902020370" version_string="2.2.3"><![CDATA[<xf:if is="$extra.content_type == 'xfmg_album'">
	{{ phrase('xfmg_your_comment_on_album_x_was_deleted', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:else />
	{{ phrase('xfmg_your_comment_on_media_x_was_deleted', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
</xf:if>
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_comment_edit" version_id="902020370" version_string="2.2.3"><![CDATA[<xf:if is="$extra.content_type == 'xfmg_album'">
	{{ phrase('xfmg_your_comment_on_album_x_was_edited', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:else />
	{{ phrase('xfmg_your_comment_on_media_x_was_edited', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
</xf:if>
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_media_delete" version_id="902020370" version_string="2.2.3"><![CDATA[{{ phrase('xfmg_your_media_x_was_deleted', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_media_edit" version_id="902020370" version_string="2.2.3"><![CDATA[{{ phrase('xfmg_your_media_x_was_edited', {'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_media_move" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[{{ phrase('xfmg_your_media_item_x_was_moved', {
	'title': '<a href="' . base_url($extra.link) . '" class="fauxBlockLink-blockLink">' . $extra.title . '</a>'
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>]]></template>
  <template type="public" title="alert_user_xfmg_transcode_failed" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[{{ phrase('xfmg_alert_transcode_failed', {'title': $extra.transcodeData.title}) }}]]></template>
  <template type="public" title="alert_xfmg_album_mention" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[{{ phrase('xfmg_x_mentioned_you_on_album_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'album': '<a href="' . link('media/albums', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_xfmg_album_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_reacted_to_your_album_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'item': '<a href="' . link('media/albums', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>',
	'reaction': alert_reaction($extra.reaction_id)|preescaped
}) }}]]></template>
  <template type="public" title="alert_xfmg_album_share_add" version_id="902000033" version_string="2.0.0 Beta 3"><![CDATA[{{ phrase('xfmg_x_shared_their_album_y_add', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'item': '<a href="' . link('media/albums', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_xfmg_album_share_view" version_id="902000033" version_string="2.0.0 Beta 3"><![CDATA[{{ phrase('xfmg_x_shared_their_album_y_view', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'item': '<a href="' . link('media/albums', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_xfmg_comment_insert" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_commented_on_media_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'media': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
<xf:else />
	{{ phrase('xfmg_x_commented_on_album_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'album': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
</xf:if>]]></template>
  <template type="public" title="alert_xfmg_comment_mention" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_mentioned_you_in_comment_on_media_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'media': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
<xf:else />
	{{ phrase('xfmg_x_mentioned_you_in_comment_on_album_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'album': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
</xf:if>]]></template>
  <template type="public" title="alert_xfmg_comment_pre_reg" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:if is="$extra.welcome">
	{{ phrase('welcome_to_boardtitle', {'boardTitle': $xf.options.boardTitle}) }}
</xf:if>
<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_your_reply_to_media_item_x_was_submitted', {
		'title': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
<xf:else />
	{{ phrase('xfmg_your_reply_to_album_x_was_submitted', {
		'title': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
</xf:if>]]></template>
  <template type="public" title="alert_xfmg_comment_quote" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_quoted_your_comment_on_media_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'media': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
<xf:else />
	{{ phrase('xfmg_x_quoted_your_comment_on_album_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'album': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>'
	}) }}
</xf:if>]]></template>
  <template type="public" title="alert_xfmg_comment_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_reacted_to_your_comment_on_media_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'media': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>',
		'reaction': alert_reaction($extra.reaction_id)|preescaped
	}) }}
<xf:else />
	{{ phrase('xfmg_x_reacted_to_your_comment_on_album_y', {
		'user': username_link($user, false, {'defaultname': $alert.username}),
		'album': '<a href="' . link('media/comments', $content) . '" class="fauxBlockLink-blockLink">' . $content.Content.title . '</a>',
		'reaction': alert_reaction($extra.reaction_id)|preescaped
	}) }}
</xf:if>]]></template>
  <template type="public" title="alert_xfmg_media_insert" version_id="902000032" version_string="2.0.0 Beta 2"><![CDATA[{{ phrase('xfmg_x_added_media_item_y', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'title': '<a href="' . link('media', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_xfmg_media_mention" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[{{ phrase('xfmg_x_mentioned_you_on_media_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'media': '<a href="' . link('media', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_xfmg_media_note_tag_approval" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[{{ phrase('xfmg_x_tagged_you_in_media_y_approval', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'item': '<a href="' . link('media', $content.MediaItem) . '" class="fauxBlockLink-blockLink">' . $content.MediaItem.title . '</a>',
	'approve': '<a href="' . link('media/note-approve', $content.MediaItem, {'note_id': $content.note_id, 't': csrf_token()}) . '">' . phrase('approve') . '</a>',
	'reject': '<a href="' . link('media/note-reject', $content.MediaItem, {'note_id': $content.note_id, 't': csrf_token()}) . '">' . phrase('reject') . '</a>'
}) }}]]></template>
  <template type="public" title="alert_xfmg_media_note_tag_insert" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[{{ phrase('xfmg_x_tagged_you_in_media_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'item': '<a href="' . link('media', $content.MediaItem) . '" class="fauxBlockLink-blockLink">' . $content.MediaItem.title . '</a>'
}) }}]]></template>
  <template type="public" title="alert_xfmg_media_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_reacted_to_your_media_y', {
	'user': username_link($user, false, {'defaultname': $alert.username}),
	'item': '<a href="' . link('media', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>',
	'reaction': alert_reaction($extra.reaction_id)|preescaped
}) }}]]></template>
  <template type="public" title="alert_xfmg_media_transcode_success" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[{{ phrase('xfmg_alert_transcode_success', {'title': '<a href="' . link('media', $content) . '" class="fauxBlockLink-blockLink">' . $content.title . '</a>'}) }}]]></template>
  <template type="public" title="alert_xfmg_rating_insert" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	<xf:if is="$content.Comment">
		{{ phrase('xfmg_x_reviewed_media_item_y', {
			'username': username_link($user, false, {'defaultname': $alert.username}),
			'title': '<a href="' . link('media/comments', $content.Comment) . '" class="fauxBlockLink-blockLink">' . $content.Media.title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('xfmg_x_rated_media_item_y', {
			'username': username_link($user, false, {'defaultname': $alert.username}),
			'title': '<a href="' . link('media', $content.Media) . '" class="fauxBlockLink-blockLink">' . $content.Media.title . '</a>'
		}) }}
	</xf:if>
<xf:else />
	<xf:if is="$content.Comment">
		{{ phrase('xfmg_x_reviewed_album_y', {
			'username': username_link($user, false, {'defaultname': $alert.username}),
			'title': '<a href="' . link('media/comments', $content.Comment) . '" class="fauxBlockLink-blockLink">' . $content.Album.title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('xfmg_x_rated_album_y', {
			'username': username_link($user, false, {'defaultname': $alert.username}),
			'title': '<a href="' . link('media/albums', $content.Album) . '" class="fauxBlockLink-blockLink">' . $content.Album.title . '</a>'
		}) }}
	</xf:if>
</xf:if>]]></template>
  <template type="public" title="approval_item_xfmg_album" version_id="902020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:set var="$messageHtml">
	<h4 class="message-title"><a href="{{ link('media/albums', $content) }}">{$content.title}</a></h4>
	<xf:if is="$content.thumbnail_date">
		<xf:css src="xfmg_album_view.less" />
		<div class="album-container">
			<a href="{{ link('media/albums', $content) }}">
				<img src="{$content.thumbnail_url}" loading="lazy" />
			</a>
		</div>
	</xf:if>
	<xf:if is="$content.description">
		<div>{{ structured_text($content.description) }}</div>
	</xf:if>
</xf:set>

<xf:macro template="approval_queue_macros" name="item_message_type"
	arg-content="{$content}"
	arg-contentDate="{$content.create_date}"
	arg-user="{$content.User}"
	arg-messageHtml="{$messageHtml}"
	arg-typePhraseHtml="{{ phrase('xfmg_album') }}"
	arg-spamDetails="{$spamDetails}"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}"
	arg-headerPhraseHtml=""/>]]></template>
  <template type="public" title="approval_item_xfmg_comment" version_id="902010970" version_string="2.1.9"><![CDATA[<xf:macro template="approval_queue_macros" name="item_message_type"
	arg-content="{$content}"
	arg-contentDate="{$content.comment_date}"
	arg-user="{$content.User}"
	arg-messageHtml="{{ bb_code($content.message, 'xfmg_comment', $content) }}"
	arg-typePhraseHtml="{{ phrase('xfmg_media_comment') }}"
	arg-spamDetails="{$spamDetails}"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}"
	arg-headerPhraseHtml="{{ $content.content_type == 'xfmg_media'
	? phrase('xfmg_comment_on_media_x_by_y', {
			'mediaLink': link('media', $content.Media),
			'mediaTitle': {$content.Media.title},
			'userLink': link('members', $content.Media.User),
			'userName': {$content.Media.User.username}
		})
	:  phrase('xfmg_comment_on_album_x_by_y', {
		'albumLink': link('media/albums', $content.Album),
		'albumTitle': {$content.Album.title},
		'userLink': link('members', $content.User),
		'userName': {$content.username}
		})
	}}"/>]]></template>
  <template type="public" title="approval_item_xfmg_media" version_id="902010170" version_string="2.1.1"><![CDATA[<xf:set var="$messageHtml">
	<div class="media-container">
		<xf:macro template="xfmg_media_view_macros" name="media_content" arg-mediaItem="{$content}" />
	</div>

	<xf:if is="$content.description">
		<div>{{ structured_text($content.description) }}</div>
	</xf:if>
</xf:set>

<xf:set var="$headerPhraseHtml">
	<xf:if is="$content.album_id">
		{{ phrase('xfmg_media_x_posted_in_album_y', {
			'mediaLink': link('media', $content),
			'mediaTitle': $content.title,
			'albumLink': link('media/albums', $content.Album),
			'albumTitle': $content.Album.title
		}) }}
	<xf:else />
		{{ phrase('xfmg_media_x_posted_in_category_y', {
			'mediaLink': link('media', $content),
			'mediaTitle': $content.title,
			'catLink': link('media/categories', $content.Category),
			'catTitle': $content.Category.title
		}) }}
	</xf:if>
</xf:set>

<xf:macro template="approval_queue_macros" name="item_message_type"
	arg-content="{$content}"
	arg-contentDate="{$content.media_date}"
	arg-user="{$content.User}"
	arg-messageHtml="{$messageHtml}"
	arg-typePhraseHtml="{{ phrase('xfmg_media_item') }}"
	arg-spamDetails="{$spamDetails}"
	arg-unapprovedItem="{$unapprovedItem}"
	arg-handler="{$handler}"
	arg-headerPhraseHtml="{$headerPhraseHtml}" />]]></template>
  <template type="public" title="bookmark_item_xfmg_album" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ snippet($content.description, max_length($bookmark, 'message'), {'stripQuote': true}) }}]]></template>
  <template type="public" title="bookmark_item_xfmg_media" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ snippet($content.description, max_length($bookmark, 'message'), {'stripQuote': true}) }}]]></template>
  <template type="public" title="core_xfmg.less" version_id="902010470" version_string="2.1.4"><![CDATA[.xfmgThumbnail
{
	display: flex;
	position: relative;
	width: 100px;

	vertical-align: top;
	white-space: nowrap;
	word-wrap: normal;
	text-align: center;

	&&.is-selected // increase specificity to ensure overriding of noThumb border
	{
		border: @xf-borderSizeMinorFeature solid @xf-borderColorFeature;
	}

	&.xfmgThumbnail--fluid
	{
		width: inherit;
	}

	&.xfmgThumbnail--smallest
	{
		width: 50px;
	}

	&.xfmgThumbnail--small
	{
		width: 60px;
	}

	&.xfmgThumbnail--noThumb
	{
		.xf-contentAltBase();

		.xfmgThumbnail-icon
		{
			&::before
			{
				.m-faContent(@fa-var-ellipsis-h);
			}

			.xfmgThumbnail--upload&
			{
				&::before
				{
					.m-faContent(@fa-var-upload) !important; // has to override the default no thumbnail icon
				}
			}

			.xfmgThumbnail--audio&
			{
				&::before
				{
					.m-faContent(@fa-var-music);
				}
			}

			.xfmgThumbnail--image&
			{
				&::before
				{
					.m-faContent(@fa-var-image);
				}
			}

			.xfmgThumbnail--video&
			{
				&::before
				{
					.m-faContent(@fa-var-video);
				}
			}

			.xfmgThumbnail--embed&
			{
				.xfmgThumbnail--upload&
				{
					&::before
					{
						.m-faBase('Pro');
					}
				}

				&::before
				{
					.m-faBase('Brands');
					.m-faContent(@fa-var-youtube);
				}
			}

			.xfmgThumbnail--album&
			{
				&::before
				{
					.m-faContent(@fa-var-folder-open);
				}
			}
		}
	}

	&.xfmgThumbnail--notVisible
	{
		.xfmgThumbnail-image
		{
			opacity: 0.3;
			z-index: @zIndex-2;
		}

		&.xfmgThumbnail--notVisible--deleted
		{
			.xfmgThumbnail-icon
			{
				&::before
				{
					.m-faBase('Pro');
					.m-faContent(@fa-var-trash-alt);
				}
			}
		}

		&.xfmgThumbnail--notVisible--moderated
		{
			.xfmgThumbnail-icon
			{
				&::before
				{
					.m-faBase('Pro');
					.m-faContent(@fa-var-shield);
				}
			}
		}
	}
}

.xfmgThumbnail-image
{
	width: 100%;
	height: 100%;
	vertical-align: top;
}

.xfmgThumbnail-icon
{
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	color: @xf-textColorMuted;
	.m-textOutline(@xf-textColorMuted, xf-intensify(@xf-textColorMuted, 20%));

	.m-faBase();
	font-size: 60px;

	.xfmgThumbnail--upload && // extra specificity required in this case
	{
		.m-faBase();
		font-size: 60px;
	}

	.xfmgThumbnail--embed:not(.xfmgThumbnail--notVisible, .xfmgThumbnail--upload) &
	{
		.m-faBase('Brands');
		font-size: 60px;
	}

	.xfmgThumbnail--smallest &,
	.xfmgThumbnail--iconSmallest &
	{
		font-size: 25px;
	}

	.xfmgThumbnail--small &,
	.xfmgThumbnail--iconSmall &
	{
		font-size: 30px;
	}

	@media (max-width: @xf-responsiveMedium)
	{
		font-size: 50px;
	}

	@media (max-width: @xf-responsiveNarrow)
	{
		font-size: 30px;
	}
}
]]></template>
  <template type="public" title="news_feed_item_xfmg_album_insert" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<div class="contentRow-title">
	<xf:if is="$content.category_id">
		{{ phrase('xfmg_x_created_album_y_in_category_z', {
			'username': username_link($user, false, {'defaultname': $newsFeed.username}),
			'title': '<a href="' . link('media/albums', $content) . '">' . $content.title . '</a>',
			'category': '<a href="' . link('media/categories', $content.Category) . '">' . $content.Category.title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('xfmg_x_created_album_y', {
			'username': username_link($user, false, {'defaultname': $newsFeed.username}),
			'title': '<a href="' . link('media/albums', $content) . '">' . $content.title . '</a>'
		}) }}
	</xf:if>
</div>

<xf:if is="$content.description">
	<div class="contentRow-snippet">{{ snippet($content.description, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
</xf:if>

<xf:if is="{$content.thumbnail_date}">
	<div class="contentRow-figure contentRow-figure--fixedMedium"><a href="{{ link('media/albums', $content) }}"><img src="{$content.thumbnail_url}" loading="lazy" alt="{$content.title}" /></a></div>
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_xfmg_album_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:macro template="reaction_item_xfmg_album" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-album="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_xfmg_comment_insert" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<div class="contentRow-title">
	<xf:if is="$content.content_type == 'xfmg_media'">
		{{ phrase('xfmg_x_posted_comment_on_media_item_y', {
			'username': username_link($user, false, {'defaultname': $newsFeed.username}),
			'title': '<a href="' . link('media/comments', $content) . '">' . $content.Media.title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('xfmg_x_posted_comment_on_album_y', {
			'username': username_link($user, false, {'defaultname': $newsFeed.username}),
			'title': '<a href="' . link('media/comments', $content) . '">' . $content.Album.title . '</a>'
		}) }}
	</xf:if>
</div>

<div class="contentRow-snippet">{{ snippet($content.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_xfmg_comment_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:macro template="reaction_item_xfmg_comment" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-comment="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_xfmg_media_insert" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<div class="contentRow-title">
	<xf:if is="$content.category_id">
		{{ phrase('xfmg_x_added_media_item_y_to_category_z', {
			'username': username_link($user, false, {'defaultname': $newsFeed.username}),
			'title': '<a href="' . link('media', $content) . '">' . $content.title . '</a>',
			'category': '<a href="' . link('media/categories', $content.Category) . '">' . $content.Category.title . '</a>'
		}) }}
	<xf:else />
		{{ phrase('xfmg_x_added_media_item_y_to_album_z', {
			'username': username_link($user, false, {'defaultname': $newsFeed.username}),
			'title': '<a href="' . link('media', $content) . '">' . $content.title . '</a>',
			'album': '<a href="' . link('media/albums', $content.Album) . '">' . $content.Album.title . '</a>'
		}) }}
	</xf:if>
</div>

<xf:if is="$content.description">
	<div class="contentRow-snippet">{{ snippet($content.description, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}</div>
</xf:if>

<xf:if is="{$content.has_thumbnail}">
	<div class="contentRow-figure contentRow-figure--fixedMedium"><a href="{{ link('media', $content) }}"><img src="{$content.current_thumbnail_url}" loading="lazy" alt="{$content.title}" /></a></div>
</xf:if>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="news_feed_item_xfmg_media_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:macro template="reaction_item_xfmg_media" name="reaction_snippet"
	arg-reactionUser="{$user}"
	arg-reactionId="{$extra.reaction_id}"
	arg-mediaItem="{$content}"
	arg-date="{$newsFeed.event_date}" />]]></template>
  <template type="public" title="news_feed_item_xfmg_rating_insert" version_id="902020570" version_string="2.2.5"><![CDATA[<div class="contentRow-title">
	<xf:if is="$content.content_type == 'xfmg_media'">
		<xf:if is="$content.Comment AND $content.Comment.canView()">
			{{ phrase('xfmg_x_reviewed_media_item_y', {
				'username': username_link($user, false, {'defaultname': $newsFeed.username}),
				'title': '<a href="' . link('media/comments', $content.Comment) . '" class="fauxBlockLink-blockLink">' . $content.Media.title . '</a>'
			}) }}
		<xf:else />
			{{ phrase('xfmg_x_rated_media_item_y', {
				'username': username_link($user, false, {'defaultname': $newsFeed.username}),
				'title': '<a href="' . link('media', $content.Media) . '" class="fauxBlockLink-blockLink">' . $content.Media.title . '</a>'
			}) }}
		</xf:if>
	<xf:else />
		<xf:if is="$content.Comment AND $content.Comment.canView()">
			{{ phrase('xfmg_x_reviewed_album_y', {
				'username': username_link($user, false, {'defaultname': $newsFeed.username}),
				'title': '<a href="' . link('media/comments', $content.Comment) . '" class="fauxBlockLink-blockLink">' . $content.Album.title . '</a>'
			}) }}
		<xf:else />
			{{ phrase('xfmg_x_rated_album_y', {
				'username': username_link($user, false, {'defaultname': $newsFeed.username}),
				'title': '<a href="' . link('media/albums', $content.Album) . '" class="fauxBlockLink-blockLink">' . $content.Album.title . '</a>'
			}) }}
		</xf:if>
	</xf:if>
</div>

<div class="contentRow-snippet">
	<xf:macro template="rating_macros" name="stars"
		arg-rating="{$content.rating}"
		arg-class="ratingStars--smaller" />

	<xf:if is="$content.Comment AND $content.Comment.canView()">
		{{ snippet($content.Comment.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true}) }}
	</xf:if>
</div>

<div class="contentRow-minor"><xf:date time="{$newsFeed.event_date}" /></div>]]></template>
  <template type="public" title="push_user_xfmg_album_delete" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_your_album_x_was_deleted', {'title': $extra.title}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_album_edit" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_your_album_x_was_edited', {'title': $extra.title}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_album_move" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_your_album_x_was_moved', {
	'title': $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_comment_delete" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$extra.content_type == 'xfmg_album'">
	{{ phrase('xfmg_your_comment_on_album_x_was_deleted', {'title': $extra.title}) }}
<xf:else />
	{{ phrase('xfmg_your_comment_on_media_x_was_deleted', {'title': $extra.title}) }}
</xf:if>
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_comment_edit" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$extra.content_type == 'xfmg_album'">
	{{ phrase('xfmg_your_comment_on_album_x_was_edited', {'title': $extra.title}) }}
<xf:else />
	{{ phrase('xfmg_your_comment_on_media_x_was_edited', {'title': $extra.title}) }}
</xf:if>
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_media_delete" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_your_media_x_was_deleted', {'title': $extra.title}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_media_edit" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_your_media_x_was_edited', {'title': $extra.title}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_media_move" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_your_media_item_x_was_moved', {
	'title': $extra.title
}) }}
<xf:if is="$extra.reason">{{ phrase('reason:') }} {$extra.reason}</xf:if>
<push:url>{{ base_url($extra.link, 'canonical') }}</push:url>]]></template>
  <template type="public" title="push_user_xfmg_transcode_failed" version_id="902010970" version_string="2.1.9"><![CDATA[{{ phrase('xfmg_alert_transcode_failed', {'title': $extra.transcodeData.title}) }}]]></template>
  <template type="public" title="push_xfmg_album_mention" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_mentioned_you_on_album_y', {
	'user': $user.username ?: $alert.username,
	'album': $content.title
}) }}
<push:url>{{ link('canonical:media/albums', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_album_reaction" version_id="902010970" version_string="2.1.9"><![CDATA[{{ phrase('xfmg_x_reacted_to_your_album_y', {
	'user': $user.username ?: $alert.username,
	'item': $content.title,
	'reaction': reaction_title($extra.reaction_id)
}) }}
<push:url>{{ link('canonical:media/albums', $content) }}</push:url>
<push:tag>xfmg_album_reaction_{$content.album_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_xfmg_album_share_add" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_shared_their_album_y_add', {
	'user': $user.username ?: $alert.username,
	'item': $content.title
}) }}
<push:url>{{ link('canonical:media/albums', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_album_share_view" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_shared_their_album_y_view', {
	'user': $user.username ?: $alert.username,
	'item': $content.title
}) }}
<push:url>{{ link('canonical:media/albums', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_comment_insert" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_commented_on_media_y', {
		'user': $user.username ?: $alert.username,
		'media': $content.Content.title
	}) }}
<xf:else />
	{{ phrase('xfmg_x_commented_on_album_y', {
		'user': $user.username ?: $alert.username,
		'album': $content.Content.title
	}) }}
</xf:if>
<push:url>{{ link('canonical:media/comments', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_comment_mention" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_mentioned_you_in_comment_on_media_y', {
		'user': $user.username ?: $alert.username,
		'media': $content.Content.title
	}) }}
<xf:else />
	{{ phrase('xfmg_x_mentioned_you_in_comment_on_album_y', {
		'user': $user.username ?: $alert.username,
		'album': $content.Content.title
	}) }}
</xf:if>
<push:url>{{ link('canonical:media/comments', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_comment_pre_reg" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:if is="$extra.welcome">
	{{ phrase('welcome_to_boardtitle', {'boardTitle': $xf.options.boardTitle}) }}
</xf:if>
<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_your_reply_to_media_item_x_was_submitted', {
		'title': $content.Content.title
	}) }}
<xf:else />
	{{ phrase('xfmg_your_reply_to_album_x_was_submitted', {
		'title': $content.Content.title
	}) }}
</xf:if>
<push:url>{{ link('canonical:media/comments', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_comment_quote" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_quoted_your_comment_on_media_y', {
		'user': $user.username ?: $alert.username,
		'media': $content.Content.title
	}) }}
<xf:else />
	{{ phrase('xfmg_x_quoted_your_comment_on_album_y', {
		'user': $user.username ?: $alert.username,
		'album': $content.Content.title
	}) }}
</xf:if>
<push:url>{{ link('canonical:media/comments', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_comment_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	{{ phrase('xfmg_x_reacted_to_your_comment_on_media_y', {
		'user': $user.username ?: $alert.username,
		'media': $content.Content.title,
		'reaction': reaction_title($extra.reaction_id)
	}) }}
<xf:else />
	{{ phrase('xfmg_x_reacted_to_your_comment_on_album_y', {
		'user': $user.username ?: $alert.username,
		'album': $content.Content.title,
		'reaction': reaction_title($extra.reaction_id)
	}) }}
</xf:if>
<push:url>{{ link('canonical:media/comments', $content) }}</push:url>
<push:tag>xfmg_comment_reaction_{$content.comment_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_xfmg_media_insert" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_added_media_item_y', {
	'name': $user.username ?: $alert.username,
	'title': $content.title
}) }}
<push:url>{{ link('canonical:media', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_media_mention" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_mentioned_you_on_media_y', {
	'user': $user.username ?: $alert.username,
	'media': $content.title
}) }}
<push:url>{{ link('canonical:media', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_media_note_tag_approval" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_push_alert_x_tagged_you_in_media_y_approval', {
	'user': $user.username ?: $alert.username,
	'item': $content.MediaItem.title
}) }}
<push:url>{{ link('canonical:account/alerts') }}</push:url>]]></template>
  <template type="public" title="push_xfmg_media_note_tag_insert" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_tagged_you_in_media_y', {
	'user': $user.username ?: $alert.username,
	'item': $content.MediaItem.title
}) }}
<push:url>{{ link('canonical:media', $content.MediaItem) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_media_reaction" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_x_reacted_to_your_media_y', {
	'user': $user.username ?: $alert.username,
	'item': $content.title,
	'reaction': reaction_title($extra.reaction_id)
}) }}
<push:url>{{ link('canonical:media', $content) }}</push:url>
<push:tag>xfmg_media_reaction_{$content.media_id}_{$extra.reaction_id}</push:tag>]]></template>
  <template type="public" title="push_xfmg_media_transcode_success" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[{{ phrase('xfmg_alert_transcode_success', {'title': $content.title}) }}
<push:url>{{ link('canonical:media', $content) }}</push:url>]]></template>
  <template type="public" title="push_xfmg_rating_insert" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:if is="$content.content_type == 'xfmg_media'">
	<xf:if is="$content.Comment">
		{{ phrase('xfmg_x_reviewed_media_item_y', {
			'username': $user.username ?: $alert.username,
			'title': $content.Media.title
		}) }}
		<push:url>{{ link('canonical:media/comments', $content.Comment) }}</push:url>
	<xf:else />
		{{ phrase('xfmg_x_rated_media_item_y', {
			'username': $user.username ?: $alert.username,
			'title': $content.Media.title
		}) }}
		<push:url>{{ link('canonical:media', $content.Media) }}</push:url>
	</xf:if>
<xf:else />
	<xf:if is="$content.Comment">
		{{ phrase('xfmg_x_reviewed_album_y', {
			'username': $user.username ?: $alert.username,
			'title': $content.Album.title
		}) }}
		<push:url>{{ link('canonical:media/comments', $content.Comment) }}</push:url>
	<xf:else />
		{{ phrase('xfmg_x_rated_album_y', {
			'username': $user.username ?: $alert.username,
			'title': $content.Album.title
		}) }}
		<push:url>{{ link('canonical:media/albums', $content.Album) }}</push:url>
	</xf:if>
</xf:if>]]></template>
  <template type="public" title="reaction_item_xfmg_album" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-album="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$album.user_id == $xf.visitor.user_id">
			{{ phrase('xfmg_x_reacted_to_your_album_y', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'item': '<a href="' . link('media/albums', $album) . '">' . $album.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		<xf:else />
			{{ phrase('xfmg_x_reacted_to_ys_album_z', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'author': $album.username,
				'item': '<a href="' . link('media/albums', $album) . '">' . $album.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($album.description, $xf.options.newsFeedMessageSnippetLength)
	}}</div>

	<xf:if is="{$album.thumbnail_date}">
		<div class="contentRow-figure contentRow-figure--fixedMedium"><a href="{{ link('media/albums', $album) }}"><img src="{$album.thumbnail_url}" loading="lazy" alt="{$album.title}" /></a></div>
	</xf:if>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-album="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="reaction_item_xfmg_comment" version_id="902020370" version_string="2.2.3"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-comment="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$comment.user_id == $xf.visitor.user_id">
			<xf:if is="$comment.content_type == 'xfmg_media'">
				{{ phrase('xfmg_x_reacted_to_your_comment_on_media_y', {
					'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
					'media': '<a href="' . link('media/comments', $comment) . '" class="fauxBlockLink-blockLink">' . $comment.Content.title . '</a>',
					'reaction': alert_reaction($reactionId, 'medium')|preescaped
				}) }}
			<xf:else />
				{{ phrase('xfmg_x_reacted_to_your_comment_on_album_y', {
					'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
					'album': '<a href="' . link('media/comments', $comment) . '" class="fauxBlockLink-blockLink">' . $comment.Content.title . '</a>',
					'reaction': alert_reaction($reactionId, 'medium')|preescaped
				}) }}
			</xf:if>
		<xf:else />
			<xf:if is="$comment.content_type == 'xfmg_media'">
				{{ phrase('xfmg_x_reacted_to_ys_comment_on_media_z', {
					'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
					'author': $comment.username,
					'media': '<a href="' . link('media/comments', $comment) . '" class="fauxBlockLink-blockLink">' . $comment.Content.title . '</a>',
					'reaction': alert_reaction($reactionId, 'medium')|preescaped
				}) }}
			<xf:else />
				{{ phrase('xfmg_x_reacted_to_ys_comment_on_album_z', {
					'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
					'author': $comment.username,
					'album': '<a href="' . link('media/comments', $comment) . '" class="fauxBlockLink-blockLink">' . $comment.Content.title . '</a>',
					'reaction': alert_reaction($reactionId, 'medium')|preescaped
				}) }}
			</xf:if>
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($comment.message, $xf.options.newsFeedMessageSnippetLength, {'stripQuote': true})
	}}</div>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-comment="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="reaction_item_xfmg_media" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:macro name="reaction_snippet" arg-reactionUser="!" arg-reactionId="!" arg-mediaItem="!" arg-date="!" arg-fallbackName="{{ phrase('unknown_member') }}">
	<div class="contentRow-title">
		<xf:if is="$mediaItem.user_id == $xf.visitor.user_id">
			{{ phrase('xfmg_x_reacted_to_your_media_y', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'item': '<a href="' . link('media', $mediaItem) . '">' . $mediaItem.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		<xf:else />
			{{ phrase('xfmg_x_reacted_to_ys_media_z', {
				'user': username_link($reactionUser, false, {'defaultname': $fallbackName}),
				'author': $mediaItem.username,
				'item': '<a href="' . link('media', $mediaItem) . '">' . $mediaItem.title . '</a>',
				'reaction': alert_reaction($reactionId, 'medium')|preescaped
			}) }}
		</xf:if>
	</div>

	<div class="contentRow-snippet">{{
		snippet($mediaItem.description, $xf.options.newsFeedMessageSnippetLength)
	}}</div>

	<xf:if is="{$mediaItem.has_thumbnail}">
		<div class="contentRow-figure contentRow-figure--fixedMedium"><a href="{{ link('media', $mediaItem) }}"><img src="{$mediaItem.current_thumbnail_url}" loading="lazy" alt="{$mediaItem.title}" /></a></div>
	</xf:if>

	<div class="contentRow-minor"><xf:date time="{$date}" /></div>
</xf:macro>

<xf:macro name="reaction_snippet" arg-reactionUser="{$reaction.ReactionUser}" arg-reactionId="{$reaction.reaction_id}" arg-mediaItem="{$content}" arg-date="{$reaction.reaction_date}" />]]></template>
  <template type="public" title="report_content_xfmg_album" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:css src="xfmg_album_view.less" />
<xf:if is="$report.content_info.description">
	<div class="block-row block-row--separated">
		<div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--albumDescription js-expandWatch">
			<div class="bbCodeBlock-content">
				<div class="bbCodeBlock-expandContent js-expandContent">
					{{ structured_text($report.content_info.description) }}
				</div>
				<div class="bbCodeBlock-expandLink js-expandLink"><a role="button" tabindex="0">{{ phrase('click_to_expand') }}</a></div>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="report_content_xfmg_comment" version_id="902000038" version_string="2.0.0 Beta 8"><![CDATA[<div class="block-row block-row--separated">
	{{ bb_code($report.content_info.comment.message, 'xfmg_comment', $content ?: $report.User) }}
</div>
<div class="block-row block-row--separated block-row--minor">
	<dl class="pairs pairs--inline">
		<xf:if is="$report.content_info.content_type == 'xfmg_media'">
			<dt>{{ phrase('xfmg_media_item') }}</dt>
			<dd>
				<a href="{{ link('media', {
					'media_id': $report.content_info.content_id,
					'title': $report.content_info.content_title
				}) }}">{$report.content_info.content_title}</a>
			</dd>
		<xf:else />
			<dt>{{ phrase('xfmg_album') }}</dt>
			<dd>
				<a href="{{ link('media/albums', {
					'album_id': $report.content_info.content_id,
					'title': $report.content_info.content_title
				}) }}">{$report.content_info.content_title}</a>
			</dd>
		</xf:if>
	</dl>
</div>]]></template>
  <template type="public" title="report_content_xfmg_media" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:css src="xfmg_media_view.less" />
<div class="media block-row block-row--separated">
	<div class="media-container">
		<xf:macro template="xfmg_media_view_macros" name="media_content" arg-mediaItem="{$content}" />
	</div>
</div>
<xf:if is="$report.content_info.description">
	<div class="block-row block-row--separated">
		<div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--mediaDescription js-expandWatch">
			<div class="bbCodeBlock-content">
				<div class="bbCodeBlock-expandContent js-expandContent">
					{{ structured_text($report.content_info.description) }}
				</div>
				<div class="bbCodeBlock-expandLink js-expandLink"><a role="button" tabindex="0">{{ phrase('click_to_expand') }}</a></div>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="search_form_xfmg_album" version_id="902020370" version_string="2.2.3"><![CDATA[<xf:title>{{ phrase('xfmg_search_albums') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:set var="$categoriesControlId" value="{{ unique_id() }}" />
<xf:formrow rowtype="input"
	label="{{ phrase('xfmg_search_in_categories') }}" controlid="{$categoriesControlId}">

	<ul class="inputList">
		<li><xf:select name="c[categories][]" size="7" multiple="multiple" value="{$input.c.categories|default([0])}" id="{$categoriesControlId}">
			<xf:option value="">{{ phrase('xfmg_all_categories') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:select></li>
		<li><xf:checkbox standalone="true">
			<xf:option name="c[child_categories]" selected="{{ (!$input.c OR $input.c.child_categories) }}">
				{{ phrase('xfmg_search_child_categories_as_well') }}
			</xf:option>
		</xf:checkbox></li>
	</ul>
</xf:formrow>

<xf:macro template="search_form_macros" name="order"
	arg-isRelevanceSupported="{$isRelevanceSupported}"
	arg-input="{$input}" />]]></template>
  <template type="public" title="search_form_xfmg_comment" version_id="902000031" version_string="2.0.0 Beta 1"><![CDATA[<xf:title>{{ phrase('xfmg_search_media_comments') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:checkboxrow name="c[types][]" multiple="multiple" value="{$input.c.types|default(['xfmg_media', 'xfmg_album'])}"
	label="{{ phrase('xfmg_comments_posted_on') }}">

	<xf:foreach loop="$types" key="$type" value="$label">
		<xf:option value="{$type}">{$label}</xf:option>
	</xf:foreach>
</xf:checkboxrow>

<xf:macro template="search_form_macros" name="order"
	arg-isRelevanceSupported="{$isRelevanceSupported}"
	arg-input="{$input}" />]]></template>
  <template type="public" title="search_form_xfmg_media" version_id="902020370" version_string="2.2.3"><![CDATA[<xf:title>{{ phrase('xfmg_search_media') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:set var="$categoriesControlId" value="{{ unique_id() }}" />
<xf:formrow rowtype="input"
	label="{{ phrase('xfmg_search_in_categories') }}" controlid="{$categoriesControlId}">

	<ul class="inputList">
		<li><xf:select name="c[categories][]" size="7" multiple="multiple" value="{$input.c.categories|default([0])}" id="{$categoriesControlId}">
			<xf:option value="">{{ phrase('xfmg_all_categories') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:select></li>
		<li><xf:checkbox standalone="true">
			<xf:option name="c[child_categories]" selected="{{ (!$input.c OR $input.c.child_categories) }}">
				{{ phrase('xfmg_search_child_categories_as_well') }}
			</xf:option>
		</xf:checkbox></li>
	</ul>
</xf:formrow>

<xf:macro template="search_form_macros" name="order"
	arg-isRelevanceSupported="{$isRelevanceSupported}"
	arg-input="{$input}" />]]></template>
  <template type="public" title="search_result_xfmg_album" version_id="902010013" version_string="2.1.0 Preview 3"><![CDATA[<li class="block-row block-row--separated{{ $album.isIgnored() ? ' is-ignored' : '' }} js-inlineModContainer" data-author="{{ $album.User.username ?: $album.username }}">
	<div class="contentRow{{ !$album.isVisible() ? ' is-deleted' : '' }}">
		<span class="contentRow-figure">
			{{ xfmg_thumbnail($album) }}
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('media/albums', $album) }}">{{ highlight($album.title, $options.term) }}</a>
			</h3>

			<div class="contentRow-snippet">{{ snippet($album.description, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'xfmg_album' AND $album.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$album.album_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<li><xf:username user="{$album.User}" defaultname="{$album.username}" /></li>
					<li>{{ phrase('xfmg_album') }}</li>
					<li><xf:date time="{$album.create_date}" /></li>
					<li>{{ phrase('xfmg_comments:') }} {$album.comment_count|number}</li>
					<xf:if is="$album.category_id">
						<li>{{ phrase('xfmg_category:') }} {$album.Category.title}</li>
					</xf:if>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_xfmg_comment" version_id="902000370" version_string="2.0.3"><![CDATA[<li class="block-row block-row--separated {{ $comment.isIgnored() ? 'is-ignored' : '' }} js-inlineModContainer" data-author="{{ $comment.User.username ?: $comment.username }}">
	<div class="contentRow {{ !$comment.isVisible() ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$comment.User}" size="s" defaultname="{$comment.username}" />
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('media/comments', $comment) }}">
					<xf:if is="$comment.content_type == 'xfmg_media'">
						{{ phrase('xfmg_comment_by_x_in_media_y', {
							'user': $comment.username,
							'title': $comment.Media.title
						}) }}
					<xf:else />
						{{ phrase('xfmg_comment_by_x_in_album_y', {
							'user': $comment.username,
							'title': $comment.Album.title
						}) }}
					</xf:if>
				</a>
			</h3>

			<div class="contentRow-snippet">{{ snippet($comment.message, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'xfmg_comment' AND $comment.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$comment.comment_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<li><xf:username user="{$comment.User}" defaultname="{$comment.username}" /></li>
					<li>{{ phrase('xfmg_gallery_comment') }}</li>
					<li><xf:date time="{$comment.comment_date}" /></li>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_xfmg_media" version_id="902020051" version_string="2.2.0 Release Candidate 1"><![CDATA[<li class="block-row block-row--separated{{ $mediaItem.isIgnored() ? ' is-ignored' : '' }} js-inlineModContainer" data-author="{{ $mediaItem.User.username ?: $mediaItem.username }}">
	<div class="contentRow{{ !$mediaItem.isVisible() ? ' is-deleted' : '' }}">
		<span class="contentRow-figure">
			{{ xfmg_thumbnail($mediaItem) }}
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('media', $mediaItem) }}">{{ highlight($mediaItem.title, $options.term) }}</a>
			</h3>

			<div class="contentRow-snippet">{{ snippet($mediaItem.description, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<xf:if is="$options.mod == 'xfmg_media' AND $mediaItem.canUseInlineModeration()">
						<li><xf:checkbox standalone="true"><xf:option value="{$mediaItem.media_id}" class="js-inlineModToggle" /></xf:checkbox></li>
					</xf:if>
					<li><xf:username user="{$mediaItem.User}" defaultname="{$mediaItem.username}" /></li>
					<li>{{ phrase('xfmg_media_item') }}</li>
					<li><xf:date time="{$mediaItem.media_date}" /></li>
					<xf:if is="$xf.options.enableTagging && $mediaItem.tags">
						<li>
							<xf:macro template="tag_macros" name="simple_list"
								arg-tags="{$mediaItem.tags}"
								arg-containerClass="contentRow-minor"
								arg-highlightTerm="{{ $options.tag ?: $options.term}}" />
						</li>
					</xf:if>
					<li>{{ phrase('xfmg_comments:') }} {$mediaItem.comment_count|number}</li>
					<xf:if is="$mediaItem.album_id">
						<li>{{ phrase('xfmg_album:') }} {$mediaItem.Album.title}</li>
					</xf:if>
					<xf:if is="$mediaItem.category_id">
						<li>{{ phrase('xfmg_category:') }} {$mediaItem.Category.title}</li>
					</xf:if>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="watched_albums_manage" version_id="902010970" version_string="2.1.9"><![CDATA[<xf:title>{{ phrase('xfmg_manage_watched_albums') }}</xf:title>

<xf:form action="{{ link('watched/media-albums/manage', null, {'state': $state}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-row">
			<xf:inforow rowtype="confirm">
				<xf:if is="$state == 'delete'">
					{{ phrase('xfmg_you_sure_you_want_to_stop_watching_all_albums') }}
				<xf:elseif is="$state == 'send_alert:off'" />
					{{ phrase('xfmg_you_sure_you_want_to_update_your_alert_settings_all_albums') }}
				<xf:else />
					{{ phrase('xfmg_you_sure_you_want_to_update_your_email_notification_settings_all_albums') }}
				</xf:if>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('confirm') }}" icon="notificationsOff" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="watched_media_manage" version_id="902010970" version_string="2.1.9"><![CDATA[<xf:title>{{ phrase('xfmg_manage_watched_media') }}</xf:title>

<xf:form action="{{ link('watched/media/manage', null, {'state': $state}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-row">
			<xf:inforow rowtype="confirm">
				<xf:if is="$state == 'delete'">
					{{ phrase('xfmg_you_sure_you_want_to_stop_watching_all_media') }}
				<xf:elseif is="$state == 'send_alert:off'" />
					{{ phrase('xfmg_you_sure_you_want_to_update_your_alert_settings_all_media') }}
				<xf:else />
					{{ phrase('xfmg_you_sure_you_want_to_update_your_email_notification_settings_all_media') }}
				</xf:if>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('confirm') }}" icon="notificationsOff" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_add_media_album_chooser" version_id="902000038" version_string="2.0.0 Beta 8"><![CDATA[<xf:title>{{ phrase('xfmg_add_media_to...') }}</xf:title>

<xf:wrap template="xfmg_gallery_wrapper">
	<xf:set var="$hasAlbumCategories" value="{{ ($categoryTree.count() > 0) }}" />
</xf:wrap>

<xf:if is="$albums is not empty">
	<div class="block">
		<div class="block-outer"><xf:trim>
			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}" link="media/albums/add" wrapperclass="block-outer-main" />
		</xf:trim></div>

		<div class="block-container">
			<div class="block-body">
				<xf:macro template="xfmg_album_list_macros" name="album_list" arg-albums="{$albums}" arg-isChooser="{{ true }}" arg-allowInlineMod="{{ false }}" />
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}" link="media/albums/add" wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('xfmg_no_albums_have_been_added_yet_which_you_can_add_media_to') }}</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_add_media_chooser" version_id="902010970" version_string="2.1.9"><![CDATA[<xf:title>{{ phrase('xfmg_add_media_to...') }}</xf:title>

<xf:wrap template="xfmg_gallery_wrapper" />

<div class="blocks">
	<xf:if is="$categoryAddTree is not empty">
		<div class="block block--treeEntryChooser">
			<div class="block-container">
				<div class="block-body">
					<xf:macro name="category_list" arg-children="{$categoryAddTree}" arg-extras="{$categoryExtras}" arg-depth="0" />
				</div>
			</div>
		</div>
	</xf:if>

	<xf:if contentcheck="true">
		<xf:if is="$categoryAddTree is not empty">
			<div class="blocks-textJoiner"><span></span><em>{{ phrase('or_separator') }}</em><span></span></div>
		</xf:if>
		<div class="block block--treeEntryChooser">
			<div class="block-container">
				<div class="block-body">
					<xf:contentcheck>
						<xf:if is="$canCreateAlbums">
							<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
								<div class="contentRow contentRow--alignMiddle">
									<div class="contentRow-main">
										<h2 class="contentRow-title">
											<a href="{{ link('media/albums/create') }}" class="fauxBlockLink-blockLink">
												{{ phrase('xfmg_create_personal_album...') }}
											</a>
										</h2>
										<div class="contentRow-minor">
											{{ phrase('xfmg_personal_album_can_use_advanced_privacy_settings') }}
										</div>
									</div>
								</div>
							</div>
						</xf:if>
						<xf:if is="$canAddToAlbums">
							<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
								<div class="contentRow contentRow--alignMiddle">
									<div class="contentRow-main">
										<h2 class="contentRow-title">
											<a href="{{ link('media/albums/add') }}" class="fauxBlockLink-blockLink">
												{{ phrase('xfmg_add_media_to_existing_album...') }}
											</a>
										</h2>
										<div class="contentRow-minor">
											{{ phrase('xfmg_you_will_be_shown_list_of_all_albums_that_you_can_add_media_to') }}
										</div>
									</div>
								</div>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</div>
	</xf:if>
</div>

<xf:macro name="category_list" arg-children="!" arg-extras="!" arg-depth="0">
	<xf:foreach loop="$children" key="$id" value="$child">
		<xf:macro name="category_list_entry"
			arg-category="{$child.record}"
			arg-extras="{$extras.{$id}}"
			arg-children="{$child.children}"
			arg-childExtras="{$extras}"
			arg-depth="{$depth}" />
	</xf:foreach>
</xf:macro>

<xf:macro name="category_list_entry" arg-category="!" arg-children="!" arg-childExtras="!" arg-extras="!" arg-depth="0">
	<xf:if is="$category.category_type == 'album'">
		<xf:macro name="category_list_entry_album_category"
			arg-category="{$category}"
			arg-extras="{$extras}"
			arg-children="{$children}"
			arg-childExtras="{$childExtras}"
			arg-depth="{$depth}" />
	<xf:elseif is="$category.canAddMedia()" />
		<xf:macro name="category_list_entry_category"
			arg-category="{$category}"
			arg-extras="{$extras}"
			arg-children="{$children}"
			arg-childExtras="{$childExtras}"
			arg-depth="{$depth}" />
	<xf:else />
		<xf:macro name="category_list_entry_no_adding"
			arg-category="{$category}"
			arg-extras="{$extras}"
			arg-children="{$children}"
			arg-childExtras="{$childExtras}"
			arg-depth="{$depth}" />
	</xf:if>
</xf:macro>

<xf:macro name="category_list_entry_category"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 0 ? ' u-depth' . $depth : '' }}">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					<a href="{{ link('media/categories/add', $category) }}" class="fauxBlockLink-blockLink">
						{$category.title}
					</a>
				</h2>
				<xf:if is="$category.description">
					<div class="contentRow-minor contentRow-minor--singleLine">
						{$category.description|raw}
					</div>
				</xf:if>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_albums') }}</dt>
					<dd>{$extras.album_count|number_short}</dd>
				</dl>
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_media_items') }}</dt>
					<dd>{$extras.media_count|number_short}</dd>
				</dl>
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_comments') }}</dt>
					<dd>{$extras.comment_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}" />
</xf:macro>

<xf:macro name="category_list_entry_album_category"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block-row block-row--clickable block-row--separated fauxBlockLink">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 0 ? ' u-depth' . $depth : '' }}">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					<a href="{{ link('media/categories/add', $category) }}" class="fauxBlockLink-blockLink">
						{$category.title}
					</a>
				</h2>
				<xf:if is="$category.description">
					<div class="contentRow-minor contentRow-minor--singleLine">
						{$category.description|raw}
					</div>
				</xf:if>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_albums') }}</dt>
					<dd>{$extras.album_count|number_short}</dd>
				</dl>
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_media_items') }}</dt>
					<dd>{$extras.media_count|number_short}</dd>
				</dl>
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_comments') }}</dt>
					<dd>{$extras.comment_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}" />
</xf:macro>

<xf:macro name="category_list_entry_no_adding"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-depth="0">

	<div class="block-row block-row--separated">
		<div class="contentRow contentRow--alignMiddle{{ $depth > 0 ? ' u-depth' . $depth : '' }} is-disabled">
			<div class="contentRow-main">
				<h2 class="contentRow-title">
					{$category.title}
				</h2>
				<div class="contentRow-minor contentRow-minor--singleLine">
					<xf:if is="$category.category_type">
						{{ phrase('xfmg_you_can_not_add_media_to_container_categories') }}
					<xf:else />
						{{ phrase('xfmg_you_do_not_have_permission_to_add_media_to_this_category') }}
					</xf:if>
				</div>
			</div>
			<div class="contentRow-suffix">
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_albums') }}</dt>
					<dd>{$extras.album_count|number_short}</dd>
				</dl>
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_media_items') }}</dt>
					<dd>{$extras.media_count|number_short}</dd>
				</dl>
				<dl class="pairs pairs--rows pairs--rows--centered">
					<dt>{{ phrase('xfmg_comments') }}</dt>
					<dd>{$extras.comment_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>

	<xf:macro name="category_list"
		arg-children="{$children}"
		arg-extras="{$childExtras}"
		arg-depth="{{ $depth + 1 }}" />
</xf:macro>]]></template>
  <template type="public" title="xfmg_album_add" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:title>{{ phrase('xfmg_add_media:') }} {$album.title}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:breadcrumb source="$album.getBreadcrumbs()" />

<xf:macro template="xfmg_media_add_macros" name="add_form"
	arg-album="{$album}"
	arg-canUpload="{$album.canUploadMedia()}"
	arg-canEmbed="{$album.canEmbedMedia()}"
	arg-attachmentData="{$attachmentData}" />]]></template>
  <template type="public" title="xfmg_album_approve" version_id="902000035" version_string="2.0.0 Beta 5"><![CDATA[<xf:title>{{ phrase('xfmg_approve_album') }}</xf:title>

<xf:breadcrumb source="$album.getBreadcrumbs()" />

<xf:form action="{{ link('media/albums/approve', $album) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_approve_the_following:') }}
				<strong><a href="{{ link('media/albums', $album) }}">{$album.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_album_change_privacy" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_change_privacy') }}</xf:title>

<xf:breadcrumb source="$album.getBreadcrumbs()" />

<xf:form action="{{ link('media/albums/change-privacy', $album) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="xfmg_album_edit" name="change_privacy" arg-album="{$album}" arg-addUsers="{$addUsers}" arg-viewUsers="{$viewUsers}" />

			<xf:if is="$album.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_album_create" version_id="902020370" version_string="2.2.3"><![CDATA[<xf:title>{{ phrase('xfmg_create_personal_album') }}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:macro template="xfmg_media_add_macros" name="add_form"
	arg-album="{$album}"
	arg-canUpload="{$album.canUploadMedia()}"
	arg-canEmbed="{$album.canEmbedMedia()}"
	arg-attachmentData="{$attachmentData}"
	arg-createPersonalAlbum="{{ true }}"
	arg-allowCreateAlbum="{{ true }}" />]]></template>
  <template type="public" title="xfmg_album_delete" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_delete_media') }}</xf:title>

<xf:breadcrumb source="$album.getBreadcrumbs()" />

<xf:form action="{{ link('media/albums/delete', $album) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$album.canDelete('hard')}" />

			<xf:if is="$album.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_album_edit" version_id="902010013" version_string="2.1.0 Preview 3"><![CDATA[<xf:title>{{ phrase('xfmg_edit_album') }}</xf:title>

<xf:breadcrumb source="$album.getBreadcrumbs()" />

<xf:form action="{{ link('media/albums/edit', $album) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$album.title_}"
				maxlength="{{ max_length($album, 'title') }}"
				label="{{ phrase('title') }}" />

			<xf:textarearow name="description" value="{$album.description_}" autosize="true"
				maxlength="{{ max_length($album, 'description') }}"
				label="{{ phrase('description') }}" />

			<xf:if is="$album.canChangePrivacy()">
				<xf:macro template="xfmg_album_edit" name="change_privacy"
					arg-album="{$album}"
					arg-addUsers="{$addUsers}"
					arg-viewUsers="{$viewUsers}" />
			</xf:if>

			<xf:if is="$album.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>

<xf:macro name="change_privacy" arg-album="!" arg-addUsers="{{ [] }}" arg-viewUsers="{{ [] }}" arg-values="{{ ['private', 'members', 'public', 'shared'] }}" arg-rows="{{ true }}">
	<xf:macro name="change_privacy_view" arg-album="{$album}" arg-viewUsers="{$viewUsers}" arg-values="{$values}" arg-row="{$rows}" />
	<xf:macro name="change_privacy_add" arg-album="{$album}" arg-addUsers="{$addUsers}" arg-values="{$values}" arg-row="{$rows}" />
</xf:macro>

<xf:macro name="change_privacy_view" arg-album="!" arg-valueOverride="" arg-viewUsers="{{ [] }}" arg-values="{{ ['private', 'members', 'public', 'shared'] }}" arg-row="{{ true }}">
	<xf:set var="$input">
		<xf:if is="$album.isInsert()">
			<xf:set var="$viewName">album[view_privacy]</xf:set>
			<xf:set var="$usersName">album[view_users]</xf:set>
		<xf:else />
			<xf:set var="$viewName">view_privacy</xf:set>
			<xf:set var="$usersName">view_users</xf:set>
		</xf:if>
		<xf:radio name="{$viewName}" value="{{ $valueOverride ?: $album.view_privacy }}">
			<xf:foreach loop="$values" value="$value">
				<xf:if is="$value != 'shared'">
					<xf:option value="{$value}">{$album.getPrivacyPhrase($value)}</xf:option>
				<xf:else />
					<xf:option value="{$value}" label="{$album.getPrivacyPhrase($value)}{$xf.language.label_separator}">
						<xf:dependent>
							<xf:tokeninput name="{$usersName}" value="{$viewUsers|join(', ')}" href="{{ link('members/find') }}" />
						</xf:dependent>
						<xf:html>
							<div class="formRow-explain">
								{{ phrase('xfmg_view_users_explain') }}
							</div>
						</xf:html>
					</xf:option>
				</xf:if>
			</xf:foreach>
		</xf:radio>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow label="{{ phrase('xfmg_can_view_media_items') }}">
			{$input|raw}
		</xf:formrow>
	<xf:else />
		{$input|raw}
	</xf:if>
</xf:macro>

<xf:macro name="change_privacy_add" arg-album="!" arg-addUsers="{{ [] }}" arg-values="{{ ['private', 'members', 'public', 'shared'] }}" arg-row="{{ true }}">
	<xf:set var="$input">
		<xf:if is="$album.isInsert()">
			<xf:set var="$addName">album[add_privacy]</xf:set>
			<xf:set var="$usersName">album[add_users]</xf:set>
		<xf:else />
			<xf:set var="$addName">add_privacy</xf:set>
			<xf:set var="$usersName">add_users</xf:set>
		</xf:if>
		<xf:radio name="{$addName}" value="{$album.add_privacy}">
			<xf:foreach loop="$values" value="$value">
				<xf:if is="$value != 'shared'">
					<xf:option value="{$value}">{$album.getPrivacyPhrase($value)}</xf:option>
				<xf:else />
					<xf:option value="{$value}"
						label="{$album.getPrivacyPhrase($value)}{$xf.language.label_separator}">

						<xf:dependent>
							<xf:tokeninput name="{$usersName}" value="{$addUsers|join(', ')}" href="{{ link('members/find') }}" />
						</xf:dependent>
						<xf:html>
							<div class="formRow-explain">
								{{ phrase('xfmg_add_users_explain') }}
							</div>
						</xf:html>
					</xf:option>
				</xf:if>
			</xf:foreach>
		</xf:radio>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow label="{{ phrase('xfmg_can_add_media_items') }}">
			{$input|raw}
		</xf:formrow>
	<xf:else />
		{$input|raw}
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xfmg_album_index" version_id="902010670" version_string="2.1.6"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_browse_albums') }}</xf:title>

<xf:macro template="xfmg_page_macros" name="xfmg_page_options" />

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:media/albums', null, {'page': $page}) }}" />

<xf:wrap template="xfmg_gallery_wrapper">
	<xf:set var="$selected" value="browseAlbums" />
</xf:wrap>

<xf:if is="$xf.visitor.canAddMedia()">
	<xf:pageaction>
		<xf:button href="{{ link('media/add') }}" class="button--cta" icon="add" data-xf-click="overlay">
			{{ phrase('xfmg_add_media...') }}
		</xf:button>
	</xf:pageaction>
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="xfmg_album" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/albums" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xfmg_album_list_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="media/albums"
			arg-ownerFilter="{$ownerFilter}" />

		<div class="block-body">
			<xf:if is="$albums is not empty">
				<xf:macro template="xfmg_album_list_macros" name="album_list" arg-albums="{$albums}" />
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xfmg_there_no_albums_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xfmg_no_albums_have_been_added_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/albums" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xfmg_album_list.less" version_id="902000035" version_string="2.0.0 Beta 5"><![CDATA[.itemList-itemTypeIcon
{
	&.itemList-itemTypeIcon--album
	{
		&::after
		{
			.m-faContent(@fa-var-folder-open);
		}
	}
}

{{ include('xfmg_item_list.less') }}]]></template>
  <template type="public" title="xfmg_album_list_macros" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:macro name="album_list" arg-albums="!" arg-isChooser="{{ false }}" arg-allowInlineMod="{{ true }}" arg-forceInlineMod="{{ false }}">
	<xf:css src="xfmg_album_list.less" />

	<div class="itemList">
		<xf:foreach loop="$albums" value="$album">
			<xf:macro name="album_list_item"
				arg-album="{$album}"
				arg-isChooser="{$isChooser}"
				arg-allowInlineMod="{$allowInlineMod}"
				arg-forceInlineMod="{$forceInlineMod}" />
		</xf:foreach>
		<xf:macro name="album_list_placeholders" />
	</div>
</xf:macro>

<xf:macro name="list_filter_bar" arg-filters="!" arg-baseLinkPath="!" arg-linkData="{{ null }}" arg-ownerFilter="{{ null }}">
	<xf:set var="$sortOrders" value="{{ {
		'create_date': phrase('xfmg_create_date'),
		'media_count': phrase('xfmg_media_count'),
		'comment_count': phrase('xfmg_comments'),
		'rating_weighted': phrase('rating'),
		'reaction_score': phrase('reaction_score'),
		'view_count': phrase('views')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.type">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('type', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('type:') }}</span>
								<xf:if is="$filters.type == 'image'">
									{{ phrase('xfmg_images') }}
									<xf:elseif is="$filters.type == 'audio'" />
									{{ phrase('xfmg_audio') }}
									<xf:elseif is="$filters.type == 'video'" />
									{{ phrase('xfmg_videos') }}
									<xf:elseif is="$filters.type == 'embed'" />
									{{ phrase('xfmg_embeds') }}
								</xf:if>
							</a></li>
						</xf:if>
						<xf:if is="$filters.owner_id AND $ownerFilter">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('owner_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xfmg_media_owner:') }}</span>
								{$ownerFilter.username}</a></li>
						</xf:if>
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $linkData, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="album_list_item" arg-album="!" arg-isChooser="{{ false }}" arg-allowInlineMod="{{ true }}" arg-forceInlineMod="{{ false }}">
	<div class="itemList-item js-inlineModContainer{{ $album.isIgnored() ? ' is-ignored' : '' }}" data-author="{{ $album.User.username ?: $album.username }}">
		<a href="{{ link('media/albums' . ($isChooser ? '/add' : ''), $album) }}">
			<xf:if is="$allowInlineMod">
				<xf:macro name="album_list_item_inline_mod"
					arg-album="{$album}"
					arg-forceInlineMod="{$forceInlineMod}" />
			</xf:if>
			<xf:macro name="album_list_item_type_icon" arg-album="{$album}" />
			<xf:macro name="album_list_item_thumb" arg-album="{$album}" />
		</a>
		<xf:macro name="album_list_item_overlay" arg-album="{$album}" arg-isChooser="{$isChooser}" />
	</div>
</xf:macro>

<xf:macro name="album_list_item_slider" arg-album="!">
	<div class="itemList-item itemList-item--slider">
		<a href="{{ link('media/albums', $album) }}">
			<xf:macro name="album_list_item_thumb" arg-album="{$album}" />
		</a>
	</div>
</xf:macro>

<xf:macro name="album_list_item_inline_mod" arg-album="!" arg-forceInlineMod="{{ false }}">
	<xf:if is="$album.canUseInlineModeration() OR $forceInlineMod">
		<xf:checkbox standalone="true">
			<xf:option value="{$album.album_id}"
				labelclass="itemList-itemOverlayTop"
				class="js-inlineModToggle"
				data-xf-init="{{ $album.canUseInlineModeration() ? 'tooltip' : '' }}"
				title="{{ $album.canUseInlineModeration() ? phrase('select_for_moderation') : '' }}" />
		</xf:checkbox>
	</xf:if>
</xf:macro>

<xf:macro name="album_list_item_type_icon" arg-album="!">
	<div class="itemList-itemTypeIcon itemList-itemTypeIcon--album"></div>
</xf:macro>

<xf:macro name="album_list_item_thumb" arg-album="!">
	{{ xfmg_thumbnail($album, 'xfmgThumbnail--fluid', true) }}
</xf:macro>

<xf:macro name="album_list_item_overlay" arg-album="!" arg-isChooser="{{ false }}">
	<div class="itemList-itemOverlay">
		<div class="itemInfoRow">
			<div class="itemInfoRow-main">
				<h3 class="itemInfoRow-title">
					<a href="{{ link('media/albums' . ($isChooser ? '/add' : ''), $album) }}">{$album.title}</a>
				</h3>
				<div class="itemInfoRow-status">
					<ul class="listInline listInline--bullet">
						<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_album_owner')|for_attr }}" /> <xf:username user="$album.User" defaultname="{$album.username}" /></li>
						<li><xf:fa icon="fa-clock" title="{{ phrase('xfmg_date_created')|for_attr }}" /> {{ date($album.create_date, 'absolute') }}</li>
					</ul>
				</div>
				<div class="itemInfoRow-status">
					<ul class="listInline listInline--bullet">
						<li><xf:fa icon="fa-th" title="{{ phrase('xfmg_items')|for_attr }}" /> {$album.media_count|number_short}</li>
						<li><xf:fa icon="fa-thumbs-up" title="{{ phrase('reaction_score')|for_attr }}" /> {$album.reaction_score|number_short}</li>
						<li><xf:fa icon="fa-comments" title="{{ phrase('xfmg_comments')|for_attr }}" /> {$album.comment_count|number_short}</li>
						<xf:if is="$album.album_state == 'deleted'">
							<li>{{ phrase('deleted') }}</li>
						</xf:if>
					</ul>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="album_list_placeholders" arg-start="1" arg-end="10">
	<xf:foreach loop="{{ range($start, $end) }}" value="$placeholder">
		<div class="itemList-item itemList-item--placeholder"></div>
	</xf:foreach>
</xf:macro>]]></template>
  <template type="public" title="xfmg_album_mark_viewed" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:title>{{ phrase('xfmg_mark_viewed') }}</xf:title>

<xf:form action="{{ link('media/albums/mark-viewed', $album, {'date': $date}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xfmg_you_sure_you_want_to_mark_this_album_viewed') }}
				<strong><a href="{{ link('media/albums', $album) }}">{$album.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xfmg_mark_viewed') }}" rowtype="simple" icon="markRead" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_album_move" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:title>{{ phrase('xfmg_move_album') }}</xf:title>

<xf:form action="{{ link('media/albums/move', $album) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow name="target_category_id" value="{$album.category_id}"
				label="{{ phrase('xfmg_destination_category') }}">

				<xf:option value="0">{{ phrase('(xfmg_no_category)') }}</xf:option>
				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}" disabled="{{ $treeEntry.record.category_type != 'album' ? 'disabled' : '' }}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>

				<xf:explain>{{ phrase('xfmg_must_be_album_category_or_select_no_category_to_make_albums') }}</xf:explain>
			</xf:selectrow>

			<xf:checkboxrow>
				<xf:option name="notify_watchers" value="1" selected="{{ true }}">{{ phrase('xfmg_notify_members_watching_destination_category') }}</xf:option>
			</xf:checkboxrow>

			<xf:if is="$album.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ true }}" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_album_user_index" version_id="902000038" version_string="2.0.0 Beta 8"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_albums_created_by_x', {'name': $user.username}) }}</xf:title>

<xf:wrap template="xfmg_gallery_wrapper">
	<xf:set var="$selected" value="{{ $xf.visitor.user_id == $user.user_id ? 'yourAlbums' : '' }}" />
</xf:wrap>

<xf:if is="$xf.visitor.canAddMedia()">
	<xf:pageaction>
		<xf:button href="{{ link('media/add') }}" class="button--cta" icon="add" data-xf-click="overlay">
			{{ phrase('xfmg_add_media...') }}
		</xf:button>
	</xf:pageaction>
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="xfmg_album" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/albums/users" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button"
								arg-variant="inlineModButton--withLabel"
								arg-label="{{ phrase('selected') }}"
								arg-tooltip="{{ false }}" />
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>

		</xf:if>
	</xf:trim></div>
	<div class="block-container">
		<xf:macro template="xfmg_album_list_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="media/albums/users"
			arg-linkData="{$user}" />

		<div class="block-body">
			<xf:if is="$albums is not empty">
				<xf:macro template="xfmg_album_list_macros" name="album_list"
					arg-albums="{$albums}"
					arg-forceInlineMod="{$canInlineMod}" />
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xfmg_x_has_not_added_any_albums_which_match_your_filters', {'name': $user.username}) }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xfmg_x_has_not_added_any_albums_yet', {'name': $user.username}) }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/albums/users" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xfmg_album_view" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:title page="{$page}">{$album.title}</xf:title>
<xf:h1 hidden="true" />

<xf:css src="xfmg_album_view.less" />

<xf:macro template="xfmg_page_macros" name="xfmg_page_options" arg-album="{$album}" arg-category="{$album.Category}" />

<xf:set var="$descSnippet" value="{{ snippet($mediaItem.description, 250) }}" />

<xf:macro template="metadata_macros" name="metadata"
	arg-description="{$descSnippet}"
	arg-shareUrl="{{ link('canonical:media/albums', $album) }}"
	arg-imageUrl="{$album.getThumbnailUrl(true)}"
	arg-canonicalUrl="{{ link('canonical:media/albums', $album, {'page': $page}) }}" />

<xf:page option="ldJsonHtml">
<script type="application/ld+json">
{$album.structured_data|json(true)|raw}
</script>
</xf:page>

<xf:macro template="xfmg_media_list_macros" name="media_create_message"
	arg-transcoding="{$transcoding}"
	arg-pendingApproval="{$pendingApproval}" />

<xf:breadcrumb source="$album.getBreadcrumbs(false)" />

<xf:if is="$album.canAddMedia()">
	<xf:pageaction>
		<xf:button href="{{ link('media/albums/add', $album) }}" class="button--cta" icon="add">
			{{ phrase('xfmg_add_media') }}
		</xf:button>
	</xf:pageaction>
</xf:if>

<xf:if contentcheck="true">
	<div class="block">
		<div class="block-outer">
			<dl class="blockStatus">
				<dt>{{ phrase('status') }}</dt>
				<xf:contentcheck>
					<xf:if is="$album.album_state == 'deleted'">
						<dd class="blockStatus-message blockStatus-message--deleted">
							<xf:macro template="deletion_macros" name="notice" arg-log="{$album.DeletionLog}" />
						</dd>
					<xf:elseif is="$album.album_state == 'moderated'" />
						<dd class="blockStatus-message blockStatus-message--moderated">
							{{ phrase('awaiting_approval_before_being_displayed_publicly') }}
						</dd>
					</xf:if>
					<xf:if is="$album.warning_message">
						<dd class="blockStatus-message blockStatus-message--warning">
							{$album.warning_message}
						</dd>
					</xf:if>
					<xf:if is="$album.isIgnored()">
						<div class="blockStatus-message blockStatus-message--ignored">
							{{ phrase('you_are_ignoring_content_by_this_member') }}
						</div>
					</xf:if>
				</xf:contentcheck>
			</dl>
		</div>
	</div>
</xf:if>

<xf:if is="$canInlineModMediaItems">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineModMediaItems ? 'inline-mod' : '' }}" data-type="xfmg_media" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/albums" data="{$album}" params="{{ {'comment_page': ($commentPage ?: null)} + $filters }}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:if contentcheck="true">
						<div class="buttonGroup">
							<xf:contentcheck>
								<xf:if is="$album.canRate()">
									<xf:button href="{{ link('media/album-ratings/rate', $album) }}" overlay="true">
										{{ phrase('leave_rating') }}
									</xf:button>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="buttonGroup">
							<xf:contentcheck>
								<xf:if is="$canInlineModMediaItems">
									<xf:macro template="inline_mod_macros" name="button" />
								</xf:if>
								<xf:if is="$album.canUndelete() AND $album.album_state == 'deleted'">
									<xf:button href="{{ link('media/albums/undelete', $album) }}" class="button--link" overlay="true">
										{{ phrase('undelete') }}
									</xf:button>
								</xf:if>
								<xf:if is="$album.canApproveUnapprove() AND $album.album_state == 'moderated'">
									<xf:button href="{{ link('media/albums/approve', $album) }}" class="button--link" overlay="true">
										{{ phrase('approve') }}
									</xf:button>
								</xf:if>
								<xf:if is="$xf.visitor.user_id">
									<xf:button href="{{ link('media/albums/mark-viewed', $album, {'date': $xf.time}) }}"
										class="button--link" overlay="true">

										{{ phrase('xfmg_mark_viewed') }}
									</xf:button>
								</xf:if>

								<xf:if is="$album.canWatch()">
									<xf:button href="{{ link('media/albums/watch', $album) }}" class="button--link"
										data-xf-click="switch-overlay"
										data-sk-watch="{{ phrase('watch') }}"
										data-sk-unwatch="{{ phrase('unwatch') }}">

										<xf:if is="{$album.Watch.{$xf.visitor.user_id}}">
											{{ phrase('unwatch') }}
											<xf:else />
											{{ phrase('watch') }}
										</xf:if>
									</xf:button>
								</xf:if>

								<xf:macro template="bookmark_macros" name="button"
									arg-content="{$album}"
									arg-confirmUrl="{{ link('media/albums/bookmark', $album) }}" />

								<xf:if contentcheck="true">
									<div class="buttonGroup-buttonWrapper">
										<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options') }}">&#8226;&#8226;&#8226;</xf:button>
										<div class="menu" data-menu="menu" aria-hidden="true">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<xf:contentcheck>
													<!--[XF:album_tools_menu:top]-->
													<xf:if is="$album.canEdit()">
														<a href="{{ link('media/albums/edit', $album) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_edit_album') }}</a>
													</xf:if>
													<xf:if is="$album.canMove()">
														<a href="{{ link('media/albums/move', $album) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_move_album') }}</a>
													</xf:if>
													<xf:if is="$album.canDelete('soft')">
														<a href="{{ link('media/albums/delete', $album) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_delete_album') }}</a>
													</xf:if>
													<xf:if is="$album.canViewModeratorLogs()">
														<a href="{{ link('media/albums/moderator-actions', $album) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('moderator_actions') }}</a>
													</xf:if>
													<!--[XF:album_tools_menu:before_footer]-->
													<xf:if is="$album.canUseInlineModeration()">
														<div class="menu-footer"
															 data-xf-init="inline-mod"
															 data-type="xfmg_album"
															 data-href="{{ link('inline-mod') }}"
															 data-toggle=".js-albumInlineModToggle">
															<xf:checkbox>
																<xf:option class="js-albumInlineModToggle" value="{$album.album_id}">{{ phrase('select_for_moderation') }}</xf:option>
															</xf:checkbox>
														</div>
													</xf:if>
													<!--[XF:album_tools_menu:bottom]-->
												</xf:contentcheck>
											</div>
										</div>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</xf:if>

	</xf:trim></div>
	<div class="block-container">
		<xf:macro template="xfmg_album_list_macros" name="list_filter_bar"
			arg-filters="{{ {'comment_page': ($commentPage ?: null)} + $filters }}"
			arg-baseLinkPath="media/albums"
			arg-linkData="{$album}"
			arg-ownerFilter="{$ownerFilter}" />

		<div class="block-body">
			<xf:if is="$mediaItems is not empty">
				<xf:macro template="xfmg_media_list_macros" name="media_list"
					arg-mediaItems="{$mediaItems}"
					arg-prevPage="{$prevPage}"
					arg-nextPage="{$nextPage}"
					arg-setupLightbox="{$xf.options.xfmgLightboxNavigation}" />
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xfmg_no_media_has_been_added_to_this_album_which_matches_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xfmg_no_media_has_been_added_to_this_album_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/albums" data="{$album}" params="{{ {'comment_page': ($commentPage ?: null)} + $filters }}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<div class="block">
	<div class="block-container">
		<div class="block-body block-row xfmgInfoBlock">
			<div class="xfmgInfoBlock-title">
				<div class="contentRow">
						<span class="contentRow-figure">
							<xf:avatar user="$album.User" size="s" defaultname="{$album.username}" />
						</span>
					<div class="contentRow-main">
						<h1 class="contentRow-title p-title-value">
							<xf:h1 />
						</h1>
						<div class="contentRow-lesser p-description">
							<ul class="listInline listInline--bullet">
								<li><xf:fa icon="fa-th" title="{{ phrase('xfmg_items')|for_attr }}" /> {$album.media_count|number_short}</li>
								<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_album_owner')|for_attr }}" /> <xf:username user="{$album.User}" defaultname="{$album.username}" class="u-concealed" /></li>
								<li><xf:fa icon="fa-clock" title="{{ phrase('xfmg_date_created')|for_attr }}" /> <xf:date time="{$album.create_date}" /></li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<xf:if is="$album.description">
				<div class="xfmgInfoBlock-description">
					<div class="bbCodeBlock bbCodeBlock--expandable js-expandWatch">
						<div class="bbCodeBlock-content">
							<div class="bbCodeBlock-expandContent js-expandContent">
								{{ structured_text($album.description) }}
							</div>
							<div class="bbCodeBlock-expandLink js-expandLink"><a role="button" tabindex="0">{{ phrase('click_to_expand') }}</a></div>
						</div>
					</div>
				</div>
			</xf:if>

			<xf:if contentcheck="true">
				<div class="actionBar">
					<xf:contentcheck>
						<xf:if contentcheck="true">
							<div class="actionBar-set actionBar-set--external">
								<xf:contentcheck>
									<xf:react content="{$album}" link="media/albums/react" list="< .block | .js-reactionsList" />
								</xf:contentcheck>
							</div>
						</xf:if>

						<xf:if contentcheck="true">
							<div class="actionBar-set actionBar-set--internal">
								<xf:contentcheck>
									<xf:if is="$album.canReport()">
										<a href="{{ link('media/albums/report', $album) }}"
											class="actionBar-action actionBar-action--report"
											data-xf-click="overlay">{{ phrase('report_verb') }}</a>
									</xf:if>

									<xf:set var="$hasActionBarMenu" value="{{ false }}" />
									<xf:if is="$album.canEdit()">
										<a href="{{ link('media/albums/edit', $album) }}"
											class="actionBar-action actionBar-action--edit actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('edit') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$album.canDelete()">
										<a href="{{ link('media/albums/delete', $album) }}"
											class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('delete') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$album.canCleanSpam()">
										<a href="{{ link('spam-cleaner', $album) }}"
											class="actionBar-action actionBar-action--spam actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('spam') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$xf.visitor.canViewIps() AND $album.ip_id">
										<a href="{{ link('media/albums/ip', $album) }}"
											class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('ip') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$album.canWarn()">
										<a href="{{ link('media/albums/warn', $album) }}"
											class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									<xf:elseif is="$album.warning_id AND $xf.visitor.canViewWarnings()" />
										<a href="{{ link('warnings', {'warning_id': $album.warning_id}) }}"
											class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('view_warning') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>

									<xf:if is="$hasActionBarMenu">
										<a class="actionBar-action actionBar-action--menuTrigger"
											data-xf-click="menu"
											title="{{ phrase('more_options')|for_attr }}"
											role="button"
											tabindex="0"
											aria-expanded="false"
											aria-haspopup="true">&#8226;&#8226;&#8226;</a>

										<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<div class="js-menuBuilderTarget"></div>
											</div>
										</div>
									</xf:if>
								</xf:contentcheck>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</xf:if>

			<div class="reactionsBar js-reactionsList {{ $album.reactions ? 'is-active' : '' }}">
				<xf:reactions content="{$album}" link="media/albums/reactions" />
			</div>
		</div>
	</div>
</div>

<xf:if is="$album.canViewComments()">
	<div class="columnContainer">
		<div class="columnContainer-comments">
			<xf:macro template="xfmg_comment_macros" name="comment_list"
				arg-comments="{$comments}"
				arg-content="{$album}"
				arg-linkPrefix="media/album-comments"
				arg-link="media/albums"
				arg-linkParams="{{ {'page': $page} + $filters }}"
				arg-page="{$commentPage}"
				arg-perPage="{$commentsPerPage}"
				arg-totalItems="{$totalComments}"
				arg-pageParam="comment_page"
				arg-canInlineMod="{$canInlineModComments}" />
		</div>

		<div class="columnContainer-sidebar">
			<xf:macro name="info_sidebar" arg-album="{$album}" />
			<xf:macro name="privacy_sidebar" arg-album="{$album}" arg-addUsers="{$addUsers}" arg-viewUsers="{$viewUsers}" />
			<xf:macro name="share_sidebar" arg-album="{$album}" />
		</div>
	</div>
<xf:else />
	<xf:sidebar key="infoSidebar">
		<xf:macro name="info_sidebar" arg-album="{$album}" />
	</xf:sidebar>
	<xf:sidebar key="privacySidebar">
		<xf:macro name="privacy_sidebar" arg-album="{$album}" arg-addUsers="{$addUsers}" arg-viewUsers="{$viewUsers}" />
	</xf:sidebar>
	<xf:sidebar key="shareSidebar">
		<xf:macro name="share_sidebar" arg-album="{$album}" />
	</xf:sidebar>
</xf:if>

<xf:macro name="info_sidebar" arg-album="{$album}">
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('xfmg_album_information') }}</h3>
			<div class="block-body block-row">
				<xf:if is="$album.Category">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_category') }}</dt>
						<dd><a href="{{ link('media/categories', $album.Category) }}">{$album.Category.title}</a></dd>
					</dl>
				</xf:if>

				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_album_owner') }}</dt>
					<dd><xf:username user="{$album.User}" defaultname="{$album.username}" /></dd>
				</dl>

				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_date_created') }}</dt>
					<dd><xf:date time="{$album.create_date}" /></dd>
				</dl>

				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_item_count') }}</dt>
					<dd>{$album.media_count|number}</dd>
				</dl>

				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_view_count') }}</dt>
					<dd>{$album.view_count|number}</dd>
				</dl>

				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_comment_count') }}</dt>
					<dd>{$album.comment_count|number}</dd>
				</dl>

				<dl class="pairs pairs--justified">
					<dt>{{ phrase('rating') }}</dt>
					<dd>
						<xf:macro template="rating_macros" name="stars_text"
							arg-rating="{$album.rating_avg}"
							arg-count="{$album.rating_count}"
							arg-rowClass="ratingStarsRow--textBlock" />
					</dd>
				</dl>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="privacy_sidebar" arg-album="!" arg-addUsers="!" arg-viewUsers="!">
	<xf:if is="$album.User">
		<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('xfmg_album_privacy') }}</h3>
			<div class="block-body">
				<div class="block-row">
					<div class="contentRow">
						<div class="contentRow-figure">
							<xf:avatar user="$album.User" size="s" />
						</div>
						<div class="contentRow-main">
							<h3 class="contentRow-title"><xf:username user="$album.User" rich="true" /></h3>

							<div class="contentRow-muted">
								<dl class="pairs pairs--justified fauxBlockLink">
									<dt>{{ phrase('xfmg_media_items') }}</dt>
									<dd>
										<a href="{{ link('media/users', $album.User) }}" class="fauxBlockLink-blockLink u-concealed">
											{$album.User.xfmg_media_count|number}
										</a>
									</dd>
								</dl>
								<dl class="pairs pairs--justified fauxBlockLink">
									<dt>{{ phrase('xfmg_albums') }}</dt>
									<dd>
										<a href="{{ link('media/albums/users', $album.User) }}" class="fauxBlockLink-blockLink u-concealed">
											{$album.User.xfmg_album_count|number}
										</a>
									</dd>
								</dl>
							</div>
						</div>
					</div>
				</div>
				<div class="block-row">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_can_view_media_items') }}</dt>
						<dd>{$album.getPrivacyPhrase($album.view_privacy)}</dd>
					</dl>
					<xf:if is="$album.view_privacy == 'shared' AND $viewUsers">
						<ul class="listHeap">
							<xf:foreach loop="$viewUsers" value="$user">
								<li><xf:avatar user="$user" size="xs" /></li>
							</xf:foreach>
						</ul>
					</xf:if>
				</div>
				<div class="block-row">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_can_add_media_items') }}</dt>
						<dd>{$album.getPrivacyPhrase($album.add_privacy)}</dd>
					</dl>
					<xf:if is="$album.add_privacy == 'shared' AND $addUsers">
						<ul class="listHeap">
							<xf:foreach loop="$addUsers" value="$user">
								<li><xf:avatar user="$user" size="xs" /></li>
							</xf:foreach>
						</ul>
					</xf:if>
				</div>
			</div>
			<xf:if is="$album.canChangePrivacy()">
				<div class="block-footer">
					<span class="block-footer-controls">
						<xf:button href="{{ link('media/albums/change-privacy', $album) }}" class="button--small button--link" overlay="true">{{ phrase('xfmg_change_privacy') }}</xf:button>
					</span>
				</div>
			</xf:if>
		</div>
	</div>
	</xf:if>
</xf:macro>

<xf:macro name="share_sidebar" arg-album="!">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<xf:if contentcheck="true">
						<h3 class="block-minorHeader">{{ phrase('xfmg_share_this_album') }}</h3>
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="buttons"
									arg-iconic="{{ true }}" />
							</xf:contentcheck>
						</div>
					</xf:if>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:if is="$album.thumbnail_date">
									<xf:macro template="share_page_macros" name="share_clipboard_input"
										arg-label="{{ phrase('xfmg_copy_url_bb_code_with_thumbnail') }}"
										arg-text="[URL=&quot;{{ link('canonical:media/albums', $album) }}&quot;][IMG]{$album.getThumbnailUrl(true)}[/IMG][/URL]" />
								</xf:if>

								<xf:macro template="share_page_macros" name="share_clipboard_input"
									arg-label="{{ phrase('xfmg_copy_gallery_bb_code') }}"
									arg-text="[GALLERY=album, {$album.album_id}][/GALLERY]" />
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xfmg_album_view.less" version_id="902000032" version_string="2.0.0 Beta 2"><![CDATA[{{ include('xfmg_item_view.less') }}]]></template>
  <template type="public" title="xfmg_album_watch" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('xfmg_unwatch_album') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xfmg_watch_album') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$album.getBreadcrumbs()" />

<xf:form action="{{ link('media/albums/watch', $album) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('xfmg_you_sure_you_want_to_unwatch_this_album') }}
				</xf:inforow>

				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="media_comment"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="media_comment">{{ phrase('xfmg_new_media_items_and_comments') }}</xf:option>
					<xf:option value="media">{{ phrase('xfmg_new_media_items_only') }}</xf:option>
					<xf:option value="comment">{{ phrase('xfmg_new_comments_only') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_attachment_mirror_macros" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:macro name="lightbox_caption" arg-attachment="!"><xf:trim>
<xf:if is="$attachment.XfmgMirrorMedia AND $attachment.XfmgMirrorMedia.canView()">
	&nbsp;&middot; <a href="{{ link('media', $attachment.XfmgMirrorMedia) }}"><xf:fa icon="fa-camera" /> {{ phrase('xfmg_view_media_item') }}</a>
</xf:if>
</xf:trim></xf:macro>

<xf:macro name="lightbox_sidebar_href" arg-attachment="!"><xf:trim>
<xf:if is="$attachment.XfmgMirrorMedia AND $attachment.XfmgMirrorMedia.canView()">
	{{ link('media', $attachment.XfmgMirrorMedia, {'lightbox': 1}) }}
</xf:if>
</xf:trim></xf:macro>]]></template>
  <template type="public" title="xfmg_bookmark_custom_icon" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<div class="contentRow-figure contentRow-figure--fixedBookmarkIcon">
	{{ xfmg_thumbnail($content, 'xfmgThumbnail--fluid', true) }}
</div>]]></template>
  <template type="public" title="xfmg_category_add" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:if is="$album">
	<xf:title>{{ phrase('xfmg_create_album:') }} {$category.title}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xfmg_add_media:') }} {$category.title}</xf:title>
</xf:if>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:breadcrumb source="$category.getBreadcrumbs()" />

<xf:macro template="xfmg_media_add_macros" name="add_form"
	arg-category="{$category}"
	arg-album="{$album}"
	arg-canUpload="{$category.canUploadMedia()}"
	arg-canEmbed="{$category.canEmbedMedia()}"
	arg-attachmentData="{$attachmentData}"
	arg-allowCreateAlbum="{{ $album ? true : false }}" />]]></template>
  <template type="public" title="xfmg_category_container" version_id="902020170" version_string="2.2.1"><![CDATA[<xf:title page="{$page}">{$category.title}</xf:title>
<xf:description>{$category.description|raw}</xf:description>

<xf:breadcrumb source="$category.getBreadcrumbs(false)" />

<xf:wrap template="xfmg_gallery_wrapper">
	<xf:set var="$selected" value="{$category.category_id}" />
</xf:wrap>

<xf:if is="$xf.visitor.canAddMedia()">
	<xf:pageaction>
		<xf:button href="{{ link('media/add') }}" class="button--cta" icon="add" data-xf-click="overlay">
			{{ phrase('xfmg_add_media...') }}
		</xf:button>
	</xf:pageaction>
</xf:if>

<xf:if is="$descendentTree AND $descendentTree.count() AND property('xfmgCategoryList') != 'never'">
	<xf:if is="$mediaItems is not empty OR $albums is not empty">
		<div class="blockMessage blockMessage--small blockMessage--highlight">{{ phrase('xfmg_items_displayed_on_page_displayed_from_child_categories') }}</div>
	</xf:if>

	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:macro template="xfmg_category_list_macros" name="category_list"
					arg-children="{$descendentTree}" arg-extras="{$descendentExtras}" />
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$canInlineModAlbums OR $canInlineModMediaItems">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:if is="$viewType == 'media'">
	<div class="block" data-xf-init="{{ $canInlineModMediaItems ? 'inline-mod' : '' }}" data-type="xfmg_media" data-href="{{ link('inline-mod') }}">
		<div class="block-outer"><xf:trim>

			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="media/categories" data="{$category}" params="{$filters}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineModMediaItems">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
							<xf:if is="$xf.visitor.user_id">
								<xf:button href="{{ link('media/categories/mark-viewed', $category, {'date': $xf.time}) }}"
									class="button--link" overlay="true">
									{{ phrase('xfmg_mark_viewed') }}
								</xf:button>
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>

		<div class="block-container">
			<xf:macro template="xfmg_media_list_macros" name="list_filter_bar"
				arg-filters="{$filters}"
				arg-baseLinkPath="media/categories"
				arg-linkData="{$category}"
				arg-ownerFilter="{$ownerFilter}" />

			<div class="block-body">
				<xf:if is="$mediaItems is not empty">
					<xf:macro template="xfmg_media_list_macros" name="media_list"
						arg-mediaItems="{$mediaItems}"
						arg-prevPage="{$prevPage}"
						arg-nextPage="{$nextPage}"
						arg-setupLightbox="{$xf.options.xfmgLightboxNavigation}" />
					<xf:if is="$showDateLimitDisabler">
						<xf:macro name="xfmg_category_view::date_limit_disabler" arg-category="{$category}" arg-page="{$page}" arg-filters="{$filters}" />
					</xf:if>
				<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('xfmg_there_is_no_media_or_albums_matching_your_filters') }}</div>
					<xf:if is="$showDateLimitDisabler">
						<xf:macro name="xfmg_category_view::date_limit_disabler" arg-category="{$category}" arg-page="{$page}" arg-filters="{$filters}" />
					</xf:if>
				<xf:else />
					<xf:if is="$showDateLimitDisabler">
						<div class="block-row">{{ phrase('xfmg_there_no_media_items_to_display') }}</div>
						<xf:macro name="xfmg_category_view::date_limit_disabler" arg-category="{$category}" arg-page="{$page}" arg-filters="{$filters}" />
					<xf:else />
						<div class="block-row">{{ phrase('xfmg_no_media_or_albums_have_been_added_to_this_category_yet') }}</div>
					</xf:if>
				</xf:if>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}" link="media/categories" data="{$category}" wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
<xf:elseif is="$viewType == 'album'" />
	<div class="block" data-xf-init="{{ $canInlineModAlbums ? 'inline-mod' : '' }}" data-type="xfmg_album" data-href="{{ link('inline-mod') }}">
		<div class="block-outer"><xf:trim>

			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="media/categories" data="{$category}" params="{$filters}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineModAlbums">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>

		<div class="block-container">
			<xf:macro template="xfmg_album_list_macros" name="list_filter_bar"
				arg-filters="{$filters}"
				arg-baseLinkPath="media/categories"
				arg-linkData="{$category}"
				arg-ownerFilter="{$ownerFilter}" />

			<div class="block-body">
				<xf:if is="$albums is not empty">
					<xf:macro template="xfmg_album_list_macros" name="album_list" arg-albums="{$albums}" />
				<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('xfmg_there_is_no_media_or_albums_matching_your_filters') }}</div>
				<xf:else />
					<div class="block-row">{{ phrase('xfmg_no_media_or_albums_have_been_added_to_this_category_yet') }}</div>
				</xf:if>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}" link="media/categories" data="{$category}" wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_category_list_macros" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:macro name="simple_category_list"
	arg-selected="0"
	arg-pathToSelected="{{ [] }}"
	arg-children="!"
	arg-extras="!"
	arg-isActive="{{ false }}"
>
	<ol class="categoryList toggleTarget{{ $isActive ? ' is-active' : '' }}">
		<xf:foreach loop="$children" key="$id" value="$child">
			<xf:macro name="simple_category_list_item"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-category="{$child.record}"
				arg-extras="{$extras.{$id}}"
				arg-children="{$child}"
				arg-childExtras="{$extras}"
			/>
		</xf:foreach>
	</ol>
</xf:macro>

<xf:macro name="simple_category_list_item"
	arg-selected="!"
	arg-pathToSelected="{{ [] }}"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
>
	<xf:set var="$isSelected" value="{{ $category.category_id == $selected }}" />
	<xf:set var="$hasPathToSelected" value="{$pathToSelected.{$category.category_id}}" />
	<xf:set var="$isActive" value="{{ $isSelected OR $hasPathToSelected AND $children is not empty }}" />

	<li class="categoryList-item">
		<div class="categoryList-itemRow">
			<xf:if is="$children is not empty">
				<a class="categoryList-toggler{{ $isActive ? ' is-active' : '' }}"
					data-xf-click="toggle" data-target="< :up :next"
					role="button" tabindex="0" aria-label="{{ phrase('toggle_expanded')|for_attr }}"
				></a>
			<xf:else />
				<span class="categoryList-togglerSpacer"></span>
			</xf:if>
			<a href="{{ link('media/categories', $category) }}" class="categoryList-link{{ $isSelected ? ' is-selected' : '' }}">
				{$category.title}
			</a>
			<span class="categoryList-label">
				<span class="label label--subtle label--smallest">{$extras.media_count|number_short}</span>
			</span>
		</div>
		<xf:if is="$children is not empty">
			<xf:macro name="simple_category_list"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-children="{$children}"
				arg-extras="{$childExtras}"
				arg-isActive="{$isActive}"
			/>
		</xf:if>
	</li>
</xf:macro>

<xf:macro name="simple_list_block" arg-categoryTree="!" arg-categoryExtras="!" arg-selected="{{ 0 }}">
	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('categories') }}</h3>
			<div class="block-body">
				<xf:if is="$categoryTree.count()">
					<xf:macro name="simple_category_list"
						arg-children="{$categoryTree}"
						arg-extras="{$categoryExtras}"
						arg-isActive="{{ true }}"
						arg-selected="{$selected}"
						arg-pathToSelected="{{ $selected ? $categoryTree.getPathTo($selected) : [] }}" />
				<xf:else />
					<div class="block-row">{{ phrase('n_a') }}</div>
				</xf:if>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="category_list" arg-children="!" arg-extras="!" arg-chooseName="" arg-bonusInfo="">
	<xf:css src="node_list.less" />

	<xf:foreach loop="$children" key="$id" value="$child">
		<xf:macro name="category"
			arg-category="{$child.record}" arg-extras="{$extras.{$id}}"
			arg-children="{$child.children}" arg-childExtras="{$extras}"
			arg-chooseName="{$chooseName}" arg-bonusInfo="{$bonusInfo}" />
	</xf:foreach>
</xf:macro>

<xf:macro name="category"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!"
	arg-chooseName=""
	arg-bonusInfo="">
	
	<div class="node node--depth2 node--galleryCategory node--galleryCategory{$category.category_id}">
		<div class="node-body">
			<div class="node-main js-nodeMain">
				<xf:if is="$chooseName">
					<xf:checkbox standalone="true">
						<xf:option labelclass="u-pullRight" class="js-chooseItem" name="{$chooseName}[]" value="{$category.category_id}" />
					</xf:checkbox>
				</xf:if>

				<xf:set var="$descriptionDisplay" value="{{ property('nodeListDescriptionDisplay') }}" />
				<h3 class="node-title">
					<a href="{{ link('media/categories', $category) }}" data-xf-init="{{ $descriptionDisplay == 'tooltip' ? 'element-tooltip' : '' }}" data-shortcut="node-description">{$category.title}</a>
				</h3>
				<xf:if is="$descriptionDisplay != 'none' AND $category.description">
					<div class="node-description {{ $descriptionDisplay == 'tooltip' ? 'node-description--tooltip js-nodeDescTooltip' : '' }}">{$category.description|raw}</div>
				</xf:if>

				<div class="node-meta">
					<div class="node-statsMeta">
						<xf:if is="$extras.album_count">
							<dl class="pairs pairs--inline">
								<dt>{{ phrase('xfmg_albums') }}</dt>
								<dd>{$extras.album_count|number_short}</dd>
							</dl>
						</xf:if>
						<dl class="pairs pairs--inline">
							<dt>{{ phrase('xfmg_media_items') }}</dt>
							<dd>{$extras.media_count|number_short}</dd>
						</dl>
						<dl class="pairs pairs--inline">
							<dt>{{ phrase('xfmg_comments') }}</dt>
							<dd>{$extras.comment_count|number_short}</dd>
						</dl>
					</div>
				</div>

				<xf:if is="$bonusInfo is not empty">
					<div class="node-bonus">{$bonusInfo}</div>
				</xf:if>
			</div>

			<div class="node-stats node-stats--triple">
				<xf:if is="$extras.album_count">
					<dl class="pairs pairs--rows">
						<dt>{{ phrase('xfmg_albums') }}</dt>
						<dd>{$extras.album_count|number_short}</dd>
					</dl>
				<xf:else />
					<dl class="pairs pairs--rows">
						<dt>&nbsp;</dt>
						<dd>&nbsp;</dd>
					</dl>
				</xf:if>
				<dl class="pairs pairs--rows">
					<dt>{{ phrase('xfmg_media_items') }}</dt>
					<dd>{$extras.media_count|number_short}</dd>
				</dl>
				<dl class="pairs pairs--rows">
					<dt>{{ phrase('xfmg_comments') }}</dt>
					<dd>{$extras.comment_count|number_short}</dd>
				</dl>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xfmg_category_mark_viewed" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:title>{{ phrase('xfmg_mark_media_viewed') }}</xf:title>

<xf:form action="{{ link('media/categories/mark-viewed', $category, {'date': $date}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xfmg_you_sure_you_want_to_mark_this_category_viewed') }}
				<strong><a href="{{ link('media/categories', $category) }}">{$category.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xfmg_mark_media_viewed') }}" rowtype="simple" icon="confirm" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_category_view" version_id="902020170" version_string="2.2.1"><![CDATA[<xf:title page="{$page}">{$category.title}</xf:title>
<xf:description>{$category.description|raw}</xf:description>

<xf:macro template="xfmg_media_list_macros" name="media_create_message"
	arg-transcoding="{$transcoding}"
	arg-pendingApproval="{$pendingApproval}" />

<xf:macro template="xfmg_page_macros" name="xfmg_page_options" arg-category="{$category}" />

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:media/categories', $category, {'page': $page}) }}" />

<xf:breadcrumb source="$category.getBreadcrumbs(false)" />

<xf:wrap template="xfmg_gallery_wrapper">
	<xf:set var="$selected" value="{$category.category_id}" />
</xf:wrap>

<xf:if is="$category.canAddMedia()">
	<xf:pageaction>
		<xf:button href="{{ link('media/categories/add', $category) }}" class="button--cta" icon="add">
			{{ $category.category_type == 'album' ? phrase('xfmg_create_album') : phrase('xfmg_add_media') }}
		</xf:button>
	</xf:pageaction>
</xf:if>

<xf:if is="$descendentTree AND $descendentTree.count() AND property('xfmgCategoryList') == 'always'">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:macro template="xfmg_category_list_macros" name="category_list"
					arg-children="{$descendentTree}" arg-extras="{$descendentExtras}" />
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$canInlineModAlbums OR $canInlineModMediaItems">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<xf:if is="$category.category_type == 'media'">
	<div class="block" data-xf-init="{{ $canInlineModMediaItems ? 'inline-mod' : '' }}" data-type="xfmg_media" data-href="{{ link('inline-mod') }}">
		<div class="block-outer"><xf:trim>

			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="media/categories" data="{$category}" params="{$filters}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineModMediaItems">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
							<xf:if is="$xf.visitor.user_id">
								<xf:button href="{{ link('media/categories/mark-viewed', $category, {'date': $xf.time}) }}"
									class="button--link" overlay="true">
									{{ phrase('xfmg_mark_viewed') }}
								</xf:button>
							</xf:if>
							<xf:if is="$category.canWatch()">
								<xf:button href="{{ link('media/categories/watch', $category) }}" class="button--link"
									data-xf-click="switch-overlay"
									data-sk-watch="{{ phrase('watch') }}"
									data-sk-unwatch="{{ phrase('unwatch') }}">
									<xf:if is="{$category.Watch.{$xf.visitor.user_id}}">{{ phrase('unwatch') }}<xf:else />{{ phrase('watch') }}</xf:if>
								</xf:button>
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>

		<div class="block-container">
			<xf:macro template="xfmg_media_list_macros" name="list_filter_bar"
				arg-filters="{$filters}"
				arg-baseLinkPath="media/categories"
				arg-linkData="{$category}"
				arg-ownerFilter="{$ownerFilter}" />

			<div class="block-body">
				<xf:if is="$mediaItems is not empty">
					<xf:macro template="xfmg_media_list_macros" name="media_list"
						arg-mediaItems="{$mediaItems}"
						arg-prevPage="{$prevPage}"
						arg-nextPage="{$nextPage}"
						arg-setupLightbox="{$xf.options.xfmgLightboxNavigation}" />
					<xf:if is="$showDateLimitDisabler">
						<xf:macro name="date_limit_disabler" arg-category="{$category}" arg-page="{$page}" arg-filters="{$filters}" />
					</xf:if>
				<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('xfmg_there_is_no_media_or_albums_matching_your_filters') }}</div>
					<xf:if is="$showDateLimitDisabler">
						<xf:macro name="date_limit_disabler" arg-category="{$category}" arg-page="{$page}" arg-filters="{$filters}" />
					</xf:if>
				<xf:else />
					<xf:if is="$showDateLimitDisabler">
						<div class="block-row">{{ phrase('xfmg_there_no_media_items_to_display') }}</div>
						<xf:macro name="date_limit_disabler" arg-category="{$category}" arg-page="{$page}" arg-filters="{$filters}" />
					<xf:else />
						<div class="block-row">{{ phrase('xfmg_no_media_or_albums_have_been_added_to_this_category_yet') }}</div>
					</xf:if>
				</xf:if>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="media/categories" data="{$category}" params="{$filters}"
				wrapperclass="block-outer-main" />

			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
<xf:elseif is="$category.category_type == 'album'" />
	<div class="block" data-xf-init="{{ $canInlineModAlbums ? 'inline-mod' : '' }}" data-type="xfmg_album" data-href="{{ link('inline-mod') }}">
		<div class="block-outer"><xf:trim>

			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="media/categories" data="{$category}" params="{$filters}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineModAlbums">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>

		<div class="block-container">
			<xf:macro template="xfmg_album_list_macros" name="list_filter_bar"
				arg-filters="{$filters}"
				arg-baseLinkPath="media/categories"
				arg-linkData="{$category}"
				arg-ownerFilter="{$ownerFilter}" />

			<div class="block-body">
				<xf:if is="$albums is not empty">
					<xf:macro template="xfmg_album_list_macros" name="album_list" arg-albums="{$albums}" />
				<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('xfmg_there_is_no_media_or_albums_matching_your_filters') }}</div>
				<xf:else />
					<div class="block-row">{{ phrase('xfmg_no_media_or_albums_have_been_added_to_this_category_yet') }}</div>
				</xf:if>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="media/categories" data="{$category}" params="{$filters}"
				wrapperclass="block-outer-main" />

			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>
</xf:if>

<xf:macro name="date_limit_disabler" arg-category="!" arg-page="!" arg-filters="!">
	<div class="blockMessage blockMessage--highlight blockMessage--small blockMessage--center">
		<a href="{{ link('media/categories', $category, $filters + {'page': $page, 'no_date_limit': 1}) }}">
			{{ phrase('show_older_items') }}
		</a>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xfmg_category_watch" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('unwatch_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('watch_category') }}</xf:title>
</xf:if>

<xf:breadcrumb source="{$category.getBreadcrumbs()}" />

<xf:form action="{{ link('media/categories/watch', $category) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('you_sure_you_want_to_unwatch_this_category') }}
				</xf:inforow>
				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="media"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="media">{{ phrase('xfmg_new_media_items') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>

				<xf:checkboxrow>
					<xf:option name="include_children" selected="true">{{ phrase('include_notifications_for_content_in_sub_categories') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_comment" version_id="902020570" version_string="2.2.5"><![CDATA[<xf:title>{{ phrase('xfmg_comment') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link($linkPrefix . '/add-comment', $content) }}" class="block" ajax="true"
	draft="{{ link($linkPrefix . '/draft', $content) }}">

	<div class="block-container">
		<div class="block-body">
			<xf:editorrow name="message" value="{$defaultMessage}" rowtype="fullWidth noLabel"
				placeholder="{{ phrase('reply_placeholder') }}"
				label="{{ phrase('message') }}"
				data-preview-url="{{ link($linkPrefix . '/preview', $content) }}" />

			<xf:if is="!$xf.visitor.user_id">
				<xf:textboxrow name="_xfUsername" data-xf-init="guest-username"
					maxlength="{{ max_length($xf.visitor, 'username') }}"
					label="{{ phrase('name') }}" />
			</xf:if>

			<xf:captcharow label="{{ phrase('verification') }}" context="xfmg_comment" />
		</div>
		<xf:submitrow submit="{{ phrase('post_comment') }}" icon="reply" sticky="true" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_comment.less" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[.message-attribution
{
	.br-select
	{
		display: none;
	}

	.br-wrapper
	{
		display: inline-block;

		.br-wrapper.br-theme-fontawesome-stars
		{
			height: 20px;
		}
	}
}

{{ include('message.less') }}]]></template>
  <template type="public" title="xfmg_comment_delete" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_delete_comment') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link('media/comments/delete', $comment) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$comment.canDelete('hard')}" />

			<xf:if is="$comment.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_comment_edit" version_id="902020032" version_string="2.2.0 Beta 2"><![CDATA[<xf:title>{{ phrase('xfmg_edit_comment') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link('media/comments/edit', $comment, {'lightbox': $lightbox}) }}" ajax="true" class="{{ !$lightbox ? 'block' : '' }}">
	<div class="{{ !$lightbox ? 'block-container' : '' }}">
		<div class="{{ !$lightbox ? 'block-body' : '' }}">
			<span class="u-anchorTarget js-editContainer"></span>
			<xf:editorrow name="message" value="{$comment.message}"
				data-min-height="{{ $lightbox ? 40 : 100 }}"
				rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}"
				label="{{ phrase('message') }}"
				data-preview-url="{{ link('media/' . ($content.content_type == 'xfmg_media' ? 'media' : 'album') . '-comments/preview', $content) }}" />

			<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
				<xf:macro template="helper_action" name="edit_type" arg-canEditSilently="{$comment.canEditSilently()}" />
			</xf:formrow>

			<xf:if is="$comment.canSendModeratorActionAlert()">
				<xf:formrow rowtype="{{ $quickEdit ? 'fullWidth noLabel' : '' }}">
					<xf:macro template="helper_action" name="author_alert" arg-row="{{ false }}" />
				</xf:formrow>
			</xf:if>
		</div>
		<xf:if is="$lightbox">
			<xf:formrow rowtype="fullWidth noLabel">
				<xf:button type="submit" class="button--primary" icon="save" />
				<xf:button class="js-cancelButton">{{ phrase('button.cancel') }}</xf:button>
			</xf:formrow>
		<xf:else />
			<xf:submitrow icon="save" sticky="true" rowtype="{{ $quickEdit ? 'simple' : '' }}">
				<xf:html>
					<xf:if is="$quickEdit">
						<xf:button class="js-cancelButton" icon="cancel">{{ phrase('button.cancel') }}</xf:button>
					</xf:if>
				</xf:html>
			</xf:submitrow>
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_comment_edit_new_comment" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:macro template="xfmg_comment_macros" name="{{ $lightbox ? 'comment_lightbox' : 'comment' }}"
	arg-comment="{$comment}"
	arg-content="{$content}"
	arg-linkPrefix="{{ ('media/' . $content.content_type == 'xfmg_media' ? 'media' : 'album' . '-comments' ) }}" />
]]></template>
  <template type="public" title="xfmg_comment_macros" version_id="902020570" version_string="2.2.5"><![CDATA[<xf:macro name="comment_list" arg-comments="!" arg-content="!" arg-linkPrefix="!" arg-link="!" arg-linkParams="{{ {} }}" arg-page="!" arg-perPage="!" arg-totalItems="!" arg-pageParam="page" arg-canInlineMod="!">
	<xf:if is="$canInlineMod">
		<xf:js src="xf/inline_mod.js" min="1" />
	</xf:if>

	<div class="block block--messages"
		data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
		data-type="xfmg_comment"
		data-href="{{ link('inline-mod') }}">

		<div class="block-outer"><xf:trim>

			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="{$link}" data="{$content}" params="{$linkParams}"
				pageparam="{$pageParam}" wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineMod">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>
		<div class="block-container"
			data-xf-init="{{ $xf.options.selectQuotable ? 'select-to-quote' : '' }}"
			data-message-selector=".js-comment">

			<div class="block-body js-replyNewCommentContainer">
				<xf:if is="$comments is not empty">
					<span class="u-anchorTarget" id="comments"></span>
					<xf:foreach loop="$comments" value="$comment">
						<xf:if is="$comment.comment_state == 'deleted'">
							<xf:macro name="comment_deleted" arg-comment="{$comment}" arg-content="{$content}" arg-linkPrefix="{$linkPrefix}" />
						<xf:else />
							<xf:macro name="comment" arg-comment="{$comment}" arg-content="{$content}" arg-linkPrefix="{$linkPrefix}" />
						</xf:if>
					</xf:foreach>
				<xf:else />
					<div class="blockMessage js-replyNoMessages">{{ phrase('xfmg_there_no_comments_to_display') }}</div>
				</xf:if>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$totalItems}"
				link="{$link}" data="{$content}" params="{$linkParams}"
				pageparam="{$pageParam}" wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</div>

	<xf:macro name="comment_add" arg-comments="{$comments}" arg-content="{$content}" arg-linkPrefix="{$linkPrefix}" />
</xf:macro>

<xf:macro name="comment" arg-comment="!" arg-content="!" arg-linkPrefix="!">
	<xf:css src="xfmg_comment.less" />

	<article class="message message--simple message--comment{{ $comment.isIgnored() ? ' is-ignored' : '' }} js-comment js-inlineModContainer"
		data-author="{{ $comment.User.username ?: $comment.username }}"
		data-content="xfmg-comment-{$comment.comment_id}">

		<span class="u-anchorTarget" id="xfmg-comment-{$comment.comment_id}"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				<xf:macro template="message_macros" name="user_info_simple" arg-user="{$comment.User}" arg-fallbackName="{$comment.username}" />
			</div>
			<div class="message-cell message-cell--main">
				<div class="js-quickEditTarget">
					<div class="message-content js-messageContent">
						<header class="message-attribution message-attribution--plain">
							<ul class="listInline listInline--bullet">
								<li class="message-attribution-user">
									<xf:avatar user="$comment.User" size="xxs" />
									<h4 class="attribution"><xf:username user="$comment.User" rich="true" defaultname="{$comment.username}" /></h4>
								</li>
								<li>
									<a href="{{ link('media/comments', $comment) }}" class="u-concealed"><xf:date time="$comment.comment_date" /></a>
								</li>
								<xf:if is="$comment.Rating">
									<li>
										<xf:macro template="rating_macros" name="stars"
											arg-rating="{$comment.Rating.rating}"
											arg-class="ratingStars--smaller" />
									</li>
								</xf:if>
							</ul>
						</header>

						<xf:if is="$comment.comment_state == 'deleted'">
							<div class="messageNotice messageNotice--deleted">
								<xf:macro template="deletion_macros" name="notice" arg-log="{$comment.DeletionLog}" />
							</div>
						<xf:elseif is="$comment.comment_state == 'moderated'" />
							<div class="messageNotice messageNotice--moderated">
								{{ phrase('this_message_is_awaiting_moderator_approval_and_is_invisible_to_normal') }}
							</div>
						</xf:if>
						<xf:if is="$comment.warning_message">
							<div class="messageNotice messageNotice--warning">
								{$comment.warning_message}
							</div>
						</xf:if>
						<xf:if is="$comment.isIgnored()">
							<div class="messageNotice messageNotice--ignored">
								{{ phrase('you_are_ignoring_content_by_this_member') }}
							</div>
						</xf:if>

						<div class="message-userContent">

							<article class="message-body js-selectToQuote">
								{{ bb_code($comment.message, 'xfmg_comment', $comment) }}
								<div class="js-selectToQuoteEnd">&nbsp;</div>
							</article>

						</div>

						<xf:if is="$comment.last_edit_date">
							<div class="message-lastEdit">
								<xf:if is="$comment.user_id == $comment.last_edit_user_id">
									{{ phrase('last_edited:') }} <xf:date time="{$comment.last_edit_date}" />
								<xf:else />
									{{ phrase('last_edited_by_moderator:') }} <xf:date time="{$comment.last_edit_date}" />
								</xf:if>
							</div>
						</xf:if>

						<xf:macro template="message_macros" name="signature" arg-user="{$comment.User}" />
					</div>

					<footer class="message-footer">
						<xf:if contentcheck="true">
							<div class="message-actionBar actionBar">
								<xf:contentcheck>
									<xf:if contentcheck="true">
										<div class="actionBar-set actionBar-set--external">
											<xf:contentcheck>
												<xf:react content="{$comment}" link="media/comments/react" list="< .js-comment | .js-reactionsList" />
												<xf:if is="$content.canReplyToComment()">
													<xf:set var="$quoteLink">{{ link($linkPrefix . '/comment', $content, {'quote': $comment.comment_id}) }}</xf:set>
													<xf:if is="$xf.options.multiQuote">
														<a href="{$quoteLink}"
															class="actionBar-action actionBar-action--mq u-jsOnly js-multiQuote"
															title="{{ phrase('toggle_multi_quote_tooltip')|for_attr }}"
															data-message-id="{$comment.comment_id}"
															data-mq-action="add">
															{{ phrase('quote') }}
														</a>
													</xf:if>
													<a href="{$quoteLink}"
														class="actionBar-action actionBar-action--reply"
														title="{{ phrase('reply_quoting_this_message')|for_attr }}"
														data-xf-click="quote"
														data-quote-href="{{ link('media/comments/quote', $comment) }}">{{ phrase('reply') }}</a>
												</xf:if>
											</xf:contentcheck>
										</div>
									</xf:if>

									<xf:if contentcheck="true">
										<div class="actionBar-set actionBar-set--internal">
											<xf:contentcheck>
												<xf:if is="$comment.canUseInlineModeration()">
													<span class="actionBar-action actionBar-action--inlineMod">
														<xf:checkbox standalone="true">
															<xf:option value="{$comment.comment_id}"
																class="js-inlineModToggle"
																data-xf-init="tooltip"
																title="{{ phrase('select_for_moderation') }}"
																label="{{ phrase('select_for_moderation') }}"
																hiddenlabel="true" />
														</xf:checkbox>
													</span>
												</xf:if>
												<xf:if is="$comment.canReport()">
													<a href="{{ link('media/comments/report', $comment) }}" class="actionBar-action actionBar-action--report" data-xf-click="overlay">{{ phrase('report_verb') }}</a>
												</xf:if>
												<xf:if is="$comment.canEdit()">
													<xf:js src="xf/message.js" min="1" />
													<a href="{{ link('media/comments/edit', $comment) }}"
														class="actionBar-action actionBar-action--edit"
														data-xf-click="quick-edit"
														data-editor-target="< .js-quickEditTarget">{{ phrase('edit') }}</a>
												</xf:if>
												<xf:if is="$comment.edit_count AND $comment.canViewHistory()">
													<a href="{{ link('media/comments/history', $comment) }}" class="actionBar-action actionBar-action--history" data-xf-click="toggle" data-target="< .js-comment | .js-historyTarget">{{ phrase('history') }}</a>
												</xf:if>
												<xf:if is="$comment.canDelete()">
													<a href="{{ link('media/comments/delete', $comment) }}" class="actionBar-action actionBar-action--delete" data-xf-click="overlay">{{ phrase('delete') }}</a>
												</xf:if>
												<xf:if is="$comment.canCleanSpam()">
													<a href="{{ link('spam-cleaner', $comment) }}" class="actionBar-action actionBar-action--spam" data-xf-click="overlay">{{ phrase('spam') }}</a>
												</xf:if>
												<xf:if is="$xf.visitor.canViewIps() AND $comment.ip_id">
													<a href="{{ link('media/comments/ip', $comment) }}" class="actionBar-action actionBar-action--ip" data-xf-click="overlay">{{ phrase('ip') }}</a>
												</xf:if>
												<xf:if is="$comment.canWarn()">
													<a href="{{ link('media/comments/warn', $comment) }}" class="actionBar-action actionBar-action--warn">{{ phrase('warn') }}</a>
												<xf:elseif is="$comment.warning_id AND $xf.visitor.canViewWarnings()" />
													<a href="{{ link('warnings', {'warning_id': $comment.warning_id}) }}" class="actionBar-action actionBar-action--warn" data-xf-click="overlay">{{ phrase('view_warning') }}</a>
												</xf:if>
											</xf:contentcheck>
										</div>
									</xf:if>
								</xf:contentcheck>
							</div>
						</xf:if>

						<div class="reactionsBar js-reactionsList {{ $comment.reactions ? 'is-active' : '' }}">
							<xf:reactions content="{$comment}" link="media/comments/reactions" />
						</div>
					</footer>

					<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
				</div>
			</div>
		</div>
	</article>
</xf:macro>

<xf:macro name="comment_simple"
	arg-comment="!"
	arg-content="!">

	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="$comment.User" size="xxs" defaultname="{$comment.username}" />
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('media/comments', $comment) }}">{$content.title}</a>

			<div class="contentRow-faderContainer">
				<div class="contentRow-faderContent">
					{{ bb_code_snippet($comment.message, 'xfmg_comment', $comment, 300, {'simpleUnfurl': true}) }}
				</div>
				<div class="contentRow-fader"></div>
			</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li><xf:date time="{$comment.comment_date}" /></li>
				</ul>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="comment_lightbox" arg-comment="!" arg-content="!" arg-linkPrefix="!">
	<div class="message-responseRow">
		<div class="comment js-comment {{ $comment.isIgnored() ? 'is-ignored' : '' }}"
			data-author="{{ $comment.User.username ?: $comment.username }}"
			data-content="xfmg-comment-{$comment.comment_id}">
			<div class="comment-inner">
				<span class="comment-avatar">
					<xf:avatar user="$comment.User" size="xxs" defaultname="{$comment.username}" />
				</span>
				<div class="comment-main">
					<span class="u-anchorTarget" id="xfmg-comment-{$comment.comment_id}"></span>

					<div class="js-quickEditTarget">
						<div class="comment-content">
							<div class="comment-contentWrapper">
								<ul class="listInline listInline--bullet">
									<li><xf:username user="$comment.User" rich="true" defaultname="{$comment.username}" class="comment-user" /></li>
									<xf:if is="$comment.Rating">
										<li>
											<xf:macro template="rating_macros" name="stars"
												arg-rating="{$comment.Rating.rating}"
												arg-class="ratingStars--smaller" />
										</li>
									</xf:if>
								</ul>

								<article class="comment-body">{{ bb_code($comment.message, 'xfmg_comment', $comment) }}</article>
							</div>
						</div>

						<footer class="comment-footer">
							<div class="comment-actionBar actionBar">
								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--external">
										<xf:contentcheck>
											<xf:react content="{$comment}" link="media/comments/react" list="< .js-comment | .js-commentReactionsList" />
										</xf:contentcheck>
									</div>
								</xf:if>
								<div class="actionBar-set actionBar-set--internal">
									<span class="actionBar-action"><xf:date time="{$comment.comment_date}" /></span>
									<xf:if is="$comment.canReport()">
										<a href="{{ link('media/comments/report', $comment) }}" class="actionBar-action actionBar-action--report" data-xf-click="overlay">{{ phrase('report_verb') }}</a>
									</xf:if>

									<xf:if contentcheck="true">
										<a class="actionBar-action actionBar-action--menuTrigger is-displayed"
											data-xf-click="menu"
											title="{{ phrase('more_options')|for_attr }}"
											role="button"
											tabindex="0"
											aria-expanded="false"
											aria-haspopup="true">&#8226;&#8226;&#8226;</a>
										<div class="menu" data-menu="menu">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<xf:contentcheck>
													<xf:if is="$comment.canEdit()">
														<xf:js src="xf/message.js" min="1" />
														<a href="{{ link('media/comments/edit', $comment, {'lightbox': 1}) }}"
															class="menu-linkRow"
															data-menu-closer="true"
															data-xf-click="quick-edit"
															data-editor-target="[data-content=xfmg-comment-{$comment.comment_id}] .js-quickEditTarget">{{ phrase('edit') }}</a>
													</xf:if>

													<xf:if is="$comment.edit_count AND $comment.canViewHistory()">
														<a href="{{ link('media/comments/history', $comment) }}" class="menu-linkRow" data-xf-click="toggle" data-menu-closer="true" data-target="[data-content=xfmg-comment-{$comment.comment_id}] .js-historyTarget">{{ phrase('history') }}</a>
													</xf:if>

													<xf:if is="$comment.canDelete()">
														<a href="{{ link('media/comments/delete', $comment) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('delete') }}</a>
													</xf:if>

													<xf:if is="$comment.canCleanSpam()">
														<a href="{{ link('spam-cleaner', $comment) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('spam') }}</a>
													</xf:if>
													<xf:if is="$xf.visitor.canViewIps() AND $comment.ip_id">
														<a href="{{ link('media/comments/ip', $comment) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('ip') }}</a>
													</xf:if>
													<xf:if is="$comment.canWarn()">
														<a href="{{ link('media/comments/warn', $comment) }}" class="menu-linkRow">{{ phrase('warn') }}</a>
													<xf:elseif is="$comment.warning_id AND $xf.visitor.canViewWarnings()" />
														<a href="{{ link('warnings', {'warning_id': $comment.warning_id}) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('view_warning') }}</a>
													</xf:if>
												</xf:contentcheck>
											</div>
										</div>
									</xf:if>
								</div>
							</div>
							<div class="comment-reactions js-commentReactionsList {{ $comment.reactions ? 'is-active' : '' }}">
								<xf:reactions content="{$comment}" link="media/comments/reactions" />
							</div>
						</footer>

						<div class="js-historyTarget toggleTarget" data-href="trigger-href"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="comment_deleted" arg-comment="!" arg-content="!" arg-linkPrefix="!">
	<xf:css src="xfmg_comment.less" />

	<section class="message message--simple message--deleted message--comment{{ $comment.isIgnored() ? ' is-ignored' : '' }} js-comment js-inlineModContainer"
		data-author="{{ $comment.User.username ?: $comment.username }}"
		data-content="xfmg-comment-{$comment.comment_id}">

		<span class="u-anchorTarget" id="xfmg-comment-{$comment.comment_id}"></span>
		<div class="message-inner">
			<div class="message-cell message-cell--user">
				<xf:macro template="message_macros" name="user_info_simple" arg-user="{$comment.User}" arg-fallbackName="{$comment.username}" />
			</div>
			<div class="message-cell message-cell--main">
				<header class="message-attribution message-attribution--plain">
					<ul class="listInline listInline--bullet">
						<li class="message-attribution-user">
							<xf:avatar user="$comment.User" size="xxs" />
							<h4 class="attribution"><xf:username user="$comment.User" rich="true" defaultname="{$comment.username}" /></h4>
						</li>
						<li><xf:date time="$comment.comment_date" /></li>
					</ul>
				</header>

				<div class="messageNotice messageNotice--deleted">
					<xf:macro template="deletion_macros" name="notice" arg-log="{$comment.DeletionLog}" />

					<a href="{{ link('media/comments/show', $comment) }}" class="u-jsOnly" data-xf-click="inserter" data-replace="[data-content=xfmg-comment-{$comment.comment_id}]">{{ phrase('show...') }}</a>
				</div>
			</div>
		</div>
	</section>
</xf:macro>

<xf:macro name="comment_deleted_lightbox" arg-comment="!" arg-content="!" arg-linkPrefix="!">
	<div class="message-responseRow">
		<div class="comment{{ $comment.isIgnored() ? ' is-ignored' : '' }}"
			data-author="{{ $comment.User.username ?: $comment.username }}"
			data-content="xfmg-comment-{$comment.comment_id}">

			<div class="comment-inner">
				<span class="comment-avatar">
					<xf:avatar user="$comment.User" size="xxs" defaultname="{$comment.username}" />
				</span>
				<div class="comment-main">
					<div class="comment-content">
						<div class="messageNotice messageNotice--deleted">
							<xf:macro template="deletion_macros" name="notice" arg-log="{$comment.DeletionLog}" />

							<a href="{{ link('media/comments/show', $comment, {'lightbox': 1}) }}" class="u-jsOnly" data-xf-click="inserter" data-replace="[data-content=xfmg-comment-{$comment.comment_id}]">{{ phrase('show...') }}</a>
						</div>
					</div>
					<div class="comment-actionBar actionBar">
						<div class="actionBar-set actionBar-set--internal">
							<span class="actionBar-action">
								<xf:date time="{$comment.comment_date}" />
								<span role="presentation" aria-hidden="true">&middot;</span>
								<xf:username user="{$comment.User}" defaultname="{$comment.username}" class="u-concealed" />
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="comment_add" arg-comments="!" arg-content="!" arg-linkPrefix="!">
	<xf:set var="$isPreRegComment" value="{{ $content.canAddCommentPreReg() }}" />
	<xf:if is="$content.canAddComment() OR $isPreRegComment">
		<xf:form action="{{ link($linkPrefix . '/add-comment', $content) }}"
			ajax="true"
			draft="{{ link($linkPrefix . '/draft', $content) }}"
			class="block js-quickReply"
			data-xf-init="quick-reply{{ ($xf.visitor.isShownCaptcha() AND !$isPreRegComment) ? ' guest-captcha' : '' }}"
			data-captcha-context="xfmg_guest_comment_quick_reply"
			data-message-container="< :prev | .js-replyNewCommentContainer">

			<xf:js src="xf/message.js" min="1" />
			<xf:js src="xf/captcha.js" min="1" />

			<xf:set var="$lastPost" value="{$comments|last}" />

			<div class="block-container">
				<div class="block-body">
					<xf:macro template="quick_reply_macros" name="body"
						arg-message="{$content.draft_comment.message}"
						arg-messageSelector=".js-comment"
						arg-supportsMultiQuote="{$xf.options.multiQuote}"
						arg-multiQuoteHref="{{ link($linkPrefix . '/multi-quote', $content) }}"
						arg-multiQuoteStorageKey="multiQuoteMediaItem"
						arg-simple="{{ true }}"
						arg-submitText="{{ phrase('post_comment') }}"
						arg-lastDate="{$lastPost.comment_date}"
						arg-showGuestControls="{{ !$isPreRegComment }}"
						arg-previewUrl="{{ link($linkPrefix . '/preview', $content) }}" />
				</div>
			</div>
		</xf:form>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xfmg_comment_multi_quote" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:macro template="multi_quote_macros" name="block"
	arg-quotes="{$quotes}"
	arg-messages="{$comments}"
	arg-containerRelation="Content"
	arg-dateKey="comment_date"
	arg-bbCodeContext="xfmg_comment" />
]]></template>
  <template type="public" title="xfmg_comment_new_comments" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:if is="$firstUnshownComment">
	<div class="message">
		<div class="message-inner">
			<div class="message-cell message-cell--alert">
				{{ phrase('xfmg_there_more_comments_to_display') }} <a href="{{ link('media/comments', $firstUnshownComment) }}">{{ phrase('view_them') }}</a>
			</div>
		</div>
	</div>
</xf:if>

<xf:foreach loop="$comments" value="$comment">
	<xf:macro template="xfmg_comment_macros" name="{{ $lightbox ? 'comment_lightbox' : 'comment' }}"
		arg-comment="{$comment}"
		arg-content="{$content}"
		arg-linkPrefix="{$linkPrefix}" />
</xf:foreach>]]></template>
  <template type="public" title="xfmg_comment_show" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="xfmg_comment" data-href="{{ link('inline-mod') }}">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="xfmg_comment_macros" name="{{ $lightbox ? 'comment_lightbox' : 'comment' }}"
				arg-comment="{$comment}"
				arg-content="{$content}"
				arg-linkPrefix="{{ 'media/' . ($content.content_type == 'xfmg_media' ? 'media' : 'album') . '-comments' }}" />
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xfmg_cropper.less" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[/*!
 * Cropper v3.0.0-rc.3
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2017 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2017-07-07T13:00:47.346Z
 */

.cropper-container {
	font-size: 0;
	line-height: 0;

	position: relative;

	-webkit-user-select: none;

	-moz-user-select: none;

	-ms-user-select: none;

	user-select: none;

	direction: ltr;
	-ms-touch-action: none;
	touch-action: none
}

.cropper-container img {
	/* Avoid margin top issue (Occur only when margin-top <= -height) */
	display: block;
	min-width: 0 !important;
	max-width: none !important;
	min-height: 0 !important;
	max-height: none !important;
	width: 100%;
	height: 100%;
	image-orientation: 0deg
}

.cropper-wrap-box,
.cropper-canvas,
.cropper-drag-box,
.cropper-crop-box,
.cropper-modal {
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
}

.cropper-wrap-box {
	overflow: hidden;
}

.cropper-drag-box {
	opacity: 0;
	background-color: #fff;
}

.cropper-modal {
	opacity: .5;
	background-color: #000;
}

.cropper-view-box {
	display: block;
	overflow: hidden;

	width: 100%;
	height: 100%;

	outline: 1px solid #39f;
	outline-color: rgba(51, 153, 255, 0.75);
}

.cropper-dashed {
	position: absolute;

	display: block;

	opacity: .5;
	border: 0 dashed #eee
}

.cropper-dashed.dashed-h {
	top: 33.33333%;
	left: 0;
	width: 100%;
	height: 33.33333%;
	border-top-width: 1px;
	border-bottom-width: 1px
}

.cropper-dashed.dashed-v {
	top: 0;
	left: 33.33333%;
	width: 33.33333%;
	height: 100%;
	border-right-width: 1px;
	border-left-width: 1px
}

.cropper-center {
	position: absolute;
	top: 50%;
	left: 50%;

	display: block;

	width: 0;
	height: 0;

	opacity: .75
}

.cropper-center:before,
.cropper-center:after {
	position: absolute;
	display: block;
	content: ' ';
	background-color: #eee
}

.cropper-center:before {
	top: 0;
	left: -3px;
	width: 7px;
	height: 1px
}

.cropper-center:after {
	top: -3px;
	left: 0;
	width: 1px;
	height: 7px
}

.cropper-face,
.cropper-line,
.cropper-point {
	position: absolute;

	display: block;

	width: 100%;
	height: 100%;

	opacity: .1;
}

.cropper-face {
	top: 0;
	left: 0;

	background-color: #fff;
}

.cropper-line {
	background-color: #39f
}

.cropper-line.line-e {
	top: 0;
	right: -3px;
	width: 5px;
	cursor: e-resize
}

.cropper-line.line-n {
	top: -3px;
	left: 0;
	height: 5px;
	cursor: n-resize
}

.cropper-line.line-w {
	top: 0;
	left: -3px;
	width: 5px;
	cursor: w-resize
}

.cropper-line.line-s {
	bottom: -3px;
	left: 0;
	height: 5px;
	cursor: s-resize
}

.cropper-point {
	width: 5px;
	height: 5px;

	opacity: .75;
	background-color: #39f
}

.cropper-point.point-e {
	top: 50%;
	right: -3px;
	margin-top: -3px;
	cursor: e-resize
}

.cropper-point.point-n {
	top: -3px;
	left: 50%;
	margin-left: -3px;
	cursor: n-resize
}

.cropper-point.point-w {
	top: 50%;
	left: -3px;
	margin-top: -3px;
	cursor: w-resize
}

.cropper-point.point-s {
	bottom: -3px;
	left: 50%;
	margin-left: -3px;
	cursor: s-resize
}

.cropper-point.point-ne {
	top: -3px;
	right: -3px;
	cursor: ne-resize
}

.cropper-point.point-nw {
	top: -3px;
	left: -3px;
	cursor: nw-resize
}

.cropper-point.point-sw {
	bottom: -3px;
	left: -3px;
	cursor: sw-resize
}

.cropper-point.point-se {
	right: -3px;
	bottom: -3px;
	width: 20px;
	height: 20px;
	cursor: se-resize;
	opacity: 1
}

@media (min-width: 768px) {

	.cropper-point.point-se {
		width: 15px;
		height: 15px
	}
}

@media (min-width: 992px) {

	.cropper-point.point-se {
		width: 10px;
		height: 10px
	}
}

@media (min-width: 1200px) {

	.cropper-point.point-se {
		width: 5px;
		height: 5px;
		opacity: .75
	}
}

.cropper-point.point-se:before {
	position: absolute;
	right: -50%;
	bottom: -50%;
	display: block;
	width: 200%;
	height: 200%;
	content: ' ';
	opacity: 0;
	background-color: #39f
}

.cropper-invisible {
	opacity: 0;
}

.cropper-bg {
	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');
}

.cropper-hide {
	position: absolute;

	display: block;

	width: 0;
	height: 0;
}

.cropper-hidden {
	display: none !important;
}

.cropper-move {
	cursor: move;
}

.cropper-crop {
	cursor: crosshair;
}

.cropper-disabled .cropper-drag-box,
.cropper-disabled .cropper-face,
.cropper-disabled .cropper-line,
.cropper-disabled .cropper-point {
	cursor: not-allowed;
}

/*!
 * XF overrides
 */

@baseColor: @xf-paletteColor3;

.cropper-view-box
{
	outline: 1px solid @baseColor;
	outline-color: fade(@baseColor, 75%);
}

.cropper-line
{
	background-color: @baseColor;
}

.cropper-point
{
	background-color: @baseColor;
}

.cropper-point.point-se:before
{
	background-color: @baseColor;
}]]></template>
  <template type="public" title="xfmg_dialog_browse_albums" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:macro template="xfmg_editor_dialog_gallery" name="album_list"
	arg-page="{$page}"
	arg-albums="{$albums}"
	arg-listClass="js-browseAlbumsList"
	arg-link="media/albums/dialog/browse"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xfmg_dialog_browse_media" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:macro template="xfmg_editor_dialog_gallery" name="media_list"
	arg-page="{$page}"
	arg-mediaItems="{$mediaItems}"
	arg-listClass="js-browseMediaList"
	arg-link="media/dialog/browse"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xfmg_dialog_wrapper" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:if contentcheck="true">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:contentcheck>{$innerContent|raw}</xf:contentcheck>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_dialog_your_albums" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:macro template="xfmg_editor_dialog_gallery" name="album_list"
	arg-page="{$page}"
	arg-albums="{$albums}"
	arg-listClass="js-yourAlbumsList"
	arg-link="media/albums/dialog/yours"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xfmg_dialog_your_media" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:macro template="xfmg_editor_dialog_gallery" name="media_list"
	arg-page="{$page}"
	arg-mediaItems="{$mediaItems}"
	arg-listClass="js-yourMediaList"
	arg-link="media/dialog/yours"
	arg-hasMore="{$hasMore}" />]]></template>
  <template type="public" title="xfmg_editor_dialog.less" version_id="902010032" version_string="2.1.0 Beta 2"><![CDATA[.embedTabs
{
	.embedTabs-tab
	{
		position: relative;

		.badge
		{
			display: none;
		}

		&.has-selected
		{
			.badge
			{
				display: inline;

				&.badge--highlighted
				{
					color: @xf-paletteColor1;
					background: @xf-paletteColor3;
				}
			}
		}
	}
}

.itemList
{
	&.itemList--picker
	{
		.itemList-item
		{
			width: (@_thumbSize / 1.5) / 1.6;
			max-width: @_thumbSize / 1.5;

			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;

			&.itemList-item--placeholder--temp
			{
				margin-top: 0;
				margin-bottom: 0;
				height: 0;
			}

			&.is-selected
			{
				border: 4px solid @xf-borderColorFeature;
			}

			label
			{
				cursor: pointer;
			}

			img
			{
				-webkit-user-drag: none;
				pointer-events: none; // for IE11
			}
		}

		.itemList-checkbox
		{
			display: none;
		}

		.itemList-itemOverlay
		{
			height: 18px;
			bottom: -18px;
		}

		.itemInfoRow
		{
			.itemInfoRow-title
			{
				font-size: @xf-fontSizeSmallest;
			}
		}

		.itemList-footer
		{
			flex-basis: 100%;
			margin: @xf-paddingMedium @xf-paddingSmall;

			.button
			{
				float: right;
			}
		}
	}
}

{{ include('xfmg_media_list.less') }}]]></template>
  <template type="public" title="xfmg_editor_dialog_gallery" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:title>{{ phrase('xfmg_embed_media') }}</xf:title>

<xf:js src="xfmg/editor.js" min="1" />
<xf:css src="xfmg_editor_dialog.less" />

<form class="block" id="xfmg_editor_dialog_form">
	<div class="block-container">
		<h2 class="block-minorTabHeader tabs embedTabs hScroller"
			data-xf-init="tabs h-scroller"
			data-panes=".js-embedMediaPanes"
			role="tablist">

			<span class="hScroller-scroll">
				<a class="tabs-tab embedTabs-tab is-active js-yourMediaTab" role="tab" id="yourMedia">
					<span class="embedTabs-tabLabel">{{ phrase('xfmg_your_media') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
				<xf:if is="$xf.visitor.xfmg_album_count">
					<a class="tabs-tab embedTabs-tab js-yourAlbumsTab" role="tab" id="yourAlbums">
						<span class="embedTabs-tabLabel">{{ phrase('xfmg_your_albums') }}</span>
						<span class="badge badge--highlighted js-tabCounter">0</span>
					</a>
				</xf:if>
				<a class="tabs-tab embedTabs-tab js-browseMediaTab" role="tab" id="browseMedia">
					<span class="embedTabs-tabLabel">{{ phrase('xfmg_others_media') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
				<a class="tabs-tab embedTabs-tab js-browseAlbumsTab" role="tab" id="browseAlbums">
					<span class="embedTabs-tabLabel">{{ phrase('xfmg_others_albums') }}</span>
					<span class="badge badge--highlighted js-tabCounter">0</span>
				</a>
			</span>
		</h2>

		<ul class="tabPanes js-embedMediaPanes">
			<li data-href="{{ link('media/dialog/yours') }}" role="tabpanel" aria-labelledby="yourMedia" data-tab=".js-yourMediaTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>

			<xf:if is="$xf.visitor.xfmg_album_count">
				<li data-href="{{ link('media/albums/dialog-yours') }}" role="tabpanel" aria-labelledby="yourAlbums" data-tab=".js-yourAlbumsTab">
					<div class="blockMessage">{{ phrase('loading...') }}</div>
				</li>
			</xf:if>

			<li data-href="{{ link('media/dialog-browse') }}" role="tabpanel" aria-labelledby="browseMedia" data-tab=".js-browseMediaTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>

			<li data-href="{{ link('media/albums/dialog-browse') }}" role="tabpanel" aria-labelledby="browseAlbums" data-tab=".js-browseAlbumsTab">
				<div class="blockMessage">{{ phrase('loading...') }}</div>
			</li>
		</ul>
		<xf:hiddenval name="" value="{}" class="js-embedValue" />
		<xf:submitrow submit="{{ phrase('continue') }}" rowtype="simple" sticky="true" id="xfmg_editor_dialog_gallery" />
	</div>
</form>

<xf:macro name="media_list"
	arg-page="!"
	arg-mediaItems="!"
	arg-listClass="!"
	arg-link="!"
	arg-hasMore="!">

	<xf:if is="$page == 1">
		<xf:wrap template="xfmg_dialog_wrapper" />
	</xf:if>

	<xf:if is="$mediaItems is not empty">
		<div class="{$listClass} itemList itemList--picker">
			<xf:foreach loop="$mediaItems" value="$mediaItem">
				<div data-type="media" data-id="{$mediaItem.media_id}" class="itemList-item">
					<xf:macro name="item_display" arg-item="{$mediaItem}" />
				</div>
			</xf:foreach>

			<xf:macro template="xfmg_media_list_macros" name="media_list_placeholders" />

			<xf:macro template="xfmg_editor_dialog_gallery" name="footer" arg-link="{$link}" arg-append=".{$listClass}" arg-page="{$page}" arg-hasMore="{$hasMore}" />
		</div>
	<xf:else />
		<div class="blockMessage">{{ phrase('xfmg_no_items_have_been_added_yet') }}</div>
	</xf:if>
</xf:macro>

<xf:macro name="album_list"
	arg-page="!"
	arg-albums="!"
	arg-listClass="!"
	arg-link="!"
	arg-hasMore="!">

	<xf:if is="$page == 1">
		<xf:wrap template="xfmg_dialog_wrapper" />
	</xf:if>

	<xf:if is="$albums is not empty">
		<div class="{$listClass} itemList itemList--picker">
			<xf:foreach loop="$albums" value="$album">
				<div data-type="album" data-id="{$album.album_id}" class="itemList-item{{ !$album.thumbnail_date ? ' itemList-item--noThumb' : '' }}">
					<xf:macro template="xfmg_editor_dialog_gallery" name="item_display" arg-item="{$album}" />
				</div>
			</xf:foreach>

			<xf:macro template="xfmg_media_list_macros" name="media_list_placeholders" />

			<xf:macro template="xfmg_editor_dialog_gallery" name="footer" arg-link="{$link}" arg-append=".{$listClass}" arg-page="{$page}" arg-hasMore="{$hasMore}" />
		</div>
	<xf:else />
		<div class="blockMessage">{{ phrase('xfmg_no_items_have_been_added_yet') }}</div>
	</xf:if>
</xf:macro>

<xf:macro name="item_display" arg-item="!">
	<xf:set var="$id" value="{{ unique_id() }}" />
	<input type="checkbox" class="itemList-checkbox js-mediaPicker" id="{$id}" value="1" />
	<label for="{$id}">{{ xfmg_thumbnail($item, 'xfmgThumbnail--fluid') }}</label>
	<div class="itemList-itemOverlay">
		<div class="itemInfoRow">
			<div class="itemInfoRow-main">
				<h3 class="itemInfoRow-title">{$item.title}</h3>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="footer" arg-link="!" arg-append="!" arg-page="1" arg-hasMore="{{ false }}">
	<xf:if is="$hasMore">
		<div class="itemList-footer js-paneLoadMore">
			<xf:button data-xf-click="inserter"
				data-inserter-href="{{ link($link, null, {'page': $page + 1}) }}"
				data-append="{$append}"
				data-replace=".js-paneLoadMore"
				data-animate-replace="0">
				{{ phrase('more...') }}
			</xf:button>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xfmg_gallery_bb_code.less" version_id="902020570" version_string="2.2.5"><![CDATA[.embeddedMedia
{
	width: fit-content;
	max-width: 560px;

	margin: 0;
	border: 1px solid @xf-borderColor;
	border-radius: @xf-borderRadiusMedium;
	text-align: left;

	.m-blockAligner();

	.embeddedMedia-container
	{
		border-bottom: 1px solid @xf-borderColor;

		img
		{
			max-width: 100%;
			vertical-align: middle;
		}

		.bbMediaWrapper
		{
			width: 100%;
		}

		video
		{
			width: 100%;

			&[data-video-type="audio"]
			{
				&[poster=""]
				{
					display: block;
					max-height: 90px;
					padding: @xf-paddingMedium;
				}
			}
		}
	}

	.embeddedMedia-thumbList
	{
		display: flex;
		flex-flow: row wrap;
		margin: 1px;
	}

	.embeddedMedia-thumbList-item
	{
		flex: auto;
		width: 92px; // 100px - borders and margins
		max-width: 250px;
		margin: 1px;

		position: relative;
		overflow: hidden;

		&.embeddedMedia-thumbList-item--showMore
		{
			.xf-contentAltBase();
			.xf-blockBorder();

			img
			{
				width: 100%;
				height: 100%;
			}

			span
			{
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translate(-50%, -50%);
				color: @xf-textColorMuted;
				.m-textOutline(@xf-textColorMuted, xf-intensify(@xf-textColorMuted, 20%));
				font-size: @xf-fontSizeLargest * 1.5;
			}
		}

		&.embeddedMedia-thumbList-item--placeholder
		{
			margin-top: 0;
			margin-bottom: 0;
			height: 0;
		}
	}

	.embeddedMedia-info
	{
		margin-top: 5px;

		.contentRow-main
		{
			padding: @xf-paddingMedium;
		}
	}
}]]></template>
  <template type="public" title="xfmg_gallery_bb_code_album" version_id="902010053" version_string="2.1.0 Release Candidate 3"><![CDATA[<xf:css src="xfmg_gallery_bb_code.less" />

<div class="embeddedMedia">
	<div class="embeddedMedia-container">
		<div class="embeddedMedia-thumbList">
			<xf:foreach loop="$mediaItems" value="$mediaItem">
				<div class="embeddedMedia-thumbList-item">
					<a href="{{ link('media', $mediaItem) }}">
						{{ xfmg_thumbnail($mediaItem, 'xfmgThumbnail--fluid', true) }}
					</a>
				</div>
			</xf:foreach>

			<xf:if is="$showXMore">
				<div class="embeddedMedia-thumbList-item embeddedMedia-thumbList-item--showMore">
					<a href="{{ link('media/albums', $album) }}">
						<img src="{{ transparent_img() }}" alt="" />
						<span>+{{ ($album.media_count - $mediaItems.count())|number_short }}</span>
					</a>
				</div>
			</xf:if>

			<xf:foreach loop="{{ range(1, 10) }}" value="$placeholder">
				<div class="embeddedMedia-thumbList-item embeddedMedia-thumbList-item--placeholder"></div>
			</xf:foreach>
		</div>
	</div>
	<div class="embeddedMedia-info fauxBlockLink">
		<div class="contentRow">
			<div class="contentRow-main">
				<h4 class="contentRow-title">
					<a href="{{ link('media/albums', $album) }}" class="fauxBlockLink-blockLink u-cloaked">{$album.title}</a>
				</h4>
				<div class="contentRow-lesser p-description">
					<ul class="listInline listInline--bullet is-structureList">
						<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_album_owner')|for_attr }}" /> <xf:username user="{$album.User}" defaultname="{$album.username}" class="u-concealed" /></li>
						<li><xf:fa icon="fa-clock" title="{{ phrase('xfmg_date_added')|for_attr }}" /> <xf:date time="{$album.create_date}" /></li>
						<li><xf:fa icon="fa-th" title="{{ phrase('xfmg_items')|for_attr }}" /> {$album.media_count|number_short}</li>
						<xf:if is="$album.comment_count">
							<li><xf:fa icon="fa-comments" title="{{ phrase('xfmg_comments')|for_attr }}" /> {$album.comment_count|number_short}</li>
						</xf:if>
					</ul>
				</div>
				<xf:if is="$album.description">
					<div class="contentRow-snippet">
						{{ structured_text(snippet($album.description, 100)) }}
					</div>
				</xf:if>
			</div>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xfmg_gallery_bb_code_media" version_id="902010053" version_string="2.1.0 Release Candidate 3"><![CDATA[<xf:css src="xfmg_gallery_bb_code.less" />

<div class="embeddedMedia">
	<div class="embeddedMedia-container">
		<xf:macro template="xfmg_media_view_macros" name="media_content" arg-mediaItem="{$mediaItem}" arg-linkMedia="{{ true }}" />
	</div>
	<div class="embeddedMedia-info fauxBlockLink">
		<div class="contentRow">
			<div class="contentRow-main">
				<h4 class="contentRow-title">
					<a href="{{ link('media', $mediaItem) }}" class="fauxBlockLink-blockLink u-cloaked">{$mediaItem.title}</a>
				</h4>
				<div class="contentRow-lesser p-description">
					<ul class="listInline listInline--bullet is-structureList">
						<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_media_owner')|for_attr }}" /> <xf:username user="{$mediaItem.User}" defaultname="{$mediaItem.username}" class="u-concealed" /></li>
						<li><xf:fa icon="fa-clock" title="{{ phrase('xfmg_date_added')|for_attr }}" /> <xf:date time="{$mediaItem.media_date}" /></li>
						<xf:if is="$mediaItem.comment_count">
							<li><xf:fa icon="fa-comments" title="{{ phrase('xfmg_comments')|for_attr }}" /> {$mediaItem.comment_count|number_short}</li>
						</xf:if>
						<xf:if is="$xf.options.enableTagging AND {$mediaItem.tags}">
							<li><xf:fa icon="fa-tags" title="{{ phrase('tags')|for_attr }}" />
								<xf:foreach loop="$mediaItem.tags" value="$tag">
									<a href="{{ link('tags', $tag) }}" class="tagItem">{$tag.tag}</a>
								</xf:foreach>
							</li>
						</xf:if>
					</ul>
				</div>
				<xf:if is="$mediaItem.description">
					<div class="contentRow-snippet">
						{{ structured_text(snippet($mediaItem.description, 100)) }}
					</div>
				</xf:if>
			</div>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xfmg_gallery_wrapper" version_id="902000038" version_string="2.0.0 Beta 8"><![CDATA[{$innerContent|raw}

<xf:page option="sideNavTitle">{{ phrase('navigation') }}</xf:page>

<xf:sidenav key="xfmgSideNav">
	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('navigation') }}</h3>
			<div class="block-body">
				<xf:if is="$categoryTree AND $categoryTree.count()">
					<xf:macro template="xfmg_category_list_macros" name="simple_category_list"
						arg-selected="{$selected}"
						arg-pathToSelected="{$categoryTree.getPathTo($selected)}"
						arg-children="{$categoryTree}"
						arg-extras="{$categoryExtras}"
						arg-isActive="{{ true }}" />

					<hr class="block-separator" />
				</xf:if>
				<xf:if contentcheck="true">
					<xf:contentcheck>
						<xf:if is="$xf.visitor.canViewAlbums() OR $hasAlbumCategories">
							<a href="{{ link('media/albums') }}" class="blockLink{{ $selected == 'browseAlbums' ? ' is-selected' : '' }}">{{ phrase('xfmg_browse_albums') }}</a>
						</xf:if>

						<xf:if is="$xf.visitor.user_id">
							<a href="{{ link('media/users', $xf.visitor) }}" class="blockLink{{ $selected == 'yourMedia' ? ' is-selected' : '' }}">{{ phrase('xfmg_your_media') }}</a>

							<xf:if is="$xf.visitor.canViewAlbums() OR $hasAlbumCategories">
								<a href="{{ link('media/albums/users', $xf.visitor) }}" class="blockLink{{ $selected == 'yourAlbums' ? ' is-selected' : '' }}">{{ phrase('xfmg_your_albums') }}</a>
							</xf:if>
						</xf:if>
					</xf:contentcheck>
				</xf:if>
			</div>
		</div>
	</div>
</xf:sidenav>

<xf:widgetpos id="xfmg_gallery_wrapper_sidenav" position="sidenav" />]]></template>
  <template type="public" title="xfmg_inline_mod_album_change_privacy" version_id="902000470" version_string="2.0.4"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_move_albums') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xfmg_you_sure_you_want_to_change_privacy_of_x_albums', {'total': $total}) }}
			</xf:inforow>

			<xf:inforow>
				<div class="blockMessage blockMessage--important"><strong>{{ phrase('note:') }}</strong> {{ phrase('xfmg_changing_privacy_in_this_way_will_overwrite_existing_privacy') }}</div>
			</xf:inforow>

			<xf:checkboxrow>
				<xf:option name="change_view"
					label="{{ phrase('xfmg_change_who_can_view_media_items') }}">
					<xf:dependent>
						<xf:macro template="xfmg_album_edit" name="change_privacy_view"
							arg-album="{$albums|first}"
							arg-viewUsers="{$viewUsers}"
							arg-row="{{ false }}" />
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="change_add"
					label="{{ phrase('xfmg_change_who_can_add_media_items') }}">
					<xf:dependent>
						<xf:macro template="xfmg_album_edit" name="change_privacy_add"
							arg-album="{$albums|first}"
							arg-addUsers="{$addUsers}"
							arg-row="{{ false }}" />
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>

			<xf:if is="$canSendAlert">
				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ $total == 1 }}" />
			</xf:if>
		</div>
		<xf:submitrow icon="confirm" />
	</div>

	<xf:foreach loop="$albums" value="$album">
		<xf:hiddenval name="ids[]">{$album.album_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_album</xf:hiddenval>
	<xf:hiddenval name="action">change_privacy</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_inline_mod_album_delete" version_id="902000470" version_string="2.0.4"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_delete_albums') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_delete_x_albums', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:if is="$canSendAlert">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$albums" value="$album">
		<xf:hiddenval name="ids[]">{$album.album_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_album</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_inline_mod_album_move" version_id="902000470" version_string="2.0.4"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_move_albums') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_move_x_albums', {'total': $total}) }}</xf:inforow>

			<xf:selectrow name="target_category_id" value="{$first.category_id}"
				label="{{ phrase('xfmg_destination_category') }}"
				explain="{{ phrase('xfmg_must_be_album_category_or_select_no_category_to_make_albums') }}">
				<xf:option value="0">{{ phrase('(xfmg_no_category)') }}</xf:option>
				<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.category_id}" disabled="{{ $treeEntry.record.category_type != 'album' ? 'disabled' : '' }}">{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:selectrow>

			<xf:if is="$canSendAlert">
				<xf:checkboxrow>
					<xf:option name="notify_watchers" value="1" selected="{{ $total == 1 }}">{{ phrase('xfmg_notify_members_watching_destination_category') }}</xf:option>
				</xf:checkboxrow>

				<xf:macro template="helper_action" name="author_alert" arg-selected="{{ $total == 1 }}" />
			</xf:if>
		</div>
		<xf:submitrow icon="move" />
	</div>

	<xf:foreach loop="$albums" value="$album">
		<xf:hiddenval name="ids[]">{$album.album_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_album</xf:hiddenval>
	<xf:hiddenval name="action">move</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_inline_mod_comment_delete" version_id="902000470" version_string="2.0.4"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_delete_comments') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_delete_x_comments', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:if is="$canSendAlert">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$comments" value="$comment">
		<xf:hiddenval name="ids[]">{$comment.comment_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_comment</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_inline_mod_media_add_watermark" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_watermark_media_items') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_add_watermark_to_x_media_items', {'total': $total}) }}</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xfmg_watermark') }}" rowtype="simple" />
	</div>

	<xf:foreach loop="$mediaItems" value="$mediaItem">
		<xf:hiddenval name="ids[]">{$mediaItem.media_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_media</xf:hiddenval>
	<xf:hiddenval name="action">add_watermark</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_inline_mod_media_delete" version_id="902000470" version_string="2.0.4"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_delete_media_items') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_delete_x_media_items', {'total': $total}) }}</xf:inforow>

			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$canHardDelete}" />

			<xf:if is="$canSendAlert">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" />
	</div>

	<xf:foreach loop="$mediaItems" value="$mediaItem">
		<xf:hiddenval name="ids[]">{$mediaItem.media_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_media</xf:hiddenval>
	<xf:hiddenval name="action">delete</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_inline_mod_media_move" version_id="902000470" version_string="2.0.4"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_move_media_items') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_move_x_media_items', {'total': $total|number}) }}</xf:inforow>

			<xf:macro template="xfmg_media_move_chooser" name="move_chooser" arg-categoryTree="{$categoryTree}" />

			<xf:if is="$canSendAlert">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="move" />
	</div>

	<xf:foreach loop="$mediaItems" value="$mediaItem">
		<xf:hiddenval name="ids[]">{$mediaItem.media_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_media</xf:hiddenval>
	<xf:hiddenval name="action">move</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_inline_mod_media_remove_watermark" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:title>{{ phrase('xfmg_inline_moderation_unwatermark_media_items') }}</xf:title>

<xf:form action="{{ link('inline-mod') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_remove_watermark_from_x_media_items', {'total': $total}) }}</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xfmg_remove_watermark') }}" rowtype="simple" />
	</div>

	<xf:foreach loop="$mediaItems" value="$mediaItem">
		<xf:hiddenval name="ids[]">{$mediaItem.media_id}</xf:hiddenval>
	</xf:foreach>

	<xf:hiddenval name="type">xfmg_media</xf:hiddenval>
	<xf:hiddenval name="action">remove_watermark</xf:hiddenval>
	<xf:hiddenval name="confirmed">1</xf:hiddenval>

	<xf:redirect url="{$redirect}" />
</xf:form>]]></template>
  <template type="public" title="xfmg_item_list.less" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[@_stripThumbSize: 50px;
@_thumbSize: xf-option('xfmgThumbnailDimensions.width', px);

.itemList
{
	display: flex;
	flex-flow: row wrap;
	margin: @xf-paddingSmall;

	&.itemList--strip
	{
		justify-content: center;
		min-height: @_stripThumbSize + (@xf-paddingSmall * 2);

		@media (max-width: @xf-responsiveNarrow)
		{
			min-height: @_stripThumbSize / 1.3 + (@xf-paddingSmall * 2);
		}

		@media (max-width: 360px)
		{
			min-height: @_stripThumbSize / 1.9 + (@xf-paddingSmall * 2);
		}
	}

	&.itemList--slider
	{
		display: block;
		margin: 0;

		.itemList-item--slider
		{
			margin: 0;
			display: none;

			.lightSlider--loaded &
			{
				display: block;
			}

			.itemList-itemTypeIcon
			{
				display: none;
			}
		}
	}
}

.itemList-item
{
	flex: auto;
	width: (@_thumbSize) / 1.6;
	max-width: @_thumbSize;
	margin: @xf-paddingSmall;

	position: relative;
	overflow: hidden;

	.itemList--strip &
	{
		justify-items: center;
		width: (@_stripThumbSize) / 1.6;
		max-width: @_stripThumbSize;
		margin-top: auto;
		margin-bottom: auto;

		opacity: 1;
		.m-transition(opacity);

		&.itemList-item--fading
		{
			opacity: 0 !important;
		}
	}

	@media (max-width: @xf-responsiveNarrow)
	{
		width: (@_thumbSize) / 2;

		.itemList--strip && // for extra specificity
		{
			max-width: (@_stripThumbSize) / 1.3;
		}
	}

	@media (max-width: 360px)
	{
		.itemList--strip &&
		{
			max-width: (@_stripThumbSize) / 1.9;
		}
	}

	&.itemList-item--placeholder
	{
		margin-top: 0;
		margin-bottom: 0;
		height: 0;

		.itemList--strip &
		{
			.xf-contentAltBase();
			.xf-blockBorder();

			margin-top: inherit;
			margin-bottom: inherit;
			height: initial;

			opacity: 0.7;
		}
	}
}

.itemList-button
{
	.xf-contentAltBase();
	.xf-blockBorder();

	width: 25px;
	border-radius: @xf-borderRadiusMedium;
	color: @xf-linkColor;

	display: block;
	position: relative;
	margin: @xf-paddingSmall;

	cursor: pointer;

	&.is-disabled
	{
		display: none;
	}

	&.is-loading
	{
		.xf-buttonDisabled();
		pointer-events: none;
		cursor: default;
	}
}

.itemList-button-icon
{
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);

	.m-faBase();
	font-size: 1.2em;

	.itemList-button--next &
	{
		&:before
		{
			.m-faContent(@fa-var-chevron-right, .63em, ltr);
			.m-faContent(@fa-var-chevron-left, .63em, rtl);
		}
	}

	.itemList-button--prev &
	{
		&:before
		{
			.m-faContent(@fa-var-chevron-left, .63em, ltr);
			.m-faContent(@fa-var-chevron-right, .63em, rtl);
		}
	}
}

.itemList-itemTypeIcon
{
	position: absolute;
	top: @xf-paddingMedium;
	right: @xf-paddingMedium;
	z-index: @zIndex-1;

	width: 20px;
	height: 20px;

	display: flex;
	align-items: center;
	justify-content: center;

	.m-textOutline(white, black, thin);
	color: #fff;
	opacity: 0.6;

	.has-touchevents &,
	.itemList-item:hover &,
	.itemList-item.is-mod-selected &
	{
		opacity: 1;
	}

	.m-faBase();

	&::after
	{
		font-size: @xf-fontSizeLargest;
	}
}

@_overlayHeight: 52px;

.itemList-itemOverlay
{
	width: 100%;
	height: @_overlayHeight;
	bottom: -@_overlayHeight;
	position: absolute;

	background-color: rgba(0, 0, 0, 0.6);
	.m-hiddenLinks();
	.m-transition();

	padding: 4px;
	overflow: hidden;

	.has-touchevents &,
	.itemList-item:hover &
	{
		bottom: 0;
	}

	.itemList-item.is-mod-selected &
	{
		bottom: 0;
		background: @xf-inlineModHighlightColor;
	}

	a:hover
	{
		text-decoration: none;
	}
}

.itemList-itemOverlayTop
{
	cursor: pointer;

	top: 3px;
	left: 3px;
	z-index: @zIndex-2 + 5; // above the state icon but below the filter menu

	width: 25px;
	height: 25px;
	border-radius: @xf-borderRadiusMedium;

	background: rgba(0, 0, 0, 0.4);

	display: flex;
	align-items: center;
	justify-content: center;

	opacity: 0;

	.has-touchevents &,
	.itemList-item:hover &
	{
		opacity: 1;
	}

	.itemList-item.is-mod-selected &
	{
		opacity: 1;
		background: @xf-inlineModHighlightColor;

		&.iconic
		{
			> input
			{
				+ i:before
				{
					color: @xf-textColorDimmed;
				}

				&:hover
				{
					+ i:before
					{
						color: @xf-textColorDimmed;
					}
				}
			}
		}
	}

	&&.iconic
	{
		display: flex;
		position: absolute;

		> input
		{
			+ i
			{
				&:before
				{
					color: #fff;
				}

				position: absolute;
				top: 2px;
				left: 6px;
			}

			&:hover
			{
				+ i:before
				{
					color: xf-intensify(#fff, 15%);
				}
			}
		}
	}
}

.itemInfoRow
{
	display: flex;
	align-items: center;
}

.itemInfoRow-avatar
{
	white-space: nowrap;
	word-wrap: normal;
	text-align: center;
}

.itemInfoRow-main
{
	flex: 1;
	min-width: 0;
	vertical-align: top;

	text-shadow: 0 0 2px rgba(0, 0, 0, 0.6);
	color: #fff;

	.itemList-item.is-mod-selected &
	{
		text-shadow: none;
		color: @xf-textColorDimmed;
	}

	&:before
	{
		// because of line height, there appears to be extra space at the top of this
		content: '';
		display: block;
		margin-top: -.18em;
	}
}

.itemInfoRow-title
{
	margin: 0;
	padding: 0 0 0 @xf-paddingSmall;
	font-size: @xf-fontSizeSmall;
	font-weight: @xf-fontWeightNormal;
	.m-overflowEllipsis();
}

.itemInfoRow-status
{
	margin: 0;
	padding: 0 0 0 @xf-paddingSmall;
	font-size: @xf-fontSizeSmallest;
	overflow: hidden;
	white-space: nowrap;
}]]></template>
  <template type="public" title="xfmg_item_view.less" version_id="902020053" version_string="2.2.0 Release Candidate 3"><![CDATA[.xfmgInfoBlock-title
{
	margin-bottom: @xf-paddingLarge;

	.xfmgInfoBlock--lightbox &
	{
		h2.p-title-value
		{
			font-size: @xf-fontSizeLarger;
		}
	}
}

.xfmgInfoBlock-status
{
	margin-bottom: @xf-paddingLarge;
}

.xfmgInfoBlock-originallyFrom
{
	font-size: @xf-fontSizeSmall;
	margin-bottom: @xf-paddingLarge;

	&:before
	{
		color: @xf-textColorFeature;
		.m-faBase();
		.m-faContent(@fa-var-paperclip, 1em);
	}
}

.xfmgInfoBlock-description
{
	margin-bottom: @xf-paddingLarge;

	.bbCodeBlock
	{
		font-size: @xf-fontSizeSmall;
	}
}

.xfmgInfoBlock-title + .actionBar,
.xfmgInfoBlock-originallyFrom + .actionBar
{
	margin-top: -@xf-paddingLarge;
}

.xfmgInfoBlock .actionBar-set
{
	font-size: @xf-fontSizeSmall;
	margin-top: @xf-paddingLarge;
}

.columnContainer
{
	display: flex;
}

.columnContainer-comments
{
	margin-right: @xf-paddingLarge;
	flex: 0 70%;
	min-width: 0;
}

.columnContainer-sidebar
{
	flex: 0 30%;
	min-width: 0;
}

@media (max-width: @xf-responsiveEdgeSpacerRemoval)
{
	.columnContainer
	{
		.columnContainer-sidebar
		{
			display: block;
			margin-left: 0;
			margin-right: 0;

			> *
			{
				margin-left: 0;
				margin-right: 0;
				min-width: 0;
			}
		}
	}
}

@_columnSidebarWidth: 350px;

@media (max-width: @xf-responsiveWide)
{
	.columnContainer
	{
		display: block;
	}

	.columnContainer-comments
	{
		margin-right: 0;
	}

	.columnContainer-sidebar
	{
		display: flex;
		flex-wrap: wrap;
		align-items: stretch;
		margin: (@xf-elementSpacer) -((@xf-pageEdgeSpacer) / 2) -(@xf-elementSpacer);
		width: auto;

		> *
		{
			margin: 0 ((@xf-pageEdgeSpacer) / 2) @xf-elementSpacer;
			min-width: @_columnSidebarWidth;
			flex: 1 1 @_columnSidebarWidth;

			&:last-child
			{
				margin-bottom: @xf-elementSpacer;
			}
		}

		// add an invisible block to ensure that the last row has the correct widths
		&:after
		{
			display: block;
			content: '';
			height: 0;
			margin: 0 ((@xf-pageEdgeSpacer) / 2);
			min-width: @_columnSidebarWidth;
			flex: 1 1 @_columnSidebarWidth;
		}

		.block-container
		{
			display: flex;
			flex-direction: column;
			height: 100%;

			.block-footer
			{
				margin-top: auto;
			}
		}
	}
}

{{ include('bb_code.less') }}]]></template>
  <template type="public" title="xfmg_media_add.less" version_id="902010012" version_string="2.1.0 Preview 2"><![CDATA[.block
{
	&.block--mediaList
	{
		margin-top: 0;
	}
}

.mediaList
{
	.m-listPlain();
	.m-clearFix();

	margin: 4px 0 0;

	> li
	{
		.xf-contentAltBase();
		.xf-blockBorder();
		border-radius: @xf-blockBorderRadius;

		margin-bottom: @xf-paddingMedium;
		padding: @xf-paddingMedium;

		.contentRow-main
		{
			padding-left: @xf-paddingMedium;

			.mediaItem-input
			{
				border-top: none;

				> dt
				{
					padding: 0;
				}
			}
		}

		&:last-child
		{
			margin-bottom: 0;
		}

		&.is-uploadError
		{
			.contentRow-title span // span needed due to opacity creating new stacking context
			{
				text-decoration: line-through;
				opacity: .5;
			}

			.contentRow-figure
			{
				opacity: .5;
			}
		}
	}

	&.mediaList--buttons
	{
		> .mediaList-button
		{
			float: left;
			width: 120px;
			height: 120px;

			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;

			margin-right: @xf-paddingLarge;
			margin-bottom: @xf-paddingMedium;

			&:last-child
			{
				margin-right: 0;
			}

			&.is-hidden
			{
				display: none;
			}

			.mediaList-inner
			{
				text-align: center;
				display: block;

				&.mediaList-inner--footer
				{
					position: absolute;
					bottom: 2px;
					margin-top: 1px;
				}

				&::before
				{
					.m-faBase();
					font-size: 45px;
					display: block;
				}

				&--upload::before { .m-faContent(@fa-var-upload); }
				&--link::before { .m-faContent(@fa-var-cloud-upload); }

				&:hover
				{
					text-decoration: none;
				}
			}
		}
	}
}

.mediaList-figure.contentRow-figure
{
	width: 100px;

	img
	{
		max-height: 100px;
		max-width: 100px;
	}
}

.mediaList-placeholder
{
	display: block;
	width: 100px;

	&:before
	{
		display: inline-block;
		.m-faBase();
		.m-faContent(@fa-var-camera);
		font-size: 60px;
		vertical-align: middle;
		color: @xf-textColorFeature;
		border-radius: 100%;
	}
}

.mediaList-progress
{
	position: relative;

	i
	{
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		background: @xf-progressBarColor;
		color: contrast(@xf-progressBarColor);
		border-radius: @xf-borderRadiusMedium;
		padding-right: .2em;
		text-align: right;
		font-style: normal;
		white-space: nowrap;
		min-width: 2em;

		.m-transition(width);
	}
}

.mediaList-error
{
	color: @xf-textColorAttention;
}

@media (max-width: @xf-responsiveNarrow)
{
	.mediaList-figure.contentRow-figure
	{
		width: 50px;

		img
		{
			max-height: 50px;
			max-width: 50px;
		}
	}

	.mediaList-placeholder
	{
		display: block;
		width: 50px;

		&:before
		{
			font-size: 30px;
		}
	}
}

.typesList
{
	.typesList-type
	{
		.xf-link();

		margin-right: @xf-paddingLarge;

		&:last-child
		{
			margin-right: 0;
		}

		&:hover
		{
			.xf-linkHover();
			text-decoration: none;
		}

		&::before
		{
			.m-faBase();
		}

		&--image::before { .m-faContent(@fa-var-image); }
		&--video::before { .m-faContent(@fa-var-video); }
		&--audio::before { .m-faContent(@fa-var-music); }
		&--embed::before { .m-faContent(@fa-var-cloud-upload); }
	}
}]]></template>
  <template type="public" title="xfmg_media_add_macros" version_id="902020570" version_string="2.2.5"><![CDATA[<xf:macro name="add_form"
	arg-album="{{ null }}"
	arg-category="{{ null }}"
	arg-canUpload="{{ false }}"
	arg-canEmbed="{{ false }}"
	arg-attachmentData="!"
	arg-createPersonalAlbum="{{ false }}"
	arg-allowCreateAlbum="{{ false }}">

	<xf:css src="xfmg_media_add.less" />

	<xf:js src="xfmg/media_add.js" min="1" />
	<xf:js prod="xf/attachment_manager-compiled.js" dev="vendor/flow.js/flow.min.js, xf/attachment_manager.js" />

	<xf:form action="{{ link('media/save-media') }}" ajax="true"
		data-xf-init="media-manager"
		data-media-action-url="{{ link('media/add-action') }}"
		data-action-button=".js-mediaAction"
		data-files-container=".js-mediaList"
		data-upload-template=".js-mediaAddTemplate"
		data-file-row=".js-mediaItem" >

		<div class="block block--mediaList">
			<div class="block-container">
				<div class="block-body block-row">
					<ul class="mediaList mediaList--buttons">
						<li class="mediaList-button{{ !$canUpload ? ' is-hidden' : '' }}">
							<xf:if is="$canUpload">
								<a href="{{ link('attachments/upload', null, {'type': 'xfmg_media', 'context': $attachmentData.context, 'hash': $attachmentData.hash}) }}"
									target="_blank" class="mediaList-inner mediaList-inner--upload js-attachmentUpload"
									data-accept=".{$attachmentData.constraints.extensions|join(',.')}">
									{{ phrase('xfmg_upload_file') }}
								</a>

								<xf:hiddenval name="attachment_hash">{$attachmentData.hash}</xf:hiddenval>
								<xf:hiddenval name="attachment_hash_combined">{{ {
									'type': 'xfmg_media',
									'context': $attachmentData.context,
									'hash': $attachmentData.hash
								}|json }}</xf:hiddenval>
							<xf:else />
								<div class="js-attachmentUpload"><!-- Placeholder upload button --></div>
							</xf:if>
						</li>
						<xf:if is="$canEmbed">
							<li class="mediaList-button">
								<a href="{{ link('media/embed-media', null, {'context': $attachmentData.context, 'create_album': ($createPersonalAlbum ?: null)}) }}"
									class="mediaList-inner mediaList-inner--link"
									data-xf-click="overlay"
									target="_blank" rel="nofollow">
									{{ phrase('xfmg_embed_media') }}
								</a>
							</li>
						</xf:if>
					</ul>

					<ul class="mediaList js-mediaList u-hidden"></ul>

					<xf:macro name="added_media_template" arg-album="{$album}" arg-category="{$category}" />
				</div>
				<xf:if is="!$allowCreateAlbum">
					<xf:submitrow rowtype="simple" icon="save" />
				</xf:if>
			</div>
		</div>

		<xf:if is="$allowCreateAlbum">
			<div class="block">
				<div class="block-container">
					<div class="block-body">
						<xf:textboxrow name="album[title]"
							maxlength="{{ max_length('XFMG:Album', 'title') }}"
							label="{{ phrase('xfmg_album_title') }}" />

						<xf:textarearow name="album[description]" autosize="true" rows="1"
							data-xf-init="user-mentioner"
							maxlength="{{ max_length('XFMG:Album', 'description') }}"
							label="{{ phrase('xfmg_album_description') }}">

							<xf:explain><xf:if is="$category">
									{{ phrase('xfmg_album_is_being_created_inside_x_category', {'title': $category.title}) }}
							</xf:if></xf:explain>
						</xf:textarearow>

						<xf:if is="!$category">
							<xf:if is="$album.canChangePrivacy()">
								<xf:macro template="xfmg_album_edit" name="change_privacy_view" arg-album="{$album}" arg-valueOverride="{$xf.options.xfmgDefaultViewPrivacy}" />
							<xf:else />
								<xf:hiddenval name="album[view_privacy]">{$xf.options.xfmgDefaultViewPrivacy}</xf:hiddenval>
							</xf:if>
						</xf:if>
					</div>
					<xf:submitrow rowtype="simple" icon="save" />
				</div>
			</div>
			<xf:if is="$category.category_id">
				<xf:hiddenval name="category_id">{$category.category_id}</xf:hiddenval>
			</xf:if>
			<xf:hiddenval name="album_id">0</xf:hiddenval>
		<xf:elseif is="$category.category_id" />
			<xf:hiddenval name="category_id">{$category.category_id}</xf:hiddenval>
		<xf:elseif is="$album.album_id" />
			<xf:hiddenval name="album_id">{$album.album_id}</xf:hiddenval>
		</xf:if>
	</xf:form>

	<xf:set var="$container" value="{{ $category ?: $album }}" />

	<xf:sidebar key="constraintStats">
		<div class="block">
			<div class="block-container">
				<div class="block-body block-row">
					<xf:if is="$container.hasPermission('maxImageWidth') > 0 AND $container.hasPermission('maxImageHeight') <= 0">
						<dl class="pairs pairs--justified">
							<dt>{{ phrase('xfmg_max_width') }}</dt>
							<dd>
								{$attachmentData.constraints.width|number}px
							</dd>
						</dl>
						<xf:elseif is="$container.hasPermission('maxImageWidth') <= 0 AND $container.hasPermission('maxImageHeight') > 0" />
						<dl class="pairs pairs--justified">
							<dt>{{ phrase('xfmg_max_height') }}</dt>
							<dd>
								{$attachmentData.constraints.height|number}px
							</dd>
						</dl>
						<xf:elseif is="$container.hasPermission('maxImageWidth') > 0 AND $container.hasPermission('maxImageHeight') > 0" />
						<dl class="pairs pairs--justified">
							<dt>{{ phrase('xfmg_max_dimensions') }}</dt>
							<dd>
								{$attachmentData.constraints.width|number}px x {$attachmentData.constraints.height|number}px
							</dd>
						</dl>
					</xf:if>

					<xf:if is="$container.hasPermission('maxFileSize') > 0">
						<dl class="pairs pairs--justified">
							<dt>{{ phrase('xfmg_max_file_size') }}</dt>
							<dd>
								{$attachmentData.constraints.size|file_size}
							</dd>
						</dl>
					</xf:if>

					<xf:if is="$container.hasPermission('maxAllowedStorage') > 0">
						<dl class="pairs pairs--justified">
							<dt>{{ phrase('xfmg_remaining_storage') }}</dt>
							<dd>
								<xf:if is="$xf.visitor.xfmg_media_quota < $attachmentData.constraints.total">
									<span data-xf-init="tooltip" title="{{ phrase('xfmg_using_x_of_your_y_quota', {'quota': $xf.visitor.xfmg_media_quota|file_size, 'total': $attachmentData.constraints.total|file_size})|for_attr }}">
										{{ ($attachmentData.constraints.total - $xf.visitor.xfmg_media_quota)|file_size }}
									</span>
								<xf:else />
									<span data-xf-init="tooltip" title="{{ phrase('xfmg_using_x_of_your_y_quota', {'quota': $attachmentData.constraints.total|file_size, 'total': $attachmentData.constraints.total|file_size})|for_attr }}">
										{{ 0|file_size }}
									</span>
								</xf:if>
							</dd>
						</dl>
					</xf:if>

					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_allowed_types') }}</dt>
						<dd>
							<ul class="typesList listInline listInline--bullet">
								<xf:foreach loop="$container.allowed_types" value="$type">
									<xf:if is="$type == 'embed'">
										<span class="typesList-type typesList-type--{$type}" data-xf-init="tooltip" title="{{ phrase('xfmg_you_can_embed_media_from_various_bb_code_media_sites')|for_attr }}"></span>
									<xf:else />
										<xf:if is="xfmg_allowed_media($type)">
											<span class="typesList-type typesList-type--{$type}" data-xf-init="tooltip" title="{{ phrase('xfmg_allowed_extensions:')|for_attr }} {{ xfmg_allowed_media($type)|join(', ')|for_attr }}"></span>
										</xf:if>
									</xf:if>
								</xf:foreach>
							</ul>
						</dd>
					</dl>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:macro>

<xf:macro name="added_media_template" arg-album="" arg-category="">
	<script type="text/template" class="js-mediaAddTemplate">
		<li class="js-mediaItem"
			{{ mustache('#attachment_id', 'data-attachment-id="{{attachment_id}}"') }}
			{{ mustache('#temp_media_id', 'data-temp-media-id="{{temp_media_id}}"') }}
			{{ mustache('#media_type', 'data-temp-media-type="{{media_type}}"') }}>

			<div class="contentRow">
				<span class="contentRow-figure mediaList-figure">
					<xf:mustache name="#thumbnail_date">
						<a href="{{ mustache('link') }}" target="_blank"><img src="{{ mustache('temp_thumbnail_url') }}" class="js-attachmentThumb" alt="{{ mustache('title') }}" /></a>
					</xf:mustache>
					<xf:mustache name="^thumbnail_date">
						<i class="mediaList-placeholder"></i>
					</xf:mustache>
				</span>
				<div class="contentRow-main">

					<xf:set var="$namePrefix">media[{{ mustache('temp_media_id') }}]</xf:set>

					<xf:mustache name="^uploading">
						<xf:textboxrow name="{$namePrefix}[title]" value="{{ mustache('title') }}"
							maxlength="{{ max_length('XFMG:MediaItem', 'title') }}"
							rowclass="mediaItem-input"
							rowtype="fullWidth noGutter"
							label="{{ phrase('title') }}" />

						<xf:textarearow name="{$namePrefix}[description]" value="{{ mustache('description') }}" autosize="true"
							maxlength="{{ max_length('XFMG:MediaItem', 'description') }}"
							rowclass="mediaItem-input"
							data-xf-init="user-mentioner"
							rowtype="fullWidth noGutter"
							label="{{ phrase('description') }}" />

						<div data-xf-init="attachment-on-insert"
							data-file-row=".js-mediaItem"
							data-href="{{ link('media/add/on-insert', null, {'album_id': $album.album_id, 'category_id': $category.category_id}) }}"
							data-link-data="{{ {'name_prefix': $namePrefix}|json }}"
							style="display: none;"></div>

						<xf:hiddenval name="{$namePrefix}[temp_media_id]">{{ mustache('temp_media_id') }}</xf:hiddenval>
						<xf:hiddenval name="{$namePrefix}[media_hash]">{{ mustache('media_hash') }}</xf:hiddenval>
						<xf:hiddenval name="{$namePrefix}[media_type]">{{ mustache('media_type') }}</xf:hiddenval>

						<xf:mustache name="#attachment_id">
							<xf:hiddenval name="{$namePrefix}[attachment_id]">{{ mustache('attachment_id') }}</xf:hiddenval>
						</xf:mustache>
						<xf:mustache name="#temp_media_embed_url">
							<xf:hiddenval name="{$namePrefix}[temp_media_embed_url]">{{ mustache('temp_media_embed_url') }}</xf:hiddenval>
						</xf:mustache>
						<xf:mustache name="#temp_media_tag">
							<xf:hiddenval name="{$namePrefix}[temp_media_tag]">{{ mustache('temp_media_tag') }}</xf:hiddenval>
						</xf:mustache>
					</xf:mustache>

					<span class="contentRow-extra u-jsOnly">
						<xf:mustache name="^uploading">
							<xf:button class="button--small js-mediaAction" data-action="delete">
								{{ phrase('button.delete') }}
							</xf:button>
						</xf:mustache>

						<xf:mustache name="#uploading">
							<xf:button class="button--small js-mediaAction" data-action="cancel">
								{{ phrase('button.cancel') }}
							</xf:button>
						</xf:mustache>
					</span>

					<div class="contentRow-title">
						<xf:mustache name="#uploading">
							<span>{{ mustache('filename') }}</span>
						</xf:mustache>
					</div>

					<xf:mustache name="#uploading">
						<div class="contentRow-spaced">
							<div class="mediaList-progress js-attachmentProgress"></div>
							<div class="mediaList-error js-attachmentError"></div>
						</div>
					</xf:mustache>

					<xf:mustache name="#requires_transcoding">
						<div class="contentRow-spaced">
							<div class="mediaList-error js-attachmentError">
								{{ phrase('xfmg_this_media_needs_to_be_processed_before_it_can_be_added_to_gallery') }}
							</div>
						</div>
					</xf:mustache>
				</div>
			</div>
		</li>
	</script>
</xf:macro>]]></template>
  <template type="public" title="xfmg_media_add_on_insert" version_id="902000034" version_string="2.0.0 Beta 4"><![CDATA[<xf:if contentcheck="true">
	<xf:contentcheck>
		<xf:macro template="custom_fields_macros" name="custom_fields_edit"
			arg-type="xfmgMediaFields"
			arg-set="{$mediaItem.custom_fields}"
			arg-namePrefix="{$namePrefix}[custom_fields]"
			arg-rowType="fullWidth noGutter"
			arg-rowClass="mediaItem-input"
			arg-editMode="{{ $mediaItem.getFieldEditMode() }}"
			arg-onlyInclude="{$container.field_cache}"
			arg-additionalFilters="{{ ['display_add_media'] }}" />
		<xf:if is="$container.canEditTags()">
			<xf:tokeninputrow name="{$namePrefix}[tags]" href="{{ link('misc/tag-auto-complete') }}"
				rowclass="mediaItem-input"
				rowtype="fullWidth noGutter"
				label="{{ phrase('tags') }}">

				<xf:explain>
					{{ phrase('multiple_tags_may_be_separated_by_commas') }}
					<xf:if is="$container.min_tags">
						{{ phrase('this_content_must_have_at_least_x_tags', {'min': $container.min_tags }) }}
					</xf:if>
				</xf:explain>
			</xf:tokeninputrow>
		</xf:if>
	</xf:contentcheck>
<xf:else />
	<!-- no content to display but suppress any no content errors -->
</xf:if>]]></template>
  <template type="public" title="xfmg_media_approve" version_id="902000035" version_string="2.0.0 Beta 5"><![CDATA[<xf:title>{{ phrase('xfmg_approve_media_item') }}</xf:title>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/approve', $mediaItem) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_approve_the_following:') }}
				<strong><a href="{{ link('media', $mediaItem) }}">{$mediaItem.title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_change_thumbnail" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_change_thumbnail') }}</xf:title>

<xf:css src="account_avatar.less" />

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/change-thumbnail', $mediaItem) }}" upload="true" ajax="true" data-force-flash-message="on" class="block">
	<div class="block-container">
		<ul class="block-body">
			<li class="block-row block-row--separated avatarControl">
				<div class="avatarControl-preview">
					{{ xfmg_thumbnail($mediaItem, '', false, 'default') }}
				</div>
				<div class="avatarControl-inputs">
					<xf:radio name="thumbnail_type">
						<xf:option value="default" selected="!{$mediaItem.custom_thumbnail_date}"
							label="{{ phrase('xfmg_use_default_thumbnail') }}"
							hint="{{ phrase('xfmg_thumbnail_type_default_hint') }}" />
					</xf:radio>
				</div>
			</li>

			<li class="block-row block-row--separated avatarControl">
				<div class="avatarControl-preview">
					{{ xfmg_thumbnail($mediaItem, 'xfmgThumbnail--upload', false, 'custom') }}
				</div>
				<div class="avatarControl-inputs">
					<xf:radio name="thumbnail_type">
						<xf:option value="custom" selected="{$mediaItem.custom_thumbnail_date}"
							label="{{ phrase('xfmg_use_custom_thumbnail') }}">
							<xf:dependent>
								<label>{{ phrase('xfmg_upload_new_custom_thumbnail') }}</label>
								<xf:upload name="upload" accept=".gif,.jpeg,.jpg,.jpe,.png" />
								<dfn class="inputChoices-explain">
									{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
										'width': $xf.options.xfmgThumbnailDimensions.width|number,
										'height': $xf.options.xfmgThumbnailDimensions.height|number
									}) }}
									<xf:if is="$mediaItem.media_type == 'audio' OR $mediaItem.media_type == 'video'">
										<br /><br />
										{{ phrase('xfmg_this_will_also_update_poster_image_for_this_media_item') }}
									</xf:if>
								</dfn>
							</xf:dependent>
						</xf:option>
					</xf:radio>
				</div>
			</li>
		</ul>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_delete" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_delete_media') }}</xf:title>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/delete', $mediaItem) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="helper_action" name="delete_type" arg-canHardDelete="{$mediaItem.canDelete('hard')}" />

			<xf:if is="$mediaItem.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_edit" version_id="902010470" version_string="2.1.4"><![CDATA[<xf:title>{{ phrase('xfmg_edit_media_item') }}</xf:title>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/edit', $mediaItem) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$mediaItem.title_}"
				maxlength="{{ max_length($mediaItem, 'title') }}"
				label="{{ phrase('title') }}" />

			<xf:textarearow name="description" value="{$mediaItem.description_}" autosize="true"
				maxlength="{{ max_length($mediaItem, 'description') }}"
				label="{{ phrase('description') }}" />

			<xf:if is="$mediaItem.media_type == 'embed'">
				<xf:textboxrow name="media_embed_url" value="{$mediaItem.media_embed_url}"
					label="{{ phrase('enter_media_url') }}" type="url" />
			</xf:if>

			<xf:if contentcheck="true">
				<hr class="formRowSep" />

				<xf:contentcheck>
					<xf:macro template="custom_fields_macros" name="custom_fields_edit"
						arg-type="xfmgMediaFields"
						arg-set="{$mediaItem.custom_fields}"
						arg-editMode="{{ $mediaItem.getFieldEditMode() }}"
						arg-onlyInclude="{{ $mediaItem.category_id ? $mediaItem.Category.field_cache : $mediaItem.Album.field_cache }}" />
				</xf:contentcheck>
			</xf:if>

			<xf:if is="$mediaItem.canSendModeratorActionAlert()">
				<hr class="formRowSep" />

				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_edit_image" version_id="902010270" version_string="2.1.2"><![CDATA[<xf:title>{{ phrase('xfmg_edit_image') }}</xf:title>

<xf:css src="xfmg_media_edit_image.less" />
<xf:js prod="xfmg/image_editor-compiled.js" dev="xfmg/vendor/cropper/cropper.js, xfmg/image_editor.js" />

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/edit-image', $mediaItem) }}" ajax="true" data-xf-init="image-editor" class="u-jsOnly">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:inforow rowtype="noPadding">
					<div class="media">
						<div class="media-container">
							<img src="{{ link('media/original', $mediaItem, {'d': $mediaItem.last_edit_date}) }}" class="js-mediaImg" />
						</div>
					</div>
				</xf:inforow>
				<xf:formrow rowtype="fullWidth noLabel">
					<div class="buttonGroup">
						<xf:button class="button--link js-ctrlDragMove" icon="move" data-xf-init="tooltip" title="{{ phrase('xfmg_canvas_drag_mode_move') }}" />
						<xf:button class="button--link button--iconOnly js-ctrlDragCrop" icon="crop" data-xf-init="tooltip" title="{{ phrase('xfmg_canvas_drag_mode_crop') }}" />
					</div>
					<div class="buttonGroup">
						<xf:button class="button--link button--iconOnly js-ctrlZoomIn" icon="zoom-in" data-xf-init="tooltip" title="{{ phrase('xfmg_zoom_in') }}" />
						<xf:button class="button--link button--iconOnly js-ctrlZoomOut" icon="zoom-out" data-xf-init="tooltip" title="{{ phrase('xfmg_zoom_out') }}" />
					</div>
					<div class="buttonGroup">
						<xf:button class="button--link button--iconOnly js-ctrlRotateLeft" icon="rotate-left" data-xf-init="tooltip" title="{{ phrase('xfmg_rotate_left') }}" />
						<xf:button class="button--link button--iconOnly js-ctrlRotateRight" icon="rotate-right" data-xf-init="tooltip" title="{{ phrase('xfmg_rotate_right') }}" />
					</div>
					<div class="buttonGroup">
						<xf:button class="button--link button--iconOnly js-ctrlFlipH" data-scale="-1" icon="flip-h" data-xf-init="tooltip" title="{{ phrase('xfmg_flip_horizontally') }}" />
						<xf:button class="button--link button--iconOnly js-ctrlFlipV" data-scale="-1" icon="flip-v" data-xf-init="tooltip" title="{{ phrase('xfmg_flip_vertically') }}" />
					</div>
					<xf:button class="button--link js-ctrlClear" icon="cancel" data-xf-init="tooltip" title="{{ phrase('xfmg_clear_selection') }}" />
				</xf:formrow>
			</div>
			<xf:submitrow icon="save" rowtype="simple">
				<xf:html>
					<xf:button type="submit" name="preview" icon="preview" />
				</xf:html>
			</xf:submitrow>
		</div>
	</div>
	<xf:hiddenval name="crop_data" class="js-cropData">{{ {
		'scaleX': 1,
		'scaleY': 1,
		'rotate': 0,
		'x': 0,
		'y': 0,
		'width': 0,
		'height': 0
	}|json }}</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_edit_image.less" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[.media
{
	img
	{
		max-width: 100%;
		max-height: 70vh;
	}
}

.editImagePreview
{
	img
	{
		max-height: 300px;
	}
}

.button
{
	&.button--icon
	{
		&--move { .m-buttonIcon(@fa-var-arrows, 1em); }
		&--crop { .m-buttonIcon(@fa-var-crop, 1em); }

		&--zoom-in { .m-buttonIcon(@fa-var-search-plus, 1em); }
		&--zoom-out { .m-buttonIcon(@fa-var-search-minus, 1em); }

		&--rotate-left { .m-buttonIcon(@fa-var-undo, 1em); }
		&--rotate-right { .m-buttonIcon(@fa-var-redo, 1em); }

		&--flip-h { .m-buttonIcon(@fa-var-arrows-h, 1em); }
		&--flip-v { .m-buttonIcon(@fa-var-arrows-v, 1em); } // actually .5em
	}
}

{{ include('xfmg_cropper.less') }}]]></template>
  <template type="public" title="xfmg_media_edit_image_preview" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_edit_image_preview') }}</xf:title>

<xf:css src="xfmg_media_edit_image.less" />

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/edit-image', $mediaItem) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowclass="editImagePreview">
				<img src="{$previewUri}" />
			</xf:inforow>
		</div>
		<xf:submitrow icon="save" />
	</div>

	<xf:hiddenval name="crop_data" class="js-cropData">{$cropData|json}</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_embed_media" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:title>{{ phrase('xfmg_embed_media') }}</xf:title>

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:js src="xfmg/media_add.js" min="1" />

<xf:form action="{{ link('media/embed-media', null, {'context': $context}) }}" class="block" ajax="true" data-xf-init="link-checker">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowclass="u-hidden u-hidden--transition js-pasteError">
				<div class="blockMessage blockMessage--error blockMessage--iconic"></div>
			</xf:inforow>

			<xf:textboxrow name="url" type="url" autofocus="autofocus" class="js-pasteInput"
				label="{{ phrase('enter_media_url') }}" />

			<xf:formrow
				label="{{ phrase('approved_sites') }}"
				hint="{{ phrase('you_may_insert_media_from_these_sources') }}">

				<ul class="listInline listInline--comma u-smaller">
					<xf:foreach loop="xfmg_allowed_media('embed')" key="$siteId" value="$site" if="$site.supported">
						<li><a href="{$site.site_url}" target="_blank">{$site.site_title}</a></li>
					</xf:foreach>
				</ul>
				<div class="formRow-explain">
					<a href="{{ link('help', {'page_name': 'bb-codes'}) }}#media" target="_blank">{{ phrase('help') }}</a>
				</div>
			</xf:formrow>
		</div>
		<xf:submitrow submit="{{ phrase('continue') }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_film_strip" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:macro template="xfmg_media_view_macros" name="media_film_strip"
	arg-mediaItem="{$mediaItem}"
	arg-filmStripParams="{$filmStripParams}" />]]></template>
  <template type="public" title="xfmg_media_filters" version_id="902010013" version_string="2.1.0 Preview 3"><![CDATA[<xf:form action="{$action}">
	<!--[XF:above_type]-->
	<xf:if is="$showTypeFilters">
		<div class="menu-row menu-row--separated">
			{{ phrase('type:') }}
			<div class="u-inputSpacer">
				<xf:select name="type" value="{$filters.type}">
					<xf:option value="">{{ phrase('any') }}</xf:option>
					<xf:option value="image">{{ phrase('xfmg_images') }}</xf:option>
					<xf:option value="audio">{{ phrase('xfmg_audio') }}</xf:option>
					<xf:option value="video">{{ phrase('xfmg_videos') }}</xf:option>
					<xf:option value="embed">{{ phrase('xfmg_embeds') }}</xf:option>
				</xf:select>
			</div>
		</div>
	</xf:if>

	<!--[XF:above_owned_by]-->
	<xf:if is="!$user">
		<div class="menu-row menu-row--separated">
			{{ phrase('xfmg_owned_by') }}
			<div class="u-inputSpacer">
				<xf:textbox name="owner" value="{{ $ownerFilter ? $ownerFilter.username : '' }}" ac="single" />
			</div>
		</div>

	</xf:if>

	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:if is="$type == 'media'">
				<xf:select name="order" value="{{ $filters.order ?: 'media_date' }}">
					<xf:option value="media_date">{{ phrase('date') }}</xf:option>
					<xf:option value="comment_count">{{ phrase('xfmg_comments') }}</xf:option>
					<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
					<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
					<xf:option value="view_count">{{ phrase('views') }}</xf:option>
				</xf:select>
			<xf:else />
				<xf:select name="order" value="{{ $filters.order ?: 'create_date' }}">
					<xf:option value="create_date">{{ phrase('date') }}</xf:option>
					<xf:option value="media_count">{{ phrase('xfmg_media_count') }}</xf:option>
					<xf:option value="comment_count">{{ phrase('xfmg_comments') }}</xf:option>
					<xf:option value="rating_weighted">{{ phrase('rating') }}</xf:option>
					<xf:option value="reaction_score">{{ phrase('reaction_score') }}</xf:option>
					<xf:option value="view_count">{{ phrase('views') }}</xf:option>
				</xf:select>
			</xf:if>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
	<xf:hiddenval name="comment_page">{$commentPage}</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_index" version_id="902020170" version_string="2.2.1"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_media') }}</xf:title>

<xf:macro template="xfmg_media_list_macros" name="media_create_message"
	arg-transcoding="{$transcoding}"
	arg-pendingApproval="{$pendingApproval}" />

<xf:macro template="xfmg_page_macros" name="xfmg_page_options" />

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:media', null, {'page': $page}) }}" />

<xf:wrap template="xfmg_gallery_wrapper" />

<xf:if is="$xf.visitor.canAddMedia()">
	<xf:pageaction>
		<xf:button href="{{ link('media/add') }}" class="button--cta" icon="add" data-xf-click="overlay">
			{{ phrase('xfmg_add_media...') }}
		</xf:button>
	</xf:pageaction>
</xf:if>

<xf:if is="$categoryTree AND $categoryTree.count() > 1 AND property('xfmgCategoryList') == 'always'">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:macro template="xfmg_category_list_macros" name="category_list"
					arg-children="{$categoryTree}" arg-extras="{$categoryExtras}" />
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="xfmg_media" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button" />
						</xf:if>
						<xf:if is="$xf.visitor.user_id">
							<xf:button href="{{ link('media/mark-viewed', null, {'date': $xf.time}) }}"
								class="button--link" overlay="true">
								{{ phrase('xfmg_mark_media_viewed') }}
							</xf:button>
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xfmg_media_list_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="media"
			arg-ownerFilter="{$ownerFilter}" />

		<div class="block-body">
			<xf:if is="$mediaItems is not empty">
				<xf:macro template="xfmg_media_list_macros" name="media_list"
					arg-mediaItems="{$mediaItems}"
					arg-prevPage="{$prevPage}"
					arg-nextPage="{$nextPage}"
					arg-setupLightbox="{$xf.options.xfmgLightboxNavigation}" />
				<xf:if is="$showDateLimitDisabler">
					<xf:macro name="date_limit_disabler" arg-page="{$page}" arg-filters="{$filters}" />
				</xf:if>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xfmg_there_is_no_media_matching_your_filters') }}</div>
				<xf:if is="$showDateLimitDisabler">
					<xf:macro name="date_limit_disabler" arg-page="{$page}" arg-filters="{$filters}" />
				</xf:if>
			<xf:else />
				<xf:if is="$showDateLimitDisabler">
					<div class="block-row">{{ phrase('xfmg_there_no_media_items_to_display') }}</div>
					<xf:macro name="date_limit_disabler" arg-page="{$page}" arg-filters="{$filters}" />
				<xf:else />
					<div class="block-row">{{ phrase('xfmg_no_media_has_been_added_yet') }}</div>
				</xf:if>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:macro name="date_limit_disabler" arg-page="!" arg-filters="!">
	<div class="blockMessage blockMessage--highlight blockMessage--small blockMessage--center">
		<a href="{{ link('media', null, $filters + {'page': $page, 'no_date_limit': 1}) }}">
			{{ phrase('show_older_items') }}
		</a>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xfmg_media_lightbox_index" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<div class="js-moreItems">
	<xf:if is="$mediaItems is not empty">
		<xf:macro name="xfmg_media_list_macros::media_list"
			arg-mediaItems="{$mediaItems}"
			arg-prevPage="{$prevPage}"
			arg-nextPage="{$nextPage}"
			arg-setupLightbox="{{ false }}" />
	</xf:if>
</div>]]></template>
  <template type="public" title="xfmg_media_lightbox_sidebar" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:title>{$mediaItem.title}</xf:title>
<xf:h1 hidden="true" />

<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:js src="xf/comment.js" min="1" />
<xf:css src="xfmg_media_view.less" />
<xf:css src="xfmg_comment.less" />

<div class="block">
	<div class="block-container block-container--none">
		<div class="block-body block-row">
			<div class="xfmgInfoBlock xfmgInfoBlock--lightbox">

				<xf:if contentcheck="true">
					<div class="xfmgInfoBlock-status">
						<xf:contentcheck>
							<xf:macro template="xfmg_media_view_macros" name="media_status" arg-mediaItem="{$mediaItem}" arg-block="{{ false }}" />
						</xf:contentcheck>
					</div>
				</xf:if>

				<div class="xfmgInfoBlock-title">
					<div class="contentRow contentRow--alignMiddle">
					<span class="contentRow-figure">
						<xf:avatar user="$mediaItem.User" size="s" defaultname="{$mediaItem.username}" />
					</span>
						<div class="contentRow-main">
							<h2 class="contentRow-title p-title-value"><xf:h1 /></h2>
							<div class="contentRow-lesser p-description">
								<ul class="listInline listInline--bullet">
									<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_media_owner')|for_attr }}" /> <xf:username user="{$mediaItem.User}" defaultname="{$mediaItem.username}" class="u-concealed" /></li>
									<li><xf:fa icon="fa-clock" title="{{ phrase('xfmg_date_added')|for_attr }}" /> <xf:date time="{$mediaItem.media_date}" /></li>
									<xf:if is="$xf.options.enableTagging AND ($mediaItem.canEditTags() OR $mediaItem.tags)">
										<li>
											<xf:macro template="tag_macros" name="list"
												arg-tags="{$mediaItem.tags}"
												arg-tagList="tagList--mediaItem-{$mediaItem.media_id}"
												arg-editLink="{{ $mediaItem.canEditTags() ? link('media/tags', $mediaItem) : '' }}" />
										</li>
									</xf:if>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<xf:if is="$mirrorContainer">
					<div class="xfmgInfoBlock-originallyFrom">
						{{ phrase('xfmg_originally_posted_in_x', {'link': $mirrorContainer.link, 'title': $mirrorContainer.title}) }}
					</div>
				</xf:if>

				<xf:if is="$mediaItem.description">
					<div class="xfmgInfoBlock-description">
						<div class="bbCodeBlock bbCodeBlock--expandable js-expandWatch">
							<div class="bbCodeBlock-content">
								<div class="bbCodeBlock-expandContent js-expandContent">
									{{ structured_text($mediaItem.description) }}
								</div>
								<div class="bbCodeBlock-expandLink js-expandLink"><a role="button" tabindex="0">{{ phrase('click_to_expand') }}</a></div>
							</div>
						</div>
					</div>
				</xf:if>

				<xf:macro template="custom_fields_macros" name="custom_fields_view"
					arg-type="xfmgMediaFields"
					arg-group="below_media"
					arg-onlyInclude="{{ $mediaItem.category_id ? $mediaItem.Category.field_cache : $mediaItem.Album.field_cache }}"
					arg-set="{$mediaItem.custom_fields}" />

				<xf:if contentcheck="true">
					<div class="actionBar">
						<xf:contentcheck>
							<xf:if contentcheck="true">
								<div class="actionBar-set actionBar-set--external">
									<xf:contentcheck>
										<xf:react content="{$mediaItem}" link="media/react" list="< .js-mediaInfoBlock | .js-reactionsList" />
									</xf:contentcheck>
								</div>
							</xf:if>

							<xf:if contentcheck="true">
								<div class="actionBar-set actionBar-set--internal">
									<xf:contentcheck>
										<xf:if is="$mediaItem.canReport()">
											<a href="{{ link('media/report', $mediaItem) }}"
												class="actionBar-action actionBar-action--report"
												data-xf-click="overlay">{{ phrase('report_verb') }}</a>
										</xf:if>

										<xf:set var="$hasActionBarMenu" value="{{ false }}" />
										<xf:if is="$mediaItem.canEdit()">
											<a href="{{ link('media/edit', $mediaItem) }}"
												class="actionBar-action actionBar-action--edit actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('edit') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$mediaItem.canDelete()">
											<a href="{{ link('media/delete', $mediaItem) }}"
												class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('delete') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$mediaItem.canCleanSpam()">
											<a href="{{ link('spam-cleaner', $mediaItem) }}"
												class="actionBar-action actionBar-action--spam actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('spam') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$xf.visitor.canViewIps() AND $mediaItem.ip_id">
											<a href="{{ link('media/ip', $mediaItem) }}"
												class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('ip') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>
										<xf:if is="$mediaItem.canWarn()">
											<a href="{{ link('media/warn', $mediaItem) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										<xf:elseif is="$mediaItem.warning_id AND $xf.visitor.canViewWarnings()" />
											<a href="{{ link('warnings', {'warning_id': $mediaItem.warning_id}) }}"
												class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
												data-xf-click="overlay">{{ phrase('view_warning') }}</a>
											<xf:set var="$hasActionBarMenu" value="{{ true }}" />
										</xf:if>

										<xf:if is="$hasActionBarMenu">
											<a class="actionBar-action actionBar-action--menuTrigger"
												data-xf-click="menu"
												title="{{ phrase('more_options')|for_attr }}"
												role="button"
												tabindex="0"
												aria-expanded="false"
												aria-haspopup="true">&#8226;&#8226;&#8226;</a>

											<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
												<div class="menu-content">
													<h4 class="menu-header">{{ phrase('more_options') }}</h4>
													<div class="js-menuBuilderTarget"></div>
												</div>
											</div>
										</xf:if>
									</xf:contentcheck>
								</div>
							</xf:if>
						</xf:contentcheck>
					</div>
				</xf:if>

				<div class="reactionsBar js-reactionsList {{ $mediaItem.reactions ? 'is-active' : '' }}">
					<xf:reactions content="{$mediaItem}" link="media/reactions" />
				</div>
			</div>
		</div>
	</div>

	<div class="block-outer block-outer--after block-outer--padded">
		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:if is="$mediaItem.canRate()">
						<xf:button href="{{ link('media/media-ratings/rate', $mediaItem) }}" overlay="true">
							{{ phrase('leave_rating') }}
						</xf:button>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="buttonGroup">
							<xf:contentcheck>
								<xf:if is="$mediaItem.canUndelete() AND $mediaItem.media_state == 'deleted'">
									<xf:button href="{{ link('media/undelete', $mediaItem) }}" class="button--link" overlay="true">
										{{ phrase('undelete') }}
									</xf:button>
								</xf:if>
								<xf:if is="$mediaItem.canApproveUnapprove() AND $mediaItem.media_state == 'moderated'">
									<xf:button href="{{ link('media/approve', $mediaItem) }}" class="button--link" overlay="true">
										{{ phrase('approve') }}
									</xf:button>
								</xf:if>
								<xf:if is="$mediaItem.canWatch()">
									<xf:button href="{{ link('media/watch', $mediaItem) }}" class="button--link"
										data-xf-click="switch-overlay"
										data-sk-watch="{{ phrase('watch') }}"
										data-sk-unwatch="{{ phrase('unwatch') }}">

										<xf:if is="{$mediaItem.Watch.{$xf.visitor.user_id}}">
											{{ phrase('unwatch') }}
										<xf:else />
											{{ phrase('watch') }}
										</xf:if>
									</xf:button>
								</xf:if>
								<xf:macro template="bookmark_macros" name="button"
									arg-content="{$mediaItem}"
									arg-class="button--link"
									arg-confirmUrl="{{ link('media/bookmark', $mediaItem) }}" />

								<xf:if contentcheck="true">
									<div class="buttonGroup-buttonWrapper">
										<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options') }}">&#8226;&#8226;&#8226;</xf:button>
										<div class="menu" data-menu="menu" aria-hidden="true">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<xf:contentcheck>
													<!--[XF:media_tools_menu:top]-->
													<xf:if is="$mediaItem.canSetAsAvatar()">
														<a href="{{ link('media/set-as-avatar', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">
															{{ phrase('xfmg_set_as_avatar') }}
														</a>
														<xf:if is="$avatarUpdated">
															<a href="{{ link('account/avatar') }}" data-xf-click="overlay" data-load-auto-click="true" style="display: none"></a>
														</xf:if>
													</xf:if>
													<xf:if is="$mediaItem.canEdit()">
														<a href="{{ link('media/edit', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_edit_media_item') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canEditImage()">
														<a href="{{ link('media/edit-image', $mediaItem) }}" class="menu-linkRow">{{ phrase('xfmg_edit_image') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canChangeThumbnail()">
														<a href="{{ link('media/change-thumbnail', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_change_thumbnail') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canMove()">
														<a href="{{ link('media/move', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_move_media_item') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canDelete('soft')">
														<a href="{{ link('media/delete', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_delete_media_item') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canViewModeratorLogs()">
														<a href="{{ link('media/moderator-actions', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('moderator_actions') }}</a>
													</xf:if>
													<!--[XF:media_tools_menu:before_footer]-->
												</xf:contentcheck>
											</div>
										</div>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</xf:if>
	</div>
</div>

<div class="block">

	<div class="block-container block-container--none">
		<h3 class="block-formSectionHeader block-formSectionHeader--small">
			<span class="collapseTrigger collapseTrigger--block {{ is_toggled('xfmg_lightbox_media_information') ? 'is-active' : '' }}" data-xf-click="toggle" data-target="< :up:next" data-xf-init="toggle-storage" data-storage-key="xfmg_lightbox_media_information" data-storage-type="cookie">
				<span>{{ phrase('xfmg_media_information') }}</span>
			</span>
		</h3>
		<div class="block-body block-row block-body--collapsible">
			<xf:macro name="xfmg_media_view_macros::info_sidebar" arg-mediaItem="{$mediaItem}" arg-row="{{ false }}" />
		</div>

		<xf:if contentcheck="true">
			<h3 class="block-formSectionHeader block-formSectionHeader--small">
				<span class="collapseTrigger collapseTrigger--block {{ is_toggled('xfmg_lightbox_extra_information') ? 'is-active' : '' }}" data-xf-click="toggle" data-target="< :up:next" data-xf-init="toggle-storage" data-storage-key="xfmg_lightbox_extra_information" data-storage-type="cookie">
					<span>{{ phrase('xfmg_extra_information') }}</span>
				</span>
			</h3>
			<div class="block-body block-row block-body--collapsible">
				<xf:contentcheck><xf:macro name="xfmg_media_view_macros::extra_info_sidebar" arg-mediaItem="{$mediaItem}" arg-row="{{ false }}" /></xf:contentcheck>
			</div>
		</xf:if>

		<xf:if contentcheck="true">
			<xf:contentcheck>
				<xf:foreach loop="$mediaItem.getExtraFieldBlocks()" key="$fieldId" value="$definition">
					<xf:if is="$definition.hasValue({$mediaItem.custom_fields.{$fieldId}})">
						<h3 class="block-formSectionHeader block-formSectionHeader--small">
							<span class="collapseTrigger collapseTrigger--block {{ is_toggled('xfmg_lightbox_sidebar_' . $fieldId) ? 'is-active' : '' }}" data-xf-click="toggle" data-target="< :up:next" data-xf-init="toggle-storage" data-storage-key="xfmg_lightbox_sidebar_{$fieldId}" data-storage-type="cookie">
								<span>{$definition.title}</span>
							</span>
						</h3>
						<div class="block-body block-row block-body--collapsible">
							<xf:macro template="custom_fields_macros" name="custom_field_value"
								arg-definition="{$definition}"
								arg-value="{$mediaItem.custom_fields.{$fieldId}}" />
						</div>
					</xf:if>
				</xf:foreach>
			</xf:contentcheck>
		</xf:if>

		<xf:if contentcheck="true">
			<h3 class="block-formSectionHeader block-formSectionHeader--small">
				<span class="collapseTrigger collapseTrigger--block {{ is_toggled('xfmg_lightbox_exif_sidebar') ? 'is-active' : '' }}" data-xf-click="toggle" data-target="< :up:next" data-xf-init="toggle-storage" data-storage-key="xfmg_lightbox_exif_sidebar" data-storage-type="cookie">
					<span>{{ phrase('xfmg_image_metadata') }}</span>
				</span>
			</h3>
			<div class="block-body block-row block-body--collapsible">
				<xf:contentcheck><xf:macro name="xfmg_media_view_macros::exif_sidebar" arg-mediaItem="{$mediaItem}" arg-row="{{ false }}" /></xf:contentcheck>
			</div>
		</xf:if>

		<xf:if is="$mediaItem.canViewComments()">
			<h3 class="block-formSectionHeader block-formSectionHeader--small">
				<span>{{ phrase('xfmg_comments') }}</span>
			</h3>
			<div class="block-body block-row">
				<div class="message-responses js-messageResponses">
					<xf:set var="$firstComment" value="{$comments|first}" />
					<xf:set var="$lastComment" value="{$comments|last}" />
					<xf:if is="$comments is not empty">
						<div class="js-replyNewMessageContainer">
							<xf:if is="$loadMore">
								<div class="message-responseRow js-commentLoader">
									<a href="{{ link('media/load-previous-comments', $mediaItem, {'before': $firstComment.comment_date}) }}"
										data-xf-click="comment-loader"
										data-container=".js-commentLoader"
										rel="nofollow">{{ phrase('view_previous_comments...') }}</a>
								</div>
							</xf:if>
							<xf:foreach loop="$comments" value="$comment">
								<xf:if is="$comment.comment_state == 'deleted'">
									<xf:macro name="xfmg_comment_macros::comment_deleted_lightbox" arg-comment="{$comment}" arg-content="{$mediaItem}" arg-linkPrefix="media/media-comments" />
								<xf:else />
									<xf:macro name="xfmg_comment_macros::comment_lightbox" arg-comment="{$comment}" arg-content="{$mediaItem}" arg-linkPrefix="media/media-comments" />
								</xf:if>
							</xf:foreach>
						</div>
					<xf:else />
						<div class="js-replyNewMessageContainer"></div>
					</xf:if>
					<xf:set var="$isPreRegComment" value="{{ $mediaItem.canAddCommentPreReg() }}" />
					<xf:if is="$mediaItem.canAddComment() OR $isPreRegComment">
						<xf:js src="xf/message.js" min="1" />
						<div class="message-responseRow">
							<xf:form action="{{ link('media/media-comments/add-comment', $mediaItem, {'lightbox': true}) }}" ajax="true" class="comment"
								data-xf-init="quick-reply"
								data-message-container="< .js-messageResponses | .js-replyNewMessageContainer">

								<div class="comment-inner">
									<span class="comment-avatar">
										<xf:avatar user="{$xf.visitor}" size="xxs" />
									</span>
									<div class="comment-main">
										<div class="editorPlaceholder" data-xf-click="editor-placeholder">
											<div class="editorPlaceholder-editor is-hidden">
												<xf:macro template="quick_reply_macros" name="editor"
													arg-minHeight="40"
													arg-placeholder="{{ phrase('write_comment...') }}"
													arg-submitText="{{ phrase('post_comment') }}"
													arg-deferred="{{ true }}"
													arg-simpleSubmit="{{ true }}"
													arg-lastDate="{$lastComment.comment_date}"
													arg-showGuestControls="{{ !$isPreRegComment }}" />
											</div>
											<div class="editorPlaceholder-placeholder">
												<div class="input"><span class="u-muted"> {{ phrase('write_comment...') }}</span></div>
											</div>
										</div>
									</div>
								</div>
							</xf:form>
						</div>
					</xf:if>
				</div>
			</div>
		</xf:if>
	</div>
</div>

<xf:if contentcheck="true">
	<div class="block">
		<div class="block-container block-container--none">
			<div class="block-body block-row">
				<xf:contentcheck>
				<xf:macro template="share_page_macros" name="buttons"
					arg-iconic="{{ true }}"
					arg-pageUrl="{{ link('canonical:media', $mediaItem) }}"
					arg-pageTitle="{$mediaItem.title}"
					arg-pageDesc="{$mediaItem.description}"
					arg-pageImage="{$mediaItem.getCurrentThumbnailUrl(true)}" />
				</xf:contentcheck>
			</div>
		</div>
	</div>
</xf:if>
]]></template>
  <template type="public" title="xfmg_media_lightbox_view" version_id="902020052" version_string="2.2.0 Release Candidate 2"><![CDATA[<xf:page option="template" value="" />

<div><xf:if is="$mediaItem.media_type == 'video'">
	<video preload="metadata" controls poster="{$mediaItem.poster_url}" class="fancybox-video">
		<source src="{$mediaItem.getVideoUrl()}" type="video/mp4" />
		<div class="bbMediaWrapper-fallback">{{ phrase('your_browser_is_not_able_to_display_this_video') }}</div>
	</video>
<xf:elseif is="$mediaItem.media_type == 'audio'" />
	<video preload="metadata" controls poster="{$mediaItem.poster_url}" class="fancybox-video">
		<source src="{$mediaItem.getAudioUrl()}" type="audio/mpeg" />
		<div class="bbMediaWrapper-fallback">{{ phrase('xfmg_your_browser_is_not_able_to_play_this_audio') }}</div>
	</video>
<xf:elseif is="$mediaItem.media_type == 'embed'" />
	<div class="js-embedContent"
		data-media-site-id="{$mediaItem.getMediaSiteId()}"
		data-site-media-id="{$mediaItem.getSiteMediaId()}">
		{{ bb_code($mediaItem.media_tag, 'xfmg_media', $mediaItem) }}
	</div>
</xf:if></div>]]></template>
  <template type="public" title="xfmg_media_list.less" version_id="902020570" version_string="2.2.5"><![CDATA[.itemList-itemTypeIcon
{
	&.itemList-itemTypeIcon--image
	{
		&::after
		{
			.m-faContent(@fa-var-image);
		}

		display: none;
	}

	&.itemList-itemTypeIcon--embed
	{
		&::after
		{
			.m-faContent(@fa-var-photo-video);
		}
	}

	&.itemList-itemTypeIcon--video
	{
		&::after
		{
			.m-faContent(@fa-var-video);
		}
	}

	&.itemList-itemTypeIcon--audio
	{
		&::after
		{
			.m-faContent(@fa-var-music);
		}
	}

	&.itemList-itemTypeIcon--embed
	{
		&--applemusic
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-apple); }
		}

		&--facebook
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-facebook); }
		}

		&--flickr
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-flickr); }
		}

		&--instagram
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-instagram); }
		}

		&--pinterest
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-pinterest-square); }
		}

		&--reddit
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-reddit-alien); }
		}

		&--soundcloud
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-soundcloud); }
		}

		&--spotify
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-spotify); }
		}

		&--tumblr
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-tumblr-square); }
		}

		&--twitch
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-twitch); }
		}

		&--twitter
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-twitter); }
		}

		&--vimeo
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-vimeo); }
		}

		&--youtube
		{
			.m-faBase('Brands');
			&::after { .m-faContent(@fa-var-youtube); }
		}
	}
}

{{ include('xfmg_item_list.less') }}]]></template>
  <template type="public" title="xfmg_media_list_macros" version_id="902020052" version_string="2.2.0 Release Candidate 2"><![CDATA[<xf:macro template="xfmg_media_list_macros" name="media_create_message" arg-transcoding="{$transcoding}" arg-pendingApproval="{$pendingApproval}">
	<xf:if is="$transcoding">
		<div class="blockMessage blockMessage--important">
			{{ phrase('xfmg_one_or_more_of_your_videos_needs_to_be_processed') }}
		</div>
	</xf:if>

	<xf:if is="$pendingApproval">
		<div class="blockMessage blockMessage--important">
			{{ phrase('content_submitted_displayed_pending_approval') }}
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="media_list" arg-mediaItems="!" arg-allowInlineMod="{{ true }}" arg-forceInlineMod="{{ false }}" arg-prevPage="{{ null }}" arg-nextPage="{{ null }}" arg-setupLightbox="{{ true }}">
	<xf:css src="xfmg_media_list.less" />

	<xf:if is="$setupLightbox">
		<xf:macro name="lightbox_macros::setup" arg-canViewAttachments="{{ true }}" />
		<xf:js src="xf/embed.js" min="1" />
	</xf:if>

	<div class="itemList js-lbContainer"
		data-xf-init="{{ $setupLightbox ? 'lightbox' : '' }}"
		data-lb-infobar="0"
		data-lb-slide-show="0"
		data-lb-thumbs-auto="0"
		data-lb-universal="1"
		data-lb-id="xfmg-media"
		data-lb-history="1"
		data-lb-prev="{$prevPage}"
		data-lb-next="{$nextPage}">
		<xf:foreach loop="$mediaItems" value="$mediaItem">
			<xf:macro name="media_list_item"
				arg-mediaItem="{$mediaItem}"
				arg-allowInlineMod="{$allowInlineMod}"
				arg-forceInlineMod="{$forceInlineMod}" />
		</xf:foreach>
		<xf:macro name="media_list_placeholders" />
	</div>
</xf:macro>

<xf:macro name="list_filter_bar" arg-filters="!" arg-baseLinkPath="!" arg-linkData="{{ null }}" arg-ownerFilter="{{ null }}">
	<xf:set var="$sortOrders" value="{{ {
		'media_date': phrase('date'),
		'comment_count': phrase('xfmg_comments'),
		'rating_weighted': phrase('rating'),
		'reaction_score': phrase('reaction_score'),
		'view_count': phrase('views')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.type">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('type', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('type:') }}</span>
								<xf:if is="$filters.type == 'image'">
									{{ phrase('xfmg_images') }}
								<xf:elseif is="$filters.type == 'audio'" />
									{{ phrase('xfmg_audio') }}
								<xf:elseif is="$filters.type == 'video'" />
									{{ phrase('xfmg_videos') }}
								<xf:elseif is="$filters.type == 'embed'" />
									{{ phrase('xfmg_embeds') }}
								</xf:if>
							</a></li>
						</xf:if>
						<xf:if is="$filters.owner_id AND $ownerFilter">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace('owner_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xfmg_media_owner:') }}</span>
								{$ownerFilter.username}</a></li>
						</xf:if>
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $linkData, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<xf:fa icon="{{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" />
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $linkData, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="media_list_item" arg-mediaItem="!" arg-allowInlineMod="{{ true }}" arg-forceInlineMod="{{ false }}">
	<xf:css src="xfmg_media_view.less" />
	<div class="itemList-item js-inlineModContainer{{ $mediaItem.isIgnored() ? ' is-ignored' : '' }}" data-author="{{ $mediaItem.User.username ?: $mediaItem.username }}">
		<xf:if is="$allowInlineMod">
			<xf:macro name="media_list_item_inline_mod"
				arg-mediaItem="{$mediaItem}"
				arg-forceInlineMod="{$forceInlineMod}" />
		</xf:if>
		<xf:macro name="media_list_item_type_icon" arg-mediaItem="{$mediaItem}" />
		<a href="{{ link('media', $mediaItem) }}" class="js-lbImage"
			data-src="{$mediaItem.lightbox_src}"
			data-type="{$mediaItem.lightbox_type}"
			data-lb-type-override="{{ ($mediaItem.lightbox_type == 'ajax') ? 'video' : '' }}"
			data-lb-sidebar="1"
			data-lb-caption-desc="{{ snippet($mediaItem.description, 100, {'stripBbCode': true}) }}"
			data-lb-caption-href="{{ link('media', $mediaItem) }}">
			<xf:macro name="media_list_item_thumb" arg-mediaItem="{$mediaItem}" />
		</a>
		<xf:macro name="media_list_item_overlay" arg-mediaItem="{$mediaItem}" />
	</div>
</xf:macro>

<xf:macro name="media_list_item_struct_item" arg-item="!" arg-chooseName="" arg-extraInfo="">
	<xf:css src="structured_list.less" />

	<xf:if is="$item.LastComment AND $item.LastComment.isUnread()">
		<xf:set var="$link">{{ link(($item.content_type == 'xfmg_media' ? 'media/media-comments/unread' : 'media/album-comments/unread'), $item) }}</xf:set>
	<xf:else />
		<xf:set var="$link">{{ link(($item.content_type == 'xfmg_media' ? 'media' : 'media/albums'), $item) }}</xf:set>
	</xf:if>
	<div class="structItem structItem--middle{{ ($item.LastComment AND $item.LastComment.isUnread()) ? ' is-unread' : '' }}" data-author="{{ $item.User.username ?: $item.username }}">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconFixedSmall">
			<div class="structItem-iconContainer">
				<a href="{$link}">
					{{ xfmg_thumbnail($item, 'xfmgThumbnail--small', true) }}
				</a>
				<xf:avatar user="$item.User" size="s"
					href="" class="avatar--separated structItem-secondaryIcon" />
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<div class="structItem-title">
				<a href="{$link}" class="" data-tp-primary="on">{$item.title}</a>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
						<xf:contentcheck>
							<xf:if is="{$extraInfo}">
								<li>{$extraInfo}</li>
							</xf:if>
							<xf:if is="$chooseName">
								<li><xf:checkbox standalone="true">
									<xf:if is="$item.content_type == 'xfmg_media'">
										<xf:option name="{$chooseName}[]" value="{$item.media_id}" class="js-chooseItem" />
									<xf:else />
										<xf:option name="{$chooseName}[]" value="{$item.album_id}" class="js-chooseItem" />
									</xf:if>
								</xf:checkbox></li>
							</xf:if>
						</xf:contentcheck>
					</ul>
				</xf:if>
				<ul class="structItem-parts">
					<li><xf:username user="{$item.User}" defaultname="{$item.username}" /></li>
					<xf:if is="$item.content_type == 'xfmg_media'">
						<li>{{ phrase('xfmg_media_item') }}</li>
						<li><xf:date time="{$item.media_date}" /></li>
					<xf:else />
						<li>{{ phrase('xfmg_album') }}</li>
						<li><xf:date time="{$item.create_date}" /></li>
					</xf:if>
					<xf:if is="$item.category_id AND $item.Category">
						<li>{{ phrase('xfmg_category:') }} {$item.Category.title}</li>
					</xf:if>
					<xf:if is="$item.content_type == 'xfmg_media' AND $item.Album">
						<li>{{ phrase('xfmg_album:') }} {$item.Album.title}</li>
					</xf:if>
				</ul>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--meta">
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('comments') }}</dt>
				<dd>{$item.comment_count|number}</dd>
			</dl>
		</div>
		<div class="structItem-cell structItem-cell--latest">
			<xf:if is="$item.LastComment">
				<a href="{{ link('media/comments', $item.LastComment) }}" rel="nofollow"><xf:date time="{$item.last_comment_date}" class="structItem-latestDate" /></a>
				<div class="structItem-minor">
					<xf:username user="{$item.LastCommenter}" />
				</div>
			<xf:else />
				-
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:macro name="media_list_item_slider" arg-mediaItem="!">
	<div class="itemList-item itemList-item--slider">
		<a href="{{ link('media', $mediaItem) }}">
			<xf:macro name="media_list_item_thumb" arg-mediaItem="{$mediaItem}" />
		</a>
	</div>
</xf:macro>

<xf:macro name="media_list_item_inline_mod" arg-mediaItem="!" arg-forceInlineMod="{{ false }}">
	<xf:if is="$mediaItem.canUseInlineModeration() OR $forceInlineMod">
		<xf:checkbox standalone="true">
			<xf:option value="{$mediaItem.media_id}"
				labelclass="itemList-itemOverlayTop"
				class="js-inlineModToggle"
				data-xf-init="{{ $mediaItem.canUseInlineModeration() ? 'tooltip' : '' }}"
				title="{{ $mediaItem.canUseInlineModeration() ? phrase('select_for_moderation') : '' }}" />
		</xf:checkbox>
	</xf:if>
</xf:macro>

<xf:macro name="media_list_item_type_icon" arg-mediaItem="!">
	<xf:if is="$mediaItem.media_type == 'embed'">
		<div class="itemList-itemTypeIcon itemList-itemTypeIcon--embed itemList-itemTypeIcon--embed--{$mediaItem.media_site_id}"></div>
	<xf:else />
		<div class="itemList-itemTypeIcon itemList-itemTypeIcon--{$mediaItem.media_type}"></div>
	</xf:if>
</xf:macro>

<xf:macro name="media_list_item_thumb" arg-mediaItem="!">
	{{ xfmg_thumbnail($mediaItem, 'xfmgThumbnail--fluid', true) }}
</xf:macro>

<xf:macro name="media_list_item_overlay" arg-mediaItem="!">
	<div class="itemList-itemOverlay">
		<div class="itemInfoRow">
			<div class="itemInfoRow-main">
				<h3 class="itemInfoRow-title">
					<a href="{{ link('media', $mediaItem) }}">{$mediaItem.title}</a>
				</h3>
				<div class="itemInfoRow-status">
					<ul class="listInline listInline--bullet">
						<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_media_owner')|for_attr }}" /> <xf:username user="$mediaItem.User" defaultname="{$mediaItem.username}" /></li>
						<li><xf:fa icon="fa-clock" title="{{ phrase('xfmg_date_added')|for_attr }}" /> {{ date($mediaItem.media_date, 'absolute') }}</li>
					</ul>
				</div>
				<div class="itemInfoRow-status">
					<ul class="listInline listInline--bullet">
						<li><xf:fa icon="fa-thumbs-up" title="{{ phrase('reaction_score')|for_attr }}" /> {$mediaItem.reaction_score|number_short}</li>
						<li><xf:fa icon="fa-comments" title="{{ phrase('xfmg_comments')|for_attr }}" /> {$mediaItem.comment_count|number_short}</li>
						<xf:if is="$mediaItem.media_state == 'deleted'">
							<li>{{ phrase('deleted') }}</li>
						<xf:elseif is="$mediaItem.media_state == 'moderated'" />
							<li>{{ phrase('moderated') }}</li>
						</xf:if>
					</ul>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="media_list_placeholders" arg-start="1" arg-end="10">
	<xf:foreach loop="{{ range($start, $end) }}" value="$placeholder">
		<div class="itemList-item itemList-item--placeholder"></div>
	</xf:foreach>
</xf:macro>]]></template>
  <template type="public" title="xfmg_media_mark_viewed" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:title>{{ phrase('xfmg_mark_media_viewed') }}</xf:title>

<xf:form action="{{ link('media/mark-viewed', null, {'date': $date}) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">{{ phrase('xfmg_you_sure_you_want_to_mark_all_media_viewed') }}</xf:inforow>
		</div>
		<xf:submitrow submit="{{ phrase('xfmg_mark_media_viewed') }}" rowtype="simple" icon="markRead" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_move_chooser" version_id="902010013" version_string="2.1.0 Preview 3"><![CDATA[<xf:title>{{ phrase('xfmg_move_media_item') }}</xf:title>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/move', $mediaItem) }}" class="block js-loaderBlock" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:macro name="move_chooser" arg-categoryTree="{$categoryTree}" arg-mediaItem="{$mediaItem}" />

			<xf:if is="$mediaItem.canSendModeratorActionAlert()">
				<xf:macro template="helper_action" name="author_alert" />
			</xf:if>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>

<xf:macro name="move_chooser" arg-categoryTree="!" arg-mediaItem="{{ null }}">
	<xf:radiorow label="{{ phrase('xfmg_move_media_item_to') }}" name="target_type">
		<xf:if is="$categoryTree.count()">
			<xf:option label="{{ phrase('xfmg_media_category') }}" labelclass="u-featuredText" value="category" selected="true" data-hide="true">
			<xf:dependent>
				<div class="block-row">
					<xf:select name="target_category_id">
						<xf:option>({{ phrase('xfmg_choose_category') }})</xf:option>
						<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">

							<xf:set var="$category" value="{$treeEntry.record}" />

							<xf:if is="$mediaItem">
								<xf:set var="$disabled" value="{{ ($mediaItem AND !$mediaItem.canMoveMediaTo($category)) }}" />
							<xf:else />
								<xf:set var="$disabled" value="{{ ($category.category_type == 'container' OR $category.category_type == 'album') }}" />
							</xf:if>

							<xf:option value="{$category.category_id}" disabled="{$disabled}">
								{{ repeat_raw('&nbsp; ', $treeEntry.depth) }} {$category.title}
							</xf:option>
						</xf:foreach>
					</xf:select>
				</div>

				<div class="formRow-explain">
					{{ phrase('xfmg_only_categories_which_contain_media_items_only_available') }}
				</div>
			</xf:dependent>
		</xf:option>
		</xf:if>
		<xf:option label="{{ phrase('xfmg_album') }}" labelclass="u-featuredText" value="album" data-hide="true" selected="!{$categoryTree.count()}">
			<xf:dependent>
				<xf:radio name="album_type">
					<xf:if is="$xf.options.xfmgAllowPersonalAlbums">
						<xf:option value="create" label="{{ phrase('xfmg_create_personal_album') }}" selected="true" data-hide="true">
							<xf:dependent>
								<label>{{ phrase('xfmg_album_title') }}</label>
								<xf:textbox name="album[title]" maxlength="{{ max_length('XFMG:Album', 'title') }}" />

								<label>{{ phrase('xfmg_album_description') }}</label>
								<xf:textarea name="album[description]" maxlength="{{ max_length('XFMG:Album', 'description') }}" />
							</xf:dependent>
						</xf:option>
					</xf:if>
					<xf:option value="existing" label="{{ phrase('xfmg_existing_album') }}" data-hide="true">
						<xf:dependent>
							<label>{{ phrase('xfmg_enter_existing_album_url') }}</label>
							<xf:textbox type="url" name="album_url" />
						</xf:dependent>
					</xf:option>
				</xf:radio>
			</xf:dependent>
		</xf:option>
	</xf:radiorow>
</xf:macro>]]></template>
  <template type="public" title="xfmg_media_note.less" version_id="902020570" version_string="2.2.5"><![CDATA[.media-container
{
	.cropper-container
	{
		&.cropper-bg
		{
			background: none;
		}
	}

	.media-container-image
	{
		position: relative;

		.has-touchevents &,
		&.is-tooltip-active,
		&:hover
		{
			.mediaNote
			{
				opacity: .75;
				transition: opacity .75s ease-out;
			}
		}
	}

	.mediaNote
	{
		display: none;
		position: absolute;

		border-radius: @xf-borderRadiusSmall;
		border: @xf-borderSizeMinorFeature solid @xf-paletteNeutral1;
		.m-dropShadow(0, 5px, 10px, 0, .35);
		opacity: 0;
	}

	.mediaNote-tooltip
	{
		display: none;
	}
}

@_tooltip-mediaNoteArrowSize: 10px;

.tooltip
{
	&.tooltip--mediaNote
	{
		max-width: 100%;
		width: 250px;
		padding: 0 15px;

		// Tooltip positioning is literal.
		&.tooltip--top { padding-bottom: @_tooltip-mediaNoteArrowSize; }
		&.tooltip--right { -ltr-rtl-padding-left: @_tooltip-mediaNoteArrowSize; }
		&.tooltip--bottom { padding-top: @_tooltip-mediaNoteArrowSize; }
		&.tooltip--left { -ltr-rtl-padding-right: @_tooltip-mediaNoteArrowSize; }
	}
}

.tooltip-content
{
	.tooltip--mediaNote &
	{
		.xf-contentBase();
		padding: 0;
		text-align: left;
		border: 1px solid @xf-borderColor;
		border-radius: @xf-borderRadiusMedium;
		font-size: @xf-fontSizeSmall;
		.m-dropShadow(0, 5px, 10px, 0, .35);
	}

	.tooltip--mediaNote--plain &
	{
		.contentRow-minor
		{
			font-size: @xf-fontSizeSmallest;
		}
	}
}

.noteTooltip-row
{
	margin: 0;
	padding: @xf-paddingSmall;

	&.noteTooltip-row--separated
	{
		+ .noteTooltip-row
		{
			border-top: @xf-borderSize solid @xf-borderColorLight;
		}
	}
}

.noteTooltip-footer
{
	font-size: @xf-fontSizeSmaller;
	color: @xf-textColorDimmed;
	background: @xf-contentAltBg;
	border-top: @xf-borderSize solid @xf-borderColorLight;
	padding: @xf-paddingSmall;

	&.noteTooltip-footer--smallest
	{
		font-size: @xf-fontSizeSmallest;
	}
}

/* XF-RTL:disable */
.tooltip-arrow
{
	.m-tooltipArrow(@xf-borderColor, @_tooltip-mediaNoteArrowSize + 1px, ~'.tooltip--mediaNote', @xf-contentBg);

	.tooltip--mediaNote.tooltip--top &:after
	{
		.m-triangleDown(xf-default(@xf-contentAltBg, transparent), @_tooltip-mediaNoteArrowSize);
	}
}
/* XF-RTL:enable */]]></template>
  <template type="public" title="xfmg_media_note_edit" version_id="902020052" version_string="2.2.0 Release Candidate 2"><![CDATA[<xf:form action="{{ link('media/note-edit', $mediaItem) }}" class="noteTooltip js-noteTooltipForm" ajax="true">
	<div class="noteTooltip-row">
		<xf:if is="!$note.note_id">
			<xf:radio name="note_type">
				<xf:option label="{{ phrase('xfmg_tag_user:') }}" value="user_tag" selected="{{ (!$note.note_id OR $note.note_type == 'user_tag') }}">
					<xf:macro name="tag_input" arg-note="{$note}" />
				</xf:option>

				<xf:option label="{{ phrase('xfmg_write_note:') }}" value="note" selected="{{ $note.note_type == 'note' }}">
					<xf:macro name="note_input" arg-note="{$note}" />
				</xf:option>
			</xf:radio>
		<xf:else />
			<xf:if is="$note.note_type == 'user_tag'">
				{{ phrase('xfmg_tag_user:') }}
				<xf:macro name="tag_input" arg-note="{$note}" />
				<xf:hiddenval name="note_type" value="user_tag" />
			<xf:elseif is="$note.note_type == 'note'" />
				{{ phrase('xfmg_write_note:') }}
				<xf:macro name="note_input" arg-note="{$note}" />
				<xf:hiddenval name="note_type" value="note" />
			</xf:if>
		</xf:if>
	</div>

	<div class="noteTooltip-footer">
		<xf:button type="submit" icon="save" class="button--primary button--padded" />
		<xf:if is="$note.note_id AND $note.canDelete()">
			<xf:button type="submit" name="delete" class="button--icon button--padded button--icon--delete button--iconOnly" />
		</xf:if>
		<xf:button type="reset" icon="cancel" class="button--padded js-cancelButton" />
	</div>

	<xf:hiddenval name="note_data" value="{$note.note_data|json}" class="js-noteData" />
	<xf:hiddenval name="note_id" value="{$note.note_id}" />
</xf:form>

<xf:macro name="tag_input" arg-note="!">
	<xf:textbox name="tagged_username"
		value="{{ $note.TaggedUser ? $note.TaggedUser.username : $note.tagged_username }}"
		placeholder="{{ phrase('name...') }}"
		maxlength="{{ max_length($note, 'tagged_username') }}"
		ac="single" />
</xf:macro>

<xf:macro name="note_input" arg-note="!">
	<xf:textarea name="note_text"
		value="{$note.note_text}"
		placeholder="{{ phrase('write_something...') }}"
		maxlength="{{ max_length($note, 'note_text') }}"
		autosize="true" rows="2" />
</xf:macro>]]></template>
  <template type="public" title="xfmg_media_note_view" version_id="902000035" version_string="2.0.0 Beta 5"><![CDATA[<xf:css src="xfmg_media_view.less" />
<xf:macro template="xfmg_media_view_macros" name="note_view" arg-mediaItem="{$mediaItem}" arg-note="{$note}" />]]></template>
  <template type="public" title="xfmg_media_previous_comments" version_id="902020035" version_string="2.2.0 Beta 5"><![CDATA[<xf:head option="metaNoindex"><meta name="robots" content="noindex" /></xf:head>

<xf:if is="$comments is not empty">
	<xf:if is="$loadMore">
		<div class="message-responseRow js-commentLoader">
			<a href="{{ link('media/load-previous-comments', $mediaItem, {'before': $firstCommentDate}) }}"
				data-xf-click="comment-loader"
				data-container=".js-commentLoader"
				rel="nofollow">{{ phrase('view_previous_comments...') }}</a>
		</div>
	</xf:if>
	<xf:foreach loop="$comments" value="$comment">
		<xf:if is="$comment.comment_state == 'deleted'">
			<xf:macro name="xfmg_comment_macros::comment_deleted_lightbox" arg-comment="{$comment}" arg-content="{$mediaItem}" arg-linkPrefix="media/media-comments" />
		<xf:else />
			<xf:macro name="xfmg_comment_macros::comment_lightbox" arg-comment="{$comment}" arg-content="{$mediaItem}" arg-linkPrefix="media/media-comments" />
		</xf:if>
	</xf:foreach>
</xf:if>]]></template>
  <template type="public" title="xfmg_media_set_as_avatar" version_id="902000032" version_string="2.0.0 Beta 2"><![CDATA[<xf:title>{{ phrase('xfmg_set_as_avatar') }}</xf:title>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/set-as-avatar', $mediaItem) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xfmg_please_confirm_that_you_want_to_set_your_avatar_to_following:') }}
			</xf:inforow>
			<xf:inforow rowtype="confirm">
				<div class="avatar avatar--l">
					<img src="{$previewUri}" />
				</div>
			</xf:inforow>
		</div>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_media_tags" version_id="902000570" version_string="2.0.5"><![CDATA[<xf:title>{{ phrase('edit_tags') }}</xf:title>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:macro template="tag_macros" name="edit_form"
	arg-action="{{ link('media/tags', $mediaItem) }}"
	arg-uneditableTags="{$uneditableTags}"
	arg-editableTags="{$editableTags}"
	arg-minTags="{$mediaItem.min_tags}"
	arg-tagList="tagList--mediaItem-{$mediaItem.media_id}" />

<xf:comment><xf:form action="{{ link('media/tags', $mediaItem) }}" class="block" ajax="true"
	data-xf-init="tagger" data-tag-list="tagList--mediaItem-{$mediaItem.media_id}">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$uneditableTags">
				<xf:formrow label="{{ phrase('uneditable_tags') }}">
					{$uneditableTags|pluck('tag')|join(', ')}
				</xf:formrow>
			</xf:if>

			<xf:tokeninputrow name="tags" value="{$editableTags|pluck('tag')|join(', ')}" href="{{ link('misc/tag-auto-complete') }}"
				label="{{ phrase('tags') }}">

				<xf:explain>
					{{ phrase('multiple_tags_may_be_separated_by_commas') }}
					<xf:if is="$mediaItem.min_tags">
						{{ phrase('this_content_must_have_at_least_x_tags', {'min': $mediaItem.min_tags}) }}
					</xf:if>
				</xf:explain>
			</xf:tokeninputrow>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form></xf:comment>]]></template>
  <template type="public" title="xfmg_media_tags_list" version_id="902010010" version_string="2.1.0 Alpha"><![CDATA[<xf:macro template="tag_macros" name="list"
	arg-tags="{$mediaItem.tags}"
	arg-tagList="tagList--mediaItem-{$mediaItem.media_id}"
	arg-editLink="{{ $mediaItem.canEditTags() ? link('media/tags', $mediaItem) : '' }}" />]]></template>
  <template type="public" title="xfmg_media_user_index" version_id="902020053" version_string="2.2.0 Release Candidate 3"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_media_added_by_x', {'name': $user.username}) }}</xf:title>

<xf:wrap template="xfmg_gallery_wrapper">
	<xf:set var="$selected" value="{{ $xf.visitor.user_id == $user.user_id ? 'yourMedia' : '' }}" />
</xf:wrap>

<xf:if is="$xf.visitor.canAddMedia()">
	<xf:pageaction>
		<xf:button href="{{ link('media/add') }}" class="button--cta" icon="add" data-xf-click="overlay">
			{{ phrase('xfmg_add_media...') }}
		</xf:button>
	</xf:pageaction>
</xf:if>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="xfmg_media" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/users" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
					<xf:contentcheck>
						<xf:if is="$canInlineMod">
							<xf:macro template="inline_mod_macros" name="button"
								arg-variant="inlineModButton--withLabel"
								arg-label="{{ phrase('selected') }}"
								arg-tooltip="{{ false }}" />
						</xf:if>
					</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xfmg_media_list_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="media/users"
			arg-linkData="{$user}" />

		<div class="block-body">
			<xf:if is="$mediaItems is not empty">
				<xf:macro template="xfmg_media_list_macros" name="media_list"
					arg-mediaItems="{$mediaItems}"
					arg-forceInlineMod="{$canInlineMod}"
					arg-prevPage="{$prevPage}"
					arg-nextPage="{$nextPage}"
					arg-setupLightbox="{$xf.options.xfmgLightboxNavigation}" />
			<xf:elseif is="$filters" />
				<div class="blockMessage">{{ phrase('xfmg_x_has_not_added_any_media_which_matches_your_filters', {'name': $user.username}) }}</div>
			<xf:else />
				<div class="blockMessage">{{ phrase('xfmg_x_has_not_added_any_media_yet', {'name': $user.username}) }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$totalItems}"
			link="media/users" data="{$user}" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>]]></template>
  <template type="public" title="xfmg_media_view" version_id="902020270" version_string="2.2.2"><![CDATA[<xf:title>{$mediaItem.title}</xf:title>
<xf:h1 hidden="true" />

<xf:css src="xfmg_media_view.less" />
<xf:js prod="xfmg/image_noter-compiled.js" dev="xfmg/vendor/cropper/cropper.js, xfmg/image_noter.js" />

<xf:macro template="xfmg_page_macros" name="xfmg_page_options" arg-album="{$mediaItem.Album}" arg-category="{$mediaItem.Category}" arg-mediaItem="{$mediaItem}" />

<xf:set var="$descSnippet" value="{{ snippet($mediaItem.description, 250) }}" />

<xf:macro template="metadata_macros" name="metadata"
	arg-description="{$descSnippet}"
	arg-shareUrl="{{ link('canonical:media', $mediaItem) }}"
	arg-imageUrl="{$mediaItem.getCurrentThumbnailUrl(true)}"
	arg-canonicalUrl="{{ link('canonical:media', $mediaItem, {'page': $page}) }}" />

<xf:page option="ldJsonHtml">
<script type="application/ld+json">
{$mediaItem.structured_data|json(true)|raw}
</script>
</xf:page>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs(false)" />

<xf:macro template="xfmg_media_view_macros" name="media_status" arg-mediaItem="{$mediaItem}" />

<div class="media">
	<xf:if is="$filmStripParams.prevItem">
		<a href="{{ link('media', $filmStripParams.prevItem) }}" class="media-button media-button--prev" data-xf-key="ArrowLeft"><i class="media-button-icon"></i></a>
	</xf:if>

	<div class="media-container"
		data-xf-init="{{ ($mediaItem.media_type == 'image') ? 'image-noter' : '' }}"
		data-toggle-id="#js-noterToggle"
		data-edit-url="{{ link('media/note-edit', $mediaItem) }}">

		<xf:macro template="xfmg_media_view_macros" name="media_content" arg-mediaItem="{$mediaItem}" arg-mediaNotes="{$mediaNotes}" />
	</div>

	<xf:if is="$filmStripParams.nextItem">
		<a href="{{ link('media', $filmStripParams.nextItem) }}" class="media-button media-button--next" data-xf-key="ArrowRight"><i class="media-button-icon"></i></a>
	</xf:if>
</div>

<div class="block js-mediaInfoBlock">
	<xf:macro template="xfmg_media_view_macros" name="media_film_strip" arg-mediaItem="{$mediaItem}" arg-filmStripParams="{$filmStripParams}" />

	<div class="block-container">
		<div class="block-body block-row xfmgInfoBlock">
			<div class="xfmgInfoBlock-title">
				<div class="contentRow contentRow--alignMiddle">
					<span class="contentRow-figure">
						<xf:avatar user="$mediaItem.User" size="s" defaultname="{$mediaItem.username}" />
					</span>
					<div class="contentRow-main">
						<h1 class="contentRow-title p-title-value"><xf:h1 /></h1>
						<div class="contentRow-lesser p-description">
							<ul class="listInline listInline--bullet">
								<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_media_owner')|for_attr }}" /> <xf:username user="{$mediaItem.User}" defaultname="{$mediaItem.username}" class="u-concealed" /></li>
								<li><xf:fa icon="fa-clock" title="{{ phrase('xfmg_date_added')|for_attr }}" /> <xf:date time="{$mediaItem.media_date}" /></li>
								<xf:if is="$xf.options.enableTagging AND ($mediaItem.canEditTags() OR $mediaItem.tags)">
									<li>
										<xf:macro template="tag_macros" name="list"
											arg-tags="{$mediaItem.tags}"
											arg-tagList="tagList--mediaItem-{$mediaItem.media_id}"
											arg-editLink="{{ $mediaItem.canEditTags() ? link('media/tags', $mediaItem) : '' }}" />
									</li>
								</xf:if>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<xf:if is="$mirrorContainer">
				<div class="xfmgInfoBlock-originallyFrom">
					{{ phrase('xfmg_originally_posted_in_x', {'link': $mirrorContainer.link, 'title': $mirrorContainer.title}) }}
				</div>
			</xf:if>

			<xf:if is="$mediaItem.description">
				<div class="xfmgInfoBlock-description">
					<div class="bbCodeBlock bbCodeBlock--expandable js-expandWatch">
						<div class="bbCodeBlock-content">
							<div class="bbCodeBlock-expandContent js-expandContent">
								{{ structured_text($mediaItem.description) }}
							</div>
							<div class="bbCodeBlock-expandLink js-expandLink"><a role="button" tabindex="0">{{ phrase('click_to_expand') }}</a></div>
						</div>
					</div>
				</div>
			</xf:if>

			<xf:macro template="custom_fields_macros" name="custom_fields_view"
				arg-type="xfmgMediaFields"
				arg-group="below_media"
				arg-onlyInclude="{{ $mediaItem.category_id ? $mediaItem.Category.field_cache : $mediaItem.Album.field_cache }}"
				arg-set="{$mediaItem.custom_fields}" />

			<xf:if contentcheck="true">
				<div class="actionBar">
					<xf:contentcheck>
						<xf:if contentcheck="true">
							<div class="actionBar-set actionBar-set--external">
								<xf:contentcheck>
									<xf:react content="{$mediaItem}" link="media/react" list="< .js-mediaInfoBlock | .js-reactionsList" />
								</xf:contentcheck>
							</div>
						</xf:if>

						<xf:if contentcheck="true">
							<div class="actionBar-set actionBar-set--internal">
								<xf:contentcheck>
									<xf:if is="$mediaItem.canReport()">
										<a href="{{ link('media/report', $mediaItem) }}"
											class="actionBar-action actionBar-action--report"
											data-xf-click="overlay">{{ phrase('report_verb') }}</a>
									</xf:if>

									<xf:set var="$hasActionBarMenu" value="{{ false }}" />
									<xf:if is="$mediaItem.canEdit()">
										<a href="{{ link('media/edit', $mediaItem) }}"
											class="actionBar-action actionBar-action--edit actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('edit') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$mediaItem.canDelete()">
										<a href="{{ link('media/delete', $mediaItem) }}"
											class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('delete') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$mediaItem.canCleanSpam()">
										<a href="{{ link('spam-cleaner', $mediaItem) }}"
											class="actionBar-action actionBar-action--spam actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('spam') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$xf.visitor.canViewIps() AND $mediaItem.ip_id">
										<a href="{{ link('media/ip', $mediaItem) }}"
											class="actionBar-action actionBar-action--ip actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('ip') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>
									<xf:if is="$mediaItem.canWarn()">
										<a href="{{ link('media/warn', $mediaItem) }}"
											class="actionBar-action actionBar-action--warn actionBar-action--menuItem">{{ phrase('warn') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									<xf:elseif is="$mediaItem.warning_id AND $xf.visitor.canViewWarnings()" />
										<a href="{{ link('warnings', {'warning_id': $mediaItem.warning_id}) }}"
											class="actionBar-action actionBar-action--warn actionBar-action--menuItem"
											data-xf-click="overlay">{{ phrase('view_warning') }}</a>
										<xf:set var="$hasActionBarMenu" value="{{ true }}" />
									</xf:if>

									<xf:if is="$hasActionBarMenu">
										<a class="actionBar-action actionBar-action--menuTrigger"
											data-xf-click="menu"
											title="{{ phrase('more_options')|for_attr }}"
											role="button"
											tabindex="0"
											aria-expanded="false"
											aria-haspopup="true">&#8226;&#8226;&#8226;</a>

										<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="actionBar">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<div class="js-menuBuilderTarget"></div>
											</div>
										</div>
									</xf:if>
								</xf:contentcheck>
							</div>
						</xf:if>
					</xf:contentcheck>
				</div>
			</xf:if>

			<div class="reactionsBar js-reactionsList {{ $mediaItem.reactions ? 'is-active' : '' }}">
				<xf:reactions content="{$mediaItem}" link="media/reactions" />
			</div>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<xf:contentcheck>
					<xf:if is="$mediaItem.canRate()">
						<xf:button href="{{ link('media/media-ratings/rate', $mediaItem) }}" overlay="true">
							{{ phrase('leave_rating') }}
						</xf:button>
					</xf:if>

					<xf:if is="$mediaItem.canAddNote()">
						<xf:button id="js-noterToggle" class="button--icon"
							data-active-label="{{ phrase('xfmg_stop_adding_note_tag') }}"
							data-active-icon="cancel"
							data-active-message="{{ phrase('xfmg_note_tag_mode_activated') }}"
							data-inactive-label="{{ phrase('xfmg_add_note_tag') }}"
							data-inactive-icon=""
							data-inactive-message="{{ phrase('xfmg_note_tag_mode_deactivated') }}">

							{{ phrase('xfmg_add_note_tag') }}
						</xf:button>
					</xf:if>

					<xf:if contentcheck="true">
						<div class="buttonGroup">
							<xf:contentcheck>
								<xf:if is="$mediaItem.canUndelete() AND $mediaItem.media_state == 'deleted'">
									<xf:button href="{{ link('media/undelete', $mediaItem) }}" class="button--link" overlay="true">
										{{ phrase('undelete') }}
									</xf:button>
								</xf:if>
								<xf:if is="$mediaItem.canApproveUnapprove() AND $mediaItem.media_state == 'moderated'">
									<xf:button href="{{ link('media/approve', $mediaItem) }}" class="button--link" overlay="true">
										{{ phrase('approve') }}
									</xf:button>
								</xf:if>
								<xf:if is="$mediaItem.canWatch()">
									<xf:button href="{{ link('media/watch', $mediaItem) }}" class="button--link"
										data-xf-click="switch-overlay"
										data-sk-watch="{{ phrase('watch') }}"
										data-sk-unwatch="{{ phrase('unwatch') }}">

										<xf:if is="{$mediaItem.Watch.{$xf.visitor.user_id}}">
											{{ phrase('unwatch') }}
										<xf:else />
											{{ phrase('watch') }}
										</xf:if>
									</xf:button>
								</xf:if>
								<xf:macro template="bookmark_macros" name="button"
									arg-content="{$mediaItem}"
									arg-confirmUrl="{{ link('media/bookmark', $mediaItem) }}" />

								<xf:if contentcheck="true">
									<div class="buttonGroup-buttonWrapper">
										<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true" title="{{ phrase('more_options') }}">&#8226;&#8226;&#8226;</xf:button>
										<div class="menu" data-menu="menu" aria-hidden="true">
											<div class="menu-content">
												<h4 class="menu-header">{{ phrase('more_options') }}</h4>
												<xf:contentcheck>
													<!--[XF:media_tools_menu:top]-->
													<xf:if is="$mediaItem.canSetAsAvatar()">
														<a href="{{ link('media/set-as-avatar', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">
															{{ phrase('xfmg_set_as_avatar') }}
														</a>
														<xf:if is="$avatarUpdated">
															<a href="{{ link('account/avatar') }}" data-xf-click="overlay" data-load-auto-click="true" style="display: none"></a>
														</xf:if>
													</xf:if>
													<xf:if is="$mediaItem.canEdit()">
														<a href="{{ link('media/edit', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_edit_media_item') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canEditImage()">
														<a href="{{ link('media/edit-image', $mediaItem) }}" class="menu-linkRow">{{ phrase('xfmg_edit_image') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canChangeThumbnail()">
														<a href="{{ link('media/change-thumbnail', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_change_thumbnail') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canMove()">
														<a href="{{ link('media/move', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_move_media_item') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canDelete('soft')">
														<a href="{{ link('media/delete', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_delete_media_item') }}</a>
													</xf:if>
													<xf:if is="$mediaItem.canViewModeratorLogs()">
														<a href="{{ link('media/moderator-actions', $mediaItem) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('moderator_actions') }}</a>
													</xf:if>
													<!--[XF:media_tools_menu:before_footer]-->
													<xf:if is="$mediaItem.canUseInlineModeration()">
														<xf:js src="xf/inline_mod.js" min="1" />

														<div class="menu-footer"
															 data-xf-init="inline-mod"
															 data-type="xfmg_media"
															 data-href="{{ link('inline-mod') }}"
															 data-toggle=".js-mediaInlineModToggle">
															<xf:checkbox>
																<xf:option class="js-mediaInlineModToggle" value="{$mediaItem.media_id}">{{ phrase('select_for_moderation') }}</xf:option>
															</xf:checkbox>
														</div>
													</xf:if>
													<!--[XF:media_tools_menu:bottom]-->
												</xf:contentcheck>
											</div>
										</div>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</xf:if>
	</div>
</div>

<xf:if is="$mediaItem.canViewComments()">
	<div class="columnContainer">
		<div class="columnContainer-comments">
			<xf:macro template="xfmg_comment_macros" name="comment_list"
				arg-comments="{$comments}"
				arg-content="{$mediaItem}"
				arg-linkPrefix="media/media-comments"
				arg-link="media"
				arg-page="{$page}"
				arg-perPage="{$perPage}"
				arg-totalItems="{$totalItems}"
				arg-canInlineMod="{$canInlineModComments}" />
		</div>

		<div class="columnContainer-sidebar">
			<xf:macro template="xfmg_media_view_macros" name="info_sidebar" arg-mediaItem="{$mediaItem}" />

			<xf:macro template="xfmg_media_view_macros" name="extra_info_sidebar" arg-mediaItem="{$mediaItem}" />

			<xf:macro template="xfmg_media_view_macros" name="additional_sidebar" arg-mediaItem="{$mediaItem}" />

			<xf:macro template="xfmg_media_view_macros" name="exif_sidebar" arg-mediaItem="{$mediaItem}" />

			<xf:macro template="xfmg_media_view_macros" name="user_tags_sidebar" arg-mediaNotes="{$mediaNotes}" />

			<xf:macro template="xfmg_media_view_macros" name="share_sidebar" arg-mediaItem="{$mediaItem}" />
		</div>
	</div>
<xf:else />
	<xf:sidebar key="infoSidebar">
		<xf:macro template="xfmg_media_view_macros" name="info_sidebar" arg-mediaItem="{$mediaItem}" />
	</xf:sidebar>
	<xf:sidebar key="extraInfoSidebar">
		<xf:macro template="xfmg_media_view_macros" name="extra_info_sidebar" arg-mediaItem="{$mediaItem}" />
	</xf:sidebar>
	<xf:sidebar key="additionalSidebar">
		<xf:macro template="xfmg_media_view_macros" name="additional_sidebar" arg-mediaItem="{$mediaItem}" />
	</xf:sidebar>
	<xf:sidebar key="exifSidebar">
		<xf:macro template="xfmg_media_view_macros" name="exif_sidebar" arg-mediaItem="{$mediaItem}" />
	</xf:sidebar>
	<xf:sidebar key="userTagsSidebar">
		<xf:macro template="xfmg_media_view_macros" name="user_tags_sidebar" arg-mediaNotes="{$mediaNotes}" />
	</xf:sidebar>
	<xf:sidebar key="shareSidebar">
		<xf:macro template="xfmg_media_view_macros" name="share_sidebar" arg-mediaItem="{$mediaItem}" />
	</xf:sidebar>
</xf:if>]]></template>
  <template type="public" title="xfmg_media_view.less" version_id="902020570" version_string="2.2.5"><![CDATA[.media
{
	position: relative;
	margin-bottom: 10px;
}


@_buttonWidth: 30px;
@_buttonHeight: 50px;

.media-button
{
	position: absolute;
	top: calc(~'50% - '@_buttonHeight / 2 + 2);
	z-index: @zIndex-1;

	width: @_buttonWidth;
	height: @_buttonHeight;

	background: fade(mix(@xf-paletteNeutral2, @xf-paletteNeutral3), 70%);
	border-radius: @xf-borderRadiusMedium;

	opacity: 0.2;
	.m-transition(opacity);

	cursor: pointer;

	.has-touchevents &,
	.media:hover &
	{
		opacity: 0.6;
	}

	&&:hover
	{
		text-decoration: none;
		opacity: 1;
	}

	.media-button-icon
	{
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);

		color: #FFF;
		.m-textOutline(white, black);

		.m-faBase();
		font-size: 1.75em;
	}

	&.media-button--next
	{
		right: 5px;

		.media-button-icon
		{
			&:before
			{
				.m-faContent(@fa-var-chevron-right, 1.1em, ltr); // making this wider to make the button more square
				.m-faContent(@fa-var-chevron-left, 1.1em, rtl);
			}
		}
	}

	&.media-button--prev
	{
		left: 5px;

		.media-button-icon
		{
			&:before
			{
				.m-faContent(@fa-var-chevron-left, 1.1em, ltr);
				.m-faContent(@fa-var-chevron-right, 1.1em, rtl);
			}
		}
	}
}

.media-container
{
	display: flex;
	justify-content: center;
	align-items: center;

	border: 1px solid transparent;

	min-height: @_buttonHeight;

	img
	{
		//max-width: 100%;
		max-height: 80vh;
		//width: auto;
		//height: auto;
		object-fit: contain;
	}

	video
	{
		width: 100%;

		&[data-video-type="audio"]
		{
			&[poster=""]
			{
				// slightly arbitrary but reduces wasted space and ensures nav icons not covered
				max-height: 180px;
				display: block;
				padding: @xf-paddingMedium;
			}
		}
	}

	.bbWrapper
	{
		width: 100%;
		text-align: center;

		>:first-child
		{
			margin-left: auto;
			margin-right: auto;
		}
	}

	.bbMediaWrapper
	{
		width: 100%;
		text-align: center; // helps center some embeds

		.bbMediaWrapper-inner
		{
			&.bbMediaWrapper-inner--thumbnail
			{
				padding-bottom: xf-option('xfmgThumbnailDimensions.width', px);
			}
		}
	}

	.fb-video
	{
		iframe
		{
			background-color: @xf-contentBg;
		}
	}

	.fb_iframe_widget
	{
		margin-left: auto;
		margin-right: auto;
	}
}

@media (max-width: @xf-responsiveEdgeSpacerRemoval)
{
	.media-container
	{
		margin-left: -@xf-pageEdgeSpacer;
		margin-right: -@xf-pageEdgeSpacer;
	}
}

{{ include('xfmg_media_note.less') }}
{{ include('xfmg_cropper.less') }}
{{ include('xfmg_item_view.less') }}]]></template>
  <template type="public" title="xfmg_media_view_macros" version_id="902020570" version_string="2.2.5"><![CDATA[<xf:macro name="media_status" arg-mediaItem="!" arg-block="{{ true }}">
	<xf:set var="$inner">
		<xf:if contentcheck="true">
			<dl class="blockStatus">
				<dt>{{ phrase('status') }}</dt>
				<xf:contentcheck>
					<xf:if is="$mediaItem.album_id AND $mediaItem.Album AND $mediaItem.Album.album_state == 'deleted'">
						<dd class="blockStatus-message blockStatus-message--deleted">
							{{ phrase('xfmg_media_item_is_contained_within_deleted_album') }}
							<xf:macro template="deletion_macros" name="notice" arg-log="{$mediaItem.Album.DeletionLog}" />
						</dd>
					</xf:if>
					<xf:if is="$mediaItem.media_state == 'deleted'">
						<dd class="blockStatus-message blockStatus-message--deleted">
							{{ phrase('xfmg_media_item_is_deleted') }}
							<xf:macro template="deletion_macros" name="notice" arg-log="{$mediaItem.DeletionLog}" />
						</dd>
						<xf:elseif is="$mediaItem.media_state == 'moderated'" />
						<dd class="blockStatus-message blockStatus-message--moderated">
							{{ phrase('awaiting_approval_before_being_displayed_publicly') }}
						</dd>
					</xf:if>
					<xf:if is="$mediaItem.warning_message">
						<dd class="blockStatus-message blockStatus-message--warning">
							{$mediaItem.warning_message}
						</dd>
					</xf:if>
					<xf:if is="$mediaItem.isIgnored()">
						<dd class="blockStatus-message blockStatus-message--ignored">
							{{ phrase('you_are_ignoring_content_by_this_member') }}
						</dd>
					</xf:if>
				</xf:contentcheck>
			</dl>
		</xf:if>
	</xf:set>
	<xf:if is="$row">
		<div class="block">
			<div class="block-outer">
				{$inner|raw}
			</div>
		</div>
	<xf:else />
		{$inner|raw}
	</xf:if>
</xf:macro>

<xf:macro name="media_content" arg-mediaItem="!" arg-mediaNotes="{{ [] }}" arg-linkMedia="{{ false }}">
	<xf:if is="$mediaItem.media_type == 'image'">
		<div class="media-container-image js-mediaContainerImage">
			<xf:foreach loop="$mediaNotes" value="$note">
				<xf:macro name="note_view" arg-mediaItem="{$mediaItem}" arg-note="{$note}" />
			</xf:foreach>
			<xf:set var="$imageHtml">
				<img src="{{ link('media/full', $mediaItem, {'d': $mediaItem.last_edit_date ?: null}) }}"
					 width="{$mediaItem.Attachment.width}" height="{$mediaItem.Attachment.height}"
					 alt="{$mediaItem.title}" class="js-mediaImage" />
			</xf:set>
			<xf:if is="$linkMedia">
				<a href="{{ link('media', $mediaItem) }}">{$imageHtml|raw}</a>
			<xf:else />
				{$imageHtml|raw}
			</xf:if>
		</div>
	<xf:elseif is="$mediaItem.media_type == 'video'" />
		<div class="bbMediaWrapper">
			<div class="bbMediaWrapper-inner">
				<video preload="metadata" controls poster="{$mediaItem.poster_url}" data-video-type="video">
					<source src="{$mediaItem.getVideoUrl()}" type="video/mp4" />
					<div class="bbMediaWrapper-fallback">{{ phrase('your_browser_is_not_able_to_display_this_video') }}</div>
				</video>
			</div>
		</div>
	<xf:elseif is="$mediaItem.media_type == 'audio'" />
		<xf:set var="$audioItem">
			<video preload="metadata" controls poster="{$mediaItem.poster_url}" data-video-type="audio">
				<source src="{$mediaItem.getAudioUrl()}" type="audio/mpeg" />
				<div class="bbMediaWrapper-fallback">{{ phrase('xfmg_your_browser_is_not_able_to_play_this_audio') }}</div>
			</video>
		</xf:set>

		<xf:if is="$mediaItem.hasPoster() OR $mediaItem.hasThumbnail()">
			<div class="bbMediaWrapper">
				<div class="bbMediaWrapper-inner">
					{$audioItem|raw}
				</div>
			</div>
		<xf:else />
			{$audioItem|raw}
		</xf:if>
	<xf:elseif is="$mediaItem.media_type == 'embed'" />
		{{ bb_code($mediaItem.media_tag, 'xfmg_media', $mediaItem) }}
	</xf:if>
</xf:macro>

<xf:macro name="media_film_strip" arg-mediaItem="!" arg-filmStripParams="!">
	<xf:if is="$filmStripParams.mediaItems is not empty">
		<xf:js src="xfmg/film_strip.js" min="1" />
		<xf:css src="xfmg_media_list.less" />

		<div class="block-outer">
			<div class="block-outer-middle">
				<div class="itemList itemList--strip js-filmStrip">
					<a data-xf-click="inserter" data-replace=".js-filmStrip"
						tabindex="0" role="button"
						data-inserter-href="{{ link('media/film-strip-jump', $mediaItem, {'direction': 'prev', 'jump_from_id': $filmStripParams.firstItem.media_id}) }}"
						rel="nofollow"
						class="js-filmStrip-button itemList-button itemList-button--prev{{ !$filmStripParams.hasPrev ? ' is-disabled' : '' }}">

						<i class="itemList-button-icon"></i>
					</a>

					<xf:foreach loop="$filmStripParams.mediaItems" value="$item">
						<div class="js-filmStrip-item itemList-item">
							<a href="{{ link('media', $item) }}">
								{{ xfmg_thumbnail($item, 'xfmgThumbnail--fluid xfmgThumbnail--iconSmallest' . ($item.media_id == $mediaItem.media_id ? ' is-selected': ''), true) }}
							</a>
						</div>
					</xf:foreach>

					<a data-xf-click="inserter" data-replace=".js-filmStrip"
						tabindex="0" role="button"
						data-inserter-href="{{ link('media/film-strip-jump', $mediaItem, {'direction': 'next', 'jump_from_id': $filmStripParams.lastItem.media_id}) }}"
						rel="nofollow"
						class="js-filmStrip-button itemList-button itemList-button--next{{ !$filmStripParams.hasNext ? ' is-disabled' : '' }}">

						<i class="itemList-button-icon"></i>
					</a>
				</div>
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="media_film_strip_placeholders" arg-count="!">
	<xf:if is="$count">
		<xf:foreach loop="{{ range(1, $count) }}" value="$null">
			<div class="js-filmStrip-item itemList-item itemList-item--placeholder">
				<img src="{{ transparent_img() }}" />
			</div>
		</xf:foreach>
	</xf:if>
</xf:macro>

<xf:macro name="note_view" arg-mediaItem="!" arg-note="!">
	<div class="mediaNote js-mediaNote"
		data-note-data="{$note.note_data|json}"
		data-note-id="{$note.note_id}"></div>
	<div class="mediaNote-tooltip js-mediaNoteTooltip{$note.note_id}">
		<div class="noteTooltip-row">
			<xf:if is="$note.note_type == 'note'">
				{{ structured_text($note.note_text) }}
			<xf:elseif is="$note.note_type == 'user_tag'" />
				<div class="contentRow contentRow--alignMiddle">
					<div class="contentRow-figure">
						<xf:avatar user="$note.TaggedUser" defaultname="{$note.username}" size="xs" />
					</div>
					<div class="contentRow-main contentRow-main--close">
						<xf:username user="$note.TaggedUser" defaultname="{$note.username}" rich="true" />
						<xf:if is="$note.TaggedUser">
							<div class="contentRow-minor">
								<xf:usertitle user="$note.TaggedUser" />
							</div>
						</xf:if>
					</div>
				</div>
			</xf:if>
		</div>
		<div class="noteTooltip-footer noteTooltip-footer--smallest">
			<ul class="listInline listInline--bullet">
				<li><xf:fa icon="fa-user" title="{{ phrase('xfmg_note_by')|for_attr }}" /> <xf:username user="{$note.User}" defaultname="{$note.username}" class="u-concealed" /></li>
				<xf:if is="$note.canApproveReject()">
					<li>
						<xf:fa icon="fa-check" title="{{ phrase('approve')|for_attr }}" />
						<a href="{{ link('media/note-approve', $mediaItem, {'note_id': $note.note_id, 't': csrf_token()}) }}"
							class="u-concealed">
							{{ phrase('approve') }}
						</a>
					</li>
					<li>
						<xf:fa icon="fa-times" title="{{ phrase('reject')|for_attr }}" />
						<a href="{{ link('media/note-reject', $mediaItem, {'note_id': $note.note_id, 't': csrf_token()}) }}"
							class="u-concealed">
							{{ phrase('reject') }}
						</a>
					</li>
				<xf:elseif is="$note.canEdit()" />
					<li><xf:fa icon="fa-pencil" title="{{ phrase('edit')|for_attr }}" /> <a href="javascript:" class="u-concealed js-mediaNoteTooltipEdit">{{ phrase('edit') }}</a></li>
				</xf:if>
			</ul>
		</div>
	</div>
</xf:macro>

<xf:macro name="info_sidebar" arg-mediaItem="!" arg-row="{{ true }}">
	<xf:set var="$info">
		<xf:if is="$mediaItem.Category">
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('xfmg_category') }}</dt>
				<dd><a href="{{ link('media/categories', $mediaItem.Category) }}">{$mediaItem.Category.title}</a></dd>
			</dl>
		</xf:if>
		<xf:if is="$mediaItem.Album">
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('xfmg_album') }}</dt>
				<dd><a href="{{ link('media/albums', $mediaItem.Album) }}">{$mediaItem.Album.title}</a></dd>
			</dl>
		</xf:if>

		<dl class="pairs pairs--justified">
			<dt>{{ phrase('xfmg_added_by') }}</dt>
			<dd><xf:username user="{$mediaItem.User}" defaultname="{$mediaItem.username}" /></dd>
		</dl>

		<dl class="pairs pairs--justified">
			<dt>{{ phrase('xfmg_date_added') }}</dt>
			<dd><xf:date time="{$mediaItem.media_date}" /></dd>
		</dl>

		<dl class="pairs pairs--justified">
			<dt>{{ phrase('xfmg_view_count') }}</dt>
			<dd>{$mediaItem.view_count|number}</dd>
		</dl>

		<dl class="pairs pairs--justified">
			<dt>{{ phrase('xfmg_comment_count') }}</dt>
			<dd>{$mediaItem.comment_count|number}</dd>
		</dl>

		<dl class="pairs pairs--justified">
			<dt>{{ phrase('rating') }}</dt>
			<dd>
				<xf:macro template="rating_macros" name="stars_text"
					arg-rating="{$mediaItem.rating_avg}"
					arg-count="{$mediaItem.rating_count}"
					arg-rowClass="ratingStarsRow--textBlock" />
			</dd>
		</dl>

		<xf:macro template="custom_fields_macros" name="custom_fields_view"
			arg-type="xfmgMediaFields"
			arg-group="below_info"
			arg-onlyInclude="{{ $mediaItem.category_id ? $mediaItem.Category.field_cache : $mediaItem.Album.field_cache }}"
			arg-set="{$mediaItem.custom_fields}"
			arg-valueClass="pairs pairs--justified" />
	</xf:set>

	<xf:if is="$row">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xfmg_media_information') }}</h3>
				<div class="block-body block-row">
					{$info|raw}
				</div>
			</div>
		</div>
	<xf:else />
		{$info|raw}
	</xf:if>
</xf:macro>

<xf:macro name="extra_info_sidebar" arg-mediaItem="!" arg-row="{{ true }}">
	<xf:set var="$info">
		<xf:macro template="custom_fields_macros" name="custom_fields_view"
			arg-type="xfmgMediaFields"
			arg-group="extra_info_sidebar_block"
			arg-onlyInclude="{{ $mediaItem.category_id ? $mediaItem.Category.field_cache : $mediaItem.Album.field_cache }}"
			arg-set="{$mediaItem.custom_fields}"
			arg-valueClass="pairs pairs--justified" />
	</xf:set>
	<xf:if is="$row">
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<h3 class="block-minorHeader">{{ phrase('xfmg_extra_information') }}</h3>
					<div class="block-body block-row">
						<xf:contentcheck>
							{$info|raw}
						</xf:contentcheck>
					</div>
				</div>
			</div>
		</xf:if>
	<xf:else />
		{$info|raw}
	</xf:if>
</xf:macro>

<xf:macro name="additional_sidebar" arg-mediaItem="!">
	<xf:if contentcheck="true">
		<xf:contentcheck>
			<xf:foreach loop="$mediaItem.getExtraFieldBlocks()" key="$fieldId" value="$definition">
				<xf:if is="$definition.hasValue({$mediaItem.custom_fields.{$fieldId}})">
					<div class="block">
						<div class="block-container">
							<h3 class="block-minorHeader">{$definition.title}</h3>
							<div class="block-body block-row">
								<xf:macro template="custom_fields_macros" name="custom_field_value"
									arg-definition="{$definition}"
									arg-value="{$mediaItem.custom_fields.{$fieldId}}" />
							</div>
						</div>
					</div>
				</xf:if>
			</xf:foreach>
		</xf:contentcheck>
	</xf:if>
</xf:macro>

<xf:macro name="exif_sidebar" arg-mediaItem="!" arg-row="{{ true }}">
	<xf:if is="$mediaItem.exif_data">
		<xf:set var="$info">
			<xf:if is="$mediaItem.exif.device">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.device') }}</dt>
					<dd>
						{$mediaItem.exif.device}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.aperture">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.aperture') }}</dt>
					<dd>
						{$mediaItem.exif.aperture}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.focal">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.focal') }}</dt>
					<dd>
						{$mediaItem.exif.focal}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.exposure">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.exposure') }}</dt>
					<dd>
						{$mediaItem.exif.exposure}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.iso">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.iso') }}</dt>
					<dd>
						{$mediaItem.exif.iso}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.flash">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.flash') }}</dt>
					<dd>
						{$mediaItem.exif.flash}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.FileName">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.filename') }}</dt>
					<dd>
						{$mediaItem.Attachment.Data.filename}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.file_size">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.file_size') }}</dt>
					<dd>
						{$mediaItem.exif.file_size}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.date_taken">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.date_taken') }}</dt>
					<dd>
						{$mediaItem.exif.date_taken}
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$mediaItem.exif.dimensions">
				<dl class="pairs pairs--justified">
					<dt>{{ phrase('xfmg_exif.dimensions') }}</dt>
					<dd>
						{$mediaItem.exif.dimensions}
					</dd>
				</dl>
			</xf:if>
		</xf:set>
		<xf:if is="$row">
			<xf:if contentcheck="true">
				<div class="block">
					<div class="block-container">
						<h3 class="block-minorHeader">{{ phrase('xfmg_image_metadata') }}</h3>
						<div class="block-body block-row">
							<xf:contentcheck>
								{$info|raw}
							</xf:contentcheck>
						</div>
					</div>
				</div>
			</xf:if>
		<xf:else />
			{$info|raw}
		</xf:if>
	</xf:if>
</xf:macro>

<xf:macro name="user_tags_sidebar" arg-mediaNotes="!">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xfmg_tagged_in_this_image...') }}</h3>
				<div class="block-body">
					<xf:contentcheck>
						<xf:foreach loop="$mediaNotes" value="$note">
							<xf:if is="$note.note_type == 'user_tag' AND $note.tag_state == 'approved'">
								<li class="block-row">
									<div class="contentRow">
										<div class="contentRow-figure">
											<xf:avatar user="$note.TaggedUser" defaultname="{$note.username}" size="xs" />
										</div>
										<div class="contentRow-main contentRow-main--close">
											<xf:username user="$note.TaggedUser" defaultname="{$note.username}" rich="true" />
											<div class="contentRow-minor">
												<xf:usertitle user="$note.TaggedUser" />
											</div>
										</div>
									</div>
								</li>
							</xf:if>
						</xf:foreach>
					</xf:contentcheck>
				</div>
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="share_sidebar" arg-mediaItem="!" arg-row="{{ true }}">
	<xf:if contentcheck="true">
		<div class="block">
			<div class="block-container">
				<xf:contentcheck>
					<xf:if contentcheck="true">
						<h3 class="block-minorHeader">{{ phrase('xfmg_share_this_media') }}</h3>
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:macro template="share_page_macros" name="buttons"
									arg-iconic="{{ true }}" />
							</xf:contentcheck>
						</div>
					</xf:if>
					<xf:if contentcheck="true">
						<div class="block-body block-row block-row--separated">
							<xf:contentcheck>
								<xf:if is="$mediaItem.media_type == 'image'">
									<xf:macro template="share_page_macros" name="share_clipboard_input"
										arg-label="{{ phrase('xfmg_copy_image_link') }}"
										arg-text="{{ link('canonical:media/full', $mediaItem) }}"
										arg-successText="{{ phrase('link_copied_to_clipboard') }}" />

									<xf:macro template="share_page_macros" name="share_clipboard_input"
										arg-label="{{ phrase('xfmg_copy_image_bb_code') }}"
										arg-text="[IMG width=&quot;{{ $mediaItem.Attachment.Data.width }}px&quot; height=&quot;{{ $mediaItem.Attachment.Data.height }}px&quot;]{{ link('canonical:media/full', $mediaItem) }}[/IMG]" />
								<xf:elseif is="$mediaItem.media_type == 'embed'" />
									<xf:macro template="share_page_macros" name="share_clipboard_input"
										arg-label="{{ phrase('xfmg_copy_media_bb_code') }}"
										arg-text="{$mediaItem.media_tag}" />
								</xf:if>

								<xf:if is="$mediaItem.thumbnail_date">
									<xf:macro template="share_page_macros" name="share_clipboard_input"
										arg-label="{{ phrase('xfmg_copy_url_bb_code_with_thumbnail') }}"
										arg-text="[URL=&quot;{{ link('canonical:media', $mediaItem) }}&quot;][IMG width=&quot;{{ $xf.options.xfmgThumbnailDimensions.width }}px&quot; height=&quot;{{ $xf.options.xfmgThumbnailDimensions.height }}px&quot;]{$mediaItem.getCurrentThumbnailUrl(true)}[/IMG][/URL]" />
								</xf:if>

								<xf:macro template="share_page_macros" name="share_clipboard_input"
									arg-label="{{ phrase('xfmg_copy_gallery_bb_code') }}"
									arg-text="[GALLERY=media, {$mediaItem.media_id}][/GALLERY]" />
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xfmg_media_watch" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:if is="$isWatched">
	<xf:title>{{ phrase('xfmg_unwatch_media_item') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xfmg_watch_media_item') }}</xf:title>
</xf:if>

<xf:breadcrumb source="$mediaItem.getBreadcrumbs()" />

<xf:form action="{{ link('media/watch', $mediaItem) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$isWatched">
				<xf:inforow rowtype="confirm">
					{{ phrase('xfmg_you_sure_you_want_to_unwatch_this_media_item') }}
				</xf:inforow>

				<xf:hiddenval name="stop">1</xf:hiddenval>
			<xf:else />
				<xf:radiorow name="notify_on" value="comment"
					label="{{ phrase('send_notifications_for') }}">

					<xf:option value="comment">{{ phrase('xfmg_new_comments') }}</xf:option>
					<xf:option value="">{{ phrase('dont_send_notifications') }}</xf:option>
				</xf:radiorow>

				<xf:checkboxrow label="{{ phrase('send_notifications_via') }}">
					<xf:option name="send_alert" value="1" selected="true">{{ phrase('alerts') }}</xf:option>
					<xf:option name="send_email" value="1">{{ phrase('emails') }}</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:if is="$isWatched">
			<xf:submitrow submit="{{ phrase('unwatch') }}" rowtype="simple" icon="notificationsOff" />
		<xf:else />
			<xf:submitrow submit="{{ phrase('watch') }}" icon="notificationsOn" />
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_page_macros" version_id="902000370" version_string="2.0.3"><![CDATA[<xf:macro name="xfmg_page_options" arg-album="{{ null }}" arg-category="{{ null }}" arg-mediaItem="{{ null }}">
	<xf:set var="$constraints" value="{{ {
		phrase('xfmg_media'): {'search_type': 'xfmg_media'},
		phrase('xfmg_comments'): {'search_type': 'xfmg_comment'}
	} }}" />

	<xf:if is="$category">
		<xf:set var="$constraints" value="{{ $constraints + {
			phrase('xfmg_media_this_category'): {'search_type': 'xfmg_media', 'c': {'categories': [$category.category_id], 'child_categories': 1}}
		} }}" />
	</xf:if>

	<xf:if is="$album">
		<xf:set var="$constraints" value="{{ $constraints + {
			phrase('xfmg_media_this_album'): {'search_type': 'xfmg_media', 'c': {'albums': [$album.album_id]}},
			phrase('xfmg_comments_this_album'): {'search_type': 'xfmg_comment', 'c': {'types': ['xfmg_album'], 'ids': [$album.album_id]}}
		} }}" />
	</xf:if>

	<xf:if is="$mediaItem">
		<xf:set var="$constraints" value="{{ $constraints + {
			phrase('xfmg_comments_this_media'): {'search_type': 'xfmg_comment', 'c': {'types': ['xfmg_media'], 'ids': [$mediaItem.media_id]}}
		} }}" />
	</xf:if>

	<xf:page option="searchConstraints" value="{$constraints}" />
</xf:macro>]]></template>
  <template type="public" title="xfmg_rate" version_id="902000038" version_string="2.0.0 Beta 8"><![CDATA[<xf:title>{{ phrase('xfmg_rate') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<xf:form action="{{ link($linkPrefix . '/rate', $content) }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$content.hasRated()">
				<xf:inforow>
					<div class="blockMessage blockMessage--important"><strong>{{ phrase('note:') }}</strong> {{ phrase('xfmg_this_rating_will_replace_your_previous_rating') }}</div>
				</xf:inforow>
			</xf:if>

			<xf:macro template="rating_macros" name="rating" />

			<xf:if is="$content.canAddComment()">
				<xf:editorrow name="message" data-min-height="100"
					label="{{ phrase('xfmg_leave_comment') }}"
					hint="{{ $xf.options.xfmgRequireComment ? phrase('required') : '' }}"
					explain="{{ phrase('xfmg_if_you_wish_to_leave_comment_with_this_rating_enter_message_above') }}" />
			</xf:if>
		</div>
		<xf:submitrow submit="{{ phrase('submit_rating') }}" icon="rate" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xfmg_rating_list" version_id="902000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xfmg_members_who_rated_this') }}</xf:title>

<xf:breadcrumb source="$content.getBreadcrumbs()" />

<div class="block">
	<div class="block-container js-ratingList-{$content.getEntityId()}">
		<ol class="block-body">
			<xf:foreach loop="$ratings" value="$rating">
				<li class="block-row block-row--separated">
					<xf:set var="$extraData">
						<xf:macro template="rating_macros" name="rating"
							arg-row="{{ false }}"
							arg-readOnly="true"
							arg-currentRating="{$rating.rating}" />
					</xf:set>

					<xf:macro template="member_list_macros" name="item"
						arg-user="{$rating.User}"
						arg-extraData="{$extraData|raw}" />
				</li>
			</xf:foreach>
		</ol>
		<xf:if is="$hasNext">
			<div class="block-footer">
				<span class="block-footer-controls">
					<xf:button href="{{ link($linkPrefix . '/ratings', $content, {'page': $page + 1}) }}"
						data-xf-click="inserter"
						data-replace=".js-ratingList-{$content.getEntityId()}"
						data-scroll-target="< .overlay">{{ phrase('continue...') }}</xf:button>
				</span>
			</div>
		</xf:if>
	</div>
</div>]]></template>
  <template type="public" title="xfmg_rss_content" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:if is="$mediaItem">
	<p>
		<xf:if is="$mediaItem.media_type == 'image'">
			<img src="{{ link('canonical:media/full', $mediaItem, {'d': $mediaItem.last_edit_date ?: null}) }}" alt="{$mediaItem.title}" width="500" />
		<xf:elseif is="$mediaItem.media_type == 'video'" />
			<video controls poster="{$mediaItem.getPosterUrl()}" width="500">
				<source src="{$mediaItem.getVideoUrl(true)}" type="video/mp4" />
			</video>
		<xf:elseif is="$mediaItem.media_type == 'audio'" />
			<video controls poster="{$mediaItem.getPosterUrl()}" width="500">
				<source src="{$mediaItem.getAudioUrl(true)}" type="audio/mpeg" />
			</video>
		<xf:elseif is="$mediaItem.media_type == 'embed'" />
			{{ bb_code($mediaItem.media_tag, 'xfmg_media', $mediaItem) }}
		</xf:if>
	</p>
	<xf:if is="$mediaItem.description">
		<p>{{ structured_text($mediaItem.description) }}</p>
	</xf:if>
	<p>
		<a href="{{ link('canonical:media', $mediaItem) }}" target="_blank">{{ phrase('xfmg_view_this_media_item') }}</a>
	</p>
</xf:if>]]></template>
  <template type="public" title="xfmg_watched_albums" version_id="902000170" version_string="2.0.1"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_watched_albums') }}</xf:title>

<xf:if is="$albums is not empty">
	<xf:form action="{{ link('watched/media-albums/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-outer">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="watched/media-albums"
				wrapperclass="block-outer-main" />

			<div class="block-outer-opposite">
				<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('xfmg_manage_watched_albums') }}</xf:button>
				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('xfmg_manage_watched_albums') }}</h3>
						<!--[XF:manage_menu:top]-->
						<a href="{{ link('watched/media-albums/manage', null, {'state': 'send_email:off'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('disable_email_notification') }}</a>
						<a href="{{ link('watched/media-albums/manage', null, {'state': 'send_alert:off'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('disable_alerts') }}</a>
						<a href="{{ link('watched/media-albums/manage', null, {'state': 'delete'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_stop_watching_albums') }}</a>
						<!--[XF:manage_menu:bottom]-->
					</div>
				</div>
			</div>
		</div>

		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer">
					<xf:foreach loop="$albums" value="$album">
						<xf:set var="$albumWatch" value="{$album.Watch.{$xf.visitor.user_id}}" />
						<xf:set var="$extra">
							<ul class="listInline listInline--bullet">
								<xf:if is="$albumWatch.notify_on == 'comment'">
									<li>{{ phrase('xfmg_new_comment') }}</li>
								<xf:elseif is="$albumWatch.notify_on == 'media'" />
									<li>{{ phrase('xfmg_new_media_item') }}</li>
								<xf:elseif is="$albumWatch.notify_on == 'media_comment'" />
									<li>{{ phrase('xfmg_new_comment') }}</li>
									<li>{{ phrase('xfmg_new_media_item') }}</li>
								</xf:if>
								<xf:if is="$albumWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
								<xf:if is="$albumWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
							</ul>
						</xf:set>
						<xf:macro template="xfmg_media_list_macros" name="media_list_item_struct_item"
							arg-item="{$album}"
							arg-chooseName="ids"
							arg-extraInfo="{$extra}" />
					</xf:foreach>
				</div>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav link="watched/media-albums" page="{$page}" perpage="{$perPage}" total="{$total}" />
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">
		<xf:if is="$page > 1">
			{{ phrase('xfmg_there_no_media_items_to_display') }}
		<xf:else />
			{{ phrase('xfmg_you_not_watching_any_albums') }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_watched_categories" version_id="902000170" version_string="2.0.1"><![CDATA[<xf:title>{{ phrase('watched_categories') }}</xf:title>

<xf:css src="node_list.less" />

<xf:if is="$watchedCategories is not empty">
	<xf:form action="{{ link('watched/media-categories/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-container">
			<div class="block-body">
				<xf:foreach loop="$categoryTree.getFlattened()" key="$id" value="$treeEntry">
					<xf:set var="$category" value="{$treeEntry.record}" />
					<xf:set var="$categoryWatch" value="{$watchedCategories.{$category.category_id}}" />
					<xf:if is="$categoryWatch">
						<xf:set var="$bonusInfo">
							<ul class="listInline listInline--bullet">
								<xf:if is="$categoryWatch.notify_on == 'media'">
									<li>{{ phrase('xfmg_new_media') }}</li>
								</xf:if>
								<xf:if is="$categoryWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
								<xf:if is="$categoryWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
								<xf:if is="$categoryWatch.include_children"><li>{{ phrase('sub_categories') }}</li></xf:if>
							</ul>
						</xf:set>
						<xf:macro template="xfmg_category_list_macros" name="category"
							arg-category="{$category}"
							arg-extras="{$categoryExtras.{$category.category_id}}"
							arg-children="{$categoryTree.{$id}.children}"
							arg-childExtras="{$categoryExtras}"
							arg-chooseName="ids"
							arg-bonusInfo="{$bonusInfo}" />
					</xf:if>
				</xf:foreach>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="include_children:on">{{ phrase('enable_sub_category_notifications') }}</xf:option>
						<xf:option value="include_children:off">{{ phrase('disable_sub_category_notifications') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('you_not_watching_any_categories') }}</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_watched_media" version_id="902000170" version_string="2.0.1"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_watched_media') }}</xf:title>

<xf:if is="$mediaItems is not empty">
	<xf:form action="{{ link('watched/media/update') }}" ajax="true" class="block" autocomplete="off">
		<div class="block-outer">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$total}"
				link="watched/media"
				wrapperclass="block-outer-main" />

			<div class="block-outer-opposite">
				<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">{{ phrase('xfmg_manage_watched_media') }}</xf:button>
				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('xfmg_manage_watched_media') }}</h3>
						<!--[XF:manage_menu:top]-->
						<a href="{{ link('watched/media/manage', null, {'state': 'send_email:off'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('disable_email_notification') }}</a>
						<a href="{{ link('watched/media/manage', null, {'state': 'send_alert:off'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('disable_alerts') }}</a>
						<a href="{{ link('watched/media/manage', null, {'state': 'delete'}) }}" data-xf-click="overlay" class="menu-linkRow">{{ phrase('xfmg_stop_watching_media') }}</a>
						<!--[XF:manage_menu:bottom]-->
					</div>
				</div>
			</div>
		</div>

		<div class="block-container">
			<div class="block-body">
				<div class="structItemContainer">
					<xf:foreach loop="$mediaItems" value="$mediaItem">
						<xf:set var="$mediaWatch" value="{$mediaItem.Watch.{$xf.visitor.user_id}}" />
						<xf:set var="$extra">
							<ul class="listInline listInline--bullet">
								<xf:if is="$mediaWatch.notify_on == 'comment'">
									<li>{{ phrase('xfmg_new_comment') }}</li>
								</xf:if>
								<xf:if is="$mediaWatch.send_email"><li>{{ phrase('emails') }}</li></xf:if>
								<xf:if is="$mediaWatch.send_alert"><li>{{ phrase('alerts') }}</li></xf:if>
							</ul>
						</xf:set>
						<xf:macro template="xfmg_media_list_macros" name="media_list_item_struct_item"
							arg-item="{$mediaItem}"
							arg-chooseName="ids"
							arg-extraInfo="{$extra}" />
					</xf:foreach>
				</div>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter"></span>
				<span class="block-footer-select"><xf:checkbox standalone="true"><xf:option check-all="< .block-container" label="{{ phrase('select_all') }}" /></xf:checkbox></span>
				<span class="block-footer-controls">
					<xf:select name="watch_action" class="input--inline">
						<xf:option>{{ phrase('with_selected...') }}</xf:option>
						<!--[XF:action_menu:top]-->
						<xf:option value="send_email:on">{{ phrase('enable_email_notification') }}</xf:option>
						<xf:option value="send_email:off">{{ phrase('disable_email_notification') }}</xf:option>
						<xf:option value="send_alert:on">{{ phrase('enable_alerts') }}</xf:option>
						<xf:option value="send_alert:off">{{ phrase('disable_alerts') }}</xf:option>
						<xf:option value="delete">{{ phrase('stop_watching') }}</xf:option>
						<!--[XF:action_menu:bottom]-->
					</xf:select>
					<xf:button type="submit">{{ phrase('go') }}</xf:button>
				</span>
			</div>
		</div>

		<div class="block-outer block-outer--after">
			<xf:pagenav link="watched/media" page="{$page}" perpage="{$perPage}" total="{$total}" />
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">
		<xf:if is="$page > 1">
			{{ phrase('xfmg_there_no_media_items_to_display') }}
		<xf:else />
			{{ phrase('xfmg_you_not_watching_any_media_items') }}
		</xf:if>
	</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_whats_new_media" version_id="902020010" version_string="2.2.0 Alpha"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_new_media') }}</xf:title>

<xf:wrap template="whats_new_wrapper">
	<xf:set var="$pageSelected">xfmg_new_media</xf:set>
</xf:wrap>

<xf:pageaction>
	<xf:if is="$xf.visitor.canCreateThread()">
		<xf:button href="{{ link('media/add') }}" class="button--cta" icon="add" data-xf-click="overlay">
			{{ phrase('xfmg_add_media...') }}
		</xf:button>
	</xf:if>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="xfmg_media" data-href="{{ link('inline-mod') }}">
	<xf:if is="$findNew.result_count">
		<div class="block-outer"><xf:trim>

			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/media" data="{$findNew}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:macro name="buttons"
								arg-findNew="{$findNew}"
								arg-canInlineMod="{$canInlineMod}" />
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>
	</xf:if>

	<div class="block-container">
		<xf:macro name="filter_bar"
			arg-findNew="{$findNew}"
			arg-rerunRoute="whats-new/media"
			arg-rerunData="{$findNew}"
			arg-filterRoute="whats-new/media" />

		<xf:macro name="results"
			arg-findNew="{$findNew}"
			arg-mediaItems="{$media}"
			arg-prevPage="{$prevPage}"
			arg-nextPage="{$nextPage}"
			arg-latestRoute="whats-new/media" />
	</div>

	<xf:if is="$findNew.result_count">
		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/media" data="{$findNew}"
				wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</xf:if>
</div>

<xf:macro name="buttons"
	arg-findNew="!"
	arg-canInlineMod="{{ false }}">

	<xf:if is="$canInlineMod">
		<xf:macro template="inline_mod_macros" name="button" />
	</xf:if>
	<xf:if is="$xf.visitor.user_id">
		<xf:button href="{{ link('media/mark-viewed', null, {'date': $findNew.cache_date}) }}"
			class="button--link" overlay="true">
			{{ phrase('xfmg_mark_media_viewed') }}
		</xf:button>
	</xf:if>
</xf:macro>

<xf:macro name="results" arg-findNew="!" arg-mediaItems="!" arg-prevPage="" arg-nextPage="" arg-latestRoute="!">
	<xf:if is="$findNew.result_count">
		<div class="block-body">
			<xf:macro template="xfmg_media_list_macros" name="media_list"
				arg-mediaItems="{$mediaItems}"
				arg-prevPage="{$prevPage}"
				arg-nextPage="{$nextPage}"
				arg-setupLightbox="{$xf.options.xfmgLightboxNavigation}" />
		</div>
	<xf:else />
		<div class="block-row">
			<xf:if is="$xf.visitor.user_id AND ($findNew.filters.unviewed AND count($findNew.filters) == 1)">
				{{ phrase('xfmg_you_have_no_unviewed_media', {'link': link($latestRoute, null, {'skip': 1})}) }}
			<xf:else />
				{{ phrase('no_results_found') }}
			</xf:if>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_bar"
	arg-findNew="!"
	arg-rerunRoute="!"
	arg-rerunData="{{ null }}"
	arg-rerunQuery="{{ [] }}"
	arg-filterRoute="!">

	<xf:if is="$xf.visitor.user_id">
		<div class="block-filterBar">
			<div class="filterBar">
				<xf:if contentcheck="true">
					<ul class="filterBar-filters">
						<xf:contentcheck>
							<!--[XF:filters:top]-->
							<xf:if is="$findNew.filters.unviewed">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'unviewed'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('xfmg_filter_unviewed') }}</a></li>
							</xf:if>
							<xf:if is="$findNew.filters.watched">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'watched'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('filter_watched') }}</a></li>
							</xf:if>
							<xf:if is="$findNew.filters.own">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'own'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('xfmg_filter_own') }}</a></li>
							</xf:if>
							<!--[XF:filters:bottom]-->
						</xf:contentcheck>
					</ul>
				</xf:if>

				<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
				<xf:macro name="filter_menu" arg-findNew="{$findNew}" arg-submitRoute="{$filterRoute}" />
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_menu" arg-findNew="!" arg-submitRoute="!">
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
			<xf:form action="{{ link($submitRoute) }}">
				<div class="menu-row">
					<xf:checkbox>
						<xf:option name="unviewed" selected="{$findNew.filters.unviewed}">{{ phrase('xfmg_unviewed_media') }}</xf:option>
						<xf:option name="watched" selected="{$findNew.filters.watched}">{{ phrase('xfmg_watched_media') }}</xf:option>
						<xf:option name="own" selected="{$findNew.filters.own}">{{ phrase('xfmg_your_media') }}</xf:option>
						<!--[XF:filter_menu:filters_extra]-->
					</xf:checkbox>
				</div>
				<!--[XF:filter_menu:below_filters]-->

				<xf:macro template="filter_macros" name="find_new_filter_footer" />
			</xf:form>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xfmg_whats_new_media_comments" version_id="902000051" version_string="2.0.0 Release Candidate 1"><![CDATA[<xf:title page="{$page}">{{ phrase('xfmg_new_media_comments') }}</xf:title>

<xf:wrap template="whats_new_wrapper">
	<xf:set var="$pageSelected">xfmg_new_comment</xf:set>
</xf:wrap>

<div class="block">
	<xf:if is="$findNew.result_count">
		<div class="block-outer"><xf:trim>

			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/media-comments" data="{$findNew}"
				wrapperclass="block-outer-main" />

			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:macro name="buttons"
								arg-findNew="{$findNew}"
								arg-canInlineMod="{$canInlineMod}" />
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>

		</xf:trim></div>
	</xf:if>

	<div class="block-container">
		<xf:macro name="filter_bar"
			arg-findNew="{$findNew}"
			arg-rerunRoute="whats-new/media-comments"
			arg-rerunData="{$findNew}"
			arg-filterRoute="whats-new/media-comments" />

		<xf:macro name="results"
			arg-findNew="{$findNew}"
			arg-items="{$items}"
			arg-latestRoute="whats-new/media-comments" />
	</div>

	<xf:if is="$findNew.result_count">
		<div class="block-outer block-outer--after">
			<xf:pagenav
				page="{$page}" perpage="{$perPage}" total="{$findNew.result_count}"
				link="whats-new/media-comments" data="{$findNew}"
				wrapperclass="block-outer-main" />
			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
	</xf:if>
</div>

<xf:macro name="buttons"
	arg-findNew="!"
	arg-canInlineMod="{{ false }}">

	<xf:if is="$canInlineMod">
		<xf:macro template="inline_mod_macros" name="button" />
	</xf:if>
</xf:macro>

<xf:macro name="results" arg-findNew="!" arg-items="!" arg-latestRoute="!">
	<xf:if is="$findNew.result_count">
		<div class="structItemContainer">
			<xf:foreach loop="$items" value="$item">
				<xf:macro template="xfmg_media_list_macros" name="media_list_item_struct_item"
					arg-item="{$item}" />
			</xf:foreach>
		</div>
	<xf:else />
		<div class="block-row">
			<xf:if is="$xf.visitor.user_id AND ($findNew.filters.unread AND count($findNew.filters) == 1)">
				{{ phrase('xfmg_you_have_no_unread_comments', {'link': link($latestRoute, null, {'skip': 1})}) }}
			<xf:else />
				{{ phrase('no_results_found') }}
			</xf:if>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_bar"
	arg-findNew="!"
	arg-rerunRoute="!"
	arg-rerunData="{{ null }}"
	arg-rerunQuery="{{ [] }}"
	arg-filterRoute="!">

	<xf:if is="$xf.visitor.user_id">
		<div class="block-filterBar">
			<div class="filterBar">
				<xf:if contentcheck="true">
					<ul class="filterBar-filters">
						<xf:contentcheck>
							<!--[XF:filters:top]-->
							<xf:if is="$findNew.filters.unread">
								<li><a href="{{ link($rerunRoute, $rerunData, $rerunQuery + {'remove': 'unread'}) }}"
									class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
									<span class="filterBar-filterToggle-label">{{ phrase('show_only:') }}</span>
									{{ phrase('filter_unread') }}</a></li>
							</xf:if>
							<!--[XF:filters:bottom]-->
						</xf:contentcheck>
					</ul>
				</xf:if>

				<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
				<xf:macro name="filter_menu" arg-findNew="{$findNew}" arg-submitRoute="{$filterRoute}" />
			</div>
		</div>
	</xf:if>
</xf:macro>

<xf:macro name="filter_menu" arg-findNew="!" arg-submitRoute="!">
	<div class="menu" data-menu="menu" aria-hidden="true">
		<div class="menu-content">
			<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
			<xf:form action="{{ link($submitRoute) }}">
				<div class="menu-row">
					<xf:checkbox>
						<xf:option name="unread" selected="{$findNew.filters.unread}">{{ phrase('xfmg_unread_comments') }}</xf:option>
						<!--[XF:filter_menu:filters_extra]-->
					</xf:checkbox>
				</div>
				<!--[XF:filter_menu:below_filters]-->

				<xf:macro template="filter_macros" name="find_new_filter_footer" />
			</xf:form>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xfmg_widget_album_slider" version_id="902000038" version_string="2.0.0 Beta 8"><![CDATA[<xf:if is="$albums is not empty">
	<xf:css src="xfmg_album_list.less" />
	<xf:css src="lightslider.less" />

	<xf:js src="vendor/lightslider/lightslider.min.js" />
	<xf:js src="xfmg/slider.js" min="1" />

	<div class="block" {{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">
				<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xfmg_latest_albums') }}</a>
			</h3>
			<div class="block-body block-row">
				<div class="itemList itemList--slider"
					data-xf-init="item-slider"
					data-xf-item-slider="{$options.slider|json}">

					<xf:foreach loop="$albums" value="$album">
						<xf:macro template="xfmg_album_list_macros" name="album_list_item_slider"
							arg-album="{$album}" />
					</xf:foreach>
				</div>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_widget_gallery_statistics" version_id="902000036" version_string="2.0.0 Beta 6"><![CDATA[<xf:if contentcheck="true">
	<div class="block" data-widget-section="galleryStats"{{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">{$title}</h3>
			<div class="block-body block-row">
				<xf:contentcheck>
				<xf:if is="$galleryStatistics.category_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_categories') }}</dt>
						<dd>{$galleryStatistics.category_count|number}</dd>
					</dl>
				</xf:if>

				<xf:if is="$galleryStatistics.album_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_albums') }}</dt>
						<dd>{$galleryStatistics.album_count|number}</dd>
					</dl>
				</xf:if>

				<xf:if is="$galleryStatistics.upload_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_uploaded_media') }}</dt>
						<dd>{$galleryStatistics.upload_count|number}</dd>
					</dl>
				</xf:if>

				<xf:if is="$galleryStatistics.embed_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('embedded_media') }}</dt>
						<dd>{$galleryStatistics.embed_count|number}</dd>
					</dl>
				</xf:if>

				<xf:if is="$galleryStatistics.comment_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_comments') }}</dt>
						<dd>{$galleryStatistics.comment_count|number}</dd>
					</dl>
				</xf:if>

				<xf:if is="$galleryStatistics.disk_usage">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_disk_usage') }}</dt>
						<dd>{$galleryStatistics.disk_usage|file_size}</dd>
					</dl>
				</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</div>
</xf:if>

<xf:if contentcheck="true">
	<div class="block" data-widget-section="yourStats"{{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('xfmg_your_statistics') }}</h3>
			<div class="block-body block-row">
				<xf:contentcheck>
				<xf:if is="$xf.visitor.xfmg_album_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_your_albums') }}</dt>
						<dd>{$xf.visitor.xfmg_album_count|number}</dd>
					</dl>
				</xf:if>

				<xf:if is="$xf.visitor.xfmg_media_count">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_your_media') }}</dt>
						<dd>{$xf.visitor.xfmg_media_count|number}</dd>
					</dl>
				</xf:if>

				<xf:if is="$xf.visitor.xfmg_media_quota">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xfmg_your_usage') }}</dt>
						<dd>{$xf.visitor.xfmg_media_quota|file_size}</dd>
					</dl>
				</xf:if>
				</xf:contentcheck>
			</div>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_widget_latest_comments" version_id="902020370" version_string="2.2.3"><![CDATA[<xf:if is="$comments is not empty">
	<div class="block"{{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">
				<a href="{$link}" rel="nofollow">{$title}</a>
			</h3>
			<ul class="block-body">
				<xf:foreach loop="$comments" value="$comment">
					<li class="block-row">
						<xf:macro template="xfmg_comment_macros" name="comment_simple"
							arg-comment="{$comment}"
							arg-content="{$comment.Content}" />
					</li>
				</xf:foreach>
			</ul>
		</div>
	</div>
</xf:if>]]></template>
  <template type="public" title="xfmg_widget_media_slider" version_id="902000470" version_string="2.0.4"><![CDATA[<xf:if is="$mediaItems is not empty">
	<xf:css src="xfmg_media_list.less" />
	<xf:css src="lightslider.less" />

	<xf:js src="vendor/lightslider/lightslider.js" min="1" />
	<xf:js src="xfmg/slider.js" min="1" />

	<div class="block" {{ widget_data($widget) }}>
		<div class="block-container">
			<h3 class="block-minorHeader">
				<a href="{$link}" rel="nofollow">{{ $title ?: phrase('xfmg_latest_media') }}</a>
			</h3>
			<div class="block-body block-row">
				<div class="itemList itemList--slider"
					data-xf-init="item-slider"
					data-xf-item-slider="{$options.slider|json}">

					<xf:foreach loop="$mediaItems" value="$mediaItem">
						<xf:macro template="xfmg_media_list_macros" name="media_list_item_slider"
							arg-mediaItem="{$mediaItem}" />
					</xf:foreach>
				</div>
			</div>
		</div>
	</div>
</xf:if>]]></template>
</templates>
